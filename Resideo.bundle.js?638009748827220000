/*! loglevel - v1.6.8 - https://github.com/pimterry/loglevel - (c) 2020 Tim Perry - licensed MIT */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define('loglevel',b):"object"==typeof module&&module.exports?module.exports=b():a.log=b()}(this,function(){"use strict";function a(a,b){var c=a[b];if("function"==typeof c.bind)return c.bind(a);try{return Function.prototype.bind.call(c,a)}catch(b){return function(){return Function.prototype.apply.apply(c,[a,arguments])}}}function b(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(c){return"debug"===c&&(c="log"),typeof console!==i&&("trace"===c&&j?b:void 0!==console[c]?a(console,c):void 0!==console.log?a(console,"log"):h)}function d(a,b){for(var c=0;c<k.length;c++){var d=k[c];this[d]=c<a?h:this.methodFactory(d,a,b)}this.log=this.debug}function e(a,b,c){return function(){typeof console!==i&&(d.call(this,b,c),this[a].apply(this,arguments))}}function f(a,b,d){return c(a)||e.apply(this,arguments)}function g(a,b,c){function e(a){var b=(k[a]||"silent").toUpperCase();if(typeof window!==i){try{return void(window.localStorage[l]=b)}catch(a){}try{window.document.cookie=encodeURIComponent(l)+"="+b+";"}catch(a){}}}function g(){var a;if(typeof window!==i){try{a=window.localStorage[l]}catch(a){}if(typeof a===i)try{var b=window.document.cookie,c=b.indexOf(encodeURIComponent(l)+"=");-1!==c&&(a=/^([^;]+)/.exec(b.slice(c))[1])}catch(a){}return void 0===j.levels[a]&&(a=void 0),a}}var h,j=this,l="loglevel";a&&(l+=":"+a),j.name=a,j.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},j.methodFactory=c||f,j.getLevel=function(){return h},j.setLevel=function(b,c){if("string"==typeof b&&void 0!==j.levels[b.toUpperCase()]&&(b=j.levels[b.toUpperCase()]),!("number"==typeof b&&b>=0&&b<=j.levels.SILENT))throw"log.setLevel() called with invalid level: "+b;if(h=b,!1!==c&&e(b),d.call(j,b,a),typeof console===i&&b<j.levels.SILENT)return"No console available for logging"},j.setDefaultLevel=function(a){g()||j.setLevel(a,!1)},j.enableAll=function(a){j.setLevel(j.levels.TRACE,a)},j.disableAll=function(a){j.setLevel(j.levels.SILENT,a)};var m=g();null==m&&(m=null==b?"WARN":b),j.setLevel(m,!1)}var h=function(){},i="undefined",j=typeof window!==i&&typeof window.navigator!==i&&/Trident\/|MSIE /.test(window.navigator.userAgent),k=["trace","debug","info","warn","error"],l=new g,m={};l.getLogger=function(a){if("string"!=typeof a||""===a)throw new TypeError("You must supply a name when creating a logger.");var b=m[a];return b||(b=m[a]=new g(a,l.getLevel(),l.methodFactory)),b};var n=typeof window!==i?window.log:void 0;return l.noConflict=function(){return typeof window!==i&&window.log===l&&(window.log=n),l},l.getLoggers=function(){return m},l});
/*! jQuery v3.5.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.5.1",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(D).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var j,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||j,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,j=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^key/,we=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Te=/^([^.]*)(?:\.(.+)|)/;function Ce(){return!0}function Ee(){return!1}function Se(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function ke(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)ke(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Ae(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,Ce)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=Te.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=Te.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click",Ce),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&be.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&we.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Ae(this,e,Se),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return ke(this,e,t,n,r)},one:function(e,t,n,r){return ke(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each(function(){S.event.remove(this,e,n,t)})}});var Ne=/<script|<style|<link/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function qe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function He(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Oe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function Pe(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&De.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Pe(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),Le)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,He),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(je,""),u,l))}return n}function Re(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Oe(o[r],a[r]);else Oe(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Pe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||qe(this,e).appendChild(e)})},prepend:function(){return Pe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=qe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ne.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Pe(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Me=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Ie=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},We=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Fe=new RegExp(ne.join("|"),"i");function Be(e,t,n){var r,i,o,a,s=e.style;return(n=n||Ie(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Me.test(a)&&Fe.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",n.style.height="9px",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=3<parseInt(r.height),re.removeChild(e)),a}}))}();var _e=["Webkit","Moz","ms"],ze=E.createElement("div").style,Ue={};function Xe(e){var t=S.cssProps[e]||Ue[e];return t||(e in ze?e:Ue[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=_e.length;while(n--)if((e=_e[n]+t)in ze)return e}(e)||e)}var Ve=/^(none|table(?!-c[ea]).+)/,Ge=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"};function Je(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ke(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Ze(e,t,n){var r=Ie(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=Be(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Me.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ke(e,t,n||(i?"border":"content"),o,r,a)+"px"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Ge.test(t),l=e.style;if(u||(t=Xe(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Ge.test(t)||(t=Xe(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Be(e,t,r)),"normal"===i&&t in Qe&&(i=Qe[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ve.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,u,n):We(e,Ye,function(){return Ze(e,u,n)})},set:function(e,t,n){var r,i=Ie(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Ke(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Ke(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Je(0,t,s)}}}),S.cssHooks.marginLeft=$e(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,"marginLeft"))||e.getBoundingClientRect().left-We(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Je)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Ie(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=et).prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Xe(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=et.prototype.init,S.fx.step={};var tt,nt,rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){nt&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(st):C.setTimeout(st,S.fx.interval),S.fx.tick())}function ut(){return C.setTimeout(function(){tt=void 0}),tt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(o,e,t){var n,a,r=0,i=ft.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=tt||ut(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:tt||ut(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=ft.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ct,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(ft,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ct(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=ft(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&at.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(lt(r,!0),e,t,n)}}),S.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),tt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){nt||(nt=!0,st())},S.fx.stop=function(){nt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},rt=E.createElement("input"),it=E.createElement("select").appendChild(E.createElement("option")),rt.type="checkbox",y.checkOn=""!==rt.value,y.optSelected=it.selected,(rt=E.createElement("input")).value="t",rt.type="radio",y.radioValue="t"===rt.value;var pt,dt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=dt[t]||S.find.attr;dt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=dt[o],dt[o]=r,r=null!=a(e,t,n)?o:null,dt[o]=i),r}});var ht=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(P)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,yt(this)))});if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,yt(this)))});if(!arguments.length)return this.attr("class","");if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,yt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=mt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=yt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+vt(yt(n))+" ").indexOf(t))return!0;return!1}});var xt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(xt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:vt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!bt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,bt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,wt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,wt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var Tt=C.location,Ct={guid:Date.now()},Et=/\?/;S.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+e),t};var St=/\[\]$/,kt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Dt(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||St.test(n)?i(n,t):Dt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)Dt(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)Dt(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}});var jt=/%20/g,qt=/#.*$/,Lt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,Pt=/^\/\//,Rt={},Mt={},It="*/".concat("*"),Wt=E.createElement("a");function Ft(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Bt(t,i,o,a){var s={},u=t===Mt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function $t(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Wt.href=Tt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":It,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,S.ajaxSettings),t):$t(S.ajaxSettings,e)},ajaxPrefilter:Ft(Rt),ajaxTransport:Ft(Mt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Ht.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Tt.href)+"").replace(Pt,Tt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Wt.protocol+"//"+Wt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Bt(Rt,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Ot.test(v.type),f=v.url.replace(qt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(jt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Et.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Lt,"$1"),o=(Et.test(f)?"&":"?")+"_="+Ct.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+It+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Bt(Mt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var _t={0:200,1223:204},zt=S.ajaxSettings.xhr();y.cors=!!zt&&"withCredentials"in zt,y.ajax=zt=!!zt,S.ajaxTransport(function(i){var o,a;if(y.cors||zt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(_t[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Ut,Xt=[],Vt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||S.expando+"_"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Vt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Vt,"$1"+r):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((Ut=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ut.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=vt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):("number"==typeof f.top&&(f.top+="px"),"number"==typeof f.left&&(f.left+="px"),c.css(f))}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=$e(y.pixelPosition,function(e,t){if(t)return t=Be(e,n),Me.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Gt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Gt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Yt=C.jQuery,Qt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Qt),e&&C.jQuery===S&&(C.jQuery=Yt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S});

;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('jqueryNoConflict',["jquery"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery")) :
    console && console.error('jquery.noconflict does not support non-amd script loading.');
}(this/* window */, function($) {
    "use strict";
    return $.noConflict();
}));

/*
 @fileOverview TouchSwipe - jQuery Plugin
 @version 1.6.18

 @author Matt Bryson http://www.github.com/mattbryson
 @see https://github.com/mattbryson/TouchSwipe-Jquery-Plugin
 @see http://labs.rampinteractive.co.uk/touchSwipe/
 @see http://plugins.jquery.com/project/touchSwipe
 @license
 Copyright (c) 2010-2015 Matt Bryson
 Dual licensed under the MIT or GPL Version 2 licenses.

*/
(function(factory){if(typeof define==="function"&&define.amd&&define.amd.jQuery)define('jqueryTouchSwipe',["jquery"],factory);else if(typeof module!=="undefined"&&module.exports)factory(require("jquery"));else factory(jQuery)})(function($){var VERSION="1.6.18",LEFT="left",RIGHT="right",UP="up",DOWN="down",IN="in",OUT="out",NONE="none",AUTO="auto",SWIPE="swipe",PINCH="pinch",TAP="tap",DOUBLE_TAP="doubletap",LONG_TAP="longtap",HOLD="hold",HORIZONTAL="horizontal",VERTICAL="vertical",ALL_FINGERS="all",DOUBLE_TAP_THRESHOLD=
10,PHASE_START="start",PHASE_MOVE="move",PHASE_END="end",PHASE_CANCEL="cancel",SUPPORTS_TOUCH="ontouchstart"in window,SUPPORTS_POINTER_IE10=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!SUPPORTS_TOUCH,SUPPORTS_POINTER=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!SUPPORTS_TOUCH,PLUGIN_NS="TouchSwipe";var defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,
swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:true,triggerOnTouchLeave:false,allowPageScroll:"auto",fallbackToMouseEvents:true,excludedElements:".noSwipe",preventDefaultEvents:true};$.fn.swipe=function(method){var $this=$(this),plugin=$this.data(PLUGIN_NS);if(plugin&&typeof method==="string")if(plugin[method])return plugin[method].apply(plugin,
Array.prototype.slice.call(arguments,1));else $.error("Method "+method+" does not exist on jQuery.swipe");else if(plugin&&typeof method==="object")plugin["option"].apply(plugin,arguments);else if(!plugin&&(typeof method==="object"||!method))return init.apply(this,arguments);return $this};$.fn.swipe.version=VERSION;$.fn.swipe.defaults=defaults;$.fn.swipe.phases={PHASE_START:PHASE_START,PHASE_MOVE:PHASE_MOVE,PHASE_END:PHASE_END,PHASE_CANCEL:PHASE_CANCEL};$.fn.swipe.directions={LEFT:LEFT,RIGHT:RIGHT,
UP:UP,DOWN:DOWN,IN:IN,OUT:OUT};$.fn.swipe.pageScroll={NONE:NONE,HORIZONTAL:HORIZONTAL,VERTICAL:VERTICAL,AUTO:AUTO};$.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:ALL_FINGERS};function init(options){if(options&&(options.allowPageScroll===undefined&&(options.swipe!==undefined||options.swipeStatus!==undefined)))options.allowPageScroll=NONE;if(options.click!==undefined&&options.tap===undefined)options.tap=options.click;if(!options)options={};options=$.extend({},$.fn.swipe.defaults,options);
return this.each(function(){var $this=$(this);var plugin=$this.data(PLUGIN_NS);if(!plugin){plugin=new TouchSwipe(this,options);$this.data(PLUGIN_NS,plugin)}})}function TouchSwipe(element,options){var options=$.extend({},options);var useTouchEvents=SUPPORTS_TOUCH||SUPPORTS_POINTER||!options.fallbackToMouseEvents,START_EV=useTouchEvents?SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?"MSPointerDown":"pointerdown":"touchstart":"mousedown",MOVE_EV=useTouchEvents?SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?"MSPointerMove":
"pointermove":"touchmove":"mousemove",END_EV=useTouchEvents?SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?"MSPointerUp":"pointerup":"touchend":"mouseup",LEAVE_EV=useTouchEvents?SUPPORTS_POINTER?"mouseleave":null:"mouseleave",CANCEL_EV=SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?"MSPointerCancel":"pointercancel":"touchcancel";var distance=0,direction=null,currentDirection=null,duration=0,startTouchesDistance=0,endTouchesDistance=0,pinchZoom=1,pinchDistance=0,pinchDirection=0,maximumsMap=null;var $element=$(element);
var phase="start";var fingerCount=0;var fingerData={};var startTime=0,endTime=0,previousTouchEndTime=0,fingerCountAtRelease=0,doubleTapStartTime=0;var singleTapTimeout=null,holdTimeout=null;try{$element.on(START_EV,touchStart);$element.on(CANCEL_EV,touchCancel)}catch(e){$.error("events not supported "+START_EV+","+CANCEL_EV+" on jQuery.swipe")}this.enable=function(){this.disable();$element.on(START_EV,touchStart);$element.on(CANCEL_EV,touchCancel);return $element};this.disable=function(){removeListeners();
return $element};this.destroy=function(){removeListeners();$element.data(PLUGIN_NS,null);$element=null};this.option=function(property,value){if(typeof property==="object")options=$.extend(options,property);else if(options[property]!==undefined)if(value===undefined)return options[property];else options[property]=value;else if(!property)return options;else $.error("Option "+property+" does not exist on jQuery.swipe.options");return null};function touchStart(jqEvent){if(getTouchInProgress())return;if($(jqEvent.target).closest(options.excludedElements,
$element).length>0)return;var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;if(event.pointerType&&event.pointerType=="mouse"&&options.fallbackToMouseEvents==false)return;var ret,touches=event.touches,evt=touches?touches[0]:event;phase=PHASE_START;if(touches)fingerCount=touches.length;else if(options.preventDefaultEvents!==false)jqEvent.preventDefault();distance=0;direction=null;currentDirection=null;pinchDirection=null;duration=0;startTouchesDistance=0;endTouchesDistance=0;pinchZoom=1;
pinchDistance=0;maximumsMap=createMaximumsData();cancelMultiFingerRelease();createFingerData(0,evt);if(!touches||(fingerCount===options.fingers||options.fingers===ALL_FINGERS)||hasPinches()){startTime=getTimeStamp();if(fingerCount==2){createFingerData(1,touches[1]);startTouchesDistance=endTouchesDistance=calculateTouchesDistance(fingerData[0].start,fingerData[1].start)}if(options.swipeStatus||options.pinchStatus)ret=triggerHandler(event,phase)}else ret=false;if(ret===false){phase=PHASE_CANCEL;triggerHandler(event,
phase);return ret}else{if(options.hold)holdTimeout=setTimeout($.proxy(function(){$element.trigger("hold",[event.target]);if(options.hold)ret=options.hold.call($element,event,event.target)},this),options.longTapThreshold);setTouchInProgress(true)}return null}function touchMove(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;if(phase===PHASE_END||phase===PHASE_CANCEL||inMultiFingerRelease())return;var ret,touches=event.touches,evt=touches?touches[0]:event;var currentFinger=updateFingerData(evt);
endTime=getTimeStamp();if(touches)fingerCount=touches.length;if(options.hold)clearTimeout(holdTimeout);phase=PHASE_MOVE;if(fingerCount==2){if(startTouchesDistance==0){createFingerData(1,touches[1]);startTouchesDistance=endTouchesDistance=calculateTouchesDistance(fingerData[0].start,fingerData[1].start)}else{updateFingerData(touches[1]);endTouchesDistance=calculateTouchesDistance(fingerData[0].end,fingerData[1].end);pinchDirection=calculatePinchDirection(fingerData[0].end,fingerData[1].end)}pinchZoom=
calculatePinchZoom(startTouchesDistance,endTouchesDistance);pinchDistance=Math.abs(startTouchesDistance-endTouchesDistance)}if(fingerCount===options.fingers||options.fingers===ALL_FINGERS||!touches||hasPinches()){direction=calculateDirection(currentFinger.start,currentFinger.end);currentDirection=calculateDirection(currentFinger.last,currentFinger.end);validateDefaultEvent(jqEvent,currentDirection);distance=calculateDistance(currentFinger.start,currentFinger.end);duration=calculateDuration();setMaxDistance(direction,
distance);ret=triggerHandler(event,phase);if(!options.triggerOnTouchEnd||options.triggerOnTouchLeave){var inBounds=true;if(options.triggerOnTouchLeave){var bounds=getbounds(this);inBounds=isInBounds(currentFinger.end,bounds)}if(!options.triggerOnTouchEnd&&inBounds)phase=getNextPhase(PHASE_MOVE);else if(options.triggerOnTouchLeave&&!inBounds)phase=getNextPhase(PHASE_END);if(phase==PHASE_CANCEL||phase==PHASE_END)triggerHandler(event,phase)}}else{phase=PHASE_CANCEL;triggerHandler(event,phase)}if(ret===
false){phase=PHASE_CANCEL;triggerHandler(event,phase)}}function touchEnd(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent,touches=event.touches;if(touches)if(touches.length&&!inMultiFingerRelease()){startMultiFingerRelease(event);return true}else if(touches.length&&inMultiFingerRelease())return true;if(inMultiFingerRelease())fingerCount=fingerCountAtRelease;endTime=getTimeStamp();duration=calculateDuration();if(didSwipeBackToCancel()||!validateSwipeDistance()){phase=PHASE_CANCEL;
triggerHandler(event,phase)}else if(options.triggerOnTouchEnd||options.triggerOnTouchEnd===false&&phase===PHASE_MOVE){if(options.preventDefaultEvents!==false&&jqEvent.cancelable!==false)jqEvent.preventDefault();phase=PHASE_END;triggerHandler(event,phase)}else if(!options.triggerOnTouchEnd&&hasTap()){phase=PHASE_END;triggerHandlerForGesture(event,phase,TAP)}else if(phase===PHASE_MOVE){phase=PHASE_CANCEL;triggerHandler(event,phase)}setTouchInProgress(false);return null}function touchCancel(){fingerCount=
0;endTime=0;startTime=0;startTouchesDistance=0;endTouchesDistance=0;pinchZoom=1;cancelMultiFingerRelease();setTouchInProgress(false)}function touchLeave(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;if(options.triggerOnTouchLeave){phase=getNextPhase(PHASE_END);triggerHandler(event,phase)}}function removeListeners(){$element.off(START_EV,touchStart);$element.off(CANCEL_EV,touchCancel);$element.off(MOVE_EV,touchMove);$element.off(END_EV,touchEnd);if(LEAVE_EV)$element.off(LEAVE_EV,
touchLeave);setTouchInProgress(false)}function getNextPhase(currentPhase){var nextPhase=currentPhase;var validTime=validateSwipeTime();var validDistance=validateSwipeDistance();var didCancel=didSwipeBackToCancel();if(!validTime||didCancel)nextPhase=PHASE_CANCEL;else if(validDistance&&currentPhase==PHASE_MOVE&&(!options.triggerOnTouchEnd||options.triggerOnTouchLeave))nextPhase=PHASE_END;else if(!validDistance&&currentPhase==PHASE_END&&options.triggerOnTouchLeave)nextPhase=PHASE_CANCEL;return nextPhase}
function triggerHandler(event,phase){var ret,touches=event.touches;if(didSwipe()||hasSwipes())ret=triggerHandlerForGesture(event,phase,SWIPE);if((didPinch()||hasPinches())&&ret!==false)ret=triggerHandlerForGesture(event,phase,PINCH);if(didDoubleTap()&&ret!==false)ret=triggerHandlerForGesture(event,phase,DOUBLE_TAP);else if(didLongTap()&&ret!==false)ret=triggerHandlerForGesture(event,phase,LONG_TAP);else if(didTap()&&ret!==false)ret=triggerHandlerForGesture(event,phase,TAP);if(phase===PHASE_CANCEL)touchCancel(event);
if(phase===PHASE_END)if(touches){if(!touches.length)touchCancel(event)}else touchCancel(event);return ret}function triggerHandlerForGesture(event,phase,gesture){var ret;if(gesture==SWIPE){$element.trigger("swipeStatus",[phase,direction||null,distance||0,duration||0,fingerCount,fingerData,currentDirection]);if(options.swipeStatus){ret=options.swipeStatus.call($element,event,phase,direction||null,distance||0,duration||0,fingerCount,fingerData,currentDirection);if(ret===false)return false}if(phase==
PHASE_END&&validateSwipe()){clearTimeout(singleTapTimeout);clearTimeout(holdTimeout);$element.trigger("swipe",[direction,distance,duration,fingerCount,fingerData,currentDirection]);if(options.swipe){ret=options.swipe.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection);if(ret===false)return false}switch(direction){case LEFT:$element.trigger("swipeLeft",[direction,distance,duration,fingerCount,fingerData,currentDirection]);if(options.swipeLeft)ret=options.swipeLeft.call($element,
event,direction,distance,duration,fingerCount,fingerData,currentDirection);break;case RIGHT:$element.trigger("swipeRight",[direction,distance,duration,fingerCount,fingerData,currentDirection]);if(options.swipeRight)ret=options.swipeRight.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection);break;case UP:$element.trigger("swipeUp",[direction,distance,duration,fingerCount,fingerData,currentDirection]);if(options.swipeUp)ret=options.swipeUp.call($element,event,direction,
distance,duration,fingerCount,fingerData,currentDirection);break;case DOWN:$element.trigger("swipeDown",[direction,distance,duration,fingerCount,fingerData,currentDirection]);if(options.swipeDown)ret=options.swipeDown.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection);break}}}if(gesture==PINCH){$element.trigger("pinchStatus",[phase,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]);if(options.pinchStatus){ret=options.pinchStatus.call($element,
event,phase,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData);if(ret===false)return false}if(phase==PHASE_END&&validatePinch())switch(pinchDirection){case IN:$element.trigger("pinchIn",[pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]);if(options.pinchIn)ret=options.pinchIn.call($element,event,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData);break;case OUT:$element.trigger("pinchOut",[pinchDirection||
null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]);if(options.pinchOut)ret=options.pinchOut.call($element,event,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData);break}}if(gesture==TAP){if(phase===PHASE_CANCEL||phase===PHASE_END){clearTimeout(singleTapTimeout);clearTimeout(holdTimeout);if(hasDoubleTap()&&!inDoubleTap()){doubleTapStartTime=getTimeStamp();singleTapTimeout=setTimeout($.proxy(function(){doubleTapStartTime=null;$element.trigger("tap",
[event.target]);if(options.tap)ret=options.tap.call($element,event,event.target)},this),options.doubleTapThreshold)}else{doubleTapStartTime=null;$element.trigger("tap",[event.target]);if(options.tap)ret=options.tap.call($element,event,event.target)}}}else if(gesture==DOUBLE_TAP){if(phase===PHASE_CANCEL||phase===PHASE_END){clearTimeout(singleTapTimeout);clearTimeout(holdTimeout);doubleTapStartTime=null;$element.trigger("doubletap",[event.target]);if(options.doubleTap)ret=options.doubleTap.call($element,
event,event.target)}}else if(gesture==LONG_TAP)if(phase===PHASE_CANCEL||phase===PHASE_END){clearTimeout(singleTapTimeout);doubleTapStartTime=null;$element.trigger("longtap",[event.target]);if(options.longTap)ret=options.longTap.call($element,event,event.target)}return ret}function validateSwipeDistance(){var valid=true;if(options.threshold!==null)valid=distance>=options.threshold;return valid}function didSwipeBackToCancel(){var cancelled=false;if(options.cancelThreshold!==null&&direction!==null)cancelled=
getMaxDistance(direction)-distance>=options.cancelThreshold;return cancelled}function validatePinchDistance(){if(options.pinchThreshold!==null)return pinchDistance>=options.pinchThreshold;return true}function validateSwipeTime(){var result;if(options.maxTimeThreshold)if(duration>=options.maxTimeThreshold)result=false;else result=true;else result=true;return result}function validateDefaultEvent(jqEvent,direction){if(options.preventDefaultEvents===false)return;if(options.allowPageScroll===NONE)jqEvent.preventDefault();
else{var auto=options.allowPageScroll===AUTO;switch(direction){case LEFT:if(options.swipeLeft&&auto||!auto&&options.allowPageScroll!=HORIZONTAL)jqEvent.preventDefault();break;case RIGHT:if(options.swipeRight&&auto||!auto&&options.allowPageScroll!=HORIZONTAL)jqEvent.preventDefault();break;case UP:if(options.swipeUp&&auto||!auto&&options.allowPageScroll!=VERTICAL)jqEvent.preventDefault();break;case DOWN:if(options.swipeDown&&auto||!auto&&options.allowPageScroll!=VERTICAL)jqEvent.preventDefault();break;
case NONE:break}}}function validatePinch(){var hasCorrectFingerCount=validateFingers();var hasEndPoint=validateEndPoint();var hasCorrectDistance=validatePinchDistance();return hasCorrectFingerCount&&hasEndPoint&&hasCorrectDistance}function hasPinches(){return!!(options.pinchStatus||options.pinchIn||options.pinchOut)}function didPinch(){return!!(validatePinch()&&hasPinches())}function validateSwipe(){var hasValidTime=validateSwipeTime();var hasValidDistance=validateSwipeDistance();var hasCorrectFingerCount=
validateFingers();var hasEndPoint=validateEndPoint();var didCancel=didSwipeBackToCancel();var valid=!didCancel&&hasEndPoint&&hasCorrectFingerCount&&hasValidDistance&&hasValidTime;return valid}function hasSwipes(){return!!(options.swipe||options.swipeStatus||options.swipeLeft||options.swipeRight||options.swipeUp||options.swipeDown)}function didSwipe(){return!!(validateSwipe()&&hasSwipes())}function validateFingers(){return fingerCount===options.fingers||options.fingers===ALL_FINGERS||!SUPPORTS_TOUCH}
function validateEndPoint(){return fingerData[0].end.x!==0}function hasTap(){return!!options.tap}function hasDoubleTap(){return!!options.doubleTap}function hasLongTap(){return!!options.longTap}function validateDoubleTap(){if(doubleTapStartTime==null)return false;var now=getTimeStamp();return hasDoubleTap()&&now-doubleTapStartTime<=options.doubleTapThreshold}function inDoubleTap(){return validateDoubleTap()}function validateTap(){return(fingerCount===1||!SUPPORTS_TOUCH)&&(isNaN(distance)||distance<
options.threshold)}function validateLongTap(){return duration>options.longTapThreshold&&distance<DOUBLE_TAP_THRESHOLD}function didTap(){return!!(validateTap()&&hasTap())}function didDoubleTap(){return!!(validateDoubleTap()&&hasDoubleTap())}function didLongTap(){return!!(validateLongTap()&&hasLongTap())}function startMultiFingerRelease(event){previousTouchEndTime=getTimeStamp();fingerCountAtRelease=event.touches.length+1}function cancelMultiFingerRelease(){previousTouchEndTime=0;fingerCountAtRelease=
0}function inMultiFingerRelease(){var withinThreshold=false;if(previousTouchEndTime){var diff=getTimeStamp()-previousTouchEndTime;if(diff<=options.fingerReleaseThreshold)withinThreshold=true}return withinThreshold}function getTouchInProgress(){return!!($element.data(PLUGIN_NS+"_intouch")===true)}function setTouchInProgress(val){if(!$element)return;if(val===true){$element.on(MOVE_EV,touchMove);$element.on(END_EV,touchEnd);if(LEAVE_EV)$element.on(LEAVE_EV,touchLeave)}else{$element.off(MOVE_EV,touchMove,
false);$element.off(END_EV,touchEnd,false);if(LEAVE_EV)$element.off(LEAVE_EV,touchLeave,false)}$element.data(PLUGIN_NS+"_intouch",val===true)}function createFingerData(id,evt){var f={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};f.start.x=f.last.x=f.end.x=evt.pageX||evt.clientX;f.start.y=f.last.y=f.end.y=evt.pageY||evt.clientY;fingerData[id]=f;return f}function updateFingerData(evt){var id=evt.identifier!==undefined?evt.identifier:0;var f=getFingerData(id);if(f===null)f=createFingerData(id,evt);f.last.x=
f.end.x;f.last.y=f.end.y;f.end.x=evt.pageX||evt.clientX;f.end.y=evt.pageY||evt.clientY;return f}function getFingerData(id){return fingerData[id]||null}function setMaxDistance(direction,distance){if(direction==NONE)return;distance=Math.max(distance,getMaxDistance(direction));maximumsMap[direction].distance=distance}function getMaxDistance(direction){if(maximumsMap[direction])return maximumsMap[direction].distance;return undefined}function createMaximumsData(){var maxData={};maxData[LEFT]=createMaximumVO(LEFT);
maxData[RIGHT]=createMaximumVO(RIGHT);maxData[UP]=createMaximumVO(UP);maxData[DOWN]=createMaximumVO(DOWN);return maxData}function createMaximumVO(dir){return{direction:dir,distance:0}}function calculateDuration(){return endTime-startTime}function calculateTouchesDistance(startPoint,endPoint){var diffX=Math.abs(startPoint.x-endPoint.x);var diffY=Math.abs(startPoint.y-endPoint.y);return Math.round(Math.sqrt(diffX*diffX+diffY*diffY))}function calculatePinchZoom(startDistance,endDistance){var percent=
endDistance/startDistance*1;return percent.toFixed(2)}function calculatePinchDirection(){if(pinchZoom<1)return OUT;else return IN}function calculateDistance(startPoint,endPoint){return Math.round(Math.sqrt(Math.pow(endPoint.x-startPoint.x,2)+Math.pow(endPoint.y-startPoint.y,2)))}function calculateAngle(startPoint,endPoint){var x=startPoint.x-endPoint.x;var y=endPoint.y-startPoint.y;var r=Math.atan2(y,x);var angle=Math.round(r*180/Math.PI);if(angle<0)angle=360-Math.abs(angle);return angle}function calculateDirection(startPoint,
endPoint){if(comparePoints(startPoint,endPoint))return NONE;var angle=calculateAngle(startPoint,endPoint);if(angle<=45&&angle>=0)return LEFT;else if(angle<=360&&angle>=315)return LEFT;else if(angle>=135&&angle<=225)return RIGHT;else if(angle>45&&angle<135)return DOWN;else return UP}function getTimeStamp(){var now=new Date;return now.getTime()}function getbounds(el){el=$(el);var offset=el.offset();var bounds={left:offset.left,right:offset.left+el.outerWidth(),top:offset.top,bottom:offset.top+el.outerHeight()};
return bounds}function isInBounds(point,bounds){return point.x>bounds.left&&point.x<bounds.right&&point.y>bounds.top&&point.y<bounds.bottom}function comparePoints(pointA,pointB){return pointA.x==pointB.x&&pointA.y==pointB.y}}});

/**
 * @license BrainJocks CCF EventManager
 * https://brainjocks.atlassian.net/wiki/display/SDD/eventManager
 * Copyright 2020
 */

;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('eventManager',["jquery", "underscore", 'loglevel'], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("underscore"), require('loglevel')) :
    console && console.error('EventManager does not support non-amd script loading.');
}(this/* window */, function($, _, log) {
    "use strict";

    function logRegistration(event, func) {
        log.debug("REGISTER event " + String(event) + " to callback function " + (func.name || "[Anonymous]"));
    }

    function logUnsubscription(event, func) {
        log.debug("UNSUBSCRIBE function " + String(event) + " from event " + (func.name || "[Anonymous]"));
    }

    function logHandledTrigger(subscriber, event) {
        log.debug("TRIGGER function " + (subscriber.callback.name || "[Anonymous]") + " for event " + String(subscriber.event));
        log.debug(JSON.stringify(event, null, 4));
    }

    function logMissedTrigger(event) {
        log.debug("SKIP event with 0 subscriptions: " + String(event));
    }

    function Registration(event, callback, thisp) {
        Object.defineProperties(this, {
            id:       { value: (new Date()).valueOf() },
            event:    { value: event                          },
            callback: { value: callback                       },
            thisp:    { value: thisp                          }
        });
    }

    function EventManager() {
        var subscribers = [], loadingDeferred = $.Deferred(), verbose = true;

        Object.defineProperties(this, {
            verbose: {
                get: function () {
                    return verbose;
                },
                set: function (value) {
                    verbose = Boolean(value);
                }
            }
        });

        this.pauseTriggers = function () {
            loadingDeferred.resolve();
            loadingDeferred = $.Deferred();
            return this;
        };

        this.registrationComplete = function () {
            loadingDeferred.resolve();
            return this;
        };

        function executeCallbacks(isAsync, args) {
            var event = args.splice(0, 1)[0], counter = 0;

            subscribers.forEach(function (subscriber) {
                var operation;
                if (event === subscriber.event) {
                    counter++;
                    logHandledTrigger(subscriber, event);
                    if (args.length <= 1) {
                        if (subscriber.thisp === undefined) {
                            operation = function () {
                                subscriber.callback(args[0]);
                            };
                        } else {
                            operation = function () {
                                subscriber.callback.call(subscriber.thisp, args[0]);
                            };
                        }
                    } else {
                        operation = function () {
                            subscriber.callback.apply(subscriber.thisp || null, args);
                        };
                    }

                    if (isAsync) {
                        window.setTimeout(operation, 0);
                    } else {
                        operation();
                    }
                }
            });

            if (verbose && counter === 0) {
                logMissedTrigger(event);
            }
        }

        this.trigger = function trigger(event) {
            if (!event) {
                log.error("Argument 'event' is required for method EventManager.trigger");
                return;
            }

            // Hold off triggering events until the page is fully loaded and all listeners have been registered
            loadingDeferred.promise().done(executeCallbacks.bind(null, false, $.makeArray(arguments)));
        };

        this.triggerAsync = function triggerAsync(event) {
            if (!event) {
                log.error("Argument 'event' is required for method EventManager.trigger");
                return;
            }

            // Hold off triggering events until the page is fully loaded and all listeners have been registered
            loadingDeferred.promise().done(executeCallbacks.bind(null, true, $.makeArray(arguments)));
        };

        this.subscribe = function subscribe(event, callback, thisp) {
            var registration;

            if (!event || typeof callback !== "function") {
                log.debug(
                    "Skipping event registration. EventManager can only accept " +
                        "registrations that specify an event and a callback function."
                );

                return null;
            }

            if (this.verbose) {
                logRegistration(event, callback);
            }

            registration = new Registration(event, callback, thisp);
            subscribers.push(registration);
            return registration.id;
        };

        this.unsubscribe = function unsubscribe(registrationId) {
            var i = _.findIndex(subscribers, function (i) {
                return i.id === registrationId;
            });

            if (i === -1) return;
            if (this.verbose) {
                logUnsubscription(subscribers[i].event, subscribers[i].callback);
            }

            subscribers.splice(i, 1);
        };
    }

    return new EventManager(); // Singleton
}));

;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_ccf/Events/ModulesLoadedEvent',["jquery"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery")) :
    console && console.error('EventManager does not support non-amd script loading.');
}(this/* window */, function ($) {

    function ModulesLoadedEvent(hasErrors, successfulModules, failedModules, scope) {
        if (typeof hasErrors !== "boolean" || !Array.isArray(successfulModules) || !Array.isArray(failedModules))
            throw new Error("Cannot initialize ModulesLoadedEvent - invalid arguments");

        Object.defineProperties(this, {
            scope:             { value: scope              },
            hasErrors:         { value: hasErrors          },
            failedModules:     { value: failedModules      },
            successfulModules: { value: successfulModules  }
        });
    };

    ModulesLoadedEvent.name = "ModulesLoadedEvent";
    return ModulesLoadedEvent;
}));
/**
 * @license BrainJocks CCF Extensions
 * https://brainjocks.atlassian.net/wiki/spaces/SDD/pages/116261662
 * Copyright 2017
 */

;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_ccf/extensions',[], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory() :
    console && console.error('Extensions does not support non-amd script loading.');
}(this/* window */, function() {
    "use strict";

    function allOfType(arr, type) {
        var assertFunc;
        if (typeof(type) === "string") {
            assertFunc = function (value) {
                return typeof(value) === type;
            };
        }
        else if (typeof(type) === "function") {
            assertFunc = function (value) {
                return value instanceof type;
            };
        }
        else {
            throw new TypeError("type must be of type function or string");
        }

        return arr.length === 0 || arr.every(assertFunc);
    }

    function pluck(str, propertyName) {
        var props = String(propertyName).split(".");
        return str.map(function (x) {
            var i;

            for (i = 0; i < props.length; i = i + 1) {
                x = x[props[i]];
                if (x === undefined) {
                    break;
                }
            }

            return x;
        });
    }

    function supplant(str, obj) {
        return str.replace(/\{([^{}]*)\}/g, function (a, b) {
            var r = obj[b];
            return typeof r === 'string' || typeof r === 'number' ? r : a;
        });
    }

    return Object.freeze({
        supplant:  supplant,
        pluck:     pluck,
        allOfType: allOfType
    });
}));

// Please keep functions in alphabetical order
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_ccf/jquery.extensions',["jquery"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery")) :
    console && console.error('jquery.extensions does not support non-amd script loading.');
}(this/* window */, function($) {
    "use strict";

    function _copyAttr(to, from, attr) {
        attr = String(attr);
        to.attr(attr, from.attr(attr));
    }

    $.fn.copyAttrFrom = $.fn.copyAttrFrom || function copyAttrFrom(element, attr) {
        var $el = $(element);

        if (Array.isArray(attr)) {
            attr.forEach(_copyAttr.bind(null, this, $el));
        } else {
            _copyAttr(this, $el, attr);
        }

        return this;
    };

    $.fn.descendantOrSelf = $.fn.descendantOrSelf || function descendantOrSelf(sel) {
        return this.filter(sel).add(this.find(sel));
    };
}));

/**
 * @license BrainJocks CCF ModuleLoader
 * https://brainjocks.atlassian.net/wiki/display/SDD/moduleLoader
 * Copyright 2020
 */
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_ccf/ModuleLoader',["jquery", "underscore", "eventManager", "score_ccf/Events/ModulesLoadedEvent", "score_ccf/extensions", "score_ccf/jquery.extensions", 'loglevel'], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("underscore"), require("eventManager"), require("score_ccf/Events/ModulesLoadedEvent"), require("score_ccf/extensions"), require("score_ccf/jquery.extensions"), require('loglevel')) :
    console && console.error('ModuleLoader does not support non-amd script loading.');
}(this/* window */, function($, _, eventManager, ModulesLoadedEvent, ext, log) {
    "use strict";

    var ModuleState = { pending: "pending", failed: "failed", loaded: "loaded" },
        moduleNameAttr = "data-ux-module",
        moduleStateAttr = "data-ux-state",
        moduleArgsAttr = "data-ux-args",
        findModulesSel = ext.supplant("[{a}][{b}='{state}']", { a:  moduleNameAttr, b: moduleStateAttr });

    function ModuleLoader() { }

    ModuleLoader.prototype.loadPendingModules = function loadPendingModules(scope) {
        var def = $.Deferred(),
            loadScope = scope,
            moduleEls = findModuleElsByState(scope, ModuleState.pending),
            moduleNames = _.invoke(moduleEls, "getAttribute", moduleNameAttr), // Extract module names from module elements
            success = [], failure = [], result; // We will use these to track our progress

        eventManager.pauseTriggers(); // Event manager should hold off on triggering events while new registrations are going on

        require(moduleNames, function () {
            // Here, 'arguments' are the modules loaded by requirejs
            var modules = $.makeArray(arguments), args, i, module, initFunc;

            //add XPRuleLoader for all modules
            require(["score_ccf/XPerience/XPRuleLoader"],
                function(xpRuleLoaderModule) {
                    var ruleLoader = xpRuleLoaderModule.hasOwnProperty('XPRuleLoader') && xpRuleLoaderModule.XPRuleLoader instanceof Function
                        ? new xpRuleLoaderModule.XPRuleLoader() /* named load */
                        : xpRuleLoaderModule.__esModule === !0 && xpRuleLoaderModule.hasOwnProperty("default") && xpRuleLoaderModule.default instanceof Function ? new xpRuleLoaderModule.default() /* default module load */
                        : xpRuleLoaderModule instanceof Function ? new xpRuleLoaderModule() /* old fashioned modules */
                        : log.warn('Cannot load XPRuleLoader module to load XPerience Rules');

                    for (i = 0; i < modules.length; i = i + 1) { // Loop over loaded modules and execute the ones that returned functions

                        // If no ux args were provided then use empty object;
                        args = JSON.parse(moduleEls[i].getAttribute(moduleArgsAttr) || "{}");

                        if (typeof modules[i] === "function") {
                            // Check for an explicit 'init' function
                            initFunc = typeof modules[i]["init"] === "function" ? modules[i]["init"] : modules[i];

                            try {
                                // Error inside a CCF module should not stop other js from executing
                                // Add scope property to module args and to module itself. This is used to contain the module's
                                // js to its wrapper element - we don't want modules changing things outside of their scope.
                                module = initFunc($.extend({ scope: moduleEls[i] }, args));

                                if (module) {
                                    Object.defineProperty(module, "ccf_scope", { value: moduleEls[i] });
                                    $(moduleEls[i]).data("ccf_module", module).data(moduleArgsAttr, args);

                                    //apply rules
                                    if (ruleLoader && moduleEls[i].getAttribute('data-xpr-state') === 'pending' && moduleEls[i].getAttribute('data-xpr-rule') != null) {
                                        ruleLoader.applyRules(module, moduleEls[i].getAttribute('data-xpr-rule'));
                                    }
                                }
                            } catch (err) {
                                err = moduleNames[i] + ": " + err;
                                $(moduleEls[i]).attr(moduleStateAttr, ModuleState.failed);
                                failure.push(err);
                                log.error(err);
                                continue;
                            }
                        }

                        // Update state and clean up ux arguments from DOM so it's less cluttered
                        $(moduleEls[i]).attr(moduleStateAttr, ModuleState.loaded).removeAttr(moduleArgsAttr);
                        success.push(moduleNames[i]);
                    }

                    result = new ModulesLoadedEvent(failure.length > 0, success, failure, loadScope);
                    // Event manager can now resume triggering events
                    eventManager.registrationComplete().trigger(ModulesLoadedEvent.name, result);
                    def.resolve(result);
                });
        });

        return def.promise();
    };

    function findModuleElsByState(scope, state) {
        return $(scope || "body").descendantOrSelf(ext.supplant(findModulesSel, { state: state })).toArray();
    }

    function findModulesByState(scope, state) {
        return findModuleElsByState(scope, state).reduce(function (result, currentEl) {
            var module = $(currentEl).data("ccf_module");
            if (module) result.push(module);
            return result;
        }, []);
    }

    ModuleLoader.prototype.findLoadedModules = function findLoadedModules(scope) {
        return findModulesByState(scope, ModuleState.loaded);
    };

    ModuleLoader.prototype.findFailedModules = function findFailedModules(scope) {
        return findModulesByState(scope, ModuleState.failed);
    };

    ModuleLoader.prototype.findPendingModules = function findPendingModules(scope) {
        return findModulesByState(scope, ModuleState.pending);
    };

    return new ModuleLoader(); // singleton
}));

(function(root) {
define("jqueryMigrate", ["jquery"], function() {
  return (function() {
/*
 jQuery Migrate - v3.0.0 - 2016-06-09
 Copyright jQuery Foundation and other contributors
*/
(function(jQuery,window){jQuery.migrateVersion="3.0.0";(function(){var log=window.console&&window.console.log&&function(){window.console.log.apply(window.console,arguments)},rbadVersions=/^[12]\./;if(!log)return;if(!jQuery||rbadVersions.test(jQuery.fn.jquery))log("JQMIGRATE: jQuery 3.0.0+ REQUIRED");if(jQuery.migrateWarnings)log("JQMIGRATE: Migrate plugin loaded multiple times");log("JQMIGRATE: Migrate is installed"+(jQuery.migrateMute?"":" with logging active")+", version "+jQuery.migrateVersion)})();
var warnedAbout={};jQuery.migrateWarnings=[];if(jQuery.migrateTrace===undefined)jQuery.migrateTrace=true;jQuery.migrateReset=function(){warnedAbout={};jQuery.migrateWarnings.length=0};function migrateWarn(msg){var console=window.console;if(!warnedAbout[msg]){warnedAbout[msg]=true;jQuery.migrateWarnings.push(msg);if(console&&console.warn&&!jQuery.migrateMute){console.warn("JQMIGRATE: "+msg);if(jQuery.migrateTrace&&console.trace)console.trace()}}}function migrateWarnProp(obj,prop,value,msg){Object.defineProperty(obj,
prop,{configurable:true,enumerable:true,get:function(){migrateWarn(msg);return value}})}if(document.compatMode==="BackCompat")migrateWarn("jQuery is not compatible with Quirks Mode");var oldInit=jQuery.fn.init,oldIsNumeric=jQuery.isNumeric,oldFind=jQuery.find,rattrHashTest=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,rattrHashGlob=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;jQuery.fn.init=function(arg1){var args=Array.prototype.slice.call(arguments);if(typeof arg1==="string"&&
arg1==="#"){migrateWarn("jQuery( '#' ) is not a valid selector");args[0]=[]}return oldInit.apply(this,args)};jQuery.fn.init.prototype=jQuery.fn;jQuery.find=function(selector){var args=Array.prototype.slice.call(arguments);if(typeof selector==="string"&&rattrHashTest.test(selector))try{document.querySelector(selector)}catch(err1){selector=selector.replace(rattrHashGlob,function(_,attr,op,value){return"["+attr+op+'"'+value+'"]'});try{document.querySelector(selector);migrateWarn("Attribute selector with '#' must be quoted: "+
args[0]);args[0]=selector}catch(err2){migrateWarn("Attribute selector with '#' was not fixed: "+args[0])}}return oldFind.apply(this,args)};var findProp;for(findProp in oldFind)if(Object.prototype.hasOwnProperty.call(oldFind,findProp))jQuery.find[findProp]=oldFind[findProp];jQuery.fn.size=function(){migrateWarn("jQuery.fn.size() is deprecated; use the .length property");return this.length};jQuery.parseJSON=function(){migrateWarn("jQuery.parseJSON is deprecated; use JSON.parse");return JSON.parse.apply(null,
arguments)};jQuery.isNumeric=function(val){function isNumeric2(obj){var realStringObj=obj&&obj.toString();return!jQuery.isArray(obj)&&realStringObj-parseFloat(realStringObj)+1>=0}var newValue=oldIsNumeric(val),oldValue=isNumeric2(val);if(newValue!==oldValue)migrateWarn("jQuery.isNumeric() should not be called on constructed objects");return oldValue};migrateWarnProp(jQuery,"unique",jQuery.uniqueSort,"jQuery.unique is deprecated, use jQuery.uniqueSort");migrateWarnProp(jQuery.expr,"filters",jQuery.expr.pseudos,
"jQuery.expr.filters is now jQuery.expr.pseudos");migrateWarnProp(jQuery.expr,":",jQuery.expr.pseudos,'jQuery.expr[":"] is now jQuery.expr.pseudos');var oldAjax=jQuery.ajax;jQuery.ajax=function(){var jQXHR=oldAjax.apply(this,arguments);if(jQXHR.promise){migrateWarnProp(jQXHR,"success",jQXHR.done,"jQXHR.success is deprecated and removed");migrateWarnProp(jQXHR,"error",jQXHR.fail,"jQXHR.error is deprecated and removed");migrateWarnProp(jQXHR,"complete",jQXHR.always,"jQXHR.complete is deprecated and removed")}return jQXHR};
var oldRemoveAttr=jQuery.fn.removeAttr,oldToggleClass=jQuery.fn.toggleClass,rmatchNonSpace=/\S+/g;jQuery.fn.removeAttr=function(name){var self=this;jQuery.each(name.match(rmatchNonSpace),function(i,attr){if(jQuery.expr.match.bool.test(attr)){migrateWarn("jQuery.fn.removeAttr no longer sets boolean properties: "+attr);self.prop(attr,false)}});return oldRemoveAttr.apply(this,arguments)};jQuery.fn.toggleClass=function(state){if(state!==undefined&&typeof state!=="boolean")return oldToggleClass.apply(this,
arguments);migrateWarn("jQuery.fn.toggleClass( boolean ) is deprecated");return this.each(function(){var className=this.getAttribute&&this.getAttribute("class")||"";if(className)jQuery.data(this,"__className__",className);if(this.setAttribute)this.setAttribute("class",className||state===false?"":jQuery.data(this,"__className__")||"")})};var internalSwapCall=false;if(jQuery.swap)jQuery.each(["height","width","reliableMarginRight"],function(_,name){var oldHook=jQuery.cssHooks[name]&&jQuery.cssHooks[name].get;
if(oldHook)jQuery.cssHooks[name].get=function(){var ret;internalSwapCall=true;ret=oldHook.apply(this,arguments);internalSwapCall=false;return ret}});jQuery.swap=function(elem,options,callback,args){var ret,name,old={};if(!internalSwapCall)migrateWarn("jQuery.swap() is undocumented and deprecated");for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret};var oldData=jQuery.data;jQuery.data=
function(elem,name,value){var curData;if(name&&name!==jQuery.camelCase(name)){curData=jQuery.hasData(elem)&&oldData.call(this,elem);if(curData&&name in curData){migrateWarn("jQuery.data() always sets/gets camelCased names: "+name);if(arguments.length>2)curData[name]=value;return curData[name]}}return oldData.apply(this,arguments)};var oldTweenRun=jQuery.Tween.prototype.run;jQuery.Tween.prototype.run=function(percent){if(jQuery.easing[this.easing].length>1){migrateWarn("easing function "+'"jQuery.easing.'+
this.easing.toString()+'" should use only first argument');jQuery.easing[this.easing]=jQuery.easing[this.easing].bind(jQuery.easing,percent,this.options.duration*percent,0,1,this.options.duration)}oldTweenRun.apply(this,arguments)};var oldLoad=jQuery.fn.load,originalFix=jQuery.event.fix;jQuery.event.props=[];jQuery.event.fixHooks={};jQuery.event.fix=function(originalEvent){var event,type=originalEvent.type,fixHook=this.fixHooks[type],props=jQuery.event.props;if(props.length){migrateWarn("jQuery.event.props are deprecated and removed: "+
props.join());while(props.length)jQuery.event.addProp(props.pop())}if(fixHook&&!fixHook._migrated_){fixHook._migrated_=true;migrateWarn("jQuery.event.fixHooks are deprecated and removed: "+type);if((props=fixHook.props)&&props.length)while(props.length)jQuery.event.addProp(props.pop())}event=originalFix.call(this,originalEvent);return fixHook&&fixHook.filter?fixHook.filter(event,originalEvent):event};jQuery.each(["load","unload","error"],function(_,name){jQuery.fn[name]=function(){var args=Array.prototype.slice.call(arguments,
0);if(name==="load"&&typeof args[0]==="string")return oldLoad.apply(this,args);migrateWarn("jQuery.fn."+name+"() is deprecated");args.splice(0,0,name);if(arguments.length)return this.on.apply(this,args);this.triggerHandler.apply(this,args);return this}});jQuery(function(){jQuery(document).triggerHandler("ready")});jQuery.event.special.ready={setup:function(){if(this===document)migrateWarn("'ready' event is deprecated")}};jQuery.fn.extend({bind:function(types,data,fn){migrateWarn("jQuery.fn.bind() is deprecated");
return this.on(types,null,data,fn)},unbind:function(types,fn){migrateWarn("jQuery.fn.unbind() is deprecated");return this.off(types,null,fn)},delegate:function(selector,types,data,fn){migrateWarn("jQuery.fn.delegate() is deprecated");return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){migrateWarn("jQuery.fn.undelegate() is deprecated");return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var oldOffset=jQuery.fn.offset;jQuery.fn.offset=
function(){var docElem,elem=this[0],origin={top:0,left:0};if(!elem||!elem.nodeType){migrateWarn("jQuery.fn.offset() requires a valid DOM element");return origin}docElem=(elem.ownerDocument||document).documentElement;if(!jQuery.contains(docElem,elem)){migrateWarn("jQuery.fn.offset() requires an element connected to a document");return origin}return oldOffset.apply(this,arguments)};var oldParam=jQuery.param;jQuery.param=function(data,traditional){var ajaxTraditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional;
if(traditional===undefined&&ajaxTraditional){migrateWarn("jQuery.param() no longer uses jQuery.ajaxSettings.traditional");traditional=ajaxTraditional}return oldParam.call(this,data,traditional)};var oldSelf=jQuery.fn.andSelf||jQuery.fn.addBack;jQuery.fn.andSelf=function(){migrateWarn("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()");return oldSelf.apply(this,arguments)};var oldDeferred=jQuery.Deferred,tuples=[["resolve","done",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),"resolved"],
["reject","fail",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory"),jQuery.Callbacks("memory")]];jQuery.Deferred=function(func){var deferred=oldDeferred(),promise=deferred.promise();deferred.pipe=promise.pipe=function(){var fns=arguments;migrateWarn("deferred.pipe() is deprecated");return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=
fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise))returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify);else newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})});fns=null}).promise()};if(func)func.call(deferred,deferred);return deferred}})(jQuery,window);


  }).apply(root, arguments);
});
}(this));

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define('object-assign',[],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.ObjectAssign=e()}}(function(){return function e(n,r,t){function o(f,u){if(!r[f]){if(!n[f]){var l="function"==typeof require&&require;if(!u&&l)return l(f,!0);if(i)return i(f,!0);var c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c}var a=r[f]={exports:{}};n[f][0].call(a.exports,function(e){var r=n[f][1][e];return o(r?r:e)},a,a.exports,e,n,r,t)}return r[f].exports}for(var i="function"==typeof require&&require,f=0;f<t.length;f++)o(t[f]);return o}({1:[function(e,n,r){"use strict";function t(e,n){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),t=1;t<arguments.length;t++){var o=arguments[t];if(void 0!==o&&null!==o)for(var i=Object.keys(Object(o)),f=0,u=i.length;f<u;f++){var l=i[f],c=Object.getOwnPropertyDescriptor(o,l);void 0!==c&&c.enumerable&&(r[l]=o[l])}}return r}function o(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})}n.exports={assign:t,polyfill:o}},{}]},{},[1])(1)});

(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/XPElementBase',["require", "exports"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    /**
     * Base XP Rule Element, knows how to maps attributes from xml to an element instance
     */
    var XPElementBase = /** @class */ (function () {
        function XPElementBase(attributes) {
            if (!attributes) {
                throw new Error("Cannot initialize XperienceElement without attribute");
            }
            this.applyAttributes(attributes);
        }
        /**
         * Loop through passed object properties and creates/assigns values to the current instance
         * @param {XPAttributes} attributes A dynamic object with properties
         */
        XPElementBase.prototype.applyAttributes = function (attributes) {
            for (var key in attributes) {
                if (attributes.hasOwnProperty(key)) {
                    // Defined properties on XElement will be populated with a value, the rest will be added as new properties.
                    if (key in this) {
                        this[key] = attributes[key];
                    }
                    else {
                        Object.defineProperty(this, key, { value: attributes[key], enumerable: !1, writable: !0, configurable: !0 });
                    }
                }
            }
        };
        return XPElementBase;
    }());
    exports.XPElementBase = XPElementBase;
});
//# sourceMappingURL=XPElementBase.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/XPActionBase',["require", "exports", "score_ccf/XPerience/XPElementBase"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var XPElementBase_1 = require("score_ccf/XPerience/XPElementBase");
    /**
     * Encapsulated basic logic for an Action
     */
    var XPActionBase = /** @class */ (function (_super) {
        __extends(XPActionBase, _super);
        function XPActionBase(attributes) {
            return _super.call(this, attributes) || this;
        }
        /**
         * Execute the action logic
         * @param {UXModuleLike} component An instance of a UXModule component to scope the current action
         */
        XPActionBase.prototype.execute = function (component) {
            throw new Error("Execute action is not implemented");
        };
        return XPActionBase;
    }(XPElementBase_1.XPElementBase));
    exports.XPActionBase = XPActionBase;
});
//# sourceMappingURL=XPActionBase.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Actions/CompleteGoalAction',["require", "exports", "jquery", "loglevel", "./../XPActionBase"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var $ = require("jquery");
    var log = require("loglevel");
    var XPActionBase_1 = require("./../XPActionBase");
    var CompleteGoalAction = /** @class */ (function (_super) {
        __extends(CompleteGoalAction, _super);
        function CompleteGoalAction(attributes) {
            var _this = _super.call(this, attributes) || this;
            _this.apiEndpoint = "/scoreui/triggergoal/{goalid}";
            return _this;
        }
        CompleteGoalAction.prototype.execute = function (component) {
            var url = this.apiEndpoint.replace("{goalid}", this.goalid);
            var that = this;
            $.post(url, { goalId: this.goalid }, function (response) {
                if (response.error) {
                    throw new Error(response.error);
                }
                if (response.success) {
                    log.debug("Goal triggered: " + that.goalid);
                }
            }, "json");
        };
        return CompleteGoalAction;
    }(XPActionBase_1.XPActionBase));
    exports.default = CompleteGoalAction;
});
//# sourceMappingURL=CompleteGoalAction.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Actions/ContactVisitWithTheProfileCard',["require", "exports", "jquery", "loglevel", "./../XPActionBase"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var $ = require("jquery");
    var log = require("loglevel");
    var XPActionBase_1 = require("./../XPActionBase");
    var ContactVisitWithTheProfileCard = /** @class */ (function (_super) {
        __extends(ContactVisitWithTheProfileCard, _super);
        function ContactVisitWithTheProfileCard(attributes) {
            var _this = _super.call(this, attributes) || this;
            _this.apiEndpoint = "/scoreui/concatvisitwith/{cardId}";
            return _this;
        }
        ContactVisitWithTheProfileCard.prototype.execute = function (component) {
            var _this = this;
            var url = this.apiEndpoint.replace("{cardId}", this.ProfileCardId);
            $.post(url, function (response) {
                if (response.error) {
                    throw new Error(response.error);
                }
                if (response.success) {
                    log.debug("Profile card associated: " + _this.ProfileCardId);
                }
            }, "json");
        };
        return ContactVisitWithTheProfileCard;
    }(XPActionBase_1.XPActionBase));
    exports.default = ContactVisitWithTheProfileCard;
});
//# sourceMappingURL=ContactVisitWithTheProfileCard.js.map;
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/Utils/global',["require", "exports"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var globalNs = (function () {
        // the only reliable means to get the global object is
        // `Function('return this')()`
        // However, this causes CSP violations in Chrome apps.
        if (self !== void 0) {
            return self;
        }
        if (window !== void 0) {
            return window;
        }
        throw new Error('Unable to get  global object');
    })();
    exports.default = globalNs;
});
//# sourceMappingURL=global.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Actions/ShowAlertMessage',["require", "exports", "./../XPActionBase", "score_ccf/Utils/global"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var XPActionBase_1 = require("./../XPActionBase");
    var global_1 = require("score_ccf/Utils/global");
    var ShowAlertMessage = /** @class */ (function (_super) {
        __extends(ShowAlertMessage, _super);
        function ShowAlertMessage(attribites) {
            return _super.call(this, attribites) || this;
        }
        ShowAlertMessage.prototype.execute = function (component) {
            global_1.default.alert(this.message);
        };
        return ShowAlertMessage;
    }(XPActionBase_1.XPActionBase));
    exports.default = ShowAlertMessage;
});
//# sourceMappingURL=ShowAlertMessage.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Actions/TrackClientEventAction',["require", "exports", "loglevel", "score_ccf/XPerience/XPActionBase", "score_ccf/Utils/global", "object-assign"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var log = require("loglevel");
    var XPActionBase_1 = require("score_ccf/XPerience/XPActionBase");
    var global_1 = require("score_ccf/Utils/global");
    var objectAssign = require("object-assign");
    var TrackClientEventAction = /** @class */ (function (_super) {
        __extends(TrackClientEventAction, _super);
        function TrackClientEventAction(attributes) {
            return _super.call(this, attributes) || this;
        }
        TrackClientEventAction.prototype.execute = function (component) {
            if (global_1.default['gtag'] && global_1.default['gtag'] instanceof Function) {
                var fieldsObj = {};
                if (this.eventCategory != null) {
                    fieldsObj['event_category'] = this.eventCategory;
                }
                if (this.eventLabel != null) {
                    fieldsObj['event_label'] = this.eventLabel;
                }
                if (this.eventValue != null) {
                    fieldsObj['value'] = this.eventValue;
                }
                if (this.dimensions != null) {
                    objectAssign.polyfill();
                    fieldsObj = Object.assign(fieldsObj, this.dimensions);
                }
                global_1.default['gtag'].apply(null, ['event', this.eventAction, fieldsObj]);
            }
            else {
                log.error("Cannot send GA event, because GA is not defined. Please include GA script to a page");
            }
        };
        return TrackClientEventAction;
    }(XPActionBase_1.XPActionBase));
    exports.default = TrackClientEventAction;
});
//# sourceMappingURL=TrackClientEventAction.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/XPConditionBase',["require", "exports", "score_ccf/XPerience/XPElementBase"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var XPElementBase_1 = require("score_ccf/XPerience/XPElementBase");
    /**
     * Encapsulated basic logic for a Condition
     */
    var XPConditionBase = /** @class */ (function (_super) {
        __extends(XPConditionBase, _super);
        function XPConditionBase(attributes) {
            var _this = _super.call(this, attributes) || this;
            _this.defer = _this._initDeferredCondition();
            return _this;
        }
        /**
         * Setup current condition to a scope of component
         * @param {UXModuleLike} component An instance of a UXModule component to scope the current condition
         */
        XPConditionBase.prototype.setup = function (component) {
            throw new Error('Setup method is not implemented');
        };
        /**
         * Resolve current condition with true state
         */
        XPConditionBase.prototype.true = function () {
            return !0;
        };
        /**
         * Resolve current condition with false state
         */
        XPConditionBase.prototype.false = function () {
            return !1;
        };
        /**
         * Produce a new defer condition computation object
         */
        XPConditionBase.prototype.reset = function () {
            this.defer = this._initDeferredCondition();
        };
        /**
         * Decorate current condition resolve defer object when calling true/false methods
         */
        XPConditionBase.prototype._initDeferredCondition = function () {
            var _this = this;
            return new Promise(function (resolve, reject) {
                var origTrue = _this.true.bind(_this);
                _this.true = function () {
                    var value = origTrue();
                    resolve(value);
                    return value;
                };
                var origFalse = _this.false.bind(_this);
                _this.false = function () {
                    var value = origFalse();
                    resolve(value);
                    return value;
                };
            });
        };
        return XPConditionBase;
    }(XPElementBase_1.XPElementBase));
    exports.XPConditionBase = XPConditionBase;
});
//# sourceMappingURL=XPConditionBase.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Conditions/ClickedCondition',["require", "exports", "jquery", "score_ccf/XPerience/XPConditionBase"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var $ = require("jquery");
    var XPConditionBase_1 = require("score_ccf/XPerience/XPConditionBase");
    var ComponentClickedCondition = /** @class */ (function (_super) {
        __extends(ComponentClickedCondition, _super);
        function ComponentClickedCondition(attributes) {
            return _super.call(this, attributes) || this;
        }
        ComponentClickedCondition.prototype.setup = function (component) {
            var _this = this;
            if (!component || !component.scope) {
                throw new Error("Cannot setup a condition without 'component' with property 'scope'");
            }
            $(component.scope).on('click', function (ev) {
                _this.true();
            });
        };
        return ComponentClickedCondition;
    }(XPConditionBase_1.XPConditionBase));
    exports.default = ComponentClickedCondition;
    ;
});
//# sourceMappingURL=ClickedCondition.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Conditions/GetsFocusCondition',["require", "exports", "jquery", "score_ccf/XPerience/XPConditionBase"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var $ = require("jquery");
    var XPConditionBase_1 = require("score_ccf/XPerience/XPConditionBase");
    var ComponentGetsFocusCondition = /** @class */ (function (_super) {
        __extends(ComponentGetsFocusCondition, _super);
        function ComponentGetsFocusCondition(attributes) {
            return _super.call(this, attributes) || this;
        }
        ComponentGetsFocusCondition.prototype.setup = function (component) {
            var _this = this;
            if (!component) {
                throw new Error('Cannot setup a condition without \'component\' instance');
            }
            $(component).on('focus', function () {
                _this.true();
            });
        };
        return ComponentGetsFocusCondition;
    }(XPConditionBase_1.XPConditionBase));
    exports.default = ComponentGetsFocusCondition;
    ;
});
//# sourceMappingURL=GetsFocusCondition.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Conditions/LosesFocusCondition',["require", "exports", "jquery", "score_ccf/XPerience/XPConditionBase"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var $ = require("jquery");
    var XPConditionBase_1 = require("score_ccf/XPerience/XPConditionBase");
    var ComponentLosesFocusCondition = /** @class */ (function (_super) {
        __extends(ComponentLosesFocusCondition, _super);
        function ComponentLosesFocusCondition(attributes) {
            return _super.call(this, attributes) || this;
        }
        ComponentLosesFocusCondition.prototype.setup = function (component) {
            var _this = this;
            if (!component) {
                throw new Error('Cannot setup a condition without \'component\' instance');
            }
            $(component).on('blur', function () {
                _this.true();
            });
        };
        return ComponentLosesFocusCondition;
    }(XPConditionBase_1.XPConditionBase));
    exports.default = ComponentLosesFocusCondition;
    ;
});
//# sourceMappingURL=LosesFocusCondition.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Conditions/OncePerPageViewCondition',["require", "exports", "score_ccf/XPerience/XPConditionBase"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var XPConditionBase_1 = require("score_ccf/XPerience/XPConditionBase");
    var ComponentClickedCondition = /** @class */ (function (_super) {
        __extends(ComponentClickedCondition, _super);
        function ComponentClickedCondition(attributes) {
            return _super.call(this, attributes) || this;
        }
        ComponentClickedCondition.prototype.setup = function (component) {
            this.true();
        };
        ComponentClickedCondition.prototype.reset = function () {
            // call base logic
            _super.prototype.reset.call(this);
            // reject condition
            this.false();
        };
        return ComponentClickedCondition;
    }(XPConditionBase_1.XPConditionBase));
    exports.default = ComponentClickedCondition;
    ;
});
//# sourceMappingURL=OncePerPageViewCondition.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Conditions/SlideChangedCondition',["require", "exports", "jquery", "score_ccf/XPerience/XPConditionBase"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var $ = require("jquery");
    var XPConditionBase_1 = require("score_ccf/XPerience/XPConditionBase");
    var ComponentSlideChangedCondition = /** @class */ (function (_super) {
        __extends(ComponentSlideChangedCondition, _super);
        function ComponentSlideChangedCondition(attributes) {
            return _super.call(this, attributes) || this;
        }
        ComponentSlideChangedCondition.prototype.setup = function (component) {
            var _this = this;
            if (!component) {
                throw new Error('Cannot setup a condition without \'component\' instance');
            }
            $(component).on('afterChange.slider', function () {
                _this.true();
            });
        };
        return ComponentSlideChangedCondition;
    }(XPConditionBase_1.XPConditionBase));
    exports.default = ComponentSlideChangedCondition;
    ;
});
//# sourceMappingURL=SlideChangedCondition.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Conditions/SlideChangingCondition',["require", "exports", "jquery", "score_ccf/XPerience/XPConditionBase"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var $ = require("jquery");
    var XPConditionBase_1 = require("score_ccf/XPerience/XPConditionBase");
    var ComponentSlideChangingCondition = /** @class */ (function (_super) {
        __extends(ComponentSlideChangingCondition, _super);
        function ComponentSlideChangingCondition(attributes) {
            return _super.call(this, attributes) || this;
        }
        ComponentSlideChangingCondition.prototype.setup = function (component) {
            var _this = this;
            if (!component) {
                throw new Error('Cannot setup a condition without \'component\' instance');
            }
            $(component).on('beforeChange.slider', function () {
                _this.true();
            });
        };
        return ComponentSlideChangingCondition;
    }(XPConditionBase_1.XPConditionBase));
    exports.default = ComponentSlideChangingCondition;
    ;
});
//# sourceMappingURL=SlideChangingCondition.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Conditions/VideoHasPlayedExactNSecondsCondition',["require", "exports", "jquery", "score_ccf/XPerience/XPConditionBase"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var $ = require("jquery");
    var XPConditionBase_1 = require("score_ccf/XPerience/XPConditionBase");
    var VideoHasPlayedExactNSecondsCondition = /** @class */ (function (_super) {
        __extends(VideoHasPlayedExactNSecondsCondition, _super);
        function VideoHasPlayedExactNSecondsCondition(attributes) {
            return _super.call(this, attributes) || this;
        }
        VideoHasPlayedExactNSecondsCondition.prototype.setup = function (component) {
            var _this = this;
            if (!component) {
                throw new Error('Cannot setup a condition without \'component\' instance');
            }
            // parse to number
            this.seconds = this.seconds | 0;
            $(component).on('update.timeline', function (e, currentTime) {
                if (isFinite(_this.seconds) && currentTime === _this.seconds) {
                    _this.true();
                }
            });
        };
        return VideoHasPlayedExactNSecondsCondition;
    }(XPConditionBase_1.XPConditionBase));
    exports.default = VideoHasPlayedExactNSecondsCondition;
    ;
});
//# sourceMappingURL=VideoHasPlayedExactNSecondsCondition.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Conditions/VideoHasPlayedNSecondsOrMoreCondition',["require", "exports", "jquery", "score_ccf/XPerience/XPConditionBase"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var $ = require("jquery");
    var XPConditionBase_1 = require("score_ccf/XPerience/XPConditionBase");
    var VideoHasPlayedNSecondsCondition = /** @class */ (function (_super) {
        __extends(VideoHasPlayedNSecondsCondition, _super);
        function VideoHasPlayedNSecondsCondition(attributes) {
            return _super.call(this, attributes) || this;
        }
        VideoHasPlayedNSecondsCondition.prototype.setup = function (component) {
            var _this = this;
            if (!component) {
                throw new Error('Cannot setup a condition without \'component\' instance');
            }
            this.seconds = this.seconds;
            $(component).on('update.timeline', function (e, currentTime) {
                if (isFinite(_this.seconds) && currentTime >= _this.seconds) {
                    _this.true();
                }
            });
        };
        return VideoHasPlayedNSecondsCondition;
    }(XPConditionBase_1.XPConditionBase));
    exports.default = VideoHasPlayedNSecondsCondition;
    ;
});
//# sourceMappingURL=VideoHasPlayedNSecondsOrMoreCondition.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Conditions/VideoIsFinishedCondition',["require", "exports", "jquery", "score_ccf/XPerience/XPConditionBase"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var $ = require("jquery");
    var XPConditionBase_1 = require("score_ccf/XPerience/XPConditionBase");
    var VideoIsFinishedCondition = /** @class */ (function (_super) {
        __extends(VideoIsFinishedCondition, _super);
        function VideoIsFinishedCondition(attributes) {
            return _super.call(this, attributes) || this;
        }
        VideoIsFinishedCondition.prototype.setup = function (component) {
            var _this = this;
            if (!component) {
                throw new Error('Cannot setup a condition without \'component\' instance');
            }
            $(component).on('end.video', function () {
                _this.true();
            });
        };
        return VideoIsFinishedCondition;
    }(XPConditionBase_1.XPConditionBase));
    exports.default = VideoIsFinishedCondition;
    ;
});
//# sourceMappingURL=VideoIsFinishedCondition.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Conditions/VideoIsPausedCondition',["require", "exports", "jquery", "score_ccf/XPerience/XPConditionBase"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var $ = require("jquery");
    var XPConditionBase_1 = require("score_ccf/XPerience/XPConditionBase");
    var VideoIsFinishedCondition = /** @class */ (function (_super) {
        __extends(VideoIsFinishedCondition, _super);
        function VideoIsFinishedCondition(attributes) {
            return _super.call(this, attributes) || this;
        }
        VideoIsFinishedCondition.prototype.setup = function (component) {
            var _this = this;
            if (!component) {
                throw new Error('Cannot setup a condition without \'component\' instance');
            }
            $(component).on('pause.video', function () {
                _this.true();
            });
        };
        return VideoIsFinishedCondition;
    }(XPConditionBase_1.XPConditionBase));
    exports.default = VideoIsFinishedCondition;
    ;
});
//# sourceMappingURL=VideoIsPausedCondition.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Conditions/VideoStartsToPlayCondition',["require", "exports", "jquery", "score_ccf/XPerience/XPConditionBase"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var $ = require("jquery");
    var XPConditionBase_1 = require("score_ccf/XPerience/XPConditionBase");
    var VideoIsFinishedCondition = /** @class */ (function (_super) {
        __extends(VideoIsFinishedCondition, _super);
        function VideoIsFinishedCondition(attributes) {
            return _super.call(this, attributes) || this;
        }
        VideoIsFinishedCondition.prototype.setup = function (component) {
            var _this = this;
            if (!component) {
                throw new Error('Cannot setup a condition without \'component\' instance');
            }
            $(component).on('start.video', function () {
                _this.true();
            });
        };
        return VideoIsFinishedCondition;
    }(XPConditionBase_1.XPConditionBase));
    exports.default = VideoIsFinishedCondition;
    ;
});
//# sourceMappingURL=VideoStartsToPlayCondition.js.map;
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Contracts/UXModuleLike',["require", "exports"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
//# sourceMappingURL=UXModuleLike.js.map;
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Contracts/XPContracts',["require", "exports"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
});
//# sourceMappingURL=XPContracts.js.map;
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Elements',["require", "exports"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.ElementPairs = {
        conditions: {
            '{8DB82A68-5F50-43B3-A487-D5B9300DEE80}': 'score_ccf/XPerience/Conditions/OncePerPageViewCondition',
            '{982886A0-22D5-4371-8E63-D5F0FA292954}': 'score_ccf/XPerience/Conditions/ClickedCondition',
            '{83C03CA9-68D5-4100-8537-004917B1DEF3}': 'score_ccf/XPerience/Conditions/SlideChangedCondition',
            '{6EDA1FF1-B3CB-411A-ADAC-6029D1763BCB}': 'score_ccf/XPerience/Conditions/SlideChangingCondition',
            '{D153496F-BF42-4A47-A9D5-780693D0C2E7}': 'score_ccf/XPerience/Conditions/GetsFocusCondition',
            '{3FF617C7-4ED5-43FC-A766-4F2414107414}': 'score_ccf/XPerience/Conditions/LosesFocusCondition',
            '{39EDBFA3-3BC8-4E7D-BC32-4BF2712353AC}': 'score_ccf/XPerience/Conditions/VideoHasPlayedExactNSecondsCondition',
            '{67E995CD-155D-42CF-9DC8-B7655F9785A5}': 'score_ccf/XPerience/Conditions/VideoHasPlayedNSecondsOrMoreCondition',
            '{B44C5804-E2F8-4BFA-9060-31108659D475}': 'score_ccf/XPerience/Conditions/VideoIsFinishedCondition',
            '{7B2C46CA-0B9E-453F-A269-FA2E0079659D}': 'score_ccf/XPerience/Conditions/VideoIsPausedCondition',
            '{8D46ACE2-32D4-449C-81EF-7C88808F0A14}': 'score_ccf/XPerience/Conditions/VideoStartsToPlayCondition',
        },
        actions: {
            '{70F1F9DC-3930-41EC-9FBB-40B673B15586}': 'score_ccf/XPerience/Actions/CompleteGoalAction',
            '{7DED5636-8783-431B-A965-31E1A47405E1}': 'score_ccf/XPerience/Actions/TrackClientEventAction',
            '{C87955F1-3E04-45A3-A235-4BACD1594B42}': 'score_ccf/XPerience/Actions/TrackClientEventAction',
            '{4D91B017-F733-4E0E-B387-AB0013A71395}': 'score_ccf/XPerience/Actions/TrackClientEventAction',
            '{8C501C45-D61B-4D10-A9E1-0DEDACCD149F}': 'score_ccf/XPerience/Actions/ShowAlertMessage',
            '{8C23D183-5F62-4336-A6AD-2876A0D45511}': 'score_ccf/XPerience/Actions/ContactVisitWithTheProfileCard'
        }
    };
});
//# sourceMappingURL=Elements.js.map;
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Enums/XPEnums',["require", "exports"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var XPModuleState;
    (function (XPModuleState) {
        XPModuleState["Pending"] = "pending";
        XPModuleState["InProcess"] = "inprocess";
        XPModuleState["Loaded"] = "loaded";
        XPModuleState["Failed"] = "failed";
    })(XPModuleState = exports.XPModuleState || (exports.XPModuleState = {}));
    ;
    var XPJunction;
    (function (XPJunction) {
        XPJunction["AND"] = "and";
        XPJunction["OR"] = "or";
    })(XPJunction = exports.XPJunction || (exports.XPJunction = {}));
    ;
});
//# sourceMappingURL=XPEnums.js.map;
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/Xperience/Enums/XPEnums',["require", "exports"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var XPModuleState;
    (function (XPModuleState) {
        XPModuleState["Pending"] = "pending";
        XPModuleState["InProcess"] = "inprocess";
        XPModuleState["Loaded"] = "loaded";
        XPModuleState["Failed"] = "failed";
    })(XPModuleState = exports.XPModuleState || (exports.XPModuleState = {}));
    ;
    var XPJunction;
    (function (XPJunction) {
        XPJunction["AND"] = "and";
        XPJunction["OR"] = "or";
    })(XPJunction = exports.XPJunction || (exports.XPJunction = {}));
    ;
});
//# sourceMappingURL=XPEnums.js.map;
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/Utils/XPConditionJunction',["require", "exports", "score_ccf/Xperience/Enums/XPEnums", "promise-polyfill"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var XPEnums_1 = require("score_ccf/Xperience/Enums/XPEnums");
    require("promise-polyfill"); // polyfill
    /**
     * Encapsulates junction logic of two and more conditions
     */
    var XPConditionJunction = /** @class */ (function () {
        function XPConditionJunction(operand, conditions) {
            this.operand = operand;
            this._innerConditions = conditions;
            this._operand = operand;
            this.defer = this._initDeferredCondition();
        }
        XPConditionJunction.prototype._initDeferredCondition = function () {
            var _this = this;
            return new Promise(function (resolve, reject) {
                Promise.all(_this._innerConditions).then(function (conditions) {
                    // nested conditions
                    var innerPromises = [];
                    for (var x = 0; x < conditions.length; x++) {
                        var cond = conditions[x];
                        // collect nested condition defer objects, to build current juction behaviour 
                        innerPromises = innerPromises.concat(cond.defer);
                    }
                    if (_this._operand === XPEnums_1.XPJunction.AND) {
                        // wait until all nested conditions will be executed and join them when AND operation
                        Promise.all(innerPromises).then(function (results) {
                            // because modern hipsters cannot understand bitwise operation it is written in that style
                            resolve(results.every(function (v) { return v === !0; }));
                        });
                    }
                    if (_this._operand === XPEnums_1.XPJunction.OR) {
                        var count_1 = innerPromises.length;
                        for (var x = 0; x < innerPromises.length; x++) {
                            innerPromises[x].then(function (value) {
                                // if at least one condition was resolved with true - current Promise will be resolved with true,
                                // if none of conditions was resolved with true, current Promise will be resolved with false
                                if (!--count_1 || value === !0) {
                                    resolve(!!value || !!count_1);
                                }
                            }, function (reason) {
                                reject(reason);
                            });
                        }
                        ;
                    }
                }, function (reason) {
                    reject(reason);
                });
            });
        };
        /**
         * Setup conditions to a scope of the component
         * @param component An instance of a UXModule component to scope conditions of the current junction
         */
        XPConditionJunction.prototype.setup = function (component) {
            for (var index = 0; index < this._innerConditions.length; index++) {
                var conditionModuleLoader = this._innerConditions[index];
                // setup condition as soon as it is loaded
                conditionModuleLoader.then(function (condModule) {
                    condModule.setup(component);
                });
            }
        };
        XPConditionJunction.prototype.false = function () {
            throw new Error('You cannot resolve Junction condition, only inner conditions can resolve the Junction condition.');
        };
        XPConditionJunction.prototype.true = function () {
            throw new Error('You cannot resolve Junction condition, only inner conditions can resolve the Junction condition.');
        };
        /**
         * Proxy reset call to all nested conditions and product a new defer object for current junction
         */
        XPConditionJunction.prototype.reset = function () {
            Promise.all(this._innerConditions).then(function (conditions) {
                for (var x = 0; x < conditions.length; x++) {
                    conditions[x].reset();
                }
            });
            this.defer = this._initDeferredCondition();
        };
        return XPConditionJunction;
    }());
    exports.XPConditionJunction = XPConditionJunction;
    /**
     * Encapsulates AND Junction logic of two and more conditions
     */
    var XPConditionAnd = /** @class */ (function (_super) {
        __extends(XPConditionAnd, _super);
        function XPConditionAnd(conditions) {
            return _super.call(this, XPEnums_1.XPJunction.AND, conditions) || this;
        }
        return XPConditionAnd;
    }(XPConditionJunction));
    exports.XPConditionAnd = XPConditionAnd;
    /**
     * Encapsulates OR Junction logic of two and more conditions
     */
    var XPConditionOr = /** @class */ (function (_super) {
        __extends(XPConditionOr, _super);
        function XPConditionOr(conditions) {
            return _super.call(this, XPEnums_1.XPJunction.AND, conditions) || this;
        }
        return XPConditionOr;
    }(XPConditionJunction));
    exports.XPConditionOr = XPConditionOr;
});
//# sourceMappingURL=XPConditionJunction.js.map;
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/XPActionLoader',["require", "exports", "score_ccf/XPerience/Elements", "promise-polyfill"], factory);
    }
})(function (require, exports) {
    "use strict";
    var __syncRequire = typeof module === "object" && typeof module.exports === "object";
    Object.defineProperty(exports, "__esModule", { value: true });
    var Elements_1 = require("score_ccf/XPerience/Elements");
    require("promise-polyfill");
    /**
     * Load XP Action modules from xml desription
     */
    var XPActionLoader = /** @class */ (function () {
        function XPActionLoader() {
        }
        /**
         * Load module and create an instance of it
         * @param {string} modulePath path to a module which should be dynamicly loaded
         * @param {XPAttributes} attributes Initial data which will be passed to a loaded module constructor
         */
        XPActionLoader.prototype.getModule = function (modulePath, attributes) {
            // all actions should be inherited from XPActionBase
            return (__syncRequire ? Promise.resolve().then(function () { return require(modulePath); }) : new Promise(function (resolve_1, reject_1) { require([modulePath], resolve_1, reject_1); })).then(function (actModule) {
                // create an instance of a named export
                if (actModule.hasOwnProperty(Elements_1.ElementPairs.actions[attributes["id"]])) {
                    return new actModule[Elements_1.ElementPairs.actions[attributes["id"]]](attributes);
                }
                // create an instance from default export
                if ('__esModule' in actModule === !0 && actModule.hasOwnProperty("default")) {
                    return new actModule.default(attributes);
                }
                // outdated version of module
                if (actModule instanceof Function) {
                    return new actModule(attributes);
                }
                throw new Error("Cannot detect a constructor of the '" + modulePath + "' module.'");
            }, function (reason) {
                throw new Error("Cannot load module '" + modulePath + "'. Reason: " + reason);
            });
        };
        /**
         * Load a list of Action Modules based on xml nodes
         * @param actionNodes A List of xml nodes which describe an action
         */
        XPActionLoader.prototype.loadActions = function (actionNodes) {
            var actions = [];
            for (var index = 0; index < actionNodes.length; index++) {
                var actNode = actionNodes[index];
                var actAttr = {};
                var nodeAttrs = actNode.attributes;
                // create a dynamic object with attributes defined on an XML element
                for (var index_1 = 0; index_1 < nodeAttrs.length; index_1++) {
                    var attr = nodeAttrs[index_1];
                    actAttr[attr.name] = attr.value;
                }
                // check required 'id' attribute, without it we cannot load an action
                if (!('id' in actAttr) || typeof actAttr.id !== "string") {
                    throw new Error("Cannot load action without ID. Action XML: " + actNode.outerHTML);
                }
                // resolve module name based on its id
                var moduleName = Elements_1.ElementPairs.actions[actAttr.id];
                if (!moduleName || moduleName.length <= 0) {
                    throw new Error("Cannot load detect Action Module Name by ID. Please specity it in 'score_ccf/XPerience/Elements' module. Action XML: " + actNode.outerHTML);
                }
                var modulePath = ~moduleName.indexOf('/') ? moduleName : "score_ccf/XPerience/Actions/" + moduleName;
                var actionLoader = this.getModule(modulePath, actAttr);
                actions = actions.concat(actionLoader);
            }
            return actions;
        };
        return XPActionLoader;
    }());
    exports.XPActionLoader = XPActionLoader;
});
//# sourceMappingURL=XPActionLoader.js.map;
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/XPConditionLoader',["require", "exports", "score_ccf/XPerience/Elements", "score_ccf/XPerience/Utils/XPConditionJunction", "promise-polyfill"], factory);
    }
})(function (require, exports) {
    "use strict";
    var __syncRequire = typeof module === "object" && typeof module.exports === "object";
    Object.defineProperty(exports, "__esModule", { value: true });
    var Elements_1 = require("score_ccf/XPerience/Elements");
    var XPConditionJunction_1 = require("score_ccf/XPerience/Utils/XPConditionJunction");
    require("promise-polyfill");
    var XPConditionLoader = /** @class */ (function () {
        function XPConditionLoader() {
        }
        /**
         * Load condition module and create an instance of it
         * @param {string} modulePath path to a module which should be dynamicly loaded
         * @param {XPAttributes} attributes Initial data which will be passed to a loaded module constructor
         */
        XPConditionLoader.prototype.getModule = function (modulePath, attributes) {
            return (__syncRequire ? Promise.resolve().then(function () { return require(modulePath); }) : new Promise(function (resolve_1, reject_1) { require([modulePath], resolve_1, reject_1); })).then(function (condModule) {
                // create an instance of a named export
                if (condModule.hasOwnProperty(Elements_1.ElementPairs.conditions[attributes["id"]])) {
                    return new condModule[Elements_1.ElementPairs.actions[attributes["id"]]](attributes);
                }
                // create an instance from default export
                if ('__esModule' in condModule && condModule.__esModule === !0 && condModule.hasOwnProperty("default")) {
                    return new condModule.default(attributes);
                }
                // outdated version of module
                if (condModule instanceof Function) {
                    return new condModule(attributes);
                }
                throw new Error("Cannot detect a constructor of the '" + modulePath + "' module.'");
            }, function (reason) {
                throw new Error("Cannot load module '" + modulePath + "'. Reason: " + reason);
            });
        };
        /**
         * Load a list of Action Modules based on xml nodes
         * @param actionNodes A List of xml nodes which describe an action
         */
        XPConditionLoader.prototype.loadConditions = function (component, condEls) {
            var conditions = [];
            for (var x = 0; x < condEls.length; x++) {
                var condNode = condEls[x];
                switch (condNode.nodeName) {
                    case '#text':
                        /* do nothing */
                        break;
                    case 'or':
                        /* Junction is a proxy object which calculates passed internal conditions defer object and resolves itself accordingly */
                        conditions = conditions.concat(this.doOrOperation(this.loadConditions(component, condNode.childNodes)));
                        break;
                    case 'and':
                        /* Junction is a proxy object which calculates passed internal conditions defer object and resolves itself accordingly */
                        conditions = conditions.concat(this.doAndOperation(this.loadConditions(component, condNode.childNodes)));
                        break;
                    case 'condition':
                        var condAttr = {};
                        var nodeAttrs = condNode.attributes;
                        // create a dynamic object with attributes defined on an XML element
                        for (var index = 0; index < nodeAttrs.length; index++) {
                            var attr = nodeAttrs[index];
                            condAttr[attr.name] = attr.value;
                        }
                        // check required 'id' attribute, without it we cannot load a condition
                        if (!('id' in condAttr) || typeof condAttr.id !== "string") {
                            throw new Error("Cannot load condition without ID. Condition XML: " + condAttr.outerHTML);
                        }
                        // resolve module name based on its id
                        var moduleName = Elements_1.ElementPairs.conditions[condAttr.id];
                        if (!moduleName || moduleName.length <= 0) {
                            throw new Error("Cannot load detect Condition Module Name by ID. Please specity it in 'score_ccf/XPerience/Elements' module. Condition XML: " + condNode.outerHTML);
                        }
                        var modulePath = ~moduleName.indexOf('/') ? moduleName : "score_ccf/XPerience/Conditions/" + moduleName;
                        conditions = conditions.concat(this.getModule(modulePath, condAttr));
                        break;
                    default:
                        throw new Error("Unsupportable condition element: " + condNode.outerHTML);
                }
            }
            return conditions;
        };
        /**
         * Create a proxy object which handles junction of conditions
         * @param conditions A list of conditions which are going to be joined with "Or" junction
         */
        XPConditionLoader.prototype.doOrOperation = function (conditions) {
            return Promise.resolve(new XPConditionJunction_1.XPConditionOr(conditions));
        };
        /**
         * Create a proxy object which handles junction of conditions
         * @param conditions A list of conditions which are going to be joined with "And" junction
         */
        XPConditionLoader.prototype.doAndOperation = function (conditions) {
            return Promise.resolve(new XPConditionJunction_1.XPConditionAnd(conditions));
        };
        return XPConditionLoader;
    }());
    exports.XPConditionLoader = XPConditionLoader;
});
//# sourceMappingURL=XPConditionLoader.js.map;
/**
 * @license BrainJocks XperienceRuleLoader
 * https://brainjocks.atlassian.net/wiki/spaces/SDD/pages/217972958
 * Copyright 2017
 */
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define('score_ccf/XPerience/XPRuleLoader',["require", "exports", "score_ccf/XPerience/XPActionLoader", "score_ccf/XPerience/XPConditionLoader", "score_ccf/XPerience/Enums/XPEnums", "promise-polyfill"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var XPActionLoader_1 = require("score_ccf/XPerience/XPActionLoader");
    var XPConditionLoader_1 = require("score_ccf/XPerience/XPConditionLoader");
    var XPEnums_1 = require("score_ccf/XPerience/Enums/XPEnums");
    require("promise-polyfill"); // polyfill
    /**
     * Responsible to parse XP Rules and load required conditions and actions.
     */
    var XPRuleLoader = /** @class */ (function () {
        function XPRuleLoader(actionLoader, conditionLoader) {
            if (actionLoader === void 0) { actionLoader = new XPActionLoader_1.XPActionLoader(); }
            if (conditionLoader === void 0) { conditionLoader = new XPConditionLoader_1.XPConditionLoader(); }
            this._actionLoader = actionLoader;
            this._conditionLoader = conditionLoader;
        }
        /**
         * Apply XP Rule xml to a component
         * @param {UXModuleLike} component An instance of a UXModule component to scope the rules
         * @param {string} xml xml structure which defines XP Rule.
         */
        XPRuleLoader.prototype.applyRules = function (component, xml) {
            // TODO: expose hook for custom actions/conditions
            if (!component.scope || !(component.scope instanceof HTMLElement)) {
                throw new Error('Components which does not have \'scope\' property are not supported. Please extend your component with scope property.');
            }
            // don't do anything if xml rule is not a string or empty
            if (!xml || typeof xml !== "string" || xml.length <= 0) {
                return;
            }
            // insure component has a marker that indicates XP Rules in loading
            component.scope.setAttribute('data-xpr-state', XPEnums_1.XPModuleState.InProcess);
            var rulesDoc = new DOMParser().parseFromString(xml, 'text/xml');
            if (rulesDoc.querySelector('action, condition') == null) {
                // no condition or action was found, just skip the whole logic and return
                component.scope.setAttribute('data-xpr-state', XPEnums_1.XPModuleState.Loaded);
                return;
            }
            var rulesPromises = [];
            var rules = rulesDoc.querySelectorAll('rule');
            for (var index = 0; index < rules.length; index++) {
                var ruleEl = rules[index];
                // get promises with action module instances
                var actions = this._actionLoader.loadActions(ruleEl.querySelectorAll('action'));
                // get promises with condition module instances
                var conditions = this._conditionLoader.loadConditions(component, ruleEl.querySelector('conditions').childNodes);
                // set an array with promises 
                rulesPromises = rulesPromises.concat(this.runRule(conditions, actions, component));
            }
            // when all xp rule condition were loaded (modules loaded) mark current component as xp rule loaded.
            Promise.all(rulesPromises).then(function () {
                component.scope.setAttribute('data-xpr-state', XPEnums_1.XPModuleState.Loaded);
            }, function (reason) {
                // mark component as XP Rules failed.
                component.scope.setAttribute('data-xpr-state', XPEnums_1.XPModuleState.Failed);
                throw new Error(reason);
            });
        };
        /**
         * Run one particular rule. Wait until conditions will be computed and run actions after that.
         * @param {Promise<XPCondition>[]} conditions An Arrya of conditions which will be attached to a component
         * @param {Promise<XPAction>[]} actions An Array of actions which can be executed in scope of a component
         * @param {UXModuleLike} component An instance of a UXModule component to scope the rule
         */
        XPRuleLoader.prototype.runRule = function (conditions, actions, component) {
            var _this = this;
            if (conditions.length === 0 && actions.length === 0) {
                // handle case when XP Rule was removed from a component
                return Promise.resolve();
            }
            return Promise.all(conditions).then(function (condModules) {
                var condsDefs = [];
                for (var x = 0; x < condModules.length; x++) {
                    var condModule = condModules[x];
                    // setup a condition
                    condModule.setup(component);
                    // get a condition defer object which indicates is condition computed or not
                    condsDefs = condsDefs.concat(condModule.defer);
                }
                // wait until the conditions computed.
                Promise.all(condsDefs).then(function (values) {
                    if (values.every(function (v) { return v === !0; })) {
                        Promise.all(actions).then(function (actionModules) {
                            // execute actions
                            actionModules.forEach(function (actionModule) { actionModule.execute(component); });
                            // reset conditions to run them more than once per page view
                            condModules.forEach(function (condModule) { condModule.reset(); });
                            _this.runRule(conditions, actions, component);
                        });
                    }
                    else {
                        // reset conditions to run them more than once per page view
                        condModules.forEach(function (condModule) { condModule.reset(); });
                        _this.runRule(conditions, actions, component);
                    }
                });
            });
        };
        return XPRuleLoader;
    }());
    exports.XPRuleLoader = XPRuleLoader;
});
//# sourceMappingURL=XPRuleLoader.js.map;
/** @license
 * RequireJS plugin for async dependency load like JSONP and Google Maps
 * Author: Miller Medeiros
 * Version: 0.1.2 (2014/02/24)
 * Released under the MIT license
 */
define('async',[],function(){

    var DEFAULT_PARAM_NAME = 'callback',
        _uid = 0;

    function injectScript(src){
        var s, t;
        s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = src;
        t = document.getElementsByTagName('script')[0]; t.parentNode.insertBefore(s,t);
    }

    function formatUrl(name, id){
        var paramRegex = /!(.+)/,
            url = name.replace(paramRegex, ''),
            param = (paramRegex.test(name))? name.replace(/.+!/, '') : DEFAULT_PARAM_NAME;
        url += (url.indexOf('?') < 0)? '?' : '&';
        return url + param +'='+ id;
    }

    function uid() {
        _uid += 1;
        return '__async_req_'+ _uid +'__';
    }

    return{
        load : function(name, req, onLoad, config){
            if(config.isBuild){
                onLoad(null); //avoid errors on the optimizer
            }else{
                var id = uid();
                //create a global variable that stores onLoad so callback
                //function can define new module after async load
                window[id] = onLoad;
                injectScript(formatUrl(req.toUrl(name), id));
            }
        }
    };
});

/** @license
 * Plugin to load JS files that have dependencies but aren't wrapped into
 * `define` calls.
 * Author: Miller Medeiros
 * Version: 0.1.0 (2011/12/13)
 * Released under the MIT license
 */
define('depend',[],function () {

    var rParts = /^(.*)\[([^\]]*)\]$/;

    return {

        //example: depend!bar[jquery,lib/foo]
        load : function(name, req, onLoad, config){
            var parts = rParts.exec(name);

            req(parts[2].split(','), function(){
                req([parts[1]], function(mod){
                    onLoad(mod);
                });
            });
        }

    };

});

/**
 * Basic parser for URL properties
 * @author Miller Medeiros
 * @version 0.1.0 (2011/12/06)
 * MIT license
 */
define('propertyParser',[],function(){

    var rProps = /([\w-]+)\s*:\s*(?:(\[[^\]]+\])|([^,]+)),?/g, //match "foo:bar" and "lorem:[ipsum,dolor]" capturing name as $1 and val as $2 or $3
        rArr = /^\[([^\]]+)\]$/; //match "[foo,bar]" capturing "foo,bar"

    function parseProperties(str){
        var match, obj = {};
        while (match = rProps.exec(str)) {
            obj[ match[1] ] = typecastVal(match[2] || match[3]);
        }
        return obj;
    }

    function typecastVal(val){
        if (rArr.test(val)){
            val = val.replace(rArr, '$1').split(',');
        } else if (val === 'null'){
            val = null;
        } else if (val === 'false'){
            val = false;
        } else if (val === 'true'){
            val = true;
        } else if (val === '' || val === "''" || val === '""'){
            val = '';
        } else if (! isNaN(val)) {
            //isNaN('') == false
            val = +val;
        }
        return val;
    }

    //API
    return {
        parseProperties : parseProperties,
        typecastVal : typecastVal
    };
});

/** @license
 * RequireJS plugin for loading web fonts using the WebFont Loader
 * Author: Miller Medeiros
 * Version: 0.2.0 (2011/12/06)
 * Released under the MIT license
 */
define('font',['propertyParser'], function (propertyParser) {

    var rParts = /^([^,]+),([^\|]+)\|?/;

    function parseName(name) {
        var data = {},
            vendors = name.split('|'),
            n = vendors.length,
            match;

        while (n--) {
            match = rParts.exec(vendors[n]);
            data[ match[1] ] = propertyParser.parseProperties(match[2]);
        }
        return data;
    }

    // API
    return {

        //example: font!google,families:[Tangerine,Cantarell,Yanone Kaffeesatz:700]
        load : function(name, req, onLoad, config){
            if (config.isBuild) {
                onLoad(null); //avoid errors on the optimizer
            } else {
                var data = parseName(name);
                data.active = onLoad;
                data.inactive = function(){
                    onLoad(false);
                };
                req([(document.location.protocol === 'https:'? 'https' : 'http') +'://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js'], function(){
                    WebFont.load(data);
                });
            }
        }

    };

});

/** @license
 * RequireJS plugin for loading Google Ajax API modules thru `google.load`
 * Author: Miller Medeiros
 * Version: 0.2.0 (2011/12/06)
 * Released under the MIT license
 */
define('goog',['async', 'propertyParser'], function (async, propertyParser) {

    var rParts = /^([^,]+)(?:,([^,]+))?(?:,(.+))?/;

    function parseName(name){
        var match = rParts.exec(name),
            data = {
                moduleName : match[1],
                version : match[2] || '1'
            };
        data.settings = propertyParser.parseProperties(match[3]);
        return data;
    }

    return {
        load : function(name, req, onLoad, config){
            if (config.isBuild) {
                onLoad(null); //avoid errors on the optimizer
            } else {
                var data = parseName(name),
                    settings = data.settings;

                settings.callback = onLoad;

                req(['async!'+ (document.location.protocol === 'https:'? 'https' : 'http') +'://www.google.com/jsapi'], function(){
                    google.load(data.moduleName, data.version, settings);
                });
            }
        }
    };

});

/** @license
 * RequireJS Image Plugin
 * Author: Miller Medeiros
 * Version: 0.2.2 (2013/02/08)
 * Released under the MIT license
 */
define('image',[],function(){

    var CACHE_BUST_QUERY_PARAM = 'bust',
        CACHE_BUST_FLAG = '!bust',
        RELATIVE_FLAG = '!rel';

    function noop(){}

    function cacheBust(url){
        url = url.replace(CACHE_BUST_FLAG, '');
        url += (url.indexOf('?') < 0)? '?' : '&';
        return url + CACHE_BUST_QUERY_PARAM +'='+ Math.round(2147483647 * Math.random());
    }

    return {
        load : function(name, req, onLoad, config){
            var img;
            if(config.isBuild){
                onLoad(null); //avoid errors on the optimizer since it can't inline image files
            }else{
                img = new Image();
                img.onerror = function (err) {
                    onLoad.error(err);
                };
                img.onload = function(evt){
                    onLoad(img);
                    try {
                        delete img.onload; //release memory - suggested by John Hann
                    } catch(err) {
                        img.onload = noop; // IE7 :(
                    }
                };
                if (name.indexOf(RELATIVE_FLAG) !== -1) {
                    //load image relative to module path / baseUrl
                    img.src = req.toUrl( name.replace(RELATIVE_FLAG, '') );
                } else {
                    img.src = name;
                }
            }
        },
        normalize : function (name, normalize) {
            //used normalize to avoid caching references to a "cache busted" request
            return (name.indexOf(CACHE_BUST_FLAG) === -1)? name : cacheBust(name);
        }
    };

});

/**
 * @license text 2.0.15 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */
/*jslint regexp: true */
/*global require, XMLHttpRequest, ActiveXObject,
  define, window, process, Packages,
  java, location, Components, FileUtils */

define('text',['module'], function (module) {
    'use strict';

    var text, fs, Cc, Ci, xpcIsWindows,
        progIds = ['Msxml2.XMLHTTP', 'Microsoft.XMLHTTP', 'Msxml2.XMLHTTP.4.0'],
        xmlRegExp = /^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,
        bodyRegExp = /<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,
        hasLocation = typeof location !== 'undefined' && location.href,
        defaultProtocol = hasLocation && location.protocol && location.protocol.replace(/\:/, ''),
        defaultHostName = hasLocation && location.hostname,
        defaultPort = hasLocation && (location.port || undefined),
        buildMap = {},
        masterConfig = (module.config && module.config()) || {};

    function useDefault(value, defaultValue) {
        return value === undefined || value === '' ? defaultValue : value;
    }

    //Allow for default ports for http and https.
    function isSamePort(protocol1, port1, protocol2, port2) {
        if (port1 === port2) {
            return true;
        } else if (protocol1 === protocol2) {
            if (protocol1 === 'http') {
                return useDefault(port1, '80') === useDefault(port2, '80');
            } else if (protocol1 === 'https') {
                return useDefault(port1, '443') === useDefault(port2, '443');
            }
        }
        return false;
    }

    text = {
        version: '2.0.15',

        strip: function (content) {
            //Strips <?xml ...?> declarations so that external SVG and XML
            //documents can be added to a document without worry. Also, if the string
            //is an HTML document, only the part inside the body tag is returned.
            if (content) {
                content = content.replace(xmlRegExp, "");
                var matches = content.match(bodyRegExp);
                if (matches) {
                    content = matches[1];
                }
            } else {
                content = "";
            }
            return content;
        },

        jsEscape: function (content) {
            return content.replace(/(['\\])/g, '\\$1')
                .replace(/[\f]/g, "\\f")
                .replace(/[\b]/g, "\\b")
                .replace(/[\n]/g, "\\n")
                .replace(/[\t]/g, "\\t")
                .replace(/[\r]/g, "\\r")
                .replace(/[\u2028]/g, "\\u2028")
                .replace(/[\u2029]/g, "\\u2029");
        },

        createXhr: masterConfig.createXhr || function () {
            //Would love to dump the ActiveX crap in here. Need IE 6 to die first.
            var xhr, i, progId;
            if (typeof XMLHttpRequest !== "undefined") {
                return new XMLHttpRequest();
            } else if (typeof ActiveXObject !== "undefined") {
                for (i = 0; i < 3; i += 1) {
                    progId = progIds[i];
                    try {
                        xhr = new ActiveXObject(progId);
                    } catch (e) {}

                    if (xhr) {
                        progIds = [progId];  // so faster next time
                        break;
                    }
                }
            }

            return xhr;
        },

        /**
         * Parses a resource name into its component parts. Resource names
         * look like: module/name.ext!strip, where the !strip part is
         * optional.
         * @param {String} name the resource name
         * @returns {Object} with properties "moduleName", "ext" and "strip"
         * where strip is a boolean.
         */
        parseName: function (name) {
            var modName, ext, temp,
                strip = false,
                index = name.lastIndexOf("."),
                isRelative = name.indexOf('./') === 0 ||
                             name.indexOf('../') === 0;

            if (index !== -1 && (!isRelative || index > 1)) {
                modName = name.substring(0, index);
                ext = name.substring(index + 1);
            } else {
                modName = name;
            }

            temp = ext || modName;
            index = temp.indexOf("!");
            if (index !== -1) {
                //Pull off the strip arg.
                strip = temp.substring(index + 1) === "strip";
                temp = temp.substring(0, index);
                if (ext) {
                    ext = temp;
                } else {
                    modName = temp;
                }
            }

            return {
                moduleName: modName,
                ext: ext,
                strip: strip
            };
        },

        xdRegExp: /^((\w+)\:)?\/\/([^\/\\]+)/,

        /**
         * Is an URL on another domain. Only works for browser use, returns
         * false in non-browser environments. Only used to know if an
         * optimized .js version of a text resource should be loaded
         * instead.
         * @param {String} url
         * @returns Boolean
         */
        useXhr: function (url, protocol, hostname, port) {
            var uProtocol, uHostName, uPort,
                match = text.xdRegExp.exec(url);
            if (!match) {
                return true;
            }
            uProtocol = match[2];
            uHostName = match[3];

            uHostName = uHostName.split(':');
            uPort = uHostName[1];
            uHostName = uHostName[0];

            return (!uProtocol || uProtocol === protocol) &&
                   (!uHostName || uHostName.toLowerCase() === hostname.toLowerCase()) &&
                   ((!uPort && !uHostName) || isSamePort(uProtocol, uPort, protocol, port));
        },

        finishLoad: function (name, strip, content, onLoad) {
            content = strip ? text.strip(content) : content;
            if (masterConfig.isBuild) {
                buildMap[name] = content;
            }
            onLoad(content);
        },

        load: function (name, req, onLoad, config) {
            //Name has format: some.module.filext!strip
            //The strip part is optional.
            //if strip is present, then that means only get the string contents
            //inside a body tag in an HTML string. For XML/SVG content it means
            //removing the <?xml ...?> declarations so the content can be inserted
            //into the current doc without problems.

            // Do not bother with the work if a build and text will
            // not be inlined.
            if (config && config.isBuild && !config.inlineText) {
                onLoad();
                return;
            }

            masterConfig.isBuild = config && config.isBuild;

            var parsed = text.parseName(name),
                nonStripName = parsed.moduleName +
                    (parsed.ext ? '.' + parsed.ext : ''),
                url = req.toUrl(nonStripName),
                useXhr = (masterConfig.useXhr) ||
                         text.useXhr;

            // Do not load if it is an empty: url
            if (url.indexOf('empty:') === 0) {
                onLoad();
                return;
            }

            //Load the text. Use XHR if possible and in a browser.
            if (!hasLocation || useXhr(url, defaultProtocol, defaultHostName, defaultPort)) {
                text.get(url, function (content) {
                    text.finishLoad(name, parsed.strip, content, onLoad);
                }, function (err) {
                    if (onLoad.error) {
                        onLoad.error(err);
                    }
                });
            } else {
                //Need to fetch the resource across domains. Assume
                //the resource has been optimized into a JS module. Fetch
                //by the module name + extension, but do not include the
                //!strip part to avoid file system issues.
                req([nonStripName], function (content) {
                    text.finishLoad(parsed.moduleName + '.' + parsed.ext,
                                    parsed.strip, content, onLoad);
                });
            }
        },

        write: function (pluginName, moduleName, write, config) {
            if (buildMap.hasOwnProperty(moduleName)) {
                var content = text.jsEscape(buildMap[moduleName]);
                write.asModule(pluginName + "!" + moduleName,
                               "define(function () { return '" +
                                   content +
                               "';});\n");
            }
        },

        writeFile: function (pluginName, moduleName, req, write, config) {
            var parsed = text.parseName(moduleName),
                extPart = parsed.ext ? '.' + parsed.ext : '',
                nonStripName = parsed.moduleName + extPart,
                //Use a '.js' file name so that it indicates it is a
                //script that can be loaded across domains.
                fileName = req.toUrl(parsed.moduleName + extPart) + '.js';

            //Leverage own load() method to load plugin value, but only
            //write out values that do not have the strip argument,
            //to avoid any potential issues with ! in file names.
            text.load(nonStripName, req, function (value) {
                //Use own write() method to construct full module value.
                //But need to create shell that translates writeFile's
                //write() to the right interface.
                var textWrite = function (contents) {
                    return write(fileName, contents);
                };
                textWrite.asModule = function (moduleName, contents) {
                    return write.asModule(moduleName, fileName, contents);
                };

                text.write(pluginName, nonStripName, textWrite, config);
            }, config);
        }
    };

    if (masterConfig.env === 'node' || (!masterConfig.env &&
            typeof process !== "undefined" &&
            process.versions &&
            !!process.versions.node &&
            !process.versions['node-webkit'] &&
            !process.versions['atom-shell'])) {
        //Using special require.nodeRequire, something added by r.js.
        fs = require.nodeRequire('fs');

        text.get = function (url, callback, errback) {
            try {
                var file = fs.readFileSync(url, 'utf8');
                //Remove BOM (Byte Mark Order) from utf8 files if it is there.
                if (file[0] === '\uFEFF') {
                    file = file.substring(1);
                }
                callback(file);
            } catch (e) {
                if (errback) {
                    errback(e);
                }
            }
        };
    } else if (masterConfig.env === 'xhr' || (!masterConfig.env &&
            text.createXhr())) {
        text.get = function (url, callback, errback, headers) {
            var xhr = text.createXhr(), header;
            xhr.open('GET', url, true);

            //Allow plugins direct access to xhr headers
            if (headers) {
                for (header in headers) {
                    if (headers.hasOwnProperty(header)) {
                        xhr.setRequestHeader(header.toLowerCase(), headers[header]);
                    }
                }
            }

            //Allow overrides specified in config
            if (masterConfig.onXhr) {
                masterConfig.onXhr(xhr, url);
            }

            xhr.onreadystatechange = function (evt) {
                var status, err;
                //Do not explicitly handle errors, those should be
                //visible via console output in the browser.
                if (xhr.readyState === 4) {
                    status = xhr.status || 0;
                    if (status > 399 && status < 600) {
                        //An http 4xx or 5xx error. Signal an error.
                        err = new Error(url + ' HTTP status: ' + status);
                        err.xhr = xhr;
                        if (errback) {
                            errback(err);
                        }
                    } else {
                        callback(xhr.responseText);
                    }

                    if (masterConfig.onXhrComplete) {
                        masterConfig.onXhrComplete(xhr, url);
                    }
                }
            };
            xhr.send(null);
        };
    } else if (masterConfig.env === 'rhino' || (!masterConfig.env &&
            typeof Packages !== 'undefined' && typeof java !== 'undefined')) {
        //Why Java, why is this so awkward?
        text.get = function (url, callback) {
            var stringBuffer, line,
                encoding = "utf-8",
                file = new java.io.File(url),
                lineSeparator = java.lang.System.getProperty("line.separator"),
                input = new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(file), encoding)),
                content = '';
            try {
                stringBuffer = new java.lang.StringBuffer();
                line = input.readLine();

                // Byte Order Mark (BOM) - The Unicode Standard, version 3.0, page 324
                // http://www.unicode.org/faq/utf_bom.html

                // Note that when we use utf-8, the BOM should appear as "EF BB BF", but it doesn't due to this bug in the JDK:
                // http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4508058
                if (line && line.length() && line.charAt(0) === 0xfeff) {
                    // Eat the BOM, since we've already found the encoding on this file,
                    // and we plan to concatenating this buffer with others; the BOM should
                    // only appear at the top of a file.
                    line = line.substring(1);
                }

                if (line !== null) {
                    stringBuffer.append(line);
                }

                while ((line = input.readLine()) !== null) {
                    stringBuffer.append(lineSeparator);
                    stringBuffer.append(line);
                }
                //Make sure we return a JavaScript string and not a Java string.
                content = String(stringBuffer.toString()); //String
            } finally {
                input.close();
            }
            callback(content);
        };
    } else if (masterConfig.env === 'xpconnect' || (!masterConfig.env &&
            typeof Components !== 'undefined' && Components.classes &&
            Components.interfaces)) {
        //Avert your gaze!
        Cc = Components.classes;
        Ci = Components.interfaces;
        Components.utils['import']('resource://gre/modules/FileUtils.jsm');
        xpcIsWindows = ('@mozilla.org/windows-registry-key;1' in Cc);

        text.get = function (url, callback) {
            var inStream, convertStream, fileObj,
                readData = {};

            if (xpcIsWindows) {
                url = url.replace(/\//g, '\\');
            }

            fileObj = new FileUtils.File(url);

            //XPCOM, you so crazy
            try {
                inStream = Cc['@mozilla.org/network/file-input-stream;1']
                           .createInstance(Ci.nsIFileInputStream);
                inStream.init(fileObj, 1, 0, false);

                convertStream = Cc['@mozilla.org/intl/converter-input-stream;1']
                                .createInstance(Ci.nsIConverterInputStream);
                convertStream.init(inStream, "utf-8", inStream.available(),
                Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER);

                convertStream.readString(inStream.available(), readData);
                convertStream.close();
                inStream.close();
                callback(readData.value);
            } catch (e) {
                throw new Error((fileObj && fileObj.path || '') + ': ' + e);
            }
        };
    }
    return text;
});

/** @license
 * RequireJS plugin for loading JSON files
 * - depends on Text plugin and it was HEAVILY "inspired" by it as well.
 * Author: Miller Medeiros
 * Version: 0.4.0 (2014/04/10)
 * Released under the MIT license
 */
define('json',['text'], function(text){

    var CACHE_BUST_QUERY_PARAM = 'bust',
        CACHE_BUST_FLAG = '!bust',
        jsonParse = (typeof JSON !== 'undefined' && typeof JSON.parse === 'function')? JSON.parse : function(val){
            return eval('('+ val +')'); //quick and dirty
        },
        buildMap = {};

    function cacheBust(url){
        url = url.replace(CACHE_BUST_FLAG, '');
        url += (url.indexOf('?') < 0)? '?' : '&';
        return url + CACHE_BUST_QUERY_PARAM +'='+ Math.round(2147483647 * Math.random());
    }

    //API
    return {

        load : function(name, req, onLoad, config) {
            if (( config.isBuild && (config.inlineJSON === false || name.indexOf(CACHE_BUST_QUERY_PARAM +'=') !== -1)) || (req.toUrl(name).indexOf('empty:') === 0)) {
                //avoid inlining cache busted JSON or if inlineJSON:false
                //and don't inline files marked as empty!
                onLoad(null);
            } else {
                text.get(req.toUrl(name), function(data){
                    var parsed;
                    if (config.isBuild) {
                        buildMap[name] = data;
                        onLoad(data);
                    } else {
                        try {
                            parsed = jsonParse(data);
                        } catch (e) {
                            onLoad.error(e);
                        }
                        onLoad(parsed);
                    }
                },
                    onLoad.error, {
                        accept: 'application/json'
                    }
                );
            }
        },

        normalize : function (name, normalize) {
            // used normalize to avoid caching references to a "cache busted" request
            if (name.indexOf(CACHE_BUST_FLAG) !== -1) {
                name = cacheBust(name);
            }
            // resolve any relative paths
            return normalize(name);
        },

        //write method based on RequireJS official text plugin by James Burke
        //https://github.com/jrburke/requirejs/blob/master/text.js
        write : function(pluginName, moduleName, write){
            if(moduleName in buildMap){
                var content = buildMap[moduleName];
                write('define("'+ pluginName +'!'+ moduleName +'", function(){ return '+ content +';});\n');
            }
        }

    };
});

/** @license
 * RequireJS plugin for loading files without adding the JS extension, useful for
 * JSONP services and any other kind of resource that already contain a file
 * extension or that shouldn't have one (like dynamic scripts).
 * Author: Miller Medeiros
 * Version: 0.3.1 (2011/12/07)
 * Released under the MIT license
 */
define('noext',[],function(){

    var QUERY_PARAM = 'noext';

    //API
    return {
        load : function(name, req, onLoad, config){
            req([req.toUrl(name)], function(mod){
                onLoad(mod);
            });
        },
        normalize : function(name, norm){
            //append query string to avoid adding .js extension
            //needs to be on normalize otherwise it won't work after build
            name += (name.indexOf('?') < 0)? '?' : '&';
            return name + QUERY_PARAM +'=1';
        }

    };
});

(function(root) {
define("bootstrap", ["jquery"], function() {
  return (function() {
/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under the MIT license
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function($){"use strict";var t=$.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function($){"use strict";function t(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}$.fn.emulateTransitionEnd=function(t){var e=!1,i=this;$(this).one("bsTransitionEnd",function(){e=!0});var o=function(){e||$(i).trigger($.support.transition.end)};return setTimeout(o,t),this},$(function(){$.support.transition=t(),$.support.transition&&($.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(t){if($(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function($){"use strict";function t(t){return this.each(function(){var e=$(this),o=e.data("bs.alert");o||e.data("bs.alert",o=new i(this)),"string"==typeof t&&o[t].call(e)})}var e='[data-dismiss="alert"]',i=function(t){$(t).on("click",e,this.close)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.close=function(t){function e(){s.detach().trigger("closed.bs.alert").remove()}var o=$(this),n=o.attr("data-target");n||(n=o.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,""));var s=$("#"===n?[]:n);t&&t.preventDefault(),s.length||(s=o.closest(".alert")),s.trigger(t=$.Event("close.bs.alert")),t.isDefaultPrevented()||(s.removeClass("in"),$.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",e).emulateTransitionEnd(i.TRANSITION_DURATION):e())};var o=$.fn.alert;$.fn.alert=t,$.fn.alert.Constructor=i,$.fn.alert.noConflict=function(){return $.fn.alert=o,this},$(document).on("click.bs.alert.data-api",e,i.prototype.close)}(jQuery),+function($){"use strict";function t(t){return this.each(function(){var i=$(this),o=i.data("bs.button"),n="object"==typeof t&&t;o||i.data("bs.button",o=new e(this,n)),"toggle"==t?o.toggle():t&&o.setState(t)})}var e=function(t,i){this.$element=$(t),this.options=$.extend({},e.DEFAULTS,i),this.isLoading=!1};e.VERSION="3.3.7",e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(t){var e="disabled",i=this.$element,o=i.is("input")?"val":"html",n=i.data();t+="Text",null==n.resetText&&i.data("resetText",i[o]()),setTimeout($.proxy(function(){i[o](null==n[t]?this.options[t]:n[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(e).attr(e,e).prop(e,!0)):this.isLoading&&(this.isLoading=!1,i.removeClass(e).removeAttr(e).prop(e,!1))},this),0)},e.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var i=$.fn.button;$.fn.button=t,$.fn.button.Constructor=e,$.fn.button.noConflict=function(){return $.fn.button=i,this},$(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var i=$(e.target).closest(".btn");t.call(i,"toggle"),$(e.target).is('input[type="radio"], input[type="checkbox"]')||(e.preventDefault(),i.is("input,button")?i.trigger("focus"):i.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){$(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function($){"use strict";function t(t){return this.each(function(){var i=$(this),o=i.data("bs.carousel"),n=$.extend({},e.DEFAULTS,i.data(),"object"==typeof t&&t),s="string"==typeof t?t:n.slide;o||i.data("bs.carousel",o=new e(this,n)),"number"==typeof t?o.to(t):s?o[s]():n.interval&&o.pause().cycle()})}var e=function(t,e){this.$element=$(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",$.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",$.proxy(this.pause,this)).on("mouseleave.bs.carousel",$.proxy(this.cycle,this))};e.VERSION="3.3.7",e.TRANSITION_DURATION=600,e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},e.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},e.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval)),this},e.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},e.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),o="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(o&&!this.options.wrap)return e;var n="prev"==t?-1:1,s=(i+n)%this.$items.length;return this.$items.eq(s)},e.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},e.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&$.support.transition&&(this.$element.trigger($.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){if(!this.sliding)return this.slide("next")},e.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},e.prototype.slide=function(t,i){var o=this.$element.find(".item.active"),n=i||this.getItemForDirection(t,o),s=this.interval,a="next"==t?"left":"right",r=this;if(n.hasClass("active"))return this.sliding=!1;var l=n[0],h=$.Event("slide.bs.carousel",{relatedTarget:l,direction:a});if(this.$element.trigger(h),!h.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=$(this.$indicators.children()[this.getItemIndex(n)]);d&&d.addClass("active")}var p=$.Event("slid.bs.carousel",{relatedTarget:l,direction:a});return $.support.transition&&this.$element.hasClass("slide")?(n.addClass(t),n[0].offsetWidth,o.addClass(a),n.addClass(a),o.one("bsTransitionEnd",function(){n.removeClass([t,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),r.sliding=!1,setTimeout(function(){r.$element.trigger(p)},0)}).emulateTransitionEnd(e.TRANSITION_DURATION)):(o.removeClass("active"),n.addClass("active"),this.sliding=!1,this.$element.trigger(p)),s&&this.cycle(),this}};var i=$.fn.carousel;$.fn.carousel=t,$.fn.carousel.Constructor=e,$.fn.carousel.noConflict=function(){return $.fn.carousel=i,this};var o=function(e){var i,o=$(this),n=$(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(n.hasClass("carousel")){var s=$.extend({},n.data(),o.data()),a=o.attr("data-slide-to");a&&(s.interval=!1),t.call(n,s),a&&n.data("bs.carousel").to(a),e.preventDefault()}};$(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),$(window).on("load",function(){$('[data-ride="carousel"]').each(function(){var e=$(this);t.call(e,e.data())})})}(jQuery),+function($){"use strict";function t(t){var e,i=t.attr("data-target")||(e=t.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"");return $(i)}function e(t){return this.each(function(){var e=$(this),o=e.data("bs.collapse"),n=$.extend({},i.DEFAULTS,e.data(),"object"==typeof t&&t);!o&&n.toggle&&/show|hide/.test(t)&&(n.toggle=!1),o||e.data("bs.collapse",o=new i(this,n)),"string"==typeof t&&o[t]()})}var i=function(t,e){this.$element=$(t),this.options=$.extend({},i.DEFAULTS,e),this.$trigger=$('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.7",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(t=o.data("bs.collapse"),t&&t.transitioning))){var n=$.Event("show.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){o&&o.length&&(e.call(o,"hide"),t||o.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return a.call(this);var r=$.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",$.proxy(a,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[s](this.$element[0][r])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=$.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var e=this.dimension();this.$element[e](this.$element[e]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return $.support.transition?void this.$element[e](0).one("bsTransitionEnd",$.proxy(o,this)).emulateTransitionEnd(i.TRANSITION_DURATION):o.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return $(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each($.proxy(function(e,i){var o=$(i);this.addAriaAndCollapsedClass(t(o),o)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var o=$.fn.collapse;$.fn.collapse=e,$.fn.collapse.Constructor=i,$.fn.collapse.noConflict=function(){return $.fn.collapse=o,this},$(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var o=$(this);o.attr("data-target")||i.preventDefault();var n=t(o),s=n.data("bs.collapse"),a=s?"toggle":o.data();e.call(n,a)})}(jQuery),+function($){"use strict";function t(t){var e=t.attr("data-target");e||(e=t.attr("href"),e=e&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var i=e&&$(e);return i&&i.length?i:t.parent()}function e(e){e&&3===e.which||($(o).remove(),$(n).each(function(){var i=$(this),o=t(i),n={relatedTarget:this};o.hasClass("open")&&(e&&"click"==e.type&&/input|textarea/i.test(e.target.tagName)&&$.contains(o[0],e.target)||(o.trigger(e=$.Event("hide.bs.dropdown",n)),e.isDefaultPrevented()||(i.attr("aria-expanded","false"),o.removeClass("open").trigger($.Event("hidden.bs.dropdown",n)))))}))}function i(t){return this.each(function(){var e=$(this),i=e.data("bs.dropdown");i||e.data("bs.dropdown",i=new s(this)),"string"==typeof t&&i[t].call(e)})}var o=".dropdown-backdrop",n='[data-toggle="dropdown"]',s=function(t){$(t).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.7",s.prototype.toggle=function(i){var o=$(this);if(!o.is(".disabled, :disabled")){var n=t(o),s=n.hasClass("open");if(e(),!s){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&$(document.createElement("div")).addClass("dropdown-backdrop").insertAfter($(this)).on("click",e);var a={relatedTarget:this};if(n.trigger(i=$.Event("show.bs.dropdown",a)),i.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger($.Event("shown.bs.dropdown",a))}return!1}},s.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var i=$(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var o=t(i),s=o.hasClass("open");if(!s&&27!=e.which||s&&27==e.which)return 27==e.which&&o.find(n).trigger("focus"),i.trigger("click");var a=" li:not(.disabled):visible a",r=o.find(".dropdown-menu"+a);if(r.length){var l=r.index(e.target);38==e.which&&l>0&&l--,40==e.which&&l<r.length-1&&l++,~l||(l=0),r.eq(l).trigger("focus")}}}};var a=$.fn.dropdown;$.fn.dropdown=i,$.fn.dropdown.Constructor=s,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=a,this},$(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",n,s.prototype.toggle).on("keydown.bs.dropdown.data-api",n,s.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",s.prototype.keydown)}(jQuery),+function($){"use strict";function t(t,i){return this.each(function(){var o=$(this),n=o.data("bs.modal"),s=$.extend({},e.DEFAULTS,o.data(),"object"==typeof t&&t);n||o.data("bs.modal",n=new e(this,s)),"string"==typeof t?n[t](i):s.show&&n.show(i)})}var e=function(t,e){this.options=e,this.$body=$(document.body),this.$element=$(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};e.VERSION="3.3.7",e.TRANSITION_DURATION=300,e.BACKDROP_TRANSITION_DURATION=150,e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},e.prototype.show=function(t){var i=this,o=$.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(t){$(t.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=$.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),o&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var n=$.Event("shown.bs.modal",{relatedTarget:t});o?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(n)}).emulateTransitionEnd(e.TRANSITION_DURATION):i.$element.trigger("focus").trigger(n)}))},e.prototype.hide=function(t){t&&t.preventDefault(),t=$.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),$(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),$.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",$.proxy(this.hideModal,this)).emulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal())},e.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",$.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},e.prototype.resize=function(){this.isShown?$(window).on("resize.bs.modal",$.proxy(this.handleUpdate,this)):$(window).off("resize.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(t){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=$.support.transition&&o;if(this.$backdrop=$(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",$.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;n?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){i.removeBackdrop(),t&&t()};$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):s()}else t&&t()},e.prototype.handleUpdate=function(){this.adjustDialog()},e.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},e.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},e.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},e.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},e.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},e.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=$.fn.modal;$.fn.modal=t,$.fn.modal.Constructor=e,$.fn.modal.noConflict=function(){return $.fn.modal=i,this},$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var i=$(this),o=i.attr("href"),n=$(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),s=n.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(o)&&o},n.data(),i.data());i.is("a")&&e.preventDefault(),n.one("show.bs.modal",function(t){t.isDefaultPrevented()||n.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),t.call(n,s,this)})}(jQuery),+function($){"use strict";function t(t){return this.each(function(){var i=$(this),o=i.data("bs.tooltip"),n="object"==typeof t&&t;!o&&/destroy|hide/.test(t)||(o||i.data("bs.tooltip",o=new e(this,n)),"string"==typeof t&&o[t]())})}var e=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};e.VERSION="3.3.7",e.TRANSITION_DURATION=150,e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},e.prototype.init=function(t,e,i){if(this.enabled=!0,this.type=t,this.$element=$(e),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&$($.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),n=o.length;n--;){var s=o[n];if("click"==s)this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",r="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(t){return t=$.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},e.prototype.getDelegateOptions=function(){var t={},e=this.getDefaults();return this._options&&$.each(this._options,function(i,o){e[i]!=o&&(t[i]=o)}),t},e.prototype.enter=function(t){var e=t instanceof this.constructor?t:$(t.currentTarget).data("bs."+this.type);return e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),$(t.currentTarget).data("bs."+this.type,e)),t instanceof $.Event&&(e.inState["focusin"==t.type?"focus":"hover"]=!0),e.tip().hasClass("in")||"in"==e.hoverState?void(e.hoverState="in"):(clearTimeout(e.timeout),e.hoverState="in",e.options.delay&&e.options.delay.show?void(e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)):e.show())},e.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},e.prototype.leave=function(t){var e=t instanceof this.constructor?t:$(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),$(t.currentTarget).data("bs."+this.type,e)),t instanceof $.Event&&(e.inState["focusout"==t.type?"focus":"hover"]=!1),!e.isInStateTrue())return clearTimeout(e.timeout),e.hoverState="out",e.options.delay&&e.options.delay.hide?void(e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)):e.hide()},e.prototype.show=function(){var t=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=$.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var o=this,n=this.tip(),s=this.getUID(this.type);this.setContent(),n.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&n.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,r=/\s?auto?\s?/i,l=r.test(a);l&&(a=a.replace(r,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var h=this.getPosition(),d=n[0].offsetWidth,p=n[0].offsetHeight;if(l){var c=a,f=this.getPosition(this.$viewport);a="bottom"==a&&h.bottom+p>f.bottom?"top":"top"==a&&h.top-p<f.top?"bottom":"right"==a&&h.right+d>f.width?"left":"left"==a&&h.left-d<f.left?"right":a,n.removeClass(c).addClass(a)}var u=this.getCalculatedOffset(a,h,d,p);this.applyPlacement(u,a);var g=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};$.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",g).emulateTransitionEnd(e.TRANSITION_DURATION):g()}},e.prototype.applyPlacement=function(t,e){var i=this.tip(),o=i[0].offsetWidth,n=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),t.top+=s,t.left+=a,$.offset.setOffset(i[0],$.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),i.addClass("in");var r=i[0].offsetWidth,l=i[0].offsetHeight;"top"==e&&l!=n&&(t.top=t.top+n-l);var h=this.getViewportAdjustedDelta(e,t,r,l);h.left?t.left+=h.left:t.top+=h.top;var d=/top|bottom/.test(e),p=d?2*h.left-o+r:2*h.top-n+l,c=d?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(p,i[0][c],d)},e.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(t){function i(){"in"!=o.hoverState&&n.detach(),o.$element&&o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),t&&t()}var o=this,n=$(this.$tip),s=$.Event("hide.bs."+this.type);if(this.$element.trigger(s),!s.isDefaultPrevented())return n.removeClass("in"),$.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",i).emulateTransitionEnd(e.TRANSITION_DURATION):i(),this.hoverState=null,this},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(t){t=t||this.$element;var e=t[0],i="BODY"==e.tagName,o=e.getBoundingClientRect();null==o.width&&(o=$.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var n=window.SVGElement&&e instanceof window.SVGElement,s=i?{top:0,left:0}:n?null:t.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},r=i?{width:$(window).width(),height:$(window).height()}:null;return $.extend({},o,a,r,s)},e.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},e.prototype.getViewportAdjustedDelta=function(t,e,i,o){var n={top:0,left:0};if(!this.$viewport)return n;var s=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-s-a.scroll,l=e.top+s-a.scroll+o;r<a.top?n.top=a.top-r:l>a.top+a.height&&(n.top=a.top+a.height-l)}else{var h=e.left-s,d=e.left+s+i;h<a.left?n.left=a.left-h:d>a.right&&(n.left=a.left+a.width-d)}return n},e.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},e.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},e.prototype.tip=function(){if(!this.$tip&&(this.$tip=$(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(t){var e=this;t&&(e=$(t.currentTarget).data("bs."+this.type),e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),$(t.currentTarget).data("bs."+this.type,e))),t?(e.inState.click=!e.inState.click,e.isInStateTrue()?e.enter(e):e.leave(e)):e.tip().hasClass("in")?e.leave(e):e.enter(e)},e.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var i=$.fn.tooltip;$.fn.tooltip=t,$.fn.tooltip.Constructor=e,$.fn.tooltip.noConflict=function(){return $.fn.tooltip=i,this}}(jQuery),+function($){"use strict";function t(t){return this.each(function(){var i=$(this),o=i.data("bs.popover"),n="object"==typeof t&&t;!o&&/destroy|hide/.test(t)||(o||i.data("bs.popover",o=new e(this,n)),"string"==typeof t&&o[t]())})}var e=function(t,e){this.init("popover",t,e)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.3.7",e.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=$.extend({},$.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=$.fn.popover;$.fn.popover=t,$.fn.popover.Constructor=e,$.fn.popover.noConflict=function(){return $.fn.popover=i,this}}(jQuery),+function($){"use strict";function t(e,i){this.$body=$(document.body),this.$scrollElement=$($(e).is(document.body)?window:e),this.options=$.extend({},t.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",$.proxy(this.process,this)),this.refresh(),this.process()}function e(e){return this.each(function(){var i=$(this),o=i.data("bs.scrollspy"),n="object"==typeof e&&e;o||i.data("bs.scrollspy",o=new t(this,n)),"string"==typeof e&&o[e]()})}t.VERSION="3.3.7",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,e="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),$.isWindow(this.$scrollElement[0])||(e="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=$(this),o=t.data("target")||t.attr("href"),n=/^#./.test(o)&&$(o);return n&&n.length&&n.is(":visible")&&[[n[e]().top+i,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var t=this.$scrollElement.scrollTop()+this.options.offset,e=this.getScrollHeight(),i=this.options.offset+e-this.$scrollElement.height(),o=this.offsets,n=this.targets,s=this.activeTarget,a;if(this.scrollHeight!=e&&this.refresh(),t>=i)return s!=(a=n[n.length-1])&&this.activate(a);if(s&&t<o[0])return this.activeTarget=null,this.clear();for(a=o.length;a--;)s!=n[a]&&t>=o[a]&&(void 0===o[a+1]||t<o[a+1])&&this.activate(n[a])},t.prototype.activate=function(t){
this.activeTarget=t,this.clear();var e=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=$(e).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){$(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=$.fn.scrollspy;$.fn.scrollspy=e,$.fn.scrollspy.Constructor=t,$.fn.scrollspy.noConflict=function(){return $.fn.scrollspy=i,this},$(window).on("load.bs.scrollspy.data-api",function(){$('[data-spy="scroll"]').each(function(){var t=$(this);e.call(t,t.data())})})}(jQuery),+function($){"use strict";function t(t){return this.each(function(){var i=$(this),o=i.data("bs.tab");o||i.data("bs.tab",o=new e(this)),"string"==typeof t&&o[t]()})}var e=function(t){this.element=$(t)};e.VERSION="3.3.7",e.TRANSITION_DURATION=150,e.prototype.show=function(){var t=this.element,e=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var o=e.find(".active:last a"),n=$.Event("hide.bs.tab",{relatedTarget:t[0]}),s=$.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(n),t.trigger(s),!s.isDefaultPrevented()&&!n.isDefaultPrevented()){var a=$(i);this.activate(t.closest("li"),e),this.activate(a,a.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},e.prototype.activate=function(t,i,o){function n(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var s=i.find("> .active"),a=o&&$.support.transition&&(s.length&&s.hasClass("fade")||!!i.find("> .fade").length);s.length&&a?s.one("bsTransitionEnd",n).emulateTransitionEnd(e.TRANSITION_DURATION):n(),s.removeClass("in")};var i=$.fn.tab;$.fn.tab=t,$.fn.tab.Constructor=e,$.fn.tab.noConflict=function(){return $.fn.tab=i,this};var o=function(e){e.preventDefault(),t.call($(this),"show")};$(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),+function($){"use strict";function t(t){return this.each(function(){var i=$(this),o=i.data("bs.affix"),n="object"==typeof t&&t;o||i.data("bs.affix",o=new e(this,n)),"string"==typeof t&&o[t]()})}var e=function(t,i){this.options=$.extend({},e.DEFAULTS,i),this.$target=$(this.options.target).on("scroll.bs.affix.data-api",$.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",$.proxy(this.checkPositionWithEventLoop,this)),this.$element=$(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};e.VERSION="3.3.7",e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0,target:window},e.prototype.getState=function(t,e,i,o){var n=this.$target.scrollTop(),s=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return n<i&&"top";if("bottom"==this.affixed)return null!=i?!(n+this.unpin<=s.top)&&"bottom":!(n+a<=t-o)&&"bottom";var r=null==this.affixed,l=r?n:s.top,h=r?a:e;return null!=i&&n<=i?"top":null!=o&&l+h>=t-o&&"bottom"},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$target.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),i=this.options.offset,o=i.top,n=i.bottom,s=Math.max($(document).height(),$(document.body).height());"object"!=typeof i&&(n=o=i),"function"==typeof o&&(o=i.top(this.$element)),"function"==typeof n&&(n=i.bottom(this.$element));var a=this.getState(s,t,o,n);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var r="affix"+(a?"-"+a:""),l=$.Event(r+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(r).trigger(r.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:s-t-n})}};var i=$.fn.affix;$.fn.affix=t,$.fn.affix.Constructor=e,$.fn.affix.noConflict=function(){return $.fn.affix=i,this},$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var e=$(this),i=e.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),t.call(e,i)})})}(jQuery);

  }).apply(root, arguments);
});
}(this));

;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('bootstrapAmdFix',["jquery", 'loglevel', "bootstrap"], factory) : 
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require('loglevel'), require("bootstrap")) :
    console && console.error('ScoreBootstrapUiAmdFix does not support non-amd script loading.');
}(this/* window */, function ($, log) {

    function ScoreBootstrapUiAmdFix() {

    }

    ScoreBootstrapUiAmdFix.prototype.fix = function () {
        // if we use AMD, most likly we already miss $(window).on('load', foo) event which bootstrap uses to fire up init methods for it's own components. So we should run them manually. 
        if (document.readyState !== "complete") {
            if (window.define === void 0 || typeof (window.define) !== "function") {
                log.debug("Score Bootstrap UI AMD fix was loaded not in AMD solution. In all probability you can remove this reference because it is not needed.");
            }
            // don't do anything, looks like bootstrap was loaded before window.load event - it means that Bootstrap will do everything correct and manage to init js-components by itself.
            return;
        }

        // check version (assume we are working with bootstrap 3 version only
        if (!($.fn["alert"]
            && $.fn["alert"].Constructor
            && +/[\d]+/.exec($.fn["alert"].Constructor.VERSION) === 3)) {
            return;
        }

        // affix
        $('[data-spy="affix"]').each(function() {
            var $this = $(this);
            var data = $this.data();

            data.offset = data.offset || {};

            if (data.offsetBottom != null) data.offset.bottom = data.offsetBottom;
            if (data.offsetTop != null) data.offset.top = data.offsetTop;

            $this.affix(data);
        });

        // carousel
        $('[data-ride="carousel"]').each(function() {
            var $this = $(this);
            var data = $this.data();

            $this.carousel(data);
        });

        // scrollspy
        $('[data-spy="scroll"]').each(function() {
            var $this = $(this);
            var data = $this.data();

            $this.scrollspy(data);
        });
    }

    return new ScoreBootstrapUiAmdFix();

}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('scorebootstrap',["jquery", "bootstrap", "bootstrapAmdFix", "jqueryTouchSwipe"], factory) : 
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("bootstrap"), require("bootstrapAmdFix"), require("jqueryTouchSwipe")) :
    console && console.error('BootstrapUI does not support non-amd script loading.');
}(this/* window */, function ($, bt, btAmdFix) {
    window.BrainJocks = window.BrainJocks || {};

    if (BrainJocks.EE && BrainJocks.EE.Metadata && BrainJocks.EE.Metadata.sitecore &&
        BrainJocks.EE.Metadata.sitecore().version === "8.0") {
        // Fix incompatibilities between Bootstrap and the version of prototype.js that
        // sitecore includes in version 8.0. This is needed for modal and tabs components.
        function handler(event) {
            event.target.hide = undefined;
            setTimeout(function () { delete event.target.hide; }, 0);
            event.target.show = undefined;
            setTimeout(function () { delete event.target.show; }, 0);
        }

        $(window).on("show.bs.modal hide.bs.modal show.bs.tab hide.bs.tab show.bs.dropdown hide.bs.dropdown", handler);
    }

    BrainJocks.BootstrapUI = {
        Settings: {
            causeRepaintsOn: function () {
                return $("h1, h2, h3, h4, h5, h6, p, li");
            },
            hiddenClassList: function() {
                return ["hidden-xs", "hidden-sm", "hidden-md", "hidden-lg"];
            }
        },

        Fonts: {
            scale: function () {
                $(window).on("resize", function () {
                    BrainJocks.BootstrapUI.Settings.causeRepaintsOn().css("z-index", 1);
                });
            }
        },

        Carousel: {
            init: function() {
                $('.score-carousel .item:first-of-type').addClass("active");

                $('.score-carousel').swipe({
                    swipeLeft: function () {
                        $(this).carousel('next');
                    },
                    swipeRight: function () {
                        $(this).carousel('prev');
                    }
                });
            }                
        },

        TabSet: {
            init: function() {
                $('.score-tab').each(function () {
                    var tabComponent = $(this);

                    var tabsNav = tabComponent.find('.nav').first();
                    var tabsContent = tabComponent.find('.tab-content').first();

                    tabsNav.empty();

                    tabsContent.children('.tab-pane').each(function () {
                        var tabPane = $(this);

                        var tabId = tabPane.prop('id');
                        var tabTitle = tabPane.data('title');
                        var anchorable = /^(true|1|yes)$/i.test(tabPane.data('anchorable') || "");

                        var li = '<li class="' + BrainJocks.BootstrapUI.TabSet.getHiddenClasses(this) + '"><a href="#' + tabId + '" data-toggle="tab" data-anchorable="' + anchorable + '">' + tabTitle + '</a></li>';

                        tabsNav.append(li);
                    });
                });
            },

            activate: function () {
                $('.score-tab').each(function() {
                    var tabToActivate = $(this).find('.nav li a')[0]; // first

                    if (BrainJocks.BootstrapUI.Utils.isDeepLinked()) {
                        var anchor = BrainJocks.BootstrapUI.Utils.getAnchor();

                        tabToActivate = $(this).find("a[href='#tab-" + anchor + "']")[0] || tabToActivate;
                    }

                    $(tabToActivate).tab('show');
                });
            },

            getHiddenClasses: function(tabPane) {
                var classList = tabPane.className;
                return BrainJocks.BootstrapUI.Settings.hiddenClassList().filter(function (value) {
                    return new RegExp('(^| )' + value + '( |$)').test(classList);
                }).join(" ");
            }
        },

        Accordion: {
            init: function() {
                $('.score-accordion a[data-toggle="collapse"]').each(function () {
                    var accordion = $(this).closest(".score-accordion")[0];
                    $(this).attr('data-parent', '#' + accordion.id);
                });
            },

            activate: function() {
                $('.score-accordion').each(function () {
                    var shouldBeCollapsed = $(this).hasClass("collapsed");

                    var $firstPanel = $(".panel", this).first();
                    if (BrainJocks.BootstrapUI.Utils.isDeepLinked()) {
                        var anchor = BrainJocks.BootstrapUI.Utils.getAnchor();

                        $firstPanel = $(this).find(".panel:has(a[href='#collapse-" + anchor + "'])")[0] || $firstPanel;
                        shouldBeCollapsed = false;
                    }

                    if (!shouldBeCollapsed) {
                        $('.panel-collapse', $firstPanel).addClass("in");
                        $('a[data-toggle="collapse"]', $firstPanel).removeClass("collapsed").attr("aria-expanded", true);
                    }
                });
            }
        },

        MegaMenu: {
            init: function() {
                $(".score-megamenu").find(".btn").addClass("navbar-btn");    
            }
        },

        Utils: {
            isDeepLinked: function() {
                return document.location.toString().match("#");
            },

            getAnchor: function() {
                if (!this.isDeepLinked()) {
                    return "";
                }

                return document.location.toString().split('#')[1];
            }
        },

        Breadcrumb: {
            init: function () {
                $('.score-breadcrumb > .score-breadcrumb-item:first-child .score-folding')
                    .on('click.score',
                        function(e) {
                            e.preventDefault();
                            var $this = $(this);
                            $this.closest('.score-breadcrumb').toggleClass('alt-visible');

                            var cssDuration = $this.closest('.score-breadcrumb')
                                .find(' > .score-breadcrumb-item:first-child .score-breadcrumb-alternate')
                                .css('transition-duration') || "0s";
                            var stepDuration = (parseFloat(cssDuration) * (/ms/.test(cssDuration) ? 1 : 1000)).toFixed(0);
                            var stepCounts = stepDuration / 100;
                            var stepNumber = 0;
                            var timer = setInterval(function () {
                                /* hack to force sitecore to recalculate active component borders. */
                                $this.closest('.score-breadcrumb').trigger('click');
                                stepNumber++;
                                if (stepNumber > stepCounts) clearInterval(timer);
                            }, 100);
                        });
            }
        },

        init: function () {
            btAmdFix !== void 0 && typeof btAmdFix.fix === "function" && btAmdFix.fix();

            BrainJocks.BootstrapUI.Fonts.scale();
            BrainJocks.BootstrapUI.Carousel.init();
            BrainJocks.BootstrapUI.TabSet.init();
            BrainJocks.BootstrapUI.TabSet.activate();
            BrainJocks.BootstrapUI.Accordion.init();
            BrainJocks.BootstrapUI.Accordion.activate();
            BrainJocks.BootstrapUI.MegaMenu.init();
            BrainJocks.BootstrapUI.Breadcrumb.init();
        }
    };

    return BrainJocks.BootstrapUI;
}));
define('errorHandler',["jquery", 'loglevel'], function($, log) {
    "use strict";

    var logErrorUrl = "/scorebootstrapui/logerror";

    function ErrorHandler() {
        this.logError = function logError(err) {
            if (!err) {
                return;
            }

            err = String(err);
            $.post(logErrorUrl, { message: err }).fail(function () {
                log.error("Failed to log error on server: " + err);
            });
        };
    }

    return new ErrorHandler(); //singleton
});
(function(root) {
define("jqueryValidate", ["jquery"], function() {
  return (function() {
/*! jQuery Validation Plugin - v1.12.0 - 4/1/2014
 * http://jqueryvalidation.org/
 * Copyright (c) 2014 J??rn Zaefferer; Licensed MIT */
!function(a){a.extend(a.fn,{validate:function(b){if(!this.length)return void(b&&b.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var c=a.data(this[0],"validator");return c?c:(this.attr("novalidate","novalidate"),c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(this.validateDelegate(":submit","click",function(b){c.settings.submitHandler&&(c.submitButton=b.target),a(b.target).hasClass("cancel")&&(c.cancelSubmit=!0),void 0!==a(b.target).attr("formnovalidate")&&(c.cancelSubmit=!0)}),this.submit(function(b){function d(){var d;return c.settings.submitHandler?(c.submitButton&&(d=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)),c.settings.submitHandler.call(c,c.currentForm,b),c.submitButton&&d.remove(),!1):!0}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})),c)},valid:function(){var b,c;return a(this[0]).is("form")?b=this.validate().form():(b=!0,c=a(this[0].form).validate(),this.each(function(){b=c.element(this)&&b})),b},removeAttrs:function(b){var c={},d=this;return a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b),d.removeAttr(b)}),c},rules:function(b,c){var d,e,f,g,h,i,j=this[0];if(b)switch(d=a.data(j.form,"validator").settings,e=d.rules,f=a.validator.staticRules(j),b){case"add":a.extend(f,a.validator.normalizeRule(c)),delete f.messages,e[j.name]=f,c.messages&&(d.messages[j.name]=a.extend(d.messages[j.name],c.messages));break;case"remove":return c?(i={},a.each(c.split(/\s/),function(b,c){i[c]=f[c],delete f[c],"required"===c&&a(j).removeAttr("aria-required")}),i):(delete e[j.name],f)}return g=a.validator.normalizeRules(a.extend({},a.validator.classRules(j),a.validator.attributeRules(j),a.validator.dataRules(j),a.validator.staticRules(j)),j),g.required&&(h=g.required,delete g.required,g=a.extend({required:h},g),a(j).attr("aria-required","true")),g.remote&&(h=g.remote,delete g.remote,g=a.extend(g,{remote:h})),g}}),a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+a(b).val())},filled:function(b){return!!a.trim(""+a(b).val())},unchecked:function(b){return!a(b).prop("checked")}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1===arguments.length?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:(arguments.length>2&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!==Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),function(){return c})}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a,b){(9!==b.which||""!==this.elementValue(a))&&(a.name in this.submitted||a===this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this[0].form,"validator"),d="on"+b.type.replace(/^validate/,""),e=c.settings;e[d]&&!this.is(e.ignore)&&e[d].call(c,this[0],b)}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var c,d=this.groups={};a.each(this.settings.groups,function(b,c){"string"==typeof c&&(c=c.split(/\s/)),a.each(c,function(a,c){d[c]=b})}),c=this.settings.rules,a.each(c,function(b,d){c[b]=a.validator.normalizeRule(d)}),a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",b).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",b),this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),a(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){var c=this.clean(b),d=this.validationTargetFor(c),e=!0;return this.lastElement=d,void 0===d?delete this.invalid[c.name]:(this.prepareElement(d),this.currentElements=a(d),e=this.check(d)!==!1,e?delete this.invalid[d.name]:this.invalid[d.name]=!0),a(b).attr("aria-invalid",!e),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e},showErrors:function(b){if(b){a.extend(this.errorMap,b),this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b,c=0;for(b in a)c++;return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(a){return a.element.name===b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in c||!b.objectLength(a(this).rules())?!1:(c[this.name]=!0,!0)})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.split(" ").join(".");return a(this.settings.errorElement+"."+b,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},elementValue:function(b){var c,d=a(b),e=d.attr("type");return"radio"===e||"checkbox"===e?a("input[name='"+d.attr("name")+"']:checked").val():(c=d.val(),"string"==typeof c?c.replace(/\r/g,""):c)},check:function(b){b=this.validationTargetFor(this.clean(b));var c,d,e,f=a(b).rules(),g=a.map(f,function(a,b){return b}).length,h=!1,i=this.elementValue(b);for(d in f){e={method:d,parameters:f[d]};try{if(c=a.validator.methods[d].call(this,i,b,e.parameters),"dependency-mismatch"===c&&1===g){h=!0;continue}if(h=!1,"pending"===c)return void(this.toHide=this.toHide.not(this.errorsFor(b)));if(!c)return this.formatAndAdd(b,e),!1}catch(j){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+b.id+", check the '"+e.method+"' method.",j),j}}if(!h)return this.objectLength(f)&&this.successList.push(b),!0},customDataMessage:function(b,c){return a(b).data("msg"+c[0].toUpperCase()+c.substring(1).toLowerCase())||a(b).data("msg")},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor===String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a];return void 0},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customDataMessage(b,c),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(b,c){var d=this.defaultMessage(b,c.method),e=/\$?\{(\d+)\}/g;"function"==typeof d?d=d.call(this,c.parameters,b):e.test(d)&&(d=a.validator.format(d.replace(e,"{$1}"),c.parameters)),this.errorList.push({message:d,element:b,method:c.method}),this.errorMap[b.name]=d,this.submitted[b.name]=d},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){var a,b,c;for(a=0;this.errorList[a];a++)c=this.errorList[a],this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass),this.showLabel(c.element,c.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d=this.errorsFor(b);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.html(c)):(d=a("<"+this.settings.errorElement+">").attr("for",this.idOrName(b)).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b))),!c&&this.settings.success&&(d.text(""),"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d,b)),this.toShow=this.toShow.add(d)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")===c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){return this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]),a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){return a(this.currentForm).find("[name='"+b+"']")},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){var c=this.elementValue(b);return!a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],c&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor===String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr("class");return d&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},attributeRules:function(b){var c,d,e={},f=a(b),g=b.getAttribute("type");for(c in a.validator.methods)"required"===c?(d=b.getAttribute(c),""===d&&(d=!0),d=!!d):d=f.attr(c),/min|max/.test(c)&&(null===g||/number|range|text/.test(g))&&(d=Number(d)),d||0===d?e[c]=d:g===c&&"range"!==g&&(e[c]=!0);return e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)&&delete e.maxlength,e},dataRules:function(b){var c,d,e={},f=a(b);for(c in a.validator.methods)d=f.data("rule"+c[0].toUpperCase()+c.substring(1).toLowerCase()),void 0!==d&&(e[c]=d);return e},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1)return void delete b[d];if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=void 0!==e.param?e.param:!0:delete b[d]}}),a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e}),a.each(["minlength","maxlength"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){var c;b[this]&&(a.isArray(b[this])?b[this]=[Number(b[this][0]),Number(b[this][1])]:"string"==typeof b[this]&&(c=b[this].split(/[\s,]+/),b[this]=[Number(c[0]),Number(c[1])]))}),a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=void 0!==d?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";if("select"===c.nodeName.toLowerCase()){var e=a(c).val();return e&&e.length>0}return this.checkable(c)?this.getLength(b,c)>0:a.trim(b).length>0},email:function(a,b){return this.optional(b)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)},url:function(a,b){return this.optional(b)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a).toString())},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 \-]+/.test(a))return!1;var c,d,e=0,f=0,g=!1;if(a=a.replace(/\D/g,""),a.length<13||a.length>19)return!1;for(c=a.length-1;c>=0;c--)d=a.charAt(c),f=parseInt(d,10),g&&(f*=2)>9&&(f-=9),e+=f,g=!g;return e%10===0},minlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(a.trim(b),c);return this.optional(c)||e>=d},maxlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(a.trim(b),c);return this.optional(c)||d>=e},rangelength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(a.trim(b),c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||c>=a},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},equalTo:function(b,c,d){var e=a(d);return this.settings.onfocusout&&e.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()}),b===e.val()},remote:function(b,c,d){if(this.optional(c))return"dependency-mismatch";var e,f,g=this.previousValue(c);return this.settings.messages[c.name]||(this.settings.messages[c.name]={}),g.originalMessage=this.settings.messages[c.name].remote,this.settings.messages[c.name].remote=g.message,d="string"==typeof d&&{url:d}||d,g.old===b?g.valid:(g.old=b,e=this,this.startRequest(c),f={},f[c.name]=b,a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:f,context:e.currentForm,success:function(d){var f,h,i,j=d===!0||"true"===d;e.settings.messages[c.name].remote=g.originalMessage,j?(i=e.formSubmitted,e.prepareElement(c),e.formSubmitted=i,e.successList.push(c),delete e.invalid[c.name],e.showErrors()):(f={},h=d||e.defaultMessage(c,"remote"),f[c.name]=g.message=a.isFunction(h)?h(b):h,e.invalid[c.name]=!0,e.showErrors(f)),g.valid=j,e.stopRequest(c,j)}},d)),"pending")}}}),a.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."}}(jQuery),function(a){var b,c={};a.ajaxPrefilter?a.ajaxPrefilter(function(a,b,d){var e=a.port;"abort"===a.mode&&(c[e]&&c[e].abort(),c[e]=d)}):(b=a.ajax,a.ajax=function(d){var e=("mode"in d?d:a.ajaxSettings).mode,f=("port"in d?d:a.ajaxSettings).port;return"abort"===e?(c[f]&&c[f].abort(),c[f]=b.apply(this,arguments),c[f]):b.apply(this,arguments)})}(jQuery),function(a){a.extend(a.fn,{validateDelegate:function(b,c,d){return this.bind(c,function(c){var e=a(c.target);return e.is(b)?d.apply(e,arguments):void 0})}})}(jQuery);


  }).apply(root, arguments);
});
}(this));

// Unobtrusive validation support library for jQuery and jQuery Validate
// Copyright (C) Microsoft Corporation. All rights reserved.
// @version v3.2.10
!function(a){"function"==typeof define&&define.amd?define("jqueryValidateUnobtrusive",["jquery", "jqueryValidate"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery-validation")):jQuery.validator.unobtrusive=a(jQuery)}(function(a){function e(a,e,n){a.rules[e]=n,a.message&&(a.messages[e]=a.message)}function n(a){return a.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function t(a){return a.replace(/([!"#$%&'()*+,.\/:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function r(a){return a.substr(0,a.lastIndexOf(".")+1)}function i(a,e){return 0===a.indexOf("*.")&&(a=a.replace("*.",e)),a}function o(e,n){var r=a(this).find("[data-valmsg-for='"+t(n[0].name)+"']"),i=r.attr("data-valmsg-replace"),o=i?a.parseJSON(i)!==!1:null;r.removeClass("field-validation-valid").addClass("field-validation-error"),e.data("unobtrusiveContainer",r),o?(r.empty(),e.removeClass("input-validation-error").appendTo(r)):e.hide()}function d(e,n){var t=a(this).find("[data-valmsg-summary=true]"),r=t.find("ul");r&&r.length&&n.errorList.length&&(r.empty(),t.addClass("validation-summary-errors").removeClass("validation-summary-valid"),a.each(n.errorList,function(){a("<li />").html(this.message).appendTo(r)}))}function s(e){var n=e.data("unobtrusiveContainer");if(n){var t=n.attr("data-valmsg-replace"),r=t?a.parseJSON(t):null;n.addClass("field-validation-valid").removeClass("field-validation-error"),e.removeData("unobtrusiveContainer"),r&&n.empty()}}function l(e){var n=a(this),t="__jquery_unobtrusive_validation_form_reset";if(!n.data(t)){n.data(t,!0);try{n.data("validator").resetForm()}finally{n.removeData(t)}n.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors"),n.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}}function u(e){var n=a(e),t=n.data(v),r=a.proxy(l,e),i=f.unobtrusive.options||{},u=function(n,t){var r=i[n];r&&a.isFunction(r)&&r.apply(e,t)};return t||(t={options:{errorClass:i.errorClass||"input-validation-error",errorElement:i.errorElement||"span",errorPlacement:function(){o.apply(e,arguments),u("errorPlacement",arguments)},invalidHandler:function(){d.apply(e,arguments),u("invalidHandler",arguments)},messages:{},rules:{},success:function(){s.apply(e,arguments),u("success",arguments)}},attachValidation:function(){n.off("reset."+v,r).on("reset."+v,r).validate(this.options)},validate:function(){return n.validate(),n.valid()}},n.data(v,t)),t}var m,f=a.validator,v="unobtrusiveValidation";return f.unobtrusive={adapters:[],parseElement:function(e,n){var t,r,i,o=a(e),d=o.parents("form")[0];d&&(t=u(d),t.options.rules[e.name]=r={},t.options.messages[e.name]=i={},a.each(this.adapters,function(){var n="data-val-"+this.name,t=o.attr(n),s={};void 0!==t&&(n+="-",a.each(this.params,function(){s[this]=o.attr(n+this)}),this.adapt({element:e,form:d,message:t,params:s,rules:r,messages:i}))}),a.extend(r,{__dummy__:!0}),n||t.attachValidation())},parse:function(e){var n=a(e),t=n.parents().addBack().filter("form").add(n.find("form")).has("[data-val=true]");n.find("[data-val=true]").each(function(){f.unobtrusive.parseElement(this,!0)}),t.each(function(){var a=u(this);a&&a.attachValidation()})}},m=f.unobtrusive.adapters,m.add=function(a,e,n){return n||(n=e,e=[]),this.push({name:a,params:e,adapt:n}),this},m.addBool=function(a,n){return this.add(a,function(t){e(t,n||a,!0)})},m.addMinMax=function(a,n,t,r,i,o){return this.add(a,[i||"min",o||"max"],function(a){var i=a.params.min,o=a.params.max;i&&o?e(a,r,[i,o]):i?e(a,n,i):o&&e(a,t,o)})},m.addSingleVal=function(a,n,t){return this.add(a,[n||"val"],function(r){e(r,t||a,r.params[n])})},f.addMethod("__dummy__",function(a,e,n){return!0}),f.addMethod("regex",function(a,e,n){var t;return!!this.optional(e)||(t=new RegExp(n).exec(a),t&&0===t.index&&t[0].length===a.length)}),f.addMethod("nonalphamin",function(a,e,n){var t;return n&&(t=a.match(/\W/g),t=t&&t.length>=n),t}),f.methods.extension?(m.addSingleVal("accept","mimtype"),m.addSingleVal("extension","extension")):m.addSingleVal("extension","extension","accept"),m.addSingleVal("regex","pattern"),m.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url"),m.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range"),m.addMinMax("minlength","minlength").addMinMax("maxlength","minlength","maxlength"),m.add("equalto",["other"],function(n){var o=r(n.element.name),d=n.params.other,s=i(d,o),l=a(n.form).find(":input").filter("[name='"+t(s)+"']")[0];e(n,"equalTo",l)}),m.add("required",function(a){"INPUT"===a.element.tagName.toUpperCase()&&"CHECKBOX"===a.element.type.toUpperCase()||e(a,"required",!0)}),m.add("remote",["url","type","additionalfields"],function(o){var d={url:o.params.url,type:o.params.type||"GET",data:{}},s=r(o.element.name);a.each(n(o.params.additionalfields||o.element.name),function(e,n){var r=i(n,s);d.data[r]=function(){var e=a(o.form).find(":input").filter("[name='"+t(r)+"']");return e.is(":checkbox")?e.filter(":checked").val()||e.filter(":hidden").val()||"":e.is(":radio")?e.filter(":checked").val()||"":e.val()}}),e(o,"remote",d)}),m.add("password",["min","nonalphamin","regex"],function(a){a.params.min&&e(a,"minlength",a.params.min),a.params.nonalphamin&&e(a,"nonalphamin",a.params.nonalphamin),a.params.regex&&e(a,"regex",a.params.regex)}),m.add("fileextensions",["extensions"],function(a){e(a,"extension",a.params.extensions)}),a(function(){f.unobtrusive.parse(document)}),f.unobtrusive});
(function(root) {
define("jqueryUnobtrusiveAjax", ["jquery","jqueryValidate","jqueryValidateUnobtrusive"], function() {
  return (function() {
/*
** Unobtrusive Ajax support library for jQuery
** Copyright (C) Microsoft Corporation. All rights reserved.
*/
(function(a){var b="unobtrusiveAjaxClick",g="unobtrusiveValidation";function c(d,b){var a=window,c=(d||"").split(".");while(a&&c.length)a=a[c.shift()];if(typeof a==="function")return a;b.push(d);return Function.constructor.apply(null,b)}function d(a){return a==="GET"||a==="POST"}function f(b,a){!d(a)&&b.setRequestHeader("X-HTTP-Method-Override",a)}function h(c,b,e){var d;if(e.indexOf("application/x-javascript")!==-1)return;d=(c.getAttribute("data-ajax-mode")||"").toUpperCase();a(c.getAttribute("data-ajax-update")).each(function(f,c){var e;switch(d){case"BEFORE":e=c.firstChild;a("<div />").html(b).contents().each(function(){c.insertBefore(this,e)});break;case"AFTER":a("<div />").html(b).contents().each(function(){c.appendChild(this)});break;default:a(c).html(b)}})}function e(b,e){var j,k,g,i;j=b.getAttribute("data-ajax-confirm");if(j&&!window.confirm(j))return;k=a(b.getAttribute("data-ajax-loading"));i=b.getAttribute("data-ajax-loading-duration")||0;a.extend(e,{type:b.getAttribute("data-ajax-method")||undefined,url:b.getAttribute("data-ajax-url")||undefined,beforeSend:function(d){var a;f(d,g);a=c(b.getAttribute("data-ajax-begin"),["xhr"]).apply(this,arguments);a!==false&&k.show(i);return a},complete:function(){k.hide(i);c(b.getAttribute("data-ajax-complete"),["xhr","status"]).apply(this,arguments)},success:function(a,e,d){h(b,a,d.getResponseHeader("Content-Type")||"text/html");c(b.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(this,arguments)},error:c(b.getAttribute("data-ajax-failure"),["xhr","status","error"])});e.data.push({name:"X-Requested-With",value:"XMLHttpRequest"});g=e.type.toUpperCase();if(!d(g)){e.type="POST";e.data.push({name:"X-HTTP-Method-Override",value:g})}a.ajax(e)}function i(c){var b=a(c).data(g);return!b||!b.validate||b.validate()}a(document).on("click","a[data-ajax=true]",function(a){a.preventDefault();e(this,{url:this.href,type:"GET",data:[]})});a(document).on("click","form[data-ajax=true] input[type=image]",function(c){var g=c.target.name,d=a(c.target),f=d.parents("form")[0],e=d.offset();a(f).data(b,[{name:g+".x",value:Math.round(c.pageX-e.left)},{name:g+".y",value:Math.round(c.pageY-e.top)}]);setTimeout(function(){a(f).removeData(b)},0)});a(document).on("click","form[data-ajax=true] :submit",function(c){var e=c.target.name,d=a(c.target).parents("form")[0];a(d).data(b,e?[{name:e,value:c.target.value}]:[]);setTimeout(function(){a(d).removeData(b)},0)});a(document).on("submit","form[data-ajax=true]",function(d){var c=a(this).data(b)||[];d.preventDefault();if(!i(this))return;e(this,{url:this.action,type:this.method||"GET",data:c.concat(a(this).serializeArray())})})})(jQuery);


  }).apply(root, arguments);
});
}(this));

;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('scoreunobtrusive',["jquery"], factory) : 
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery")) : 
    console && console.error('Score.jquery.validate.unobtrusive does not support non-amd script loading.');
}(this/* window */, function ($) {
    var findByName = function(currentForm, name) {
        return currentForm.find("[name='" + name + "']");
    };

    var findCurrentForm = function(element) {
        return $(element).closest('form');
    };

    var isAnyValueNotEmpty = function(element, params) {
        var $myForm = findCurrentForm(element);

        var properties = params.properties.split(',');
        var values = $.map(properties, function(property, index) {
            var val = findByName($myForm, property).val();
            return val !== '' ? val : null;
        });

        return values.length > 0;
    };

    $.validator.addMethod("enforcetrue", function(value, element, param) {
        return element.checked;
    });

    $.validator.unobtrusive.adapters.addBool("enforcetrue");

    $.validator.unobtrusive.adapters.add(
        'atleastonerequired', ['properties'], function(options) {
            options.rules['atleastonerequired'] = options.params;
            options.messages['atleastonerequired'] = options.message;
        }
    );

    $.validator.addMethod('atleastonerequired', function(value, element, params) {
        return isAnyValueNotEmpty(element, params);
    }, '');


    $.validator.unobtrusive.adapters.add(
        'requiredor', ['properties'], function(options) {
            options.rules['requiredor'] = options.params;
            options.messages['requiredor'] = options.message;
        }
    );

    $.validator.addMethod('requiredor', function(value, element, params) {
        if (value !== '' && value) {
            return true;
        }

        return isAnyValueNotEmpty(element, params);
    }, '');

}));
/**
* jquery-match-height 0.7.2 by @liabru
* http://brm.io/jquery-match-height/
* License: MIT
*/
/* Includes modifications for SCORE, to disable animation effects while arranging list elements into a row (animation effects lead to wrong height calculation) */
!function(t){"use strict";"function"==typeof define&&define.amd?define('matchHeight',["jquery"],t):"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var e=-1,n=-1,o=function(t){return parseFloat(t)||0},i=function(e){var n=null,i=[];return t(e).each(function(){var e=t(this),a=e.offset().top-o(e.css("margin-top")),r=i.length>0?i[i.length-1]:null;null===r?i.push(e):Math.floor(Math.abs(n-a))<=1?i[i.length-1]=r.add(e):i.push(e),n=a}),i},a=function(e){var n={byRow:!0,property:"height",target:null,remove:!1};return"object"==typeof e?t.extend(n,e):("boolean"==typeof e?n.byRow=e:"remove"===e&&(n.remove=!0),n)},r=t.fn.matchHeight=function(e){var n=a(e);if(n.remove){var o=this;return this.css(n.property,""),t.each(r._groups,function(t,e){e.elements=e.elements.not(o)}),this}return this.length<=1&&!n.target?this:(r._groups.push({elements:this,options:n}),r._apply(this,n),this)};r.version="0.7.2",r._groups=[],r._throttle=80,r._maintainScroll=!1,r._beforeUpdate=null,r._afterUpdate=null,r._rows=i,r._parse=o,r._parseOptions=a,r._apply=function(e,n){var s=a(n),h=t(e),l=[h],c=t(window).scrollTop(),p=t("html").outerHeight(!0),u=h.parents().filter(":hidden");return u.each(function(){var e=t(this);e.data("style-cache",e.attr("style"))}),u.css("display","block"),s.byRow&&!s.target&&(h.each(function(){var e=t(this),n=e.css("display");"inline-block"!==n&&"flex"!==n&&"inline-flex"!==n&&(n="block"),e.data("style-cache",e.attr("style")),e.css({display:n,"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px",overflow:"hidden","-webkit-transition":"none","-moz-transition":"none","-o-transition":"none",transition:"none"})}),l=i(h),h.each(function(){var e=t(this);e.attr("style",e.data("style-cache")||"")})),t.each(l,function(e,n){var i=t(n),a=0;if(s.target)a=s.target.outerHeight(!1);else{if(s.byRow&&i.length<=1)return void i.css(s.property,"");i.each(function(){var e=t(this),n=e.attr("style"),o=e.css("display");"inline-block"!==o&&"flex"!==o&&"inline-flex"!==o&&(o="block");var i={display:o,"-webkit-transition":"none","-moz-transition":"none","-o-transition":"none",transition:"none"};i[s.property]="",e.css(i),e.outerHeight(!1)>a&&(a=e.outerHeight(!1)),e.attr("style",n||"")})}i.each(function(){var e=t(this),n=0;s.target&&e.is(s.target)||("border-box"!==e.css("box-sizing")&&(n+=o(e.css("border-top-width"))+o(e.css("border-bottom-width")),n+=o(e.css("padding-top"))+o(e.css("padding-bottom"))),e.css(s.property,a-n+"px"))})}),u.each(function(){var e=t(this);e.attr("style",e.data("style-cache")||null)}),r._maintainScroll&&t(window).scrollTop(c/p*t("html").outerHeight(!0)),this},r._applyDataApi=function(){var e={};t("[data-match-height], [data-mh]").each(function(){var n=t(this),o=n.attr("data-mh")||n.attr("data-match-height");e[o]=o in e?e[o].add(n):n}),t.each(e,function(){this.matchHeight(!0)})};var s=function(e){r._beforeUpdate&&r._beforeUpdate(e,r._groups),t.each(r._groups,function(){r._apply(this.elements,this.options)}),r._afterUpdate&&r._afterUpdate(e,r._groups)};r._update=function(o,i){if(i&&"resize"===i.type){var a=t(window).width();if(a===e)return;e=a}o?-1===n&&(n=setTimeout(function(){s(i),n=-1},r._throttle)):s(i)},t(r._applyDataApi);var h=t.fn.on?"on":"bind";t(window)[h]("load",function(t){r._update(!1,t)}),t(window)[h]("resize orientationchange",function(t){r._update(!0,t)})});
/*!
 * Knockout JavaScript library v3.3.0
 * (c) Steven Sanderson - http://knockoutjs.com/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */

(function() {(function(p){var y=this||(0,eval)("this"),w=y.document,M=y.navigator,u=y.jQuery,E=y.JSON;(function(p){"function"===typeof define&&define.amd?define('knockout',["exports","require"],p):"function"===typeof require&&"object"===typeof exports&&"object"===typeof module?p(module.exports||exports):p(y.ko={})})(function(N,O){function J(a,d){return null===a||typeof a in Q?a===d:!1}function R(a,d){var c;return function(){c||(c=setTimeout(function(){c=p;a()},d))}}function S(a,d){var c;return function(){clearTimeout(c);
c=setTimeout(a,d)}}function K(b,d,c,e){a.d[b]={init:function(b,k,h,l,g){var m,x;a.w(function(){var q=a.a.c(k()),n=!c!==!q,r=!x;if(r||d||n!==m)r&&a.Z.oa()&&(x=a.a.la(a.e.childNodes(b),!0)),n?(r||a.e.T(b,a.a.la(x)),a.Ja(e?e(g,q):g,b)):a.e.ma(b),m=n},null,{q:b});return{controlsDescendantBindings:!0}}};a.h.ka[b]=!1;a.e.R[b]=!0}var a="undefined"!==typeof N?N:{};a.b=function(b,d){for(var c=b.split("."),e=a,f=0;f<c.length-1;f++)e=e[c[f]];e[c[c.length-1]]=d};a.D=function(a,d,c){a[d]=c};a.version="3.3.0";
a.b("version",a.version);a.a=function(){function b(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function d(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function c(a,b){a.__proto__=b;return a}function e(b,c,g,d){var e=b[c].match(m)||[];a.a.o(g.match(m),function(b){a.a.ga(e,b,d)});b[c]=e.join(" ")}var f={__proto__:[]}instanceof Array,k={},h={};k[M&&/Firefox\/2/i.test(M.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"];k.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");
b(k,function(a,b){if(b.length)for(var c=0,g=b.length;c<g;c++)h[b[c]]=a});var l={propertychange:!0},g=w&&function(){for(var a=3,b=w.createElement("div"),c=b.getElementsByTagName("i");b.innerHTML="\x3c!--[if gt IE "+ ++a+"]><i></i><![endif]--\x3e",c[0];);return 4<a?a:p}(),m=/\S+/g;return{Bb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],o:function(a,b){for(var c=0,g=a.length;c<g;c++)b(a[c],c)},m:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,
b);for(var c=0,g=a.length;c<g;c++)if(a[c]===b)return c;return-1},vb:function(a,b,c){for(var g=0,d=a.length;g<d;g++)if(b.call(c,a[g],g))return a[g];return null},ya:function(b,c){var g=a.a.m(b,c);0<g?b.splice(g,1):0===g&&b.shift()},wb:function(b){b=b||[];for(var c=[],g=0,d=b.length;g<d;g++)0>a.a.m(c,b[g])&&c.push(b[g]);return c},Ka:function(a,b){a=a||[];for(var c=[],g=0,d=a.length;g<d;g++)c.push(b(a[g],g));return c},xa:function(a,b){a=a||[];for(var c=[],g=0,d=a.length;g<d;g++)b(a[g],g)&&c.push(a[g]);
return c},ia:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,g=b.length;c<g;c++)a.push(b[c]);return a},ga:function(b,c,g){var d=a.a.m(a.a.cb(b),c);0>d?g&&b.push(c):g||b.splice(d,1)},za:f,extend:d,Fa:c,Ga:f?c:d,A:b,pa:function(a,b){if(!a)return a;var c={},g;for(g in a)a.hasOwnProperty(g)&&(c[g]=b(a[g],g,a));return c},Ra:function(b){for(;b.firstChild;)a.removeNode(b.firstChild)},Jb:function(b){b=a.a.O(b);for(var c=(b[0]&&b[0].ownerDocument||w).createElement("div"),g=0,d=b.length;g<
d;g++)c.appendChild(a.S(b[g]));return c},la:function(b,c){for(var g=0,d=b.length,e=[];g<d;g++){var m=b[g].cloneNode(!0);e.push(c?a.S(m):m)}return e},T:function(b,c){a.a.Ra(b);if(c)for(var g=0,d=c.length;g<d;g++)b.appendChild(c[g])},Qb:function(b,c){var g=b.nodeType?[b]:b;if(0<g.length){for(var d=g[0],e=d.parentNode,m=0,f=c.length;m<f;m++)e.insertBefore(c[m],d);m=0;for(f=g.length;m<f;m++)a.removeNode(g[m])}},na:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==
b;)a.splice(0,1);if(1<a.length){var c=a[0],g=a[a.length-1];for(a.length=0;c!==g;)if(a.push(c),c=c.nextSibling,!c)return;a.push(g)}}return a},Sb:function(a,b){7>g?a.setAttribute("selected",b):a.selected=b},ib:function(a){return null===a||a===p?"":a.trim?a.trim():a.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Dc:function(a,b){a=a||"";return b.length>a.length?!1:a.substring(0,b.length)===b},jc:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(3===a.nodeType?
a.parentNode:a);if(b.compareDocumentPosition)return 16==(b.compareDocumentPosition(a)&16);for(;a&&a!=b;)a=a.parentNode;return!!a},Qa:function(b){return a.a.jc(b,b.ownerDocument.documentElement)},tb:function(b){return!!a.a.vb(b,a.a.Qa)},v:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},n:function(b,c,d){var m=g&&l[c];if(!m&&u)u(b).bind(c,d);else if(m||"function"!=typeof b.addEventListener)if("undefined"!=typeof b.attachEvent){var e=function(a){d.call(b,a)},f="on"+c;b.attachEvent(f,e);a.a.C.fa(b,
function(){b.detachEvent(f,e)})}else throw Error("Browser doesn't support addEventListener or attachEvent");else b.addEventListener(c,d,!1)},qa:function(b,c){if(!b||!b.nodeType)throw Error("element must be a DOM node when calling trigger");var g;"input"===a.a.v(b)&&b.type&&"click"==c.toLowerCase()?(g=b.type,g="checkbox"==g||"radio"==g):g=!1;if(u&&!g)u(b).trigger(c);else if("function"==typeof w.createEvent)if("function"==typeof b.dispatchEvent)g=w.createEvent(h[c]||"HTMLEvents"),g.initEvent(c,
!0,!0,y,0,0,0,0,0,!1,!1,!1,!1,0,b),b.dispatchEvent(g);else throw Error("The supplied element doesn't support dispatchEvent");else if(g&&b.click)b.click();else if("undefined"!=typeof b.fireEvent)b.fireEvent("on"+c);else throw Error("Browser doesn't support triggering events");},c:function(b){return a.F(b)?b():b},cb:function(b){return a.F(b)?b.B():b},Ia:function(b,c,g){var d;c&&("object"===typeof b.classList?(d=b.classList[g?"add":"remove"],a.a.o(c.match(m),function(a){d.call(b.classList,a)})):"string"===
typeof b.className.baseVal?e(b.className,"baseVal",c,g):e(b,"className",c,g))},Ha:function(b,c){var g=a.a.c(c);if(null===g||g===p)g="";var d=a.e.firstChild(b);!d||3!=d.nodeType||a.e.nextSibling(d)?a.e.T(b,[b.ownerDocument.createTextNode(g)]):d.data=g;a.a.mc(b)},Rb:function(a,b){a.name=b;if(7>=g)try{a.mergeAttributes(w.createElement("<input name='"+a.name+"'/>"),!1)}catch(c){}},mc:function(a){9<=g&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},kc:function(a){if(g){var b=a.style.width;
a.style.width=0;a.style.width=b}},Bc:function(b,c){b=a.a.c(b);c=a.a.c(c);for(var g=[],d=b;d<=c;d++)g.push(d);return g},O:function(a){for(var b=[],c=0,g=a.length;c<g;c++)b.push(a[c]);return b},Hc:6===g,Ic:7===g,M:g,Db:function(b,c){for(var g=a.a.O(b.getElementsByTagName("input")).concat(a.a.O(b.getElementsByTagName("textarea"))),d="string"==typeof c?function(a){return a.name===c}:function(a){return c.test(a.name)},m=[],e=g.length-1;0<=e;e--)d(g[e])&&m.push(g[e]);return m},yc:function(b){return"string"==
typeof b&&(b=a.a.ib(b))?E&&E.parse?E.parse(b):(new Function("return "+b))():null},jb:function(b,c,g){if(!E||!E.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return E.stringify(a.a.c(b),c,g)},zc:function(c,g,d){d=d||{};var m=d.params||{},e=d.includeFields||this.Bb,f=c;if("object"==typeof c&&"form"===a.a.v(c))for(var f=c.action,
l=e.length-1;0<=l;l--)for(var k=a.a.Db(c,e[l]),h=k.length-1;0<=h;h--)m[k[h].name]=k[h].value;g=a.a.c(g);var s=w.createElement("form");s.style.display="none";s.action=f;s.method="post";for(var p in g)c=w.createElement("input"),c.type="hidden",c.name=p,c.value=a.a.jb(a.a.c(g[p])),s.appendChild(c);b(m,function(a,b){var c=w.createElement("input");c.type="hidden";c.name=a;c.value=b;s.appendChild(c)});w.body.appendChild(s);d.submitter?d.submitter(s):s.submit();setTimeout(function(){s.parentNode.removeChild(s)},
0)}}}();a.b("utils",a.a);a.b("utils.arrayForEach",a.a.o);a.b("utils.arrayFirst",a.a.vb);a.b("utils.arrayFilter",a.a.xa);a.b("utils.arrayGetDistinctValues",a.a.wb);a.b("utils.arrayIndexOf",a.a.m);a.b("utils.arrayMap",a.a.Ka);a.b("utils.arrayPushAll",a.a.ia);a.b("utils.arrayRemoveItem",a.a.ya);a.b("utils.extend",a.a.extend);a.b("utils.fieldsIncludedWithJsonPost",a.a.Bb);a.b("utils.getFormFields",a.a.Db);a.b("utils.peekObservable",a.a.cb);a.b("utils.postJson",a.a.zc);a.b("utils.parseJson",a.a.yc);a.b("utils.registerEventHandler",
a.a.n);a.b("utils.stringifyJson",a.a.jb);a.b("utils.range",a.a.Bc);a.b("utils.toggleDomNodeCssClass",a.a.Ia);a.b("utils.trigger",a.a.qa);a.b("utils.unwrapObservable",a.a.c);a.b("utils.objectForEach",a.a.A);a.b("utils.addOrRemoveItem",a.a.ga);a.b("utils.setTextContent",a.a.Ha);a.b("unwrap",a.a.c);Function.prototype.bind||(Function.prototype.bind=function(a){var d=this;if(1===arguments.length)return function(){return d.apply(a,arguments)};var c=Array.prototype.slice.call(arguments,1);return function(){var e=
c.slice(0);e.push.apply(e,arguments);return d.apply(a,e)}});a.a.f=new function(){function a(b,k){var h=b[c];if(!h||"null"===h||!e[h]){if(!k)return p;h=b[c]="ko"+d++;e[h]={}}return e[h]}var d=0,c="__ko__"+(new Date).getTime(),e={};return{get:function(c,d){var e=a(c,!1);return e===p?p:e[d]},set:function(c,d,e){if(e!==p||a(c,!1)!==p)a(c,!0)[d]=e},clear:function(a){var b=a[c];return b?(delete e[b],a[c]=null,!0):!1},I:function(){return d++ +c}}};a.b("utils.domData",a.a.f);a.b("utils.domData.clear",a.a.f.clear);
a.a.C=new function(){function b(b,d){var e=a.a.f.get(b,c);e===p&&d&&(e=[],a.a.f.set(b,c,e));return e}function d(c){var e=b(c,!1);if(e)for(var e=e.slice(0),l=0;l<e.length;l++)e[l](c);a.a.f.clear(c);a.a.C.cleanExternalData(c);if(f[c.nodeType])for(e=c.firstChild;c=e;)e=c.nextSibling,8===c.nodeType&&d(c)}var c=a.a.f.I(),e={1:!0,8:!0,9:!0},f={1:!0,9:!0};return{fa:function(a,c){if("function"!=typeof c)throw Error("Callback must be a function");b(a,!0).push(c)},Pb:function(d,e){var f=b(d,!1);f&&(a.a.ya(f,
e),0==f.length&&a.a.f.set(d,c,p))},S:function(b){if(e[b.nodeType]&&(d(b),f[b.nodeType])){var c=[];a.a.ia(c,b.getElementsByTagName("*"));for(var l=0,g=c.length;l<g;l++)d(c[l])}return b},removeNode:function(b){a.S(b);b.parentNode&&b.parentNode.removeChild(b)},cleanExternalData:function(a){u&&"function"==typeof u.cleanData&&u.cleanData([a])}}};a.S=a.a.C.S;a.removeNode=a.a.C.removeNode;a.b("cleanNode",a.S);a.b("removeNode",a.removeNode);a.b("utils.domNodeDisposal",a.a.C);a.b("utils.domNodeDisposal.addDisposeCallback",
a.a.C.fa);a.b("utils.domNodeDisposal.removeDisposeCallback",a.a.C.Pb);(function(){a.a.ca=function(b,d){var c;if(u)if(u.parseHTML)c=u.parseHTML(b,d)||[];else{if((c=u.clean([b],d))&&c[0]){for(var e=c[0];e.parentNode&&11!==e.parentNode.nodeType;)e=e.parentNode;e.parentNode&&e.parentNode.removeChild(e)}}else{(e=d)||(e=w);c=e.parentWindow||e.defaultView||y;var f=a.a.ib(b).toLowerCase(),e=e.createElement("div"),f=f.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!f.indexOf("<tr")&&[2,"<table><tbody>",
"</tbody></table>"]||(!f.indexOf("<td")||!f.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],k="ignored<div>"+f[1]+b+f[2]+"</div>";for("function"==typeof c.innerShiv?e.appendChild(c.innerShiv(k)):e.innerHTML=k;f[0]--;)e=e.lastChild;c=a.a.O(e.lastChild.childNodes)}return c};a.a.gb=function(b,d){a.a.Ra(b);d=a.a.c(d);if(null!==d&&d!==p)if("string"!=typeof d&&(d=d.toString()),u)u(b).html(d);else for(var c=a.a.ca(d,b.ownerDocument),e=0;e<c.length;e++)b.appendChild(c[e])}})();
a.b("utils.parseHtmlFragment",a.a.ca);a.b("utils.setHtml",a.a.gb);a.H=function(){function b(c,d){if(c)if(8==c.nodeType){var f=a.H.Lb(c.nodeValue);null!=f&&d.push({ic:c,wc:f})}else if(1==c.nodeType)for(var f=0,k=c.childNodes,h=k.length;f<h;f++)b(k[f],d)}var d={};return{$a:function(a){if("function"!=typeof a)throw Error("You can only pass a function to ko.memoization.memoize()");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);
d[b]=a;return"\x3c!--[ko_memo:"+b+"]--\x3e"},Wb:function(a,b){var f=d[a];if(f===p)throw Error("Couldn't find any memo with ID "+a+". Perhaps it's already been unmemoized.");try{return f.apply(null,b||[]),!0}finally{delete d[a]}},Xb:function(c,d){var f=[];b(c,f);for(var k=0,h=f.length;k<h;k++){var l=f[k].ic,g=[l];d&&a.a.ia(g,d);a.H.Wb(f[k].wc,g);l.nodeValue="";l.parentNode&&l.parentNode.removeChild(l)}},Lb:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}();a.b("memoization",a.H);
a.b("memoization.memoize",a.H.$a);a.b("memoization.unmemoize",a.H.Wb);a.b("memoization.parseMemoText",a.H.Lb);a.b("memoization.unmemoizeDomNodeAndDescendants",a.H.Xb);a.Sa={throttle:function(b,d){b.throttleEvaluation=d;var c=null;return a.j({read:b,write:function(a){clearTimeout(c);c=setTimeout(function(){b(a)},d)}})},rateLimit:function(a,d){var c,e,f;"number"==typeof d?c=d:(c=d.timeout,e=d.method);f="notifyWhenChangesStop"==e?S:R;a.Za(function(a){return f(a,c)})},notify:function(a,d){a.equalityComparer=
"always"==d?null:J}};var Q={undefined:1,"boolean":1,number:1,string:1};a.b("extenders",a.Sa);a.Ub=function(b,d,c){this.da=b;this.La=d;this.hc=c;this.Gb=!1;a.D(this,"dispose",this.p)};a.Ub.prototype.p=function(){this.Gb=!0;this.hc()};a.Q=function(){a.a.Ga(this,a.Q.fn);this.G={};this.rb=1};var z={U:function(b,d,c){var e=this;c=c||"change";var f=new a.Ub(e,d?b.bind(d):b,function(){a.a.ya(e.G[c],f);e.ua&&e.ua(c)});e.ja&&e.ja(c);e.G[c]||(e.G[c]=[]);e.G[c].push(f);return f},notifySubscribers:function(b,
d){d=d||"change";"change"===d&&this.Yb();if(this.Ba(d))try{a.k.xb();for(var c=this.G[d].slice(0),e=0,f;f=c[e];++e)f.Gb||f.La(b)}finally{a.k.end()}},Aa:function(){return this.rb},pc:function(a){return this.Aa()!==a},Yb:function(){++this.rb},Za:function(b){var d=this,c=a.F(d),e,f,k;d.ta||(d.ta=d.notifySubscribers,d.notifySubscribers=function(a,b){b&&"change"!==b?"beforeChange"===b?d.pb(a):d.ta(a,b):d.qb(a)});var h=b(function(){c&&k===d&&(k=d());e=!1;d.Wa(f,k)&&d.ta(f=k)});d.qb=function(a){e=!0;k=a;
h()};d.pb=function(a){e||(f=a,d.ta(a,"beforeChange"))}},Ba:function(a){return this.G[a]&&this.G[a].length},nc:function(b){if(b)return this.G[b]&&this.G[b].length||0;var d=0;a.a.A(this.G,function(a,b){d+=b.length});return d},Wa:function(a,d){return!this.equalityComparer||!this.equalityComparer(a,d)},extend:function(b){var d=this;b&&a.a.A(b,function(b,e){var f=a.Sa[b];"function"==typeof f&&(d=f(d,e)||d)});return d}};a.D(z,"subscribe",z.U);a.D(z,"extend",z.extend);a.D(z,"getSubscriptionsCount",z.nc);
a.a.za&&a.a.Fa(z,Function.prototype);a.Q.fn=z;a.Hb=function(a){return null!=a&&"function"==typeof a.U&&"function"==typeof a.notifySubscribers};a.b("subscribable",a.Q);a.b("isSubscribable",a.Hb);a.Z=a.k=function(){function b(a){c.push(e);e=a}function d(){e=c.pop()}var c=[],e,f=0;return{xb:b,end:d,Ob:function(b){if(e){if(!a.Hb(b))throw Error("Only subscribable things can act as dependencies");e.La(b,b.ac||(b.ac=++f))}},u:function(a,c,e){try{return b(),a.apply(c,e||[])}finally{d()}},oa:function(){if(e)return e.w.oa()},
Ca:function(){if(e)return e.Ca}}}();a.b("computedContext",a.Z);a.b("computedContext.getDependenciesCount",a.Z.oa);a.b("computedContext.isInitial",a.Z.Ca);a.b("computedContext.isSleeping",a.Z.Jc);a.b("ignoreDependencies",a.Gc=a.k.u);a.r=function(b){function d(){if(0<arguments.length)return d.Wa(c,arguments[0])&&(d.X(),c=arguments[0],d.W()),this;a.k.Ob(d);return c}var c=b;a.Q.call(d);a.a.Ga(d,a.r.fn);d.B=function(){return c};d.W=function(){d.notifySubscribers(c)};d.X=function(){d.notifySubscribers(c,
"beforeChange")};a.D(d,"peek",d.B);a.D(d,"valueHasMutated",d.W);a.D(d,"valueWillMutate",d.X);return d};a.r.fn={equalityComparer:J};var H=a.r.Ac="__ko_proto__";a.r.fn[H]=a.r;a.a.za&&a.a.Fa(a.r.fn,a.Q.fn);a.Ta=function(b,d){return null===b||b===p||b[H]===p?!1:b[H]===d?!0:a.Ta(b[H],d)};a.F=function(b){return a.Ta(b,a.r)};a.Da=function(b){return"function"==typeof b&&b[H]===a.r||"function"==typeof b&&b[H]===a.j&&b.qc?!0:!1};a.b("observable",a.r);a.b("isObservable",a.F);a.b("isWriteableObservable",a.Da);
a.b("isWritableObservable",a.Da);a.ba=function(b){b=b||[];if("object"!=typeof b||!("length"in b))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");b=a.r(b);a.a.Ga(b,a.ba.fn);return b.extend({trackArrayChanges:!0})};a.ba.fn={remove:function(b){for(var d=this.B(),c=[],e="function"!=typeof b||a.F(b)?function(a){return a===b}:b,f=0;f<d.length;f++){var k=d[f];e(k)&&(0===c.length&&this.X(),c.push(k),d.splice(f,1),f--)}c.length&&this.W();return c},
removeAll:function(b){if(b===p){var d=this.B(),c=d.slice(0);this.X();d.splice(0,d.length);this.W();return c}return b?this.remove(function(c){return 0<=a.a.m(b,c)}):[]},destroy:function(b){var d=this.B(),c="function"!=typeof b||a.F(b)?function(a){return a===b}:b;this.X();for(var e=d.length-1;0<=e;e--)c(d[e])&&(d[e]._destroy=!0);this.W()},destroyAll:function(b){return b===p?this.destroy(function(){return!0}):b?this.destroy(function(d){return 0<=a.a.m(b,d)}):[]},indexOf:function(b){var d=this();return a.a.m(d,
b)},replace:function(a,d){var c=this.indexOf(a);0<=c&&(this.X(),this.B()[c]=d,this.W())}};a.a.o("pop push reverse shift sort splice unshift".split(" "),function(b){a.ba.fn[b]=function(){var a=this.B();this.X();this.yb(a,b,arguments);a=a[b].apply(a,arguments);this.W();return a}});a.a.o(["slice"],function(b){a.ba.fn[b]=function(){var a=this();return a[b].apply(a,arguments)}});a.a.za&&a.a.Fa(a.ba.fn,a.r.fn);a.b("observableArray",a.ba);a.Sa.trackArrayChanges=function(b){function d(){if(!c){c=!0;var g=
b.notifySubscribers;b.notifySubscribers=function(a,b){b&&"change"!==b||++k;return g.apply(this,arguments)};var d=[].concat(b.B()||[]);e=null;f=b.U(function(c){c=[].concat(c||[]);if(b.Ba("arrayChange")){var g;if(!e||1<k)e=a.a.Ma(d,c,{sparse:!0});g=e}d=c;e=null;k=0;g&&g.length&&b.notifySubscribers(g,"arrayChange")})}}if(!b.yb){var c=!1,e=null,f,k=0,h=b.ja,l=b.ua;b.ja=function(a){h&&h.call(b,a);"arrayChange"===a&&d()};b.ua=function(a){l&&l.call(b,a);"arrayChange"!==a||b.Ba("arrayChange")||(f.p(),c=!1)};
b.yb=function(b,d,f){function l(a,b,c){return h[h.length]={status:a,value:b,index:c}}if(c&&!k){var h=[],r=b.length,v=f.length,t=0;switch(d){case "push":t=r;case "unshift":for(d=0;d<v;d++)l("added",f[d],t+d);break;case "pop":t=r-1;case "shift":r&&l("deleted",b[t],t);break;case "splice":d=Math.min(Math.max(0,0>f[0]?r+f[0]:f[0]),r);for(var r=1===v?r:Math.min(d+(f[1]||0),r),v=d+v-2,t=Math.max(r,v),G=[],A=[],p=2;d<t;++d,++p)d<r&&A.push(l("deleted",b[d],d)),d<v&&G.push(l("added",f[p],d));a.a.Cb(A,G);break;
default:return}e=h}}}};a.w=a.j=function(b,d,c){function e(a,b,c){if(I&&b===g)throw Error("A 'pure' computed must not be called recursively");B[a]=c;c.sa=F++;c.ea=b.Aa()}function f(){var a,b;for(a in B)if(B.hasOwnProperty(a)&&(b=B[a],b.da.pc(b.ea)))return!0}function k(){!s&&B&&a.a.A(B,function(a,b){b.p&&b.p()});B=null;F=0;G=!0;s=r=!1}function h(){var a=g.throttleEvaluation;a&&0<=a?(clearTimeout(z),z=setTimeout(function(){l(!0)},a)):g.nb?g.nb():l(!0)}function l(b){if(!v&&!G){if(y&&y()){if(!t){w();return}}else t=
!1;v=!0;try{var c=B,m=F,f=I?p:!F;a.k.xb({La:function(a,b){G||(m&&c[b]?(e(b,a,c[b]),delete c[b],--m):B[b]||e(b,a,s?{da:a}:a.U(h)))},w:g,Ca:f});B={};F=0;try{var l=d?A.call(d):A()}finally{a.k.end(),m&&!s&&a.a.A(c,function(a,b){b.p&&b.p()}),r=!1}g.Wa(n,l)&&(s||q(n,"beforeChange"),n=l,s?g.Yb():b&&q(n));f&&q(n,"awake")}finally{v=!1}F||w()}}function g(){if(0<arguments.length){if("function"===typeof C)C.apply(d,arguments);else throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");
return this}a.k.Ob(g);(r||s&&f())&&l();return n}function m(){(r&&!F||s&&f())&&l();return n}function x(){return r||0<F}function q(a,b){g.notifySubscribers(a,b)}var n,r=!0,v=!1,t=!1,G=!1,A=b,I=!1,s=!1;A&&"object"==typeof A?(c=A,A=c.read):(c=c||{},A||(A=c.read));if("function"!=typeof A)throw Error("Pass a function that returns the value of the ko.computed");var C=c.write,D=c.disposeWhenNodeIsRemoved||c.q||null,u=c.disposeWhen||c.Pa,y=u,w=k,B={},F=0,z=null;d||(d=c.owner);a.Q.call(g);a.a.Ga(g,a.j.fn);
g.B=m;g.oa=function(){return F};g.qc="function"===typeof C;g.p=function(){w()};g.$=x;var T=g.Za;g.Za=function(a){T.call(g,a);g.nb=function(){g.pb(n);r=!0;g.qb(g)}};c.pure?(s=I=!0,g.ja=function(b){if(!G&&s&&"change"==b){s=!1;if(r||f())B=null,F=0,r=!0,l();else{var c=[];a.a.A(B,function(a,b){c[b.sa]=a});a.a.o(c,function(a,b){var c=B[a],g=c.da.U(h);g.sa=b;g.ea=c.ea;B[a]=g})}G||q(n,"awake")}},g.ua=function(b){G||"change"!=b||g.Ba("change")||(a.a.A(B,function(a,b){b.p&&(B[a]={da:b.da,sa:b.sa,ea:b.ea},b.p())}),
s=!0,q(p,"asleep"))},g.bc=g.Aa,g.Aa=function(){s&&(r||f())&&l();return g.bc()}):c.deferEvaluation&&(g.ja=function(a){"change"!=a&&"beforeChange"!=a||m()});a.D(g,"peek",g.B);a.D(g,"dispose",g.p);a.D(g,"isActive",g.$);a.D(g,"getDependenciesCount",g.oa);D&&(t=!0,D.nodeType&&(y=function(){return!a.a.Qa(D)||u&&u()}));s||c.deferEvaluation||l();D&&x()&&D.nodeType&&(w=function(){a.a.C.Pb(D,w);k()},a.a.C.fa(D,w));return g};a.sc=function(b){return a.Ta(b,a.j)};z=a.r.Ac;a.j[z]=a.r;a.j.fn={equalityComparer:J};
a.j.fn[z]=a.j;a.a.za&&a.a.Fa(a.j.fn,a.Q.fn);a.b("dependentObservable",a.j);a.b("computed",a.j);a.b("isComputed",a.sc);a.Nb=function(b,d){if("function"===typeof b)return a.w(b,d,{pure:!0});b=a.a.extend({},b);b.pure=!0;return a.w(b,d)};a.b("pureComputed",a.Nb);(function(){function b(a,f,k){k=k||new c;a=f(a);if("object"!=typeof a||null===a||a===p||a instanceof Date||a instanceof String||a instanceof Number||a instanceof Boolean)return a;var h=a instanceof Array?[]:{};k.save(a,h);d(a,function(c){var g=
f(a[c]);switch(typeof g){case "boolean":case "number":case "string":case "function":h[c]=g;break;case "object":case "undefined":var d=k.get(g);h[c]=d!==p?d:b(g,f,k)}});return h}function d(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);"function"==typeof a.toJSON&&b("toJSON")}else for(c in a)b(c)}function c(){this.keys=[];this.mb=[]}a.Vb=function(c){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return b(c,function(b){for(var c=0;a.F(b)&&
10>c;c++)b=b();return b})};a.toJSON=function(b,c,d){b=a.Vb(b);return a.a.jb(b,c,d)};c.prototype={save:function(b,c){var d=a.a.m(this.keys,b);0<=d?this.mb[d]=c:(this.keys.push(b),this.mb.push(c))},get:function(b){b=a.a.m(this.keys,b);return 0<=b?this.mb[b]:p}}})();a.b("toJS",a.Vb);a.b("toJSON",a.toJSON);(function(){a.i={s:function(b){switch(a.a.v(b)){case "option":return!0===b.__ko__hasDomDataOptionValue__?a.a.f.get(b,a.d.options.ab):7>=a.a.M?b.getAttributeNode("value")&&b.getAttributeNode("value").specified?
b.value:b.text:b.value;case "select":return 0<=b.selectedIndex?a.i.s(b.options[b.selectedIndex]):p;default:return b.value}},Y:function(b,d,c){switch(a.a.v(b)){case "option":switch(typeof d){case "string":a.a.f.set(b,a.d.options.ab,p);"__ko__hasDomDataOptionValue__"in b&&delete b.__ko__hasDomDataOptionValue__;b.value=d;break;default:a.a.f.set(b,a.d.options.ab,d),b.__ko__hasDomDataOptionValue__=!0,b.value="number"===typeof d?d:""}break;case "select":if(""===d||null===d)d=p;for(var e=-1,f=0,k=b.options.length,
h;f<k;++f)if(h=a.i.s(b.options[f]),h==d||""==h&&d===p){e=f;break}if(c||0<=e||d===p&&1<b.size)b.selectedIndex=e;break;default:if(null===d||d===p)d="";b.value=d}}}})();a.b("selectExtensions",a.i);a.b("selectExtensions.readValue",a.i.s);a.b("selectExtensions.writeValue",a.i.Y);a.h=function(){function b(b){b=a.a.ib(b);123===b.charCodeAt(0)&&(b=b.slice(1,-1));var c=[],d=b.match(e),x,h=[],n=0;if(d){d.push(",");for(var r=0,v;v=d[r];++r){var t=v.charCodeAt(0);if(44===t){if(0>=n){c.push(x&&h.length?{key:x,
value:h.join("")}:{unknown:x||h.join("")});x=n=0;h=[];continue}}else if(58===t){if(!n&&!x&&1===h.length){x=h.pop();continue}}else 47===t&&r&&1<v.length?(t=d[r-1].match(f))&&!k[t[0]]&&(b=b.substr(b.indexOf(v)+1),d=b.match(e),d.push(","),r=-1,v="/"):40===t||123===t||91===t?++n:41===t||125===t||93===t?--n:x||h.length||34!==t&&39!==t||(v=v.slice(1,-1));h.push(v)}}return c}var d=["true","false","null","undefined"],c=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,e=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]",
"g"),f=/[\])"'A-Za-z0-9_$]+$/,k={"in":1,"return":1,"typeof":1},h={};return{ka:[],V:h,bb:b,Ea:function(e,g){function m(b,g){var e;if(!r){var l=a.getBindingHandler(b);if(l&&l.preprocess&&!(g=l.preprocess(g,b,m)))return;if(l=h[b])e=g,0<=a.a.m(d,e)?e=!1:(l=e.match(c),e=null===l?!1:l[1]?"Object("+l[1]+")"+l[2]:e),l=e;l&&k.push("'"+b+"':function(_z){"+e+"=_z}")}n&&(g="function(){return "+g+" }");f.push("'"+b+"':"+g)}g=g||{};var f=[],k=[],n=g.valueAccessors,r=g.bindingParams,v="string"===typeof e?b(e):e;
a.a.o(v,function(a){m(a.key||a.unknown,a.value)});k.length&&m("_ko_property_writers","{"+k.join(",")+" }");return f.join(",")},vc:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key==b)return!0;return!1},ra:function(b,c,d,e,f){if(b&&a.F(b))!a.Da(b)||f&&b.B()===e||b(e);else if((b=c.get("_ko_property_writers"))&&b[d])b[d](e)}}}();a.b("expressionRewriting",a.h);a.b("expressionRewriting.bindingRewriteValidators",a.h.ka);a.b("expressionRewriting.parseObjectLiteral",a.h.bb);a.b("expressionRewriting.preProcessBindings",
a.h.Ea);a.b("expressionRewriting._twoWayBindings",a.h.V);a.b("jsonExpressionRewriting",a.h);a.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",a.h.Ea);(function(){function b(a){return 8==a.nodeType&&k.test(f?a.text:a.nodeValue)}function d(a){return 8==a.nodeType&&h.test(f?a.text:a.nodeValue)}function c(a,c){for(var e=a,f=1,l=[];e=e.nextSibling;){if(d(e)&&(f--,0===f))return l;l.push(e);b(e)&&f++}if(!c)throw Error("Cannot find closing comment tag to match: "+a.nodeValue);return null}function e(a,
b){var d=c(a,b);return d?0<d.length?d[d.length-1].nextSibling:a.nextSibling:null}var f=w&&"\x3c!--test--\x3e"===w.createComment("test").text,k=f?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,h=f?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,l={ul:!0,ol:!0};a.e={R:{},childNodes:function(a){return b(a)?c(a):a.childNodes},ma:function(c){if(b(c)){c=a.e.childNodes(c);for(var d=0,e=c.length;d<e;d++)a.removeNode(c[d])}else a.a.Ra(c)},T:function(c,d){if(b(c)){a.e.ma(c);for(var e=c.nextSibling,
f=0,l=d.length;f<l;f++)e.parentNode.insertBefore(d[f],e)}else a.a.T(c,d)},Mb:function(a,c){b(a)?a.parentNode.insertBefore(c,a.nextSibling):a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)},Fb:function(c,d,e){e?b(c)?c.parentNode.insertBefore(d,e.nextSibling):e.nextSibling?c.insertBefore(d,e.nextSibling):c.appendChild(d):a.e.Mb(c,d)},firstChild:function(a){return b(a)?!a.nextSibling||d(a.nextSibling)?null:a.nextSibling:a.firstChild},nextSibling:function(a){b(a)&&(a=e(a));return a.nextSibling&&
d(a.nextSibling)?null:a.nextSibling},oc:b,Fc:function(a){return(a=(f?a.text:a.nodeValue).match(k))?a[1]:null},Kb:function(c){if(l[a.a.v(c)]){var m=c.firstChild;if(m){do if(1===m.nodeType){var f;f=m.firstChild;var h=null;if(f){do if(h)h.push(f);else if(b(f)){var k=e(f,!0);k?f=k:h=[f]}else d(f)&&(h=[f]);while(f=f.nextSibling)}if(f=h)for(h=m.nextSibling,k=0;k<f.length;k++)h?c.insertBefore(f[k],h):c.appendChild(f[k])}while(m=m.nextSibling)}}}}})();a.b("virtualElements",a.e);a.b("virtualElements.allowedBindings",
a.e.R);a.b("virtualElements.emptyNode",a.e.ma);a.b("virtualElements.insertAfter",a.e.Fb);a.b("virtualElements.prepend",a.e.Mb);a.b("virtualElements.setDomNodeChildren",a.e.T);(function(){a.L=function(){this.ec={}};a.a.extend(a.L.prototype,{nodeHasBindings:function(b){switch(b.nodeType){case 1:return null!=b.getAttribute("data-bind")||a.g.getComponentNameForNode(b);case 8:return a.e.oc(b);default:return!1}},getBindings:function(b,d){var c=this.getBindingsString(b,d),c=c?this.parseBindingsString(c,
d,b):null;return a.g.sb(c,b,d,!1)},getBindingAccessors:function(b,d){var c=this.getBindingsString(b,d),c=c?this.parseBindingsString(c,d,b,{valueAccessors:!0}):null;return a.g.sb(c,b,d,!0)},getBindingsString:function(b){switch(b.nodeType){case 1:return b.getAttribute("data-bind");case 8:return a.e.Fc(b);default:return null}},parseBindingsString:function(b,d,c,e){try{var f=this.ec,k=b+(e&&e.valueAccessors||""),h;if(!(h=f[k])){var l,g="with($context){with($data||{}){return{"+a.h.Ea(b,e)+"}}}";l=new Function("$context",
"$element",g);h=f[k]=l}return h(d,c)}catch(m){throw m.message="Unable to parse bindings.\nBindings value: "+b+"\nMessage: "+m.message,m;}}});a.L.instance=new a.L})();a.b("bindingProvider",a.L);(function(){function b(a){return function(){return a}}function d(a){return a()}function c(b){return a.a.pa(a.k.u(b),function(a,c){return function(){return b()[c]}})}function e(d,g,e){return"function"===typeof d?c(d.bind(null,g,e)):a.a.pa(d,b)}function f(a,b){return c(this.getBindings.bind(this,a,b))}function k(b,
c,d){var g,e=a.e.firstChild(c),f=a.L.instance,m=f.preprocessNode;if(m){for(;g=e;)e=a.e.nextSibling(g),m.call(f,g);e=a.e.firstChild(c)}for(;g=e;)e=a.e.nextSibling(g),h(b,g,d)}function h(b,c,d){var e=!0,f=1===c.nodeType;f&&a.e.Kb(c);if(f&&d||a.L.instance.nodeHasBindings(c))e=g(c,null,b,d).shouldBindDescendants;e&&!x[a.a.v(c)]&&k(b,c,!f)}function l(b){var c=[],d={},g=[];a.a.A(b,function I(e){if(!d[e]){var f=a.getBindingHandler(e);f&&(f.after&&(g.push(e),a.a.o(f.after,function(c){if(b[c]){if(-1!==a.a.m(g,
c))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+g.join(", "));I(c)}}),g.length--),c.push({key:e,Eb:f}));d[e]=!0}});return c}function g(b,c,g,e){var m=a.a.f.get(b,q);if(!c){if(m)throw Error("You cannot apply bindings multiple times to the same element.");a.a.f.set(b,q,!0)}!m&&e&&a.Tb(b,g);var h;if(c&&"function"!==typeof c)h=c;else{var k=a.L.instance,x=k.getBindingAccessors||f,n=a.j(function(){(h=c?c(g,b):x.call(k,b,g))&&g.K&&g.K();return h},null,{q:b});
h&&n.$()||(n=null)}var u;if(h){var w=n?function(a){return function(){return d(n()[a])}}:function(a){return h[a]},y=function(){return a.a.pa(n?n():h,d)};y.get=function(a){return h[a]&&d(w(a))};y.has=function(a){return a in h};e=l(h);a.a.o(e,function(c){var d=c.Eb.init,e=c.Eb.update,f=c.key;if(8===b.nodeType&&!a.e.R[f])throw Error("The binding '"+f+"' cannot be used with virtual elements");try{"function"==typeof d&&a.k.u(function(){var a=d(b,w(f),y,g.$data,g);if(a&&a.controlsDescendantBindings){if(u!==
p)throw Error("Multiple bindings ("+u+" and "+f+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");u=f}}),"function"==typeof e&&a.j(function(){e(b,w(f),y,g.$data,g)},null,{q:b})}catch(m){throw m.message='Unable to process binding "'+f+": "+h[f]+'"\nMessage: '+m.message,m;}})}return{shouldBindDescendants:u===p}}function m(b){return b&&b instanceof a.N?b:new a.N(b)}a.d={};var x={script:!0,textarea:!0};a.getBindingHandler=function(b){return a.d[b]};
a.N=function(b,c,d,g){var e=this,f="function"==typeof b&&!a.F(b),m,l=a.j(function(){var m=f?b():b,h=a.a.c(m);c?(c.K&&c.K(),a.a.extend(e,c),l&&(e.K=l)):(e.$parents=[],e.$root=h,e.ko=a);e.$rawData=m;e.$data=h;d&&(e[d]=h);g&&g(e,c,h);return e.$data},null,{Pa:function(){return m&&!a.a.tb(m)},q:!0});l.$()&&(e.K=l,l.equalityComparer=null,m=[],l.Zb=function(b){m.push(b);a.a.C.fa(b,function(b){a.a.ya(m,b);m.length||(l.p(),e.K=l=p)})})};a.N.prototype.createChildContext=function(b,c,d){return new a.N(b,this,
c,function(a,b){a.$parentContext=b;a.$parent=b.$data;a.$parents=(b.$parents||[]).slice(0);a.$parents.unshift(a.$parent);d&&d(a)})};a.N.prototype.extend=function(b){return new a.N(this.K||this.$data,this,null,function(c,d){c.$rawData=d.$rawData;a.a.extend(c,"function"==typeof b?b():b)})};var q=a.a.f.I(),n=a.a.f.I();a.Tb=function(b,c){if(2==arguments.length)a.a.f.set(b,n,c),c.K&&c.K.Zb(b);else return a.a.f.get(b,n)};a.va=function(b,c,d){1===b.nodeType&&a.e.Kb(b);return g(b,c,m(d),!0)};a.cc=function(b,
c,d){d=m(d);return a.va(b,e(c,d,b),d)};a.Ja=function(a,b){1!==b.nodeType&&8!==b.nodeType||k(m(a),b,!0)};a.ub=function(a,b){!u&&y.jQuery&&(u=y.jQuery);if(b&&1!==b.nodeType&&8!==b.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");b=b||y.document.body;h(m(a),b,!0)};a.Oa=function(b){switch(b.nodeType){case 1:case 8:var c=a.Tb(b);if(c)return c;if(b.parentNode)return a.Oa(b.parentNode)}return p};a.gc=function(b){return(b=a.Oa(b))?
b.$data:p};a.b("bindingHandlers",a.d);a.b("applyBindings",a.ub);a.b("applyBindingsToDescendants",a.Ja);a.b("applyBindingAccessorsToNode",a.va);a.b("applyBindingsToNode",a.cc);a.b("contextFor",a.Oa);a.b("dataFor",a.gc)})();(function(b){function d(d,e){var g=f.hasOwnProperty(d)?f[d]:b,m;g?g.U(e):(g=f[d]=new a.Q,g.U(e),c(d,function(a,b){var c=!(!b||!b.synchronous);k[d]={definition:a,tc:c};delete f[d];m||c?g.notifySubscribers(a):setTimeout(function(){g.notifySubscribers(a)},0)}),m=!0)}function c(a,b){e("getConfig",
[a],function(c){c?e("loadComponent",[a,c],function(a){b(a,c)}):b(null,null)})}function e(c,d,g,f){f||(f=a.g.loaders.slice(0));var k=f.shift();if(k){var q=k[c];if(q){var n=!1;if(q.apply(k,d.concat(function(a){n?g(null):null!==a?g(a):e(c,d,g,f)}))!==b&&(n=!0,!k.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.");}else e(c,d,g,f)}else g(null)}var f={},k={};a.g={get:function(c,e){var g=k.hasOwnProperty(c)?k[c]:
b;g?g.tc?a.k.u(function(){e(g.definition)}):setTimeout(function(){e(g.definition)},0):d(c,e)},zb:function(a){delete k[a]},ob:e};a.g.loaders=[];a.b("components",a.g);a.b("components.get",a.g.get);a.b("components.clearCachedDefinition",a.g.zb)})();(function(){function b(b,c,d,e){function k(){0===--v&&e(h)}var h={},v=2,t=d.template;d=d.viewModel;t?f(c,t,function(c){a.g.ob("loadTemplate",[b,c],function(a){h.template=a;k()})}):k();d?f(c,d,function(c){a.g.ob("loadViewModel",[b,c],function(a){h[l]=a;k()})}):
k()}function d(a,b,c){if("function"===typeof b)c(function(a){return new b(a)});else if("function"===typeof b[l])c(b[l]);else if("instance"in b){var e=b.instance;c(function(){return e})}else"viewModel"in b?d(a,b.viewModel,c):a("Unknown viewModel value: "+b)}function c(b){switch(a.a.v(b)){case "script":return a.a.ca(b.text);case "textarea":return a.a.ca(b.value);case "template":if(e(b.content))return a.a.la(b.content.childNodes)}return a.a.la(b.childNodes)}function e(a){return y.DocumentFragment?a instanceof
DocumentFragment:a&&11===a.nodeType}function f(a,b,c){"string"===typeof b.require?O||y.require?(O||y.require)([b.require],c):a("Uses require, but no AMD loader is present"):c(b)}function k(a){return function(b){throw Error("Component '"+a+"': "+b);}}var h={};a.g.register=function(b,c){if(!c)throw Error("Invalid configuration for "+b);if(a.g.Xa(b))throw Error("Component "+b+" is already registered");h[b]=c};a.g.Xa=function(a){return a in h};a.g.Ec=function(b){delete h[b];a.g.zb(b)};a.g.Ab={getConfig:function(a,
b){b(h.hasOwnProperty(a)?h[a]:null)},loadComponent:function(a,c,d){var e=k(a);f(e,c,function(c){b(a,e,c,d)})},loadTemplate:function(b,d,f){b=k(b);if("string"===typeof d)f(a.a.ca(d));else if(d instanceof Array)f(d);else if(e(d))f(a.a.O(d.childNodes));else if(d.element)if(d=d.element,y.HTMLElement?d instanceof HTMLElement:d&&d.tagName&&1===d.nodeType)f(c(d));else if("string"===typeof d){var l=w.getElementById(d);l?f(c(l)):b("Cannot find element with ID "+d)}else b("Unknown element type: "+d);else b("Unknown template value: "+
d)},loadViewModel:function(a,b,c){d(k(a),b,c)}};var l="createViewModel";a.b("components.register",a.g.register);a.b("components.isRegistered",a.g.Xa);a.b("components.unregister",a.g.Ec);a.b("components.defaultLoader",a.g.Ab);a.g.loaders.push(a.g.Ab);a.g.$b=h})();(function(){function b(b,e){var f=b.getAttribute("params");if(f){var f=d.parseBindingsString(f,e,b,{valueAccessors:!0,bindingParams:!0}),f=a.a.pa(f,function(d){return a.w(d,null,{q:b})}),k=a.a.pa(f,function(d){var e=d.B();return d.$()?a.w({read:function(){return a.a.c(d())},
write:a.Da(e)&&function(a){d()(a)},q:b}):e});k.hasOwnProperty("$raw")||(k.$raw=f);return k}return{$raw:{}}}a.g.getComponentNameForNode=function(b){b=a.a.v(b);return a.g.Xa(b)&&b};a.g.sb=function(c,d,f,k){if(1===d.nodeType){var h=a.g.getComponentNameForNode(d);if(h){c=c||{};if(c.component)throw Error('Cannot use the "component" binding on a custom element matching a component');var l={name:h,params:b(d,f)};c.component=k?function(){return l}:l}}return c};var d=new a.L;9>a.a.M&&(a.g.register=function(a){return function(b){w.createElement(b);
return a.apply(this,arguments)}}(a.g.register),w.createDocumentFragment=function(b){return function(){var d=b(),f=a.g.$b,k;for(k in f)f.hasOwnProperty(k)&&d.createElement(k);return d}}(w.createDocumentFragment))})();(function(b){function d(b,c,d){c=c.template;if(!c)throw Error("Component '"+b+"' has no template");b=a.a.la(c);a.e.T(d,b)}function c(a,b,c,d){var e=a.createViewModel;return e?e.call(a,d,{element:b,templateNodes:c}):d}var e=0;a.d.component={init:function(f,k,h,l,g){function m(){var a=x&&
x.dispose;"function"===typeof a&&a.call(x);q=null}var x,q,n=a.a.O(a.e.childNodes(f));a.a.C.fa(f,m);a.w(function(){var l=a.a.c(k()),h,t;"string"===typeof l?h=l:(h=a.a.c(l.name),t=a.a.c(l.params));if(!h)throw Error("No component name specified");var p=q=++e;a.g.get(h,function(e){if(q===p){m();if(!e)throw Error("Unknown component '"+h+"'");d(h,e,f);var l=c(e,f,n,t);e=g.createChildContext(l,b,function(a){a.$component=l;a.$componentTemplateNodes=n});x=l;a.Ja(e,f)}})},null,{q:f});return{controlsDescendantBindings:!0}}};
a.e.R.component=!0})();var P={"class":"className","for":"htmlFor"};a.d.attr={update:function(b,d){var c=a.a.c(d())||{};a.a.A(c,function(c,d){d=a.a.c(d);var k=!1===d||null===d||d===p;k&&b.removeAttribute(c);8>=a.a.M&&c in P?(c=P[c],k?b.removeAttribute(c):b[c]=d):k||b.setAttribute(c,d.toString());"name"===c&&a.a.Rb(b,k?"":d.toString())})}};(function(){a.d.checked={after:["value","attr"],init:function(b,d,c){function e(){var e=b.checked,f=x?k():e;if(!a.Z.Ca()&&(!l||e)){var h=a.k.u(d);g?m!==f?(e&&(a.a.ga(h,
f,!0),a.a.ga(h,m,!1)),m=f):a.a.ga(h,f,e):a.h.ra(h,c,"checked",f,!0)}}function f(){var c=a.a.c(d());b.checked=g?0<=a.a.m(c,k()):h?c:k()===c}var k=a.Nb(function(){return c.has("checkedValue")?a.a.c(c.get("checkedValue")):c.has("value")?a.a.c(c.get("value")):b.value}),h="checkbox"==b.type,l="radio"==b.type;if(h||l){var g=h&&a.a.c(d())instanceof Array,m=g?k():p,x=l||g;l&&!b.name&&a.d.uniqueName.init(b,function(){return!0});a.w(e,null,{q:b});a.a.n(b,"click",e);a.w(f,null,{q:b})}}};a.h.V.checked=!0;a.d.checkedValue=
{update:function(b,d){b.value=a.a.c(d())}}})();a.d.css={update:function(b,d){var c=a.a.c(d());null!==c&&"object"==typeof c?a.a.A(c,function(c,d){d=a.a.c(d);a.a.Ia(b,c,d)}):(c=String(c||""),a.a.Ia(b,b.__ko__cssValue,!1),b.__ko__cssValue=c,a.a.Ia(b,c,!0))}};a.d.enable={update:function(b,d){var c=a.a.c(d());c&&b.disabled?b.removeAttribute("disabled"):c||b.disabled||(b.disabled=!0)}};a.d.disable={update:function(b,d){a.d.enable.update(b,function(){return!a.a.c(d())})}};a.d.event={init:function(b,d,c,
e,f){var k=d()||{};a.a.A(k,function(h){"string"==typeof h&&a.a.n(b,h,function(b){var g,m=d()[h];if(m){try{var k=a.a.O(arguments);e=f.$data;k.unshift(e);g=m.apply(e,k)}finally{!0!==g&&(b.preventDefault?b.preventDefault():b.returnValue=!1)}!1===c.get(h+"Bubble")&&(b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation())}})})}};a.d.foreach={Ib:function(b){return function(){var d=b(),c=a.a.cb(d);if(!c||"number"==typeof c.length)return{foreach:d,templateEngine:a.P.Va};a.a.c(d);return{foreach:c.data,as:c.as,
includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:a.P.Va}}},init:function(b,d){return a.d.template.init(b,a.d.foreach.Ib(d))},update:function(b,d,c,e,f){return a.d.template.update(b,a.d.foreach.Ib(d),c,e,f)}};a.h.ka.foreach=!1;a.e.R.foreach=!0;a.d.hasfocus={init:function(b,d,c){function e(e){b.__ko_hasfocusUpdating=!0;var f=b.ownerDocument;if("activeElement"in f){var g;try{g=f.activeElement}catch(m){g=
f.body}e=g===b}f=d();a.h.ra(f,c,"hasfocus",e,!0);b.__ko_hasfocusLastValue=e;b.__ko_hasfocusUpdating=!1}var f=e.bind(null,!0),k=e.bind(null,!1);a.a.n(b,"focus",f);a.a.n(b,"focusin",f);a.a.n(b,"blur",k);a.a.n(b,"focusout",k)},update:function(b,d){var c=!!a.a.c(d());b.__ko_hasfocusUpdating||b.__ko_hasfocusLastValue===c||(c?b.focus():b.blur(),a.k.u(a.a.qa,null,[b,c?"focusin":"focusout"]))}};a.h.V.hasfocus=!0;a.d.hasFocus=a.d.hasfocus;a.h.V.hasFocus=!0;a.d.html={init:function(){return{controlsDescendantBindings:!0}},
update:function(b,d){a.a.gb(b,d())}};K("if");K("ifnot",!1,!0);K("with",!0,!1,function(a,d){return a.createChildContext(d)});var L={};a.d.options={init:function(b){if("select"!==a.a.v(b))throw Error("options binding applies only to SELECT elements");for(;0<b.length;)b.remove(0);return{controlsDescendantBindings:!0}},update:function(b,d,c){function e(){return a.a.xa(b.options,function(a){return a.selected})}function f(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function k(d,e){if(r&&
m)a.i.Y(b,a.a.c(c.get("value")),!0);else if(n.length){var g=0<=a.a.m(n,a.i.s(e[0]));a.a.Sb(e[0],g);r&&!g&&a.k.u(a.a.qa,null,[b,"change"])}}var h=b.multiple,l=0!=b.length&&h?b.scrollTop:null,g=a.a.c(d()),m=c.get("valueAllowUnset")&&c.has("value"),x=c.get("optionsIncludeDestroyed");d={};var q,n=[];m||(h?n=a.a.Ka(e(),a.i.s):0<=b.selectedIndex&&n.push(a.i.s(b.options[b.selectedIndex])));g&&("undefined"==typeof g.length&&(g=[g]),q=a.a.xa(g,function(b){return x||b===p||null===b||!a.a.c(b._destroy)}),c.has("optionsCaption")&&
(g=a.a.c(c.get("optionsCaption")),null!==g&&g!==p&&q.unshift(L)));var r=!1;d.beforeRemove=function(a){b.removeChild(a)};g=k;c.has("optionsAfterRender")&&"function"==typeof c.get("optionsAfterRender")&&(g=function(b,d){k(0,d);a.k.u(c.get("optionsAfterRender"),null,[d[0],b!==L?b:p])});a.a.fb(b,q,function(d,e,g){g.length&&(n=!m&&g[0].selected?[a.i.s(g[0])]:[],r=!0);e=b.ownerDocument.createElement("option");d===L?(a.a.Ha(e,c.get("optionsCaption")),a.i.Y(e,p)):(g=f(d,c.get("optionsValue"),d),a.i.Y(e,a.a.c(g)),
d=f(d,c.get("optionsText"),g),a.a.Ha(e,d));return[e]},d,g);a.k.u(function(){m?a.i.Y(b,a.a.c(c.get("value")),!0):(h?n.length&&e().length<n.length:n.length&&0<=b.selectedIndex?a.i.s(b.options[b.selectedIndex])!==n[0]:n.length||0<=b.selectedIndex)&&a.a.qa(b,"change")});a.a.kc(b);l&&20<Math.abs(l-b.scrollTop)&&(b.scrollTop=l)}};a.d.options.ab=a.a.f.I();a.d.selectedOptions={after:["options","foreach"],init:function(b,d,c){a.a.n(b,"change",function(){var e=d(),f=[];a.a.o(b.getElementsByTagName("option"),
function(b){b.selected&&f.push(a.i.s(b))});a.h.ra(e,c,"selectedOptions",f)})},update:function(b,d){if("select"!=a.a.v(b))throw Error("values binding applies only to SELECT elements");var c=a.a.c(d());c&&"number"==typeof c.length&&a.a.o(b.getElementsByTagName("option"),function(b){var d=0<=a.a.m(c,a.i.s(b));a.a.Sb(b,d)})}};a.h.V.selectedOptions=!0;a.d.style={update:function(b,d){var c=a.a.c(d()||{});a.a.A(c,function(c,d){d=a.a.c(d);if(null===d||d===p||!1===d)d="";b.style[c]=d})}};a.d.submit={init:function(b,
d,c,e,f){if("function"!=typeof d())throw Error("The value for a submit binding must be a function");a.a.n(b,"submit",function(a){var c,e=d();try{c=e.call(f.$data,b)}finally{!0!==c&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}})}};a.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(b,d){a.a.Ha(b,d())}};a.e.R.text=!0;(function(){if(y&&y.navigator)var b=function(a){if(a)return parseFloat(a[1])},d=y.opera&&y.opera.version&&parseInt(y.opera.version()),c=y.navigator.userAgent,
e=b(c.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),f=b(c.match(/Firefox\/([^ ]*)/));if(10>a.a.M)var k=a.a.f.I(),h=a.a.f.I(),l=function(b){var c=this.activeElement;(c=c&&a.a.f.get(c,h))&&c(b)},g=function(b,c){var d=b.ownerDocument;a.a.f.get(d,k)||(a.a.f.set(d,k,!0),a.a.n(d,"selectionchange",l));a.a.f.set(b,h,c)};a.d.textInput={init:function(b,c,l){function h(c,d){a.a.n(b,c,d)}function k(){var d=a.a.c(c());if(null===d||d===p)d="";w!==p&&d===w?setTimeout(k,4):b.value!==d&&(u=d,b.value=d)}function v(){A||
(w=b.value,A=setTimeout(t,4))}function t(){clearTimeout(A);w=A=p;var d=b.value;u!==d&&(u=d,a.h.ra(c(),l,"textInput",d))}var u=b.value,A,w;10>a.a.M?(h("propertychange",function(a){"value"===a.propertyName&&t()}),8==a.a.M&&(h("keyup",t),h("keydown",t)),8<=a.a.M&&(g(b,t),h("dragend",v))):(h("input",t),5>e&&"textarea"===a.a.v(b)?(h("keydown",v),h("paste",v),h("cut",v)):11>d?h("keydown",v):4>f&&(h("DOMAutoComplete",t),h("dragdrop",t),h("drop",t)));h("change",t);a.w(k,null,{q:b})}};a.h.V.textInput=!0;a.d.textinput=
{preprocess:function(a,b,c){c("textInput",a)}}})();a.d.uniqueName={init:function(b,d){if(d()){var c="ko_unique_"+ ++a.d.uniqueName.fc;a.a.Rb(b,c)}}};a.d.uniqueName.fc=0;a.d.value={after:["options","foreach"],init:function(b,d,c){if("input"!=b.tagName.toLowerCase()||"checkbox"!=b.type&&"radio"!=b.type){var e=["change"],f=c.get("valueUpdate"),k=!1,h=null;f&&("string"==typeof f&&(f=[f]),a.a.ia(e,f),e=a.a.wb(e));var l=function(){h=null;k=!1;var e=d(),g=a.i.s(b);a.h.ra(e,c,"value",g)};!a.a.M||"input"!=
b.tagName.toLowerCase()||"text"!=b.type||"off"==b.autocomplete||b.form&&"off"==b.form.autocomplete||-1!=a.a.m(e,"propertychange")||(a.a.n(b,"propertychange",function(){k=!0}),a.a.n(b,"focus",function(){k=!1}),a.a.n(b,"blur",function(){k&&l()}));a.a.o(e,function(c){var d=l;a.a.Dc(c,"after")&&(d=function(){h=a.i.s(b);setTimeout(l,0)},c=c.substring(5));a.a.n(b,c,d)});var g=function(){var e=a.a.c(d()),f=a.i.s(b);if(null!==h&&e===h)setTimeout(g,0);else if(e!==f)if("select"===a.a.v(b)){var l=c.get("valueAllowUnset"),
f=function(){a.i.Y(b,e,l)};f();l||e===a.i.s(b)?setTimeout(f,0):a.k.u(a.a.qa,null,[b,"change"])}else a.i.Y(b,e)};a.w(g,null,{q:b})}else a.va(b,{checkedValue:d})},update:function(){}};a.h.V.value=!0;a.d.visible={update:function(b,d){var c=a.a.c(d()),e="none"!=b.style.display;c&&!e?b.style.display="":!c&&e&&(b.style.display="none")}};(function(b){a.d[b]={init:function(d,c,e,f,k){return a.d.event.init.call(this,d,function(){var a={};a[b]=c();return a},e,f,k)}}})("click");a.J=function(){};a.J.prototype.renderTemplateSource=
function(){throw Error("Override renderTemplateSource");};a.J.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock");};a.J.prototype.makeTemplateSource=function(b,d){if("string"==typeof b){d=d||w;var c=d.getElementById(b);if(!c)throw Error("Cannot find template with ID "+b);return new a.t.l(c)}if(1==b.nodeType||8==b.nodeType)return new a.t.ha(b);throw Error("Unknown template type: "+b);};a.J.prototype.renderTemplate=function(a,d,c,e){a=this.makeTemplateSource(a,
e);return this.renderTemplateSource(a,d,c,e)};a.J.prototype.isTemplateRewritten=function(a,d){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,d).data("isRewritten")};a.J.prototype.rewriteTemplate=function(a,d,c){a=this.makeTemplateSource(a,c);d=d(a.text());a.text(d);a.data("isRewritten",!0)};a.b("templateEngine",a.J);a.kb=function(){function b(b,c,d,h){b=a.h.bb(b);for(var l=a.h.ka,g=0;g<b.length;g++){var m=b[g].key;if(l.hasOwnProperty(m)){var x=l[m];if("function"===typeof x){if(m=
x(b[g].value))throw Error(m);}else if(!x)throw Error("This template engine does not support the '"+m+"' binding within its templates");}}d="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+a.h.Ea(b,{valueAccessors:!0})+" } })()},'"+d.toLowerCase()+"')";return h.createJavaScriptEvaluatorBlock(d)+c}var d=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,c=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{lc:function(b,
c,d){c.isTemplateRewritten(b,d)||c.rewriteTemplate(b,function(b){return a.kb.xc(b,c)},d)},xc:function(a,f){return a.replace(d,function(a,c,d,e,m){return b(m,c,d,f)}).replace(c,function(a,c){return b(c,"\x3c!-- ko --\x3e","#comment",f)})},dc:function(b,c){return a.H.$a(function(d,h){var l=d.nextSibling;l&&l.nodeName.toLowerCase()===c&&a.va(l,b,h)})}}}();a.b("__tr_ambtns",a.kb.dc);(function(){a.t={};a.t.l=function(a){this.l=a};a.t.l.prototype.text=function(){var b=a.a.v(this.l),b="script"===b?"text":
"textarea"===b?"value":"innerHTML";if(0==arguments.length)return this.l[b];var d=arguments[0];"innerHTML"===b?a.a.gb(this.l,d):this.l[b]=d};var b=a.a.f.I()+"_";a.t.l.prototype.data=function(c){if(1===arguments.length)return a.a.f.get(this.l,b+c);a.a.f.set(this.l,b+c,arguments[1])};var d=a.a.f.I();a.t.ha=function(a){this.l=a};a.t.ha.prototype=new a.t.l;a.t.ha.prototype.text=function(){if(0==arguments.length){var b=a.a.f.get(this.l,d)||{};b.lb===p&&b.Na&&(b.lb=b.Na.innerHTML);return b.lb}a.a.f.set(this.l,
d,{lb:arguments[0]})};a.t.l.prototype.nodes=function(){if(0==arguments.length)return(a.a.f.get(this.l,d)||{}).Na;a.a.f.set(this.l,d,{Na:arguments[0]})};a.b("templateSources",a.t);a.b("templateSources.domElement",a.t.l);a.b("templateSources.anonymousTemplate",a.t.ha)})();(function(){function b(b,c,d){var e;for(c=a.e.nextSibling(c);b&&(e=b)!==c;)b=a.e.nextSibling(e),d(e,b)}function d(c,d){if(c.length){var e=c[0],f=c[c.length-1],h=e.parentNode,k=a.L.instance,r=k.preprocessNode;if(r){b(e,f,function(a,
b){var c=a.previousSibling,d=r.call(k,a);d&&(a===e&&(e=d[0]||b),a===f&&(f=d[d.length-1]||c))});c.length=0;if(!e)return;e===f?c.push(e):(c.push(e,f),a.a.na(c,h))}b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.ub(d,b)});b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.H.Xb(b,[d])});a.a.na(c,h)}}function c(a){return a.nodeType?a:0<a.length?a[0]:null}function e(b,e,f,h,q){q=q||{};var n=(b&&c(b)||f||{}).ownerDocument,r=q.templateEngine||k;a.kb.lc(f,r,n);f=r.renderTemplate(f,h,q,n);if("number"!=
typeof f.length||0<f.length&&"number"!=typeof f[0].nodeType)throw Error("Template engine must return an array of DOM nodes");n=!1;switch(e){case "replaceChildren":a.e.T(b,f);n=!0;break;case "replaceNode":a.a.Qb(b,f);n=!0;break;case "ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+e);}n&&(d(f,h),q.afterRender&&a.k.u(q.afterRender,null,[f,h.$data]));return f}function f(b,c,d){return a.F(b)?b():"function"===typeof b?b(c,d):b}var k;a.hb=function(b){if(b!=p&&!(b instanceof a.J))throw Error("templateEngine must inherit from ko.templateEngine");
k=b};a.eb=function(b,d,h,x,q){h=h||{};if((h.templateEngine||k)==p)throw Error("Set a template engine before calling renderTemplate");q=q||"replaceChildren";if(x){var n=c(x);return a.j(function(){var k=d&&d instanceof a.N?d:new a.N(a.a.c(d)),p=f(b,k.$data,k),k=e(x,q,p,k,h);"replaceNode"==q&&(x=k,n=c(x))},null,{Pa:function(){return!n||!a.a.Qa(n)},q:n&&"replaceNode"==q?n.parentNode:n})}return a.H.$a(function(c){a.eb(b,d,h,c,"replaceNode")})};a.Cc=function(b,c,h,k,q){function n(a,b){d(b,v);h.afterRender&&
h.afterRender(b,a);v=null}function r(a,c){v=q.createChildContext(a,h.as,function(a){a.$index=c});var d=f(b,a,v);return e(null,"ignoreTargetNode",d,v,h)}var v;return a.j(function(){var b=a.a.c(c)||[];"undefined"==typeof b.length&&(b=[b]);b=a.a.xa(b,function(b){return h.includeDestroyed||b===p||null===b||!a.a.c(b._destroy)});a.k.u(a.a.fb,null,[k,b,r,h,n])},null,{q:k})};var h=a.a.f.I();a.d.template={init:function(b,c){var d=a.a.c(c());if("string"==typeof d||d.name)a.e.ma(b);else{if("nodes"in d){if(d=
d.nodes||[],a.F(d))throw Error('The "nodes" option must be a plain, non-observable array.');}else d=a.e.childNodes(b);d=a.a.Jb(d);(new a.t.ha(b)).nodes(d)}return{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var k=c(),r;c=a.a.c(k);d=!0;e=null;"string"==typeof c?c={}:(k=c.name,"if"in c&&(d=a.a.c(c["if"])),d&&"ifnot"in c&&(d=!a.a.c(c.ifnot)),r=a.a.c(c.data));"foreach"in c?e=a.Cc(k||b,d&&c.foreach||[],c,b,f):d?(f="data"in c?f.createChildContext(r,c.as):f,e=a.eb(k||b,f,c,b)):a.e.ma(b);f=
e;(r=a.a.f.get(b,h))&&"function"==typeof r.p&&r.p();a.a.f.set(b,h,f&&f.$()?f:p)}};a.h.ka.template=function(b){b=a.h.bb(b);return 1==b.length&&b[0].unknown||a.h.vc(b,"name")?null:"This template engine does not support anonymous templates nested within its templates"};a.e.R.template=!0})();a.b("setTemplateEngine",a.hb);a.b("renderTemplate",a.eb);a.a.Cb=function(a,d,c){if(a.length&&d.length){var e,f,k,h,l;for(e=f=0;(!c||e<c)&&(h=a[f]);++f){for(k=0;l=d[k];++k)if(h.value===l.value){h.moved=l.index;l.moved=
h.index;d.splice(k,1);e=k=0;break}e+=k}}};a.a.Ma=function(){function b(b,c,e,f,k){var h=Math.min,l=Math.max,g=[],m,p=b.length,q,n=c.length,r=n-p||1,v=p+n+1,t,u,w;for(m=0;m<=p;m++)for(u=t,g.push(t=[]),w=h(n,m+r),q=l(0,m-1);q<=w;q++)t[q]=q?m?b[m-1]===c[q-1]?u[q-1]:h(u[q]||v,t[q-1]||v)+1:q+1:m+1;h=[];l=[];r=[];m=p;for(q=n;m||q;)n=g[m][q]-1,q&&n===g[m][q-1]?l.push(h[h.length]={status:e,value:c[--q],index:q}):m&&n===g[m-1][q]?r.push(h[h.length]={status:f,value:b[--m],index:m}):(--q,--m,k.sparse||h.push({status:"retained",
value:c[q]}));a.a.Cb(l,r,10*p);return h.reverse()}return function(a,c,e){e="boolean"===typeof e?{dontLimitMoves:e}:e||{};a=a||[];c=c||[];return a.length<=c.length?b(a,c,"added","deleted",e):b(c,a,"deleted","added",e)}}();a.b("utils.compareArrays",a.a.Ma);(function(){function b(b,d,f,k,h){var l=[],g=a.j(function(){var g=d(f,h,a.a.na(l,b))||[];0<l.length&&(a.a.Qb(l,g),k&&a.k.u(k,null,[f,g,h]));l.length=0;a.a.ia(l,g)},null,{q:b,Pa:function(){return!a.a.tb(l)}});return{aa:l,j:g.$()?g:p}}var d=a.a.f.I();
a.a.fb=function(c,e,f,k,h){function l(b,d){s=u[d];t!==d&&(z[b]=s);s.Ua(t++);a.a.na(s.aa,c);r.push(s);y.push(s)}function g(b,c){if(b)for(var d=0,e=c.length;d<e;d++)c[d]&&a.a.o(c[d].aa,function(a){b(a,d,c[d].wa)})}e=e||[];k=k||{};var m=a.a.f.get(c,d)===p,u=a.a.f.get(c,d)||[],q=a.a.Ka(u,function(a){return a.wa}),n=a.a.Ma(q,e,k.dontLimitMoves),r=[],v=0,t=0,w=[],y=[];e=[];for(var z=[],q=[],s,C=0,D,E;D=n[C];C++)switch(E=D.moved,D.status){case "deleted":E===p&&(s=u[v],s.j&&s.j.p(),w.push.apply(w,a.a.na(s.aa,
c)),k.beforeRemove&&(e[C]=s,y.push(s)));v++;break;case "retained":l(C,v++);break;case "added":E!==p?l(C,E):(s={wa:D.value,Ua:a.r(t++)},r.push(s),y.push(s),m||(q[C]=s))}g(k.beforeMove,z);a.a.o(w,k.beforeRemove?a.S:a.removeNode);for(var C=0,m=a.e.firstChild(c),H;s=y[C];C++){s.aa||a.a.extend(s,b(c,f,s.wa,h,s.Ua));for(v=0;n=s.aa[v];m=n.nextSibling,H=n,v++)n!==m&&a.e.Fb(c,n,H);!s.rc&&h&&(h(s.wa,s.aa,s.Ua),s.rc=!0)}g(k.beforeRemove,e);g(k.afterMove,z);g(k.afterAdd,q);a.a.f.set(c,d,r)}})();a.b("utils.setDomNodeChildrenFromArrayMapping",
a.a.fb);a.P=function(){this.allowTemplateRewriting=!1};a.P.prototype=new a.J;a.P.prototype.renderTemplateSource=function(b,d,c,e){if(d=(9>a.a.M?0:b.nodes)?b.nodes():null)return a.a.O(d.cloneNode(!0).childNodes);b=b.text();return a.a.ca(b,e)};a.P.Va=new a.P;a.hb(a.P.Va);a.b("nativeTemplateEngine",a.P);(function(){a.Ya=function(){var a=this.uc=function(){if(!u||!u.tmpl)return 0;try{if(0<=u.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(b,
e,f,k){k=k||w;f=f||{};if(2>a)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var h=b.data("precompiled");h||(h=b.text()||"",h=u.template(null,"{{ko_with $item.koBindingContext}}"+h+"{{/ko_with}}"),b.data("precompiled",h));b=[e.$data];e=u.extend({koBindingContext:e},f.templateOptions);e=u.tmpl(h,b,e);e.appendTo(k.createElement("div"));u.fragments={};return e};this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+
a+" })()) }}"};this.addTemplate=function(a,b){w.write("<script type='text/html' id='"+a+"'>"+b+"\x3c/script>")};0<a&&(u.tmpl.tag.ko_code={open:"__.push($1 || '');"},u.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};a.Ya.prototype=new a.J;var b=new a.Ya;0<b.uc&&a.hb(b);a.b("jqueryTmplTemplateEngine",a.Ya)})()})})();})();
define('ko_extended',["knockout"], function (ko) {
    "use strict";

    ko.bindingHandlers.domElement = {
        init: function (element, valueAccessor) {
            var observable = valueAccessor();
            if (ko.isObservable(observable)) {
                observable(element);
            }
        }
    };

    ko.bindingHandlers.toggleClick = {
        init: function (element, valueAccessor) {
            var observable = valueAccessor();
            ko.utils.registerEventHandler(element, "click", function () {
                observable(!observable());
            });
        }
    };

    ko.bindingHandlers.stopBinding = {
        init: function () {
            return { controlsDescendantBindings: true };
        }
    };

    ko.virtualElements.allowedBindings.stopBinding = true;

    return ko;
});
!function (i) { "use strict"; "function" == typeof define && define.amd ? define('slick',["jquery"], i) : "undefined" != typeof exports ? module.exports = i(require("jquery")) : i(jQuery) }((function (i) { "use strict"; var e, t = window.Slick || {}; e = 0, (t = function (t, o) { var s, n = this; n.defaults = { adaptiveHeight: !1, appendArrows: i(t), appendDots: i(t), arrows: !0, arrowsPlacement: null, asNavFor: null, prevArrow: '<button class="slick-prev" type="button"><span class="slick-prev-icon" aria-hidden="true"></span><span class="slick-sr-only">Previous Slide</span></button>', nextArrow: '<button class="slick-next" type="button"><span class="slick-next-icon" aria-hidden="true"></span><span class="slick-sr-only">Next Slide</span></button>', autoplay: !1, autoplaySpeed: 3e3, centerMode: !1, centerPadding: "50px", cssEase: "ease", customPaging: function (e, t) { return i('<button type="button"><span class="slick-dot-icon" aria-hidden="true"></span><span class="slick-sr-only">Go to slide ' + (t + 1) + " of " + (n.getDotCount() + 1) + "</span></button>") }, dots: !1, dotsClass: "slick-dots", draggable: !0, easing: "linear", edgeFriction: .35, fade: !1, infinite: !0, initialSlide: 0, instructionsText: null, lazyLoad: "ondemand", mobileFirst: !1, playIcon: '<span class="slick-play-icon" aria-hidden="true"></span>', pauseIcon: '<span class="slick-pause-icon" aria-hidden="true"></span>', pauseOnHover: !0, pauseOnFocus: !0, pauseOnDotsHover: !1, regionLabel: "carousel", respondTo: "window", responsive: null, rows: 1, rtl: !1, slide: "", slidesPerRow: 1, slidesToShow: 1, slidesToScroll: 1, speed: 500, swipe: !0, swipeToSlide: !1, touchMove: !0, touchThreshold: 5, useAutoplayToggleButton: !0, useCSS: !0, useGroupRole: !0, useTransform: !0, variableWidth: !1, vertical: !1, verticalSwiping: !1, waitForAnimate: !0, zIndex: 1e3, arrowToShow: 0 }, n.initials = { animating: !1, dragging: !1, autoPlayTimer: null, currentDirection: 0, currentLeft: null, currentSlide: 0, direction: 1, $dots: null, $instructionsText: null, listWidth: null, listHeight: null, loadIndex: 0, $nextArrow: null, $pauseButton: null, $pauseIcon: null, $playIcon: null, $prevArrow: null, scrolling: !1, slideCount: null, slideWidth: null, $slideTrack: null, $slides: null, sliding: !1, slideOffset: 0, swipeLeft: null, swiping: !1, $list: null, touchObject: {}, transformsEnabled: !1, unslicked: !1 }, i.extend(n, n.initials), n.activeBreakpoint = null, n.animType = null, n.animProp = null, n.breakpoints = [], n.breakpointSettings = [], n.cssTransitions = !1, n.focussed = !1, n.interrupted = !1, n.hidden = "hidden", n.paused = !0, n.positionProp = null, n.respondTo = null, n.rowCount = 1, n.shouldClick = !0, n.$slider = i(t), n.$slidesCache = null, n.transformType = null, n.transitionType = null, n.visibilityChange = "visibilitychange", n.windowWidth = 0, n.windowTimer = null, s = i(t).data("slick") || {}, n.options = i.extend({}, n.defaults, o, s), n.currentSlide = n.options.initialSlide, n.originalSettings = n.options, void 0 !== document.mozHidden ? (n.hidden = "mozHidden", n.visibilityChange = "mozvisibilitychange") : void 0 !== document.webkitHidden && (n.hidden = "webkitHidden", n.visibilityChange = "webkitvisibilitychange"), n.autoPlay = i.proxy(n.autoPlay, n), n.autoPlayClear = i.proxy(n.autoPlayClear, n), n.autoPlayIterator = i.proxy(n.autoPlayIterator, n), n.autoPlayToggleHandler = i.proxy(n.autoPlayToggleHandler, n), n.changeSlide = i.proxy(n.changeSlide, n), n.clickHandler = i.proxy(n.clickHandler, n), n.selectHandler = i.proxy(n.selectHandler, n), n.setPosition = i.proxy(n.setPosition, n), n.swipeHandler = i.proxy(n.swipeHandler, n), n.dragHandler = i.proxy(n.dragHandler, n), n.instanceUid = e++, n.htmlExpr = /^(?:\s*(<[\w\W]+>)[^>]*)$/, n.registerBreakpoints(), n.init(!0) }).prototype.addSlide = t.prototype.slickAdd = function (e, t, o) { var s = this; if ("boolean" == typeof t) o = t, t = null; else if (t < 0 || t >= s.slideCount) return !1; s.unload(), "number" == typeof t ? 0 === t && 0 === s.$slides.length ? i(e).appendTo(s.$slideTrack) : o ? i(e).insertBefore(s.$slides.eq(t)) : i(e).insertAfter(s.$slides.eq(t)) : !0 === o ? i(e).prependTo(s.$slideTrack) : i(e).appendTo(s.$slideTrack), s.$slides = s.$slideTrack.children(this.options.slide), s.$slideTrack.children(this.options.slide).detach(), s.$slideTrack.append(s.$slides), s.$slides.each((function (e, t) { i(t).attr("data-slick-index", e), i(t).attr("role", "group"), i(t).attr("aria-label", "slide " + (e + 1)) })), s.$slidesCache = s.$slides, s.reinit() }, t.prototype.animateHeight = function () { var i = this; if (1 === i.options.slidesToShow && !0 === i.options.adaptiveHeight && !1 === i.options.vertical) { var e = i.$slides.eq(i.currentSlide).outerHeight(!0); i.$list.animate({ height: e }, i.options.speed) } }, t.prototype.animateSlide = function (e, t) { var o = {}, s = this; s.animateHeight(), !0 === s.options.rtl && !1 === s.options.vertical && (e = -e), !1 === s.transformsEnabled ? !1 === s.options.vertical ? s.$slideTrack.animate({ left: e }, s.options.speed, s.options.easing, t) : s.$slideTrack.animate({ top: e }, s.options.speed, s.options.easing, t) : !1 === s.cssTransitions ? (!0 === s.options.rtl && (s.currentLeft = -s.currentLeft), i({ animStart: s.currentLeft }).animate({ animStart: e }, { duration: s.options.speed, easing: s.options.easing, step: function (i) { i = Math.ceil(i), !1 === s.options.vertical ? (o[s.animType] = "translate(" + i + "px, 0px)", s.$slideTrack.css(o)) : (o[s.animType] = "translate(0px," + i + "px)", s.$slideTrack.css(o)) }, complete: function () { t && t.call() } })) : (s.applyTransition(), e = Math.ceil(e), !1 === s.options.vertical ? o[s.animType] = "translate3d(" + e + "px, 0px, 0px)" : o[s.animType] = "translate3d(0px," + e + "px, 0px)", s.$slideTrack.css(o), t && setTimeout((function () { s.disableTransition(), t.call() }), s.options.speed)) }, t.prototype.getNavTarget = function () { var e = this.options.asNavFor; return e && null !== e && (e = i(e).not(this.$slider)), e }, t.prototype.asNavFor = function (e) { var t = this.getNavTarget(); null !== t && "object" == typeof t && t.each((function () { var t = i(this).slick("getSlick"); t.unslicked || t.slideHandler(e, !0) })) }, t.prototype.applyTransition = function (i) { var e = this, t = {}; !1 === e.options.fade ? t[e.transitionType] = e.transformType + " " + e.options.speed + "ms " + e.options.cssEase : t[e.transitionType] = "opacity " + e.options.speed + "ms " + e.options.cssEase, !1 === e.options.fade ? e.$slideTrack.css(t) : e.$slides.eq(i).css(t) }, t.prototype.autoPlay = function () { var i = this; i.autoPlayClear(), i.slideCount > i.options.slidesToShow && (i.autoPlayTimer = setInterval(i.autoPlayIterator, i.options.autoplaySpeed)) }, t.prototype.autoPlayClear = function () { this.autoPlayTimer && clearInterval(this.autoPlayTimer) }, t.prototype.autoPlayIterator = function () { var i = this, e = i.currentSlide + i.options.slidesToScroll; i.paused || i.interrupted || i.focussed || (!1 === i.options.infinite && (1 === i.direction && i.currentSlide + 1 === i.slideCount - 1 ? i.direction = 0 : 0 === i.direction && (e = i.currentSlide - i.options.slidesToScroll, i.currentSlide - 1 == 0 && (i.direction = 1))), i.slideHandler(e)) }, t.prototype.autoPlayToggleHandler = function () { var i = this; i.paused ? (i.$playIcon.css("display", "none"), i.$pauseIcon.css("display", "block"), i.$pauseButton.find(".slick-play-text").attr("style", "display: none"), i.$pauseButton.find(".slick-pause-text").removeAttr("style"), i.slickPlay()) : (i.$playIcon.css("display", "block"), i.$pauseIcon.css("display", "none"), i.$pauseButton.find(".slick-play-text").removeAttr("style"), i.$pauseButton.find(".slick-pause-text").attr("style", "display: none"), i.slickPause()) }, t.prototype.buildArrows = function () { var e, t = this; if (e = t.options.arrowToShow > 0 && t.slideCount >= t.options.arrowToShow, !0 === t.options.arrows) if (t.$prevArrow = i(t.options.prevArrow).addClass("slick-arrow"), t.$nextArrow = i(t.options.nextArrow).addClass("slick-arrow"), t.slideCount > t.options.slidesToShow || e) { if (t.htmlExpr.test(t.options.prevArrow)) if (null != t.options.arrowsPlacement) switch (t.options.arrowsPlacement) { case "beforeSlides": case "split": t.$prevArrow.prependTo(t.options.appendArrows); break; case "afterSlides": t.$prevArrow.appendTo(t.options.appendArrows) } else t.$prevArrow.prependTo(t.options.appendArrows); if (t.htmlExpr.test(t.options.nextArrow)) if (null != t.options.arrowsPlacement) switch (t.options.arrowsPlacement) { case "beforeSlides": console.log("test2"), t.$prevArrow.after(t.$nextArrow); break; case "afterSlides": case "split": t.$nextArrow.appendTo(t.options.appendArrows) } else t.$nextArrow.appendTo(t.options.appendArrows); !0 !== t.options.infinite && t.$prevArrow.addClass("slick-disabled").prop("disabled", !0) } else t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").prop("disabled", !0) }, t.prototype.buildDots = function () { var e, t, o = this; if (!0 === o.options.dots && o.slideCount > o.options.slidesToShow) { for (o.$slider.addClass("slick-dotted"), t = i("<ul />").addClass(o.options.dotsClass), e = 0; e <= o.getDotCount(); e += 1)t.append(i("<li />").append(o.options.customPaging.call(this, o, e))); o.$dots = t.appendTo(o.options.appendDots), o.$dots.find("li").first().addClass("slick-active") } }, t.prototype.buildOut = function () { var e = this; e.$slides = e.$slider.children(e.options.slide + ":not(.slick-cloned)").addClass("slick-slide"), e.slideCount = e.$slides.length, e.$slides.each((function (t, o) { i(o).attr("data-slick-index", t).data("originalStyling", i(o).attr("style") || ""), e.options.useGroupRole && i(o).attr("role", "group").attr("aria-label", "slide " + (t + 1)) })), e.$slider.addClass("slick-slider"), e.$slider.attr("role", "region"), e.$slider.attr("aria-label", e.options.regionLabel), e.$slider.attr("aria-live", "polite"), e.$slider.attr("aria-atomic", "false"), e.$slider.attr("aria-relevant", "additions"), e.$slideTrack = 0 === e.slideCount ? i('<div class="slick-track"/>').appendTo(e.$slider) : e.$slides.wrapAll('<div class="slick-track"/>').parent(), e.$list = e.$slideTrack.wrap('<div class="slick-list"/>').parent(), e.$slideTrack.css("opacity", 0), !0 !== e.options.centerMode && !0 !== e.options.swipeToSlide || (e.options.slidesToScroll = 1), i("img[data-lazy]", e.$slider).not("[src]").addClass("slick-loading"), e.setupInfinite(), e.buildArrows(), e.buildDots(), e.updateDots(), e.setSlideClasses("number" == typeof e.currentSlide ? e.currentSlide : 0), !0 === e.options.draggable && e.$list.addClass("draggable"), e.options.autoplay && e.options.useAutoplayToggleButton && (e.$pauseIcon = i(e.options.pauseIcon).attr("aria-hidden", !0), e.$playIcon = i(e.options.playIcon).attr("aria-hidden", !0), e.$pauseButton = i('<button type="button" class="slick-autoplay-toggle-button">'), e.$pauseButton.append(e.$pauseIcon), e.$pauseButton.append(e.$playIcon.css("display", "none")), e.$pauseButton.append(i('<span class="slick-pause-text slick-sr-only">Pause</span>')), e.$pauseButton.append(i('<span class="slick-play-text slick-sr-only" style="display: none">Play</span>')), e.$pauseButton.prependTo(e.$slider)), null != e.options.instructionsText && "" != e.options.instructionsText && (e.$instructionsText = i('<p class="slick-instructions slick-sr-only">' + e.options.instructionsText + "</p>"), e.$instructionsText.prependTo(e.$slider)) }, t.prototype.buildRows = function () { var i, e, t, o, s, n, l, r = this; if (o = document.createDocumentFragment(), n = r.$slider.children(), r.options.rows > 0) { for (l = r.options.slidesPerRow * r.options.rows, s = Math.ceil(n.length / l), i = 0; i < s; i++) { var a = document.createElement("div"); for (e = 0; e < r.options.rows; e++) { var d = document.createElement("div"); for (t = 0; t < r.options.slidesPerRow; t++) { var p = i * l + (e * r.options.slidesPerRow + t); n.get(p) && d.appendChild(n.get(p)) } a.appendChild(d) } o.appendChild(a) } r.$slider.empty().append(o), r.$slider.children().children().children().css({ width: 100 / r.options.slidesPerRow + "%", display: "inline-block" }) } }, t.prototype.checkResponsive = function (e, t) { var o, s, n, l = this, r = !1, a = l.$slider.width(), d = window.innerWidth || i(window).width(); if ("window" === l.respondTo ? n = d : "slider" === l.respondTo ? n = a : "min" === l.respondTo && (n = Math.min(d, a)), l.options.responsive && l.options.responsive.length && null !== l.options.responsive) { for (o in s = null, l.breakpoints) l.breakpoints.hasOwnProperty(o) && (!1 === l.originalSettings.mobileFirst ? n < l.breakpoints[o] && (s = l.breakpoints[o]) : n > l.breakpoints[o] && (s = l.breakpoints[o])); null !== s ? null !== l.activeBreakpoint ? (s !== l.activeBreakpoint || t) && (l.activeBreakpoint = s, "unslick" === l.breakpointSettings[s] ? l.unslick(s) : (l.options = i.extend({}, l.originalSettings, l.breakpointSettings[s]), !0 === e && (l.currentSlide = l.options.initialSlide), l.refresh(e)), r = s) : (l.activeBreakpoint = s, "unslick" === l.breakpointSettings[s] ? l.unslick(s) : (l.options = i.extend({}, l.originalSettings, l.breakpointSettings[s]), !0 === e && (l.currentSlide = l.options.initialSlide), l.refresh(e)), r = s) : null !== l.activeBreakpoint && (l.activeBreakpoint = null, l.options = l.originalSettings, !0 === e && (l.currentSlide = l.options.initialSlide), l.refresh(e), r = s), e || !1 === r || l.$slider.trigger("breakpoint", [l, r]) } }, t.prototype.changeSlide = function (e, t) { var o, s, n, l = this, r = i(e.currentTarget); switch (r.is("a") && e.preventDefault(), r.is("li") || (r = r.closest("li")), n = l.options.arrowToShow > 0 && l.slideCount >= l.options.arrowToShow, o = l.slideCount % l.options.slidesToScroll != 0 ? 0 : (l.slideCount - l.currentSlide) % l.options.slidesToScroll, e.data.message) { case "previous": s = 0 === o ? l.options.slidesToScroll : l.options.slidesToShow - o, l.slideCount > l.options.slidesToShow ? l.slideHandler(l.currentSlide - s, !1, t) : n && (s = 0 === o ? l.options.slidesToScroll : l.options.arrowToShow - o, l.slideHandler(l.currentSlide - s, !1, t)); break; case "next": s = 0 === o ? l.options.slidesToScroll : o, (l.slideCount > l.options.slidesToShow || n) && l.slideHandler(l.currentSlide + s, !1, t); break; case "index": var a = 0 === e.data.index ? 0 : e.data.index || r.index() * l.options.slidesToScroll; l.slideHandler(l.checkNavigable(a), !1, t), r.children().trigger("focus"); break; default: return } }, t.prototype.checkNavigable = function (i) { var e, t; if (t = 0, i > (e = this.getNavigableIndexes())[e.length - 1]) i = e[e.length - 1]; else for (var o in e) { if (i < e[o]) { i = t; break } t = e[o] } return i }, t.prototype.cleanUpEvents = function () { var e = this; e.options.autoplay && e.options.useAutoplayToggleButton && e.$pauseButton.off("click.slick", e.autoPlayToggleHandler), e.options.dots && null !== e.$dots && i("li", e.$dots).off("click.slick", e.changeSlide).off("mouseenter.slick", i.proxy(e.interrupt, e, !0)).off("mouseleave.slick", i.proxy(e.interrupt, e, !1)), e.$slider.off("focus.slick blur.slick"), !0 === e.options.arrows && e.slideCount > e.options.slidesToShow && (e.$prevArrow && e.$prevArrow.off("click.slick", e.changeSlide), e.$nextArrow && e.$nextArrow.off("click.slick", e.changeSlide)), e.$list.off("touchstart.slick mousedown.slick", e.swipeHandler), e.$list.off("touchmove.slick mousemove.slick", e.swipeHandler), e.$list.off("touchend.slick mouseup.slick", e.swipeHandler), e.$list.off("touchcancel.slick mouseleave.slick", e.swipeHandler), e.$list.off("click.slick", e.clickHandler), i(document).off(e.visibilityChange, e.visibility), e.cleanUpSlideEvents(), i(window).off("orientationchange.slick.slick-" + e.instanceUid, e.orientationChange), i(window).off("resize.slick.slick-" + e.instanceUid, e.resize), i("[draggable!=true]", e.$slideTrack).off("dragstart", e.preventDefault), i(window).off("load.slick.slick-" + e.instanceUid, e.setPosition) }, t.prototype.cleanUpSlideEvents = function () { var e = this; e.$list.off("mouseenter.slick", i.proxy(e.interrupt, e, !0)), e.$list.off("mouseleave.slick", i.proxy(e.interrupt, e, !1)) }, t.prototype.cleanUpRows = function () { var i, e = this; e.options.rows > 0 && ((i = e.$slides.children().children()).removeAttr("style"), e.$slider.empty().append(i)) }, t.prototype.clickHandler = function (i) { !1 === this.shouldClick && (i.stopImmediatePropagation(), i.stopPropagation(), i.preventDefault()) }, t.prototype.destroy = function (e) { var t = this; t.autoPlayClear(), t.touchObject = {}, t.cleanUpEvents(), i(".slick-cloned", t.$slider).detach(), t.options.autoplay && t.options.useAutoplayToggleButton && t.$pauseButton.remove(), t.$dots && t.$dots.remove(), t.$prevArrow && t.$prevArrow.length && (t.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").prop("disabled", !1).css("display", ""), t.htmlExpr.test(t.options.prevArrow) && t.$prevArrow.remove()), t.$nextArrow && t.$nextArrow.length && (t.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").prop("disabled", !1).css("display", ""), t.htmlExpr.test(t.options.nextArrow) && t.$nextArrow.remove()), t.$slides && (t.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each((function () { i(this).attr("style", i(this).data("originalStyling")) })), t.$slideTrack.children(this.options.slide).detach(), t.$slideTrack.detach(), t.$list.detach(), t.$slider.append(t.$slides)), t.cleanUpRows(), t.$slider.removeClass("slick-slider"), t.$slider.removeClass("slick-initialized"), t.$slider.removeClass("slick-dotted"), t.unslicked = !0, e || t.$slider.trigger("destroy", [t]) }, t.prototype.disableTransition = function (i) { var e = this, t = {}; t[e.transitionType] = "", !1 === e.options.fade ? e.$slideTrack.css(t) : e.$slides.eq(i).css(t) }, t.prototype.fadeSlide = function (i, e) { var t = this; !1 === t.cssTransitions ? (t.$slides.eq(i).css({ zIndex: t.options.zIndex }), t.$slides.eq(i).animate({ opacity: 1 }, t.options.speed, t.options.easing, e)) : (t.applyTransition(i), t.$slides.eq(i).css({ opacity: 1, zIndex: t.options.zIndex }), e && setTimeout((function () { t.disableTransition(i), e.call() }), t.options.speed)) }, t.prototype.fadeSlideOut = function (i) { var e = this; !1 === e.cssTransitions ? e.$slides.eq(i).animate({ opacity: 0, zIndex: e.options.zIndex - 2 }, e.options.speed, e.options.easing) : (e.applyTransition(i), e.$slides.eq(i).css({ opacity: 0, zIndex: e.options.zIndex - 2 })) }, t.prototype.filterSlides = t.prototype.slickFilter = function (i) { var e = this; null !== i && (e.$slidesCache = e.$slides, e.unload(), e.$slideTrack.children(this.options.slide).detach(), e.$slidesCache.filter(i).appendTo(e.$slideTrack), e.reinit()) }, t.prototype.focusHandler = function () { var e = this; e.$slider.off("focus.slick blur.slick").on("focus.slick", "*", (function (t) { var o = i(this); setTimeout((function () { e.options.pauseOnFocus && o.is(":focus") && (e.focussed = !0, e.autoPlay()) }), 0) })).on("blur.slick", "*", (function (t) { i(this); e.options.pauseOnFocus && (e.focussed = !1, e.autoPlay()) })) }, t.prototype.getCurrent = t.prototype.slickCurrentSlide = function () { return this.currentSlide }, t.prototype.getDotCount = function () { var i = this, e = 0, t = 0, o = 0; if (!0 === i.options.infinite) if (i.slideCount <= i.options.slidesToShow) ++o; else for (; e < i.slideCount;)++o, e = t + i.options.slidesToScroll, t += i.options.slidesToScroll <= i.options.slidesToShow ? i.options.slidesToScroll : i.options.slidesToShow; else if (!0 === i.options.centerMode) o = i.slideCount; else if (i.options.asNavFor) for (; e < i.slideCount;)++o, e = t + i.options.slidesToScroll, t += i.options.slidesToScroll <= i.options.slidesToShow ? i.options.slidesToScroll : i.options.slidesToShow; else o = 1 + Math.ceil((i.slideCount - i.options.slidesToShow) / i.options.slidesToScroll); return o - 1 }, t.prototype.getLeft = function (i) { var e, t, o, s, n = this, l = 0; return n.slideOffset = 0, t = n.$slides.first().outerHeight(!0), !0 === n.options.infinite ? (n.slideCount > n.options.slidesToShow && (n.slideOffset = n.slideWidth * n.options.slidesToShow * -1, s = -1, !0 === n.options.vertical && !0 === n.options.centerMode && (2 === n.options.slidesToShow ? s = -1.5 : 1 === n.options.slidesToShow && (s = -2)), l = t * n.options.slidesToShow * s), n.slideCount % n.options.slidesToScroll != 0 && i + n.options.slidesToScroll > n.slideCount && n.slideCount > n.options.slidesToShow && (i > n.slideCount ? (n.slideOffset = (n.options.slidesToShow - (i - n.slideCount)) * n.slideWidth * -1, l = (n.options.slidesToShow - (i - n.slideCount)) * t * -1) : (n.slideOffset = n.slideCount % n.options.slidesToScroll * n.slideWidth * -1, l = n.slideCount % n.options.slidesToScroll * t * -1))) : i + n.options.slidesToShow > n.slideCount && (n.slideOffset = (i + n.options.slidesToShow - n.slideCount) * n.slideWidth, l = (i + n.options.slidesToShow - n.slideCount) * t), n.slideCount <= n.options.slidesToShow && (n.slideOffset = 0, l = 0), !0 === n.options.centerMode && n.slideCount <= n.options.slidesToShow ? n.slideOffset = n.slideWidth * Math.floor(n.options.slidesToShow) / 2 - n.slideWidth * n.slideCount / 2 : !0 === n.options.centerMode && !0 === n.options.infinite ? n.slideOffset += n.slideWidth * Math.floor(n.options.slidesToShow / 2) - n.slideWidth : !0 === n.options.centerMode && (n.slideOffset = 0, n.slideOffset += n.slideWidth * Math.floor(n.options.slidesToShow / 2)), e = !1 === n.options.vertical ? i * n.slideWidth * -1 + n.slideOffset : i * t * -1 + l, !0 === n.options.variableWidth && (o = n.slideCount <= n.options.slidesToShow || !1 === n.options.infinite ? n.$slideTrack.children(".slick-slide").eq(i) : n.$slideTrack.children(".slick-slide").eq(i + n.options.slidesToShow), e = !0 === n.options.rtl ? o[0] ? -1 * (n.$slideTrack.width() - o[0].offsetLeft - o.width()) : 0 : o[0] ? -1 * o[0].offsetLeft : 0, !0 === n.options.centerMode && (o = n.slideCount <= n.options.slidesToShow || !1 === n.options.infinite ? n.$slideTrack.children(".slick-slide").eq(i) : n.$slideTrack.children(".slick-slide").eq(i + n.options.slidesToShow + 1), e = !0 === n.options.rtl ? o[0] ? -1 * (n.$slideTrack.width() - o[0].offsetLeft - o.width()) : 0 : o[0] ? -1 * o[0].offsetLeft : 0, e += (n.$list.width() - o.outerWidth()) / 2)), e }, t.prototype.getOption = t.prototype.slickGetOption = function (i) { return this.options[i] }, t.prototype.getNavigableIndexes = function () { var i, e = this, t = 0, o = 0, s = []; for (!1 === e.options.infinite ? i = e.slideCount : (t = -1 * e.options.slidesToScroll, o = -1 * e.options.slidesToScroll, i = 2 * e.slideCount); t < i;)s.push(t), t = o + e.options.slidesToScroll, o += e.options.slidesToScroll <= e.options.slidesToShow ? e.options.slidesToScroll : e.options.slidesToShow; return s }, t.prototype.getSlick = function () { return this }, t.prototype.getSlideCount = function () { var e, t, o, s = this; return o = !0 === s.options.centerMode ? Math.floor(s.$list.width() / 2) : 0, t = -1 * s.swipeLeft + o, !0 === s.options.swipeToSlide ? (s.$slideTrack.find(".slick-slide").each((function (o, n) { var l, r; if (l = i(n).outerWidth(), r = n.offsetLeft, !0 !== s.options.centerMode && (r += l / 2), t < r + l) return e = n, !1 })), Math.abs(i(e).attr("data-slick-index") - s.currentSlide) || 1) : s.options.slidesToScroll }, t.prototype.goTo = t.prototype.slickGoTo = function (i, e) { this.changeSlide({ data: { message: "index", index: parseInt(i) } }, e) }, t.prototype.init = function (e) { var t = this; i(t.$slider).hasClass("slick-initialized") || (i(t.$slider).addClass("slick-initialized"), t.buildRows(), t.buildOut(), t.setProps(), t.startLoad(), t.loadSlider(), t.initializeEvents(), t.updateArrows(), t.updateDots(), t.checkResponsive(!0), t.focusHandler()), e && t.$slider.trigger("init", [t]), t.options.autoplay && (t.paused = !1, t.autoPlay()), t.updateSlideVisibility(), null != t.options.accessibility && console.warn("accessibility setting is no longer supported."), null != t.options.focusOnChange && console.warn("focusOnChange is no longer supported."), null != t.options.focusOnSelect && console.warn("focusOnSelect is no longer supported.") }, t.prototype.initArrowEvents = function () { var i, e = this; i = e.options.arrowToShow > 0 && e.slideCount >= e.options.arrowToShow, !0 === e.options.arrows && (e.slideCount > e.options.slidesToShow || i) && (e.$prevArrow.off("click.slick").on("click.slick", { message: "previous" }, e.changeSlide), e.$nextArrow.off("click.slick").on("click.slick", { message: "next" }, e.changeSlide)) }, t.prototype.initDotEvents = function () { var e = this; !0 === e.options.dots && e.slideCount > e.options.slidesToShow && i("li", e.$dots).on("click.slick", { message: "index" }, e.changeSlide), !0 === e.options.dots && !0 === e.options.pauseOnDotsHover && e.slideCount > e.options.slidesToShow && i("li", e.$dots).on("mouseenter.slick", i.proxy(e.interrupt, e, !0)).on("mouseleave.slick", i.proxy(e.interrupt, e, !1)) }, t.prototype.initSlideEvents = function () { var e = this; e.options.pauseOnHover && (e.$list.on("mouseenter.slick", i.proxy(e.interrupt, e, !0)), e.$list.on("mouseleave.slick", i.proxy(e.interrupt, e, !1))) }, t.prototype.initializeEvents = function () { var e = this; e.initArrowEvents(), e.initDotEvents(), e.initSlideEvents(), e.options.autoplay && e.options.useAutoplayToggleButton && e.$pauseButton.on("click.slick", e.autoPlayToggleHandler), e.$list.on("touchstart.slick mousedown.slick", { action: "start" }, e.swipeHandler), e.$list.on("touchmove.slick mousemove.slick", { action: "move" }, e.swipeHandler), e.$list.on("touchend.slick mouseup.slick", { action: "end" }, e.swipeHandler), e.$list.on("touchcancel.slick mouseleave.slick", { action: "end" }, e.swipeHandler), e.$list.on("click.slick", e.clickHandler), i(document).on(e.visibilityChange, i.proxy(e.visibility, e)), i(window).on("orientationchange.slick.slick-" + e.instanceUid, i.proxy(e.orientationChange, e)), i(window).on("resize.slick.slick-" + e.instanceUid, i.proxy(e.resize, e)), i("[draggable!=true]", e.$slideTrack).on("dragstart", e.preventDefault), i(window).on("load.slick.slick-" + e.instanceUid, e.setPosition), i(e.setPosition) }, t.prototype.initUI = function () { var i = this; !0 === i.options.arrows && i.slideCount > i.options.slidesToShow && (i.$prevArrow.show(), i.$nextArrow.show()), !0 === i.options.dots && i.slideCount > i.options.slidesToShow && i.$dots.show() }, t.prototype.lazyLoad = function () { var e, t, o, s = this; function n(e) { i("img[data-lazy]", e).each((function () { var e = i(this), t = i(this).attr("data-lazy"), o = i(this).attr("data-srcset"), n = i(this).attr("data-sizes") || s.$slider.attr("data-sizes"), l = document.createElement("img"); l.onload = function () { e.animate({ opacity: 0 }, 100, (function () { o && (e.attr("srcset", o), n && e.attr("sizes", n)), e.attr("src", t).animate({ opacity: 1 }, 200, (function () { e.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading") })), s.$slider.trigger("lazyLoaded", [s, e, t]) })) }, l.onerror = function () { e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"), s.$slider.trigger("lazyLoadError", [s, e, t]) }, l.src = t })) } if (!0 === s.options.centerMode ? !0 === s.options.infinite ? o = (t = s.currentSlide + (s.options.slidesToShow / 2 + 1)) + s.options.slidesToShow + 2 : (t = Math.max(0, s.currentSlide - (s.options.slidesToShow / 2 + 1)), o = s.options.slidesToShow / 2 + 1 + 2 + s.currentSlide) : (t = s.options.infinite ? s.options.slidesToShow + s.currentSlide : s.currentSlide, o = Math.ceil(t + s.options.slidesToShow), !0 === s.options.fade && (t > 0 && t--, o <= s.slideCount && o++)), e = s.$slider.find(".slick-slide").slice(t, o), "anticipated" === s.options.lazyLoad) for (var l = t - 1, r = o, a = s.$slider.find(".slick-slide"), d = 0; d < s.options.slidesToScroll; d++)l < 0 && (l = s.slideCount - 1), e = (e = e.add(a.eq(l))).add(a.eq(r)), l--, r++; n(e), s.slideCount <= s.options.slidesToShow ? n(s.$slider.find(".slick-slide")) : s.currentSlide >= s.slideCount - s.options.slidesToShow ? n(s.$slider.find(".slick-cloned").slice(0, s.options.slidesToShow)) : 0 === s.currentSlide && n(s.$slider.find(".slick-cloned").slice(-1 * s.options.slidesToShow)) }, t.prototype.loadSlider = function () { var i = this; i.setPosition(), i.$slideTrack.css({ opacity: 1 }), i.$slider.removeClass("slick-loading"), i.initUI(), "progressive" === i.options.lazyLoad && i.progressiveLazyLoad() }, t.prototype.next = t.prototype.slickNext = function () { this.changeSlide({ data: { message: "next" } }) }, t.prototype.orientationChange = function () { this.checkResponsive(), this.setPosition() }, t.prototype.pause = t.prototype.slickPause = function () { this.autoPlayClear(), this.paused = !0 }, t.prototype.play = t.prototype.slickPlay = function () { var i = this; i.autoPlay(), i.options.autoplay = !0, i.paused = !1, i.focussed = !1, i.interrupted = !1 }, t.prototype.postSlide = function (i) { var e = this; e.unslicked || (e.$slider.trigger("afterChange", [e, i]), e.animating = !1, e.slideCount > e.options.slidesToShow && e.setPosition(), e.swipeLeft = null, e.options.autoplay && e.autoPlay(), e.updateSlideVisibility()) }, t.prototype.prev = t.prototype.slickPrev = function () { this.changeSlide({ data: { message: "previous" } }) }, t.prototype.preventDefault = function (i) { i.preventDefault() }, t.prototype.progressiveLazyLoad = function (e) { e = e || 1; var t, o, s, n, l, r = this, a = i("img[data-lazy]", r.$slider); a.length ? (t = a.first(), o = t.attr("data-lazy"), s = t.attr("data-srcset"), n = t.attr("data-sizes") || r.$slider.attr("data-sizes"), (l = document.createElement("img")).onload = function () { s && (t.attr("srcset", s), n && t.attr("sizes", n)), t.attr("src", o).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"), !0 === r.options.adaptiveHeight && r.setPosition(), r.$slider.trigger("lazyLoaded", [r, t, o]), r.progressiveLazyLoad() }, l.onerror = function () { e < 3 ? setTimeout((function () { r.progressiveLazyLoad(e + 1) }), 500) : (t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"), r.$slider.trigger("lazyLoadError", [r, t, o]), r.progressiveLazyLoad()) }, l.src = o) : r.$slider.trigger("allImagesLoaded", [r]) }, t.prototype.refresh = function (e) { var t, o, s = this; o = s.slideCount - s.options.slidesToShow, !s.options.infinite && s.currentSlide > o && (s.currentSlide = o), s.slideCount <= s.options.slidesToShow && (s.currentSlide = 0), t = s.currentSlide, s.destroy(!0), i.extend(s, s.initials, { currentSlide: t }), s.init(), e || s.changeSlide({ data: { message: "index", index: t } }, !1) }, t.prototype.registerBreakpoints = function () { var e, t, o, s = this, n = s.options.responsive || null; if ("array" === i.type(n) && n.length) { for (e in s.respondTo = s.options.respondTo || "window", n) if (o = s.breakpoints.length - 1, n.hasOwnProperty(e)) { for (t = n[e].breakpoint; o >= 0;)s.breakpoints[o] && s.breakpoints[o] === t && s.breakpoints.splice(o, 1), o--; s.breakpoints.push(t), s.breakpointSettings[t] = n[e].settings } s.breakpoints.sort((function (i, e) { return s.options.mobileFirst ? i - e : e - i })) } }, t.prototype.reinit = function () { var i = this; i.$slides = i.$slideTrack.children(i.options.slide).addClass("slick-slide"), i.slideCount = i.$slides.length, i.currentSlide >= i.slideCount && 0 !== i.currentSlide && (i.currentSlide = i.currentSlide - i.options.slidesToScroll), i.slideCount <= i.options.slidesToShow && (i.currentSlide = 0), i.registerBreakpoints(), i.setProps(), i.setupInfinite(), i.buildArrows(), i.updateArrows(), i.initArrowEvents(), i.buildDots(), i.updateDots(), i.initDotEvents(), i.cleanUpSlideEvents(), i.initSlideEvents(), i.checkResponsive(!1, !0), i.setSlideClasses("number" == typeof i.currentSlide ? i.currentSlide : 0), i.setPosition(), i.focusHandler(), i.paused = !i.options.autoplay, i.autoPlay(), i.$slider.trigger("reInit", [i]) }, t.prototype.resize = function () { var e = this; i(window).width() !== e.windowWidth && (clearTimeout(e.windowDelay), e.windowDelay = window.setTimeout((function () { e.windowWidth = i(window).width(), e.checkResponsive(), e.unslicked || e.setPosition() }), 50)) }, t.prototype.removeSlide = t.prototype.slickRemove = function (i, e, t) { var o = this; if (i = "boolean" == typeof i ? !0 === (e = i) ? 0 : o.slideCount - 1 : !0 === e ? --i : i, o.slideCount < 1 || i < 0 || i > o.slideCount - 1) return !1; o.unload(), !0 === t ? o.$slideTrack.children().remove() : o.$slideTrack.children(this.options.slide).eq(i).remove(), o.$slides = o.$slideTrack.children(this.options.slide), o.$slideTrack.children(this.options.slide).detach(), o.$slideTrack.append(o.$slides), o.$slidesCache = o.$slides, o.reinit() }, t.prototype.setCSS = function (i) { var e, t, o = this, s = {}; !0 === o.options.rtl && (i = -i), e = "left" == o.positionProp ? Math.ceil(i) + "px" : "0px", t = "top" == o.positionProp ? Math.ceil(i) + "px" : "0px", s[o.positionProp] = i, !1 === o.transformsEnabled ? o.$slideTrack.css(s) : (s = {}, !1 === o.cssTransitions ? (s[o.animType] = "translate(" + e + ", " + t + ")", o.$slideTrack.css(s)) : (s[o.animType] = "translate3d(" + e + ", " + t + ", 0px)", o.$slideTrack.css(s))) }, t.prototype.setDimensions = function () { var i = this; !1 === i.options.vertical ? !0 === i.options.centerMode && i.$list.css({ padding: "0px " + i.options.centerPadding }) : (i.$list.height(i.$slides.first().outerHeight(!0) * i.options.slidesToShow), !0 === i.options.centerMode && i.$list.css({ padding: i.options.centerPadding + " 0px" })), i.listWidth = i.$list.width(), i.listHeight = i.$list.height(), !1 === i.options.vertical && !1 === i.options.variableWidth ? (i.slideWidth = Math.ceil(i.listWidth / i.options.slidesToShow), i.$slideTrack.width(Math.ceil(i.slideWidth * i.$slideTrack.children(".slick-slide").length))) : !0 === i.options.variableWidth ? i.$slideTrack.width(5e3 * i.slideCount) : (i.slideWidth = Math.ceil(i.listWidth), i.$slideTrack.height(Math.ceil(i.$slides.first().outerHeight(!0) * i.$slideTrack.children(".slick-slide").length))); var e = i.$slides.first().outerWidth(!0) - i.$slides.first().width(); !1 === i.options.variableWidth && i.$slideTrack.children(".slick-slide").width(i.slideWidth - e) }, t.prototype.setFade = function () { var e, t = this; t.$slides.each((function (o, s) { e = t.slideWidth * o * -1, !0 === t.options.rtl ? i(s).css({ position: "relative", right: e, top: 0, zIndex: t.options.zIndex - 2, opacity: 0 }) : i(s).css({ position: "relative", left: e, top: 0, zIndex: t.options.zIndex - 2, opacity: 0 }) })), t.$slides.eq(t.currentSlide).css({ zIndex: t.options.zIndex - 1, opacity: 1 }) }, t.prototype.setHeight = function () { var i = this; if (1 === i.options.slidesToShow && !0 === i.options.adaptiveHeight && !1 === i.options.vertical) { var e = i.$slides.eq(i.currentSlide).outerHeight(!0); i.$list.css("height", e) } }, t.prototype.setOption = t.prototype.slickSetOption = function () { var e, t, o, s, n, l = this, r = !1; if ("object" === i.type(arguments[0]) ? (o = arguments[0], r = arguments[1], n = "multiple") : "string" === i.type(arguments[0]) && (o = arguments[0], s = arguments[1], r = arguments[2], "responsive" === arguments[0] && "array" === i.type(arguments[1]) ? n = "responsive" : void 0 !== arguments[1] && (n = "single")), "single" === n) l.options[o] = s; else if ("multiple" === n) i.each(o, (function (i, e) { l.options[i] = e })); else if ("responsive" === n) for (t in s) if ("array" !== i.type(l.options.responsive)) l.options.responsive = [s[t]]; else { for (e = l.options.responsive.length - 1; e >= 0;)l.options.responsive[e].breakpoint === s[t].breakpoint && l.options.responsive.splice(e, 1), e--; l.options.responsive.push(s[t]) } r && (l.unload(), l.reinit()) }, t.prototype.setPosition = function () { var i = this; i.setDimensions(), i.setHeight(), !1 === i.options.fade ? i.setCSS(i.getLeft(i.currentSlide)) : i.setFade(), i.$slider.trigger("setPosition", [i]) }, t.prototype.setProps = function () { var i = this, e = document.body.style; i.positionProp = !0 === i.options.vertical ? "top" : "left", "top" === i.positionProp ? i.$slider.addClass("slick-vertical") : i.$slider.removeClass("slick-vertical"), void 0 === e.WebkitTransition && void 0 === e.MozTransition && void 0 === e.msTransition || !0 === i.options.useCSS && (i.cssTransitions = !0), i.options.fade && ("number" == typeof i.options.zIndex ? i.options.zIndex < 3 && (i.options.zIndex = 3) : i.options.zIndex = i.defaults.zIndex), void 0 !== e.OTransform && (i.animType = "OTransform", i.transformType = "-o-transform", i.transitionType = "OTransition", void 0 === e.perspectiveProperty && void 0 === e.webkitPerspective && (i.animType = !1)), void 0 !== e.MozTransform && (i.animType = "MozTransform", i.transformType = "-moz-transform", i.transitionType = "MozTransition", void 0 === e.perspectiveProperty && void 0 === e.MozPerspective && (i.animType = !1)), void 0 !== e.webkitTransform && (i.animType = "webkitTransform", i.transformType = "-webkit-transform", i.transitionType = "webkitTransition", void 0 === e.perspectiveProperty && void 0 === e.webkitPerspective && (i.animType = !1)), void 0 !== e.msTransform && (i.animType = "msTransform", i.transformType = "-ms-transform", i.transitionType = "msTransition", void 0 === e.msTransform && (i.animType = !1)), void 0 !== e.transform && !1 !== i.animType && (i.animType = "transform", i.transformType = "transform", i.transitionType = "transition"), i.transformsEnabled = i.options.useTransform && null !== i.animType && !1 !== i.animType }, t.prototype.setSlideClasses = function (e) { var t, o, s, n, l = this; if (o = l.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden", "true").attr("aria-label", (function () { return i(this).attr("aria-label").replace(" (centered)", "") })), l.$slides.eq(e).addClass("slick-current"), !0 === l.options.centerMode) { var r = l.options.slidesToShow % 2 == 0 ? 1 : 0; t = Math.floor(l.options.slidesToShow / 2), !0 === l.options.infinite && (e >= t && e <= l.slideCount - 1 - t ? l.$slides.slice(e - t + r, e + t + 1).addClass("slick-active").removeAttr("aria-hidden") : (s = l.options.slidesToShow + e, o.slice(s - t + 1 + r, s + t + 2).addClass("slick-active").removeAttr("aria-hidden")), 0 === e ? o.eq(l.options.slidesToShow + l.slideCount + 1).addClass("slick-center").attr("aria-label", (function () { return i(this).attr("aria-label") + " (centered)" })) : e === l.slideCount - 1 && o.eq(l.options.slidesToShow).addClass("slick-center").attr("aria-label", (function () { return i(this).attr("aria-label") + " (centered)" }))), l.$slides.eq(e).addClass("slick-center").attr("aria-label", (function () { return i(this).attr("aria-label") + " (centered)" })) } else e >= 0 && e <= l.slideCount - l.options.slidesToShow ? l.$slides.slice(e, e + l.options.slidesToShow).addClass("slick-active").removeAttr("aria-hidden") : o.length <= l.options.slidesToShow ? o.addClass("slick-active").removeAttr("aria-hidden") : (n = l.slideCount % l.options.slidesToShow, s = !0 === l.options.infinite ? l.options.slidesToShow + e : e, l.options.slidesToShow == l.options.slidesToScroll && l.slideCount - e < l.options.slidesToShow ? o.slice(s - (l.options.slidesToShow - n), s + n).addClass("slick-active").removeAttr("aria-hidden") : o.slice(s, s + l.options.slidesToShow).addClass("slick-active").removeAttr("aria-hidden")); "ondemand" !== l.options.lazyLoad && "anticipated" !== l.options.lazyLoad || l.lazyLoad() }, t.prototype.setupInfinite = function () { var e, t, o, s = this; if (!0 === s.options.fade && (s.options.centerMode = !1), !0 === s.options.infinite && !1 === s.options.fade && (t = null, s.slideCount > s.options.slidesToShow)) { for (o = !0 === s.options.centerMode ? s.options.slidesToShow + 1 : s.options.slidesToShow, e = s.slideCount; e > s.slideCount - o; e -= 1)t = e - 1, i(s.$slides[t]).clone(!0).attr("id", "").attr("data-slick-index", t - s.slideCount).prependTo(s.$slideTrack).addClass("slick-cloned"); for (e = 0; e < o + s.slideCount; e += 1)t = e, i(s.$slides[t]).clone(!0).attr("id", "").attr("data-slick-index", t + s.slideCount).appendTo(s.$slideTrack).addClass("slick-cloned"); s.$slideTrack.find(".slick-cloned").find("[id]").each((function () { i(this).attr("id", "") })) } }, t.prototype.interrupt = function (i) { i || this.autoPlay(), this.interrupted = i }, t.prototype.selectHandler = function (e) { var t = this, o = i(e.target).is(".slick-slide") ? i(e.target) : i(e.target).parents(".slick-slide"), s = parseInt(o.attr("data-slick-index")); s || (s = 0), t.slideCount <= t.options.slidesToShow ? t.slideHandler(s, !1, !0) : t.slideHandler(s) }, t.prototype.slideHandler = function (i, e, t) { var o, s, n, l, r, a, d = this; if (e = e || !1, !(!0 === d.animating && !0 === d.options.waitForAnimate || !0 === d.options.fade && d.currentSlide === i)) if (!1 === e && d.asNavFor(i), o = i, r = d.getLeft(o), l = d.getLeft(d.currentSlide), d.currentLeft = null === d.swipeLeft ? l : d.swipeLeft, !1 === d.options.infinite && !1 === d.options.centerMode && (i < 0 || i > d.getDotCount() * d.options.slidesToScroll)) !1 === d.options.fade && (o = d.currentSlide, !0 !== t && d.slideCount > d.options.slidesToShow ? d.animateSlide(l, (function () { d.postSlide(o) })) : d.postSlide(o)); else if (!1 === d.options.infinite && !0 === d.options.centerMode && (i < 0 || i > d.slideCount - d.options.slidesToScroll)) !1 === d.options.fade && (o = d.currentSlide, !0 !== t && d.slideCount > d.options.slidesToShow ? d.animateSlide(l, (function () { d.postSlide(o) })) : d.postSlide(o)); else { if (d.options.autoplay && clearInterval(d.autoPlayTimer), s = o < 0 ? d.slideCount % d.options.slidesToScroll != 0 ? d.slideCount - d.slideCount % d.options.slidesToScroll : d.slideCount + o : o >= d.slideCount ? d.slideCount % d.options.slidesToScroll != 0 ? 0 : o - d.slideCount : o, d.animating = !0, d.$slider.trigger("beforeChange", [d, d.currentSlide, s]), n = d.currentSlide, d.currentSlide = s, d.setSlideClasses(d.currentSlide), d.options.asNavFor && (a = (a = d.getNavTarget()).slick("getSlick")).slideCount <= a.options.slidesToShow && a.setSlideClasses(d.currentSlide), d.updateDots(), d.updateArrows(), !0 === d.options.fade) return !0 !== t ? (d.fadeSlideOut(n), d.fadeSlide(s, (function () { d.postSlide(s) }))) : d.postSlide(s), void d.animateHeight(); !0 !== t && d.slideCount > d.options.slidesToShow ? d.animateSlide(r, (function () { d.postSlide(s) })) : d.postSlide(s) } }, t.prototype.startLoad = function () { var i = this; !0 === i.options.arrows && i.slideCount > i.options.slidesToShow && (i.$prevArrow.hide(), i.$nextArrow.hide()), !0 === i.options.dots && i.slideCount > i.options.slidesToShow && i.$dots.hide(), i.$slider.addClass("slick-loading") }, t.prototype.swipeDirection = function () { var i, e, t, o, s = this; return i = s.touchObject.startX - s.touchObject.curX, e = s.touchObject.startY - s.touchObject.curY, t = Math.atan2(e, i), (o = Math.round(180 * t / Math.PI)) < 0 && (o = 360 - Math.abs(o)), o <= 45 && o >= 0 || o <= 360 && o >= 315 ? !1 === s.options.rtl ? "left" : "right" : o >= 135 && o <= 225 ? !1 === s.options.rtl ? "right" : "left" : !0 === s.options.verticalSwiping ? o >= 35 && o <= 135 ? "down" : "up" : "vertical" }, t.prototype.swipeEnd = function (i) { var e, t, o = this; if (o.dragging = !1, o.swiping = !1, o.scrolling) return o.scrolling = !1, !1; if (o.interrupted = !1, o.shouldClick = !(o.touchObject.swipeLength > 10), void 0 === o.touchObject.curX) return !1; if (!0 === o.touchObject.edgeHit && o.$slider.trigger("edge", [o, o.swipeDirection()]), o.touchObject.swipeLength >= o.touchObject.minSwipe) { switch (t = o.swipeDirection()) { case "left": case "down": e = o.options.swipeToSlide ? o.checkNavigable(o.currentSlide + o.getSlideCount()) : o.currentSlide + o.getSlideCount(), o.currentDirection = 0; break; case "right": case "up": e = o.options.swipeToSlide ? o.checkNavigable(o.currentSlide - o.getSlideCount()) : o.currentSlide - o.getSlideCount(), o.currentDirection = 1 }"vertical" != t && (o.slideHandler(e), o.touchObject = {}, o.$slider.trigger("swipe", [o, t])) } else o.touchObject.startX !== o.touchObject.curX && (o.slideHandler(o.currentSlide), o.touchObject = {}) }, t.prototype.swipeHandler = function (i) { var e = this; if (!(!1 === e.options.swipe || "ontouchend" in document && !1 === e.options.swipe || !1 === e.options.draggable && -1 !== i.type.indexOf("mouse"))) switch (e.touchObject.fingerCount = i.originalEvent && void 0 !== i.originalEvent.touches ? i.originalEvent.touches.length : 1, e.touchObject.minSwipe = e.listWidth / e.options.touchThreshold, !0 === e.options.verticalSwiping && (e.touchObject.minSwipe = e.listHeight / e.options.touchThreshold), i.data.action) { case "start": e.swipeStart(i); break; case "move": e.swipeMove(i); break; case "end": e.swipeEnd(i) } }, t.prototype.swipeMove = function (i) { var e, t, o, s, n, l, r = this; return n = void 0 !== i.originalEvent ? i.originalEvent.touches : null, !(!r.dragging || r.scrolling || n && 1 !== n.length) && (e = r.getLeft(r.currentSlide), r.touchObject.curX = void 0 !== n ? n[0].pageX : i.clientX, r.touchObject.curY = void 0 !== n ? n[0].pageY : i.clientY, r.touchObject.swipeLength = Math.round(Math.sqrt(Math.pow(r.touchObject.curX - r.touchObject.startX, 2))), l = Math.round(Math.sqrt(Math.pow(r.touchObject.curY - r.touchObject.startY, 2))), !r.options.verticalSwiping && !r.swiping && l > 4 ? (r.scrolling = !0, !1) : (!0 === r.options.verticalSwiping && (r.touchObject.swipeLength = l), t = r.swipeDirection(), void 0 !== i.originalEvent && r.touchObject.swipeLength > 4 && (r.swiping = !0, i.preventDefault()), s = (!1 === r.options.rtl ? 1 : -1) * (r.touchObject.curX > r.touchObject.startX ? 1 : -1), !0 === r.options.verticalSwiping && (s = r.touchObject.curY > r.touchObject.startY ? 1 : -1), o = r.touchObject.swipeLength, r.touchObject.edgeHit = !1, !1 === r.options.infinite && (0 === r.currentSlide && "right" === t || r.currentSlide >= r.getDotCount() && "left" === t) && (o = r.touchObject.swipeLength * r.options.edgeFriction, r.touchObject.edgeHit = !0), !1 === r.options.vertical ? r.swipeLeft = e + o * s : r.swipeLeft = e + o * (r.$list.height() / r.listWidth) * s, !0 === r.options.verticalSwiping && (r.swipeLeft = e + o * s), !0 !== r.options.fade && !1 !== r.options.touchMove && (!0 === r.animating ? (r.swipeLeft = null, !1) : void r.setCSS(r.swipeLeft)))) }, t.prototype.swipeStart = function (i) { var e, t = this; if (t.interrupted = !0, 1 !== t.touchObject.fingerCount || t.slideCount <= t.options.slidesToShow) return t.touchObject = {}, !1; void 0 !== i.originalEvent && void 0 !== i.originalEvent.touches && (e = i.originalEvent.touches[0]), t.touchObject.startX = t.touchObject.curX = void 0 !== e ? e.pageX : i.clientX, t.touchObject.startY = t.touchObject.curY = void 0 !== e ? e.pageY : i.clientY, t.dragging = !0 }, t.prototype.unfilterSlides = t.prototype.slickUnfilter = function () { var i = this; null !== i.$slidesCache && (i.unload(), i.$slideTrack.children(this.options.slide).detach(), i.$slidesCache.appendTo(i.$slideTrack), i.reinit()) }, t.prototype.unload = function () { var e = this; i(".slick-cloned", e.$slider).remove(), e.$dots && e.$dots.remove(), e.$prevArrow && e.htmlExpr.test(e.options.prevArrow) && e.$prevArrow.remove(), e.$nextArrow && e.htmlExpr.test(e.options.nextArrow) && e.$nextArrow.remove(), e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden", "true").css("width", "") }, t.prototype.unslick = function (i) { var e = this; e.$slider.trigger("unslick", [e, i]), e.destroy() }, t.prototype.updateArrows = function () { var i = this; Math.floor(i.options.slidesToShow / 2), !0 === i.options.arrows && i.slideCount > i.options.slidesToShow && !i.options.infinite && (i.$prevArrow.removeClass("slick-disabled").prop("disabled", !1), i.$nextArrow.removeClass("slick-disabled").prop("disabled", !1), 0 === i.currentSlide ? (i.$prevArrow.addClass("slick-disabled").prop("disabled", !0), i.$nextArrow.removeClass("slick-disabled").prop("disabled", !1)) : (i.currentSlide >= i.slideCount - i.options.slidesToShow && !1 === i.options.centerMode || i.currentSlide >= i.slideCount - 1 && !0 === i.options.centerMode) && (i.$nextArrow.addClass("slick-disabled").prop("disabled", !0), i.$prevArrow.removeClass("slick-disabled").prop("disabled", !1))) }, t.prototype.updateDots = function () { var i = this; null !== i.$dots && (i.$dots.find("li").removeClass("slick-active").find("button").removeAttr("aria-current").end().end(), i.$dots.find("li").eq(Math.floor(i.currentSlide / i.options.slidesToScroll)).addClass("slick-active").find("button").attr("aria-current", !0).end().end()) }, t.prototype.updateSlideVisibility = function () { var i = this; i.$slideTrack.find(".slick-slide").attr("aria-hidden", "true").find("a, input, button, select").attr("tabindex", "-1"), i.$slideTrack.find(".slick-active").removeAttr("aria-hidden").find("a, input, button, select").removeAttr("tabindex"), i.$slideTrack.find(".slick-slide .wire-compatibility-highlight").attr("style", "display:none"), i.$slideTrack.find(".slick-active .wire-compatibility-highlight").attr("style", "display:block") }, t.prototype.visibility = function () { var i = this; i.options.autoplay && (document[i.hidden] ? i.interrupted = !0 : i.interrupted = !1) }, i.fn.slick = function () { var i, e, o = this, s = arguments[0], n = Array.prototype.slice.call(arguments, 1), l = o.length; for (i = 0; i < l; i++)if ("object" == typeof s || void 0 === s ? o[i].slick = new t(o[i], s) : e = o[i].slick[s].apply(o[i].slick, n), void 0 !== e) return e; return o } }));
define('constants',{
    IdentityECommerceTokenReceived: "Identity:ECommerceTokenReceived",
    IdentityECommerceTokenFailed: "Identity:ECommerceTokenFailed",

    CartUpdated: "Cart:Updated",
    CartItemAdded: "Cart:ProductAdded",
    CartItemRemoved: "Cart:ItemRemoved",
    CartQuantityIncreased: "Cart:QuantityIncreased",
    CartQuantityDecreased: "Cart:QuantityDecreased",
    CartQuantityUpdated: "Cart:QuantityUpdated",
    CartPromoCodeApplied: "Cart:PromoCodeApplied",
    CartPromoCodeFailed: "Cart:PromoCodeFailed",
    CartSubmitted: "Cart:CartSubmitted",
    CartSubmitFailed: "Cart:CartSubmitFailed",
    CartLastItemRemoved: "Cart:LastItemRemoved",
    PaymentUpdated: "Cart:PaymentUpdated",
    GoToReviewButtonEnable: "Cart:GoToReviewButtonEnable",
    GoToReviewButtonDisable: "Cart:GoToReviewButtonDisable",
    PaymentError: "Cart:PaymentError",
    ViewMiniCart: "Cart:ViewMiniCart",
    ShowInterstitialDialog: "Cart:ShowInterstitialDialog",
    OpenInterstitialDialog: "Cart:OpenInterstitialDialog",
    InterstitialDialogLoaded: "Cart:InterstitialDialogLoaded",
    CartisEmpty: "Cart:CartisEmpty",
    PurchaseCompleted: "Cart:PurchaseCompleted",

    OrderLookupSubmitted: "OrderLookupSubmitted",
    PurchaseError: "PurchaseError",

    ProductPriceReturned: "Products:PriceReturned",
    ProductPriceFailed: "Products:PriceFailed",
    ProductReloaded: "Products:Reloaded",

    AddressUpdated: "Address:Updated",
    CheckoutFormSubmitSuccess: "CheckoutForm:SubmitSuccess",
    BillingFormSubmit: "Payment:BillingFormSubmit",
    MarketoFormSubmitSuccess: "MarketoForm:SubmitSuccess",

    ShowLoader: "Loader:Show",
    HideLoader: "Loader:Hide",

    PrintPreviewAttributeName: "print",
    FindAProSubmitted: "FindAPro:Submitted",
    FindAProSubmitFailed: "FindAPro:SubmitFailed",
    FindAProNoResults: "FindAPro:NoResults",
    FindAProManualSearch: "FindAPro:ManualSearch",
    FindAProAutoSearch: "FindAPro:AutoSearch",
    FindAProFiltersApplied: "FindAPro:FiltersApplied",
    FindAProSort: "FindAPro:Sort",
    FindAProResultsUpdated: "FindAPro:ResultsUpdated",
    FindAProErrorMessageShown: "FindAPro:ErrorMessageShown",

    PDPSku: "PDP_Sku",

    RestartQuiz: "Quiz:Restart",
    RestartQuizHide: "Quiz:RestartHide",
    RestartQuizShow: "Quiz:RestartShow",
    QuizAnswerSubmitted: "Quiz:AnswerSubmitted",

    ReviewModalOpen: "Reviews:ModalOpen",
    ReviewSubmitted: "Reviews:Submitted",

    RebateClick: "Rebate:Click",
    RebateSearch: "Rebate:Search",
    RebateNoResults: "Rebate:NoResults", 

    MarketoFormLoaded: "Marketo:FormLoaded",

    StartCalculating: "EnergyCalculator:StartCalculating",
    FuelCostBlankZip: "EnergyCalculator:BlankZip",
    FuelCostInvalidZip: "EnergyCalculator:InvalidZip",
    FuelCostServiceUnavailable: "EnergyCalculator:ServiceUnavailable",
    ClearErrors: "EnergyCalculator:ClearErrors",
    StartLabel: "EnergyCalculator:Start",
    RestartLabel: "EnergyCalculator:Restart",

    ReturnSubmitted: "ReturnItems:Submit",

    CategorySectionTabClicked: "CategorySectionTabs:Clicked",

    ShowInterstitialModal: "Cart:ShowInterstitialModal",
    RenderInterstitialModal: "Cart:RenderInterstitialModal",
    InterstitialModalRendered: "Cart:InterstitialModalRendered",
    CloseInterstitialModal: "Cart:CloseInterstitialModal",

    CheckoutFormSubmit: "Shipping:CheckoutFormSubmit",
    OrderPaymentButton: "OrderPaymentButton:CartChanged",

    TimeoutAlert: "Page:TimeoutAlert"
});

define('text!Resideo/Templates/AnimatedButton.html',[],function () { return '<span><%- title %></span>\r\n<div class="animation-container">\r\n    <div></div>\r\n    <div></div>\r\n    <div></div>\r\n    <div></div>\r\n</div>';});

define('Buttons',['jquery', 'eventManager', 'constants', 'text!Resideo/Templates/AnimatedButton.html', 'scorebootstrap', 'promise-polyfill'], function ($, eventManager, constants, animatedButtonTemplate) {
    'use strict';

    function buttons() {
        //anchoring (FF issue)
        if (window.location.hash.length > 0 && window.location.hash.indexOf("=") == -1) {
            setTimeout(function () {
                if ($(window.location.hash) && $(window.location.hash).offset()) {
                    window.scrollTo(0, $(window.location.hash).offset().top);
                }
            }, 100);
        }

        function wrapSignInButtonText() {
            $('.rde-sign-up').wrapInner('<span></span>');
        }

        if (!BrainJocks.EE) {
            if (document.querySelector('.share-feature-btn')) {
                //Share page url feature
                var shareButton = $('.share-feature-btn');
                var messagePageUrl = window.location.href;

                $(shareButton).click(function (event) {
                    var email = '';
                    var subject = '';
                    var emailBody = messagePageUrl;
                    document.location = "mailto:" + email + "?subject=" + subject + "&body=" + emailBody;
                });
            }

            if (document.querySelector('.rde-view-more')) {
                //expand list of videos on support article pages
                $('.rde-view-more').on('click', function (e) {
                    e.preventDefault();
                    $(this).hide();
                    $('.rde-expand-videos').addClass('expanded');
                });
            }

            wrapSignInButtonText();

            if (document.querySelector('.rde-links-as-tabs')) {
                $(".rde-links-as-tabs").find("a").eq(0).addClass("active");
                $($(".rde-links-as-tabs").find("a").get().reverse()).each(function (i, item) {
                    if ($(item).attr('href').indexOf(location.pathname) >= 0) {
                        $(".rde-links-as-tabs").find("a").removeClass("active");
                        $(item).addClass("active");
                    }
                });
            }

            if (document.querySelector('.rde-side-tabs .rde-hero-col-shift .score-button') || document.querySelector('.rde-side-tabs .score-button')) {
                //Clickable images on Guided Selling
                var buttonLink = $(".rde-side-tabs .rde-hero-col-shift .score-button");
                if (buttonLink === undefined) {
                    buttonLink = $(".rde-side-tabs .score-button");
                }
                if ($('.link-wrapper').length === 0) {
                    if (document.querySelector('.rde-side-tabs .rde-hero-col-shift')) {
                        $('.rde-side-tabs .rde-hero-col-shift .score-hero-image img').wrap("<a class='link-wrapper'></a>");
                        $('.rde-side-tabs .rde-hero-col-shift .heading-wrapper h2').wrap("<a class='link-wrapper'></a>");
                    }
                }
                $('.link-wrapper').attr('href', buttonLink.attr('href'));
                
                if (buttonLink.attr('target')) {
                    $('.link-wrapper').attr('target', '_blank');
                }
            }


            if (document.querySelector('.coveo-search-button')) {
                $('.coveo-search-button').on('click', function (e) {

                    //Shows results list
                    $('.know-your-model-custom-result-list').show();
                });
            }

            if (document.querySelector('.clear-search-results')) {
                $('.clear-search-results').on('click', function (e) {

                    $('.showing-results-query').hide();
                    //Shows results list
                    $('.know-your-model-custom-result-list').hide();
                    $('.clear-search-results').hide();
                    $('.product-selector-know-your-model').hide();


                    $('.magic-box-icon').click();

                });
            }
        }

        //Accessibility issues fix

        //RRW-3514
        if (document.querySelector('.rde-candy-rack-add-to-cart')) {
            $(".rde-candy-rack-add-to-cart").on("keyup", function (event) {
                if (event.keyCode === 13) {
                    event.preventDefault();
                    $(this).click();
                }
            });
        }

        if (document.querySelector('.clear-search-results')) {
            $('.clear-search-results').on('keyup', function (event) {
                if (event.keyCode === 13) {
                    event.preventDefault();
                    $(this).click();
                }
            });
        }

        if (document.querySelector('#AddPromoLink')) {
            $("#AddPromoLink").on("keyup", function (event) {
                if (event.keyCode === 13) {
                    event.preventDefault();
                    $(this).click();
                }
            });
        }

        if (document.querySelector('.continue-shopping-button')) {
            $(".continue-shopping-button").on("keyup", function (event) {
                if (event.keyCode === 13) {
                    event.preventDefault();
                    $(this).click();
                }
            });
        }

        if (document.querySelector('.js-add-to-cart')) {
            $(".rde-product-highlight .js-add-to-cart").on("keyup", function (event) {
                if (event.keyCode === 13) {
                    event.preventDefault();
                    $(this).click();
                }
            });

            $(".rde-product-tile .score-highlight .js-add-to-cart").on("keyup", function (event) {
                if (event.keyCode === 13) {
                    event.preventDefault();
                    $(this).click();
                }
            });
        }

        //RRW-6636
        if (document.querySelector('.resideo-content-page .score-button')) {
            $(".resideo-content-page .score-button").on("keyup", function (event) {
                if (event.keyCode === 13) {
                    event.preventDefault();
                    $(this).click();
                }
            });
        }

        //Back to top button visibility 
        if (document.querySelector('.solution-navigation-back-to-top .rde-back-to-top')) {
            $(window).on('scroll', function () {
                if ($(window).scrollTop() > 100) {
                    $('.solution-navigation-back-to-top .rde-back-to-top').css('display', 'block');
                } else {
                    $('.solution-navigation-back-to-top .rde-back-to-top').css('display', 'none');
                }
            });
        }

        // Support by product back button
        if (document.querySelector('.support-by-product .support-arrow-back-button')) {
            $(".support-by-product .support-arrow-back-button").on('click', function (e) {
                if (window.history.length > 2) {
                    window.history.back();
                }
                else {
                    window.location.href = "../";
                    e.preventDefault();
                }
            });
        }

        // Prevent the footer menu button from collapsing after link is clicked
        $(document).on('click', '.score-footer .dropdown-menu', function (e) {
            e.stopPropagation();
        });

        eventManager.subscribe(constants.ShowLoader,
            function (data) {
                updateLoaderButtonMarkup(data.scope);
                helpersService.showLoader(data.scope);
            });

        eventManager.subscribe(constants.HideLoader,
            function (data) {
                updateLoaderButtonMarkup(data.scope);
                helpersService.hideLoader(data.scope);
            });

        function updateLoaderButtonMarkup(target) {

            var animatedButtonTemplateCompiled = _.template(animatedButtonTemplate);

            if (target) {
                var innerMarkup = $(target).html();
                var template = animatedButtonTemplateCompiled({ title: innerMarkup });

                $(target).html(template);
            } else {
                $.each($('.rde-loader-button'), function (key, value) {
                    var innerMarkup = $(value).html();
                    var template = animatedButtonTemplateCompiled({ title: innerMarkup });

                    $(value).html(template);
                });
            }
        }

        // RRW-5566
        if (!BrainJocks.EE && document.querySelector('.category-selection-wrapper')) {
            $('.category-selection-item').click(function (e) {
                eventManager.trigger(constants.CategorySectionTabClicked);
            });
        }

        // RRW-6647 Workaraund 
        if (!BrainJocks.EE) {
            var button = $('.score-button');
            $(button).keypress(function (e) {
                if (e.key === "Enter") {
                    fireClickEvent(this);
                }
            });
        }

        function fireClickEvent(el) {
            if (el.fireEvent) {
                el.fireEvent('onclick');
            } else {
                var evObj = document.createEvent('Events');
                evObj.initEvent('click', true, false);
                el.dispatchEvent(evObj);
            }
        }

        // RRW-11446
        if (!BrainJocks.EE && document.querySelector('select')) {
            $("select").change(function () {
                var value = "";
                var label = $(this).attr('name');
                var selectedOptions = $(this).find('option:selected');
                $(selectedOptions).each(function () {
                    value += $(this).text() + " ";
                });
                $(this).attr('aria-label', label + " " + value + resideoSitecoreDictionary.selectedLabel);
            });
        }
    }

    new Promise(function (resolve, reject) {
        buttons();
        resolve();
    });
});

/*!
 * jQuery.ellipsis
 * http://github.com/jjenzz/jquery.ellipsis
 * --------------------------------------------------------------------------
 * Copyright (c) 2013 J. Smith (@jjenzz)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * adds a class to the last 'allowed' line of text so you can apply
 * text-overflow: ellipsis;
 */
(function(a){if(typeof define==="function"&&define.amd){define('ellipsis',["jquery"],a)}else{a(jQuery)}}(function(d){var c="ellipsis",b='<span style="white-space: nowrap;">',e={lines:"auto",ellipClass:"ellip",responsive:false};function a(h,q){var m=this,w=0,g=[],k,p,i,f,j,n,s;m.$cont=d(h);m.opts=d.extend({},e,q);function o(){m.text=m.$cont.text();m.opts.ellipLineClass=m.opts.ellipClass+"-line";m.$el=d('<span class="'+m.opts.ellipClass+'" />');m.$el.text(m.text);m.$cont.empty().append(m.$el);t()}function t(){if(typeof m.opts.lines==="number"&&m.opts.lines<2){m.$el.addClass(m.opts.ellipLineClass);return}n=m.$cont.height();if(m.opts.lines==="auto"&&m.$el.prop("scrollHeight")<=n){return}if(!k){return}s=d.trim(m.text).split(/\s+/);m.$el.html(b+s.join("</span> "+b)+"</span>");m.$el.find("span").each(k);if(p!=null){u(p)}}function u(x){s[x]='<span class="'+m.opts.ellipLineClass+'">'+s[x];s.push("</span>");m.$el.html(s.join(" "))}if(m.opts.lines==="auto"){var r=function(y,A){var x=d(A),z=x.position().top;j=j||x.height();if(z===f){g[w].push(x)}else{f=z;w+=1;g[w]=[x]}if(z+j>n){p=y-g[w-1].length;return false}};k=r}if(typeof m.opts.lines==="number"&&m.opts.lines>1){var l=function(y,A){var x=d(A),z=x.position().top;if(z!==f){f=z;w+=1}if(w===m.opts.lines){p=y;return false}};k=l}if(m.opts.responsive){var v=function(){g=[];w=0;f=null;p=null;m.$el.html(m.text);clearTimeout(i);i=setTimeout(t,100)};d(window).on("resize."+c,v)}o()}d.fn[c]=function(f){return this.each(function(){try{d(this).data(c,(new a(this,f)))}catch(g){if(window.console){console.error(c+": "+g)}}})}}));

define('EllipsisCalls',['jquery', 'scorebootstrap', 'ellipsis', 'promise-polyfill'], function ($) {
    'use strict';

    function ellipsisCalls() {
        function injectTabIndex() {
            $(':input:visible, select, .rde-checkbox label span, a, button, .rde-guided-selling-options .score-highlight').not(".MagicZoom").not(".Magic360").not(".rde-video-thumbnail").each(function () {
               $(this).attr('tabindex', '0');
            });
        }

        function injectButtonRole() {
            if (document.querySelector('.score-button.rde-search-button')) {
                $('.score-button.rde-search-button').each(function () {
                    $(this).attr('role', 'button');
                });
            }
        }

        if (!BrainJocks.EE) {
            setTimeout(function () {
                //ellipsis for resources slider
                if (document.querySelector('.rde-resources-slider .score-highlight h2')) {
                    $('.rde-resources-slider .score-highlight h2').ellipsis({
                        lines: 2,
                        ellipClass: 'ellip',
                        responsive: true
                    });
                }
                
                //ellipsis for pro resources slider
                if (document.querySelector('.rde-pro-resources-slider .score-highlight h2')) {
                    $('.rde-pro-resources-slider .score-highlight h2').ellipsis({
                        lines: 3,
                        ellipClass: 'ellip',
                        responsive: true
                    });
                }
                
                //ellipsis for pro family resources slider
                if (document.querySelector('.rde-product-family-resources-slider .score-highlight h2')) {
                    $('.rde-product-family-resources-slider .score-highlight h2').ellipsis({
                        lines: 3,
                        ellipClass: 'ellip',
                        responsive: true
                    });
                }
                
                //ellipsis for expanded videos section
                if (document.querySelector('.rde-expand-videos .score-highlight p')) {
                    $('.rde-expand-videos .score-highlight p').ellipsis({
                        lines: 2,
                        ellipClass: 'ellip',
                        responsive: true
                    });
                }
                
                injectTabIndex();
                injectButtonRole();
            }, 2000);
        }
    }

    new Promise(function (resolve, reject) {
        ellipsisCalls();
        resolve();
    });
});

(function(root) {
define("StickyKit", ["jquery"], function() {
  return (function() {
/*
 Sticky-kit v1.1.2 | WTFPL | Leaf Corcoran 2015 | http://leafo.net
*/
(function () {
    var b, f; b = this.jQuery || window.jQuery; f = b(window); b.fn.stick_in_parent = function (d) {
        var A, w, J, n, B, K, p, q, k, E, t; null == d && (d = {}); t = d.sticky_class; B = d.inner_scrolling; E = d.recalc_every; k = d.parent; q = d.offset_top; p = d.spacer; w = d.bottoming; null == q && (q = 0); null == k && (k = void 0); null == B && (B = !0); null == t && (t = "is_stuck"); A = b(document); null == w && (w = !0); J = function (a, d, n, C, F, u, r, G) {
            var v, H, m, D, I, c, g, x, y, z, h, l; if (!a.data("sticky_kit")) {
                a.data("sticky_kit", !0); I = A.height(); g = a.parent(); null != k && (g = g.closest(k));
                if (!g.length) throw "failed to find stick parent"; v = m = !1; (h = null != p ? p && a.closest(p) : b("<div />")) && h.css("position", a.css("position")); x = function () {
                    var c, f, e; if (!G && (I = A.height(), c = parseInt(g.css("border-top-width"), 10), f = parseInt(g.css("padding-top"), 10), d = parseInt(g.css("padding-bottom"), 10), n = g.offset().top + c + f, C = g.height(), m && (v = m = !1, null == p && (a.insertAfter(h), h.detach()), a.css({ position: "", top: "", width: "", bottom: "" }).removeClass(t), e = !0), F = a.offset().top - (parseInt(a.css("margin-top"), 10) || 0) - q,
                        u = a.outerHeight(!0), r = a.css("float"), h && h.css({ width: a.outerWidth(!0), height: u, display: a.css("display"), "vertical-align": a.css("vertical-align"), "float": r }), e)) return l()
                }; x(); if (u !== C) return D = void 0, c = q, z = E, l = function () {
                    var b, l, e, k; if (!G && (e = !1, null != z && (--z, 0 >= z && (z = E, x(), e = !0)), e || A.height() === I || x(), e = f.scrollTop(), null != D && (l = e - D), D = e, m ? (w && (k = e + u + c > C + n, v && !k && (v = !1, a.css({ position: "fixed", bottom: "", top: c }).trigger("sticky_kit:unbottom"))), e < F && (m = !1, c = q, null == p && ("left" !== r && "right" !== r || a.insertAfter(h),
                        h.detach()), b = { position: "", width: "", top: "" }, a.css(b).removeClass(t).trigger("sticky_kit:unstick")), B && (b = f.height(), u + q > b && !v && (c -= l, c = Math.max(b - u, c), c = Math.min(q, c), m && a.css({ top: c + "px" })))) : e > F && (m = !0, b = { position: "fixed", top: c }, b.width = "border-box" === a.css("box-sizing") ? a.outerWidth() + "px" : a.width() + "px", a.css(b).addClass(t), null == p && (a.after(h), "left" !== r && "right" !== r || h.append(a)), a.trigger("sticky_kit:stick")), m && w && (null == k && (k = e + u + c > C + n), !v && k))) return v = !0, "static" === g.css("position") && g.css({ position: "relative" }),
                            a.css({ position: "absolute", bottom: d, top: "auto" }).trigger("sticky_kit:bottom")
                }, y = function () { x(); return l() }, H = function () { G = !0; f.off("touchmove", l); f.off("scroll", l); f.off("resize", y); b(document.body).off("sticky_kit:recalc", y); a.off("sticky_kit:detach", H); a.removeData("sticky_kit"); a.css({ position: "", bottom: "", top: "", width: "" }); g.position("position", ""); if (m) return null == p && ("left" !== r && "right" !== r || a.insertAfter(h), h.remove()), a.removeClass(t) }, f.on("touchmove", l), f.on("scroll", l), f.on("resize",
                    y), b(document.body).on("sticky_kit:recalc", y), a.on("sticky_kit:detach", H), setTimeout(l, 0)
            }
        }; n = 0; for (K = this.length; n < K; n++)d = this[n], J(b(d)); return this
    }
}).call(this);

  }).apply(root, arguments);
});
}(this));

define('Header',['jquery', 'StickyKit', 'scorebootstrap', 'promise-polyfill'], function ($) {
    'use strict';

    function header() {

        if (!BrainJocks.EE) {
            //fix section header to top of page while scrolling
            if ($(window).width() > 767) {
                //fix section header to top of page while scrolling
                //RRW-4455 - temp fix -> accessibility check
                $('.rde-flex-col .score-section-header').stick_in_parent({ offset_top: 152, recalc_every: 1 });
            }
        }
    }

    function is_InternetExplorer() {
        var ua = navigator.userAgent;
        var is_ie = ua.indexOf("MSIE") > -1 || ua.indexOf("Trident/") > -1;
        return is_ie;
    }

    var headerHeight = $('header').height();

    if (is_InternetExplorer()) {
        $('body').addClass('msie fixed-header');
        $('header').css({
            'position': 'fixed',
            'top': '0'
        });
        //Support center button top position
        $('.rde-support-center-sticky-button').css('top', headerHeight);
    }

    //If header is empty, remove hamburger menu on mobile
    function isEmpty(el) {
        return !$.trim(el.html())
    }
    if (isEmpty($('.score-megamenu .collapse'))) {
        $('.score-header .navbar-toggle').css({
            'opacity': 0,
            'z-index': -1
        });
    }

    //RRW-12654
    setTimeout(function () {
        if (navigator.platform == "iPhone") {
            $('.resideo-home-page a[title="Honeywell Home home page"] img').attr('src', '/us/en/-/media/Resideo/Consumer-Images/SVG%20Assets/White/hwh-logo.png');
            $('.honeywellhome-home-page a[title="Honeywell Home home page"] img').attr('src', '/us/en/-/media/Resideo/Consumer-Images/SVG%20Assets/Black/hwh-logo-black.png');
            let styles = 'background:inherit;border:none;';
            document.querySelector('a[title="Honeywell Home home page"]').style = styles;
            document.querySelectorAll('header .score-style-box.brand-tabs img').forEach(el => el.style.height = '35px');
        }
    }, 3000);


    /*** RRW-14725 EM ***/
    // Global Score Mega Menu Object
    const SMMData = window.SMMData || {};
    SMMData.isTabbed = false;


    // Detect if tabbing has occurred 
    $(window).keyup(function (e) {
        let code = (e.keyCode ? e.keyCode : e.which);
        SMMData.isTabbed = (code == 9) ? true : false;
    });

    // Reset any open menu if the cursor moves off it 
    $(".score-megamenu-dropdown ul.dropdown-menu").on("mouseleave", function (e) {
        let winw = window.innerWidth;
        if (winw > 991) {
            $(this).closest('li').removeClass("open").find("a").each(function (e) {
                $(this).attr("aria-expanded", "false");
            });

            $("a[data-toggle='dropdown']").each(function (e) {
                $(this).blur();
            });
            //console.log("1: Reset any open menu if the cursor moves off it");
        }
    });

    // Reset any open menu if the cursor moves onto the page avoiding open menus RRW-15271 EM
    $(".page-wrapper").on("mouseover", function (e) {
        let pagewrapper = $(this);
        let winw = window.innerWidth;
        if (winw > 991) {

            let smmdOpen = $(".score-megamenu-dropdown.open");
            smmdOpen.each(function () {
                $(this).removeClass("open").find("a[aria-expanded]").each(function (e) {
                    $(this).attr("aria-expanded", "false");
                });
            });

            $("a[data-toggle='dropdown']").each(function (e) {
                $(this).blur();
            });
            //console.log("2: Reset any open menu if the cursor moves onto the page avoiding open menus");
        }
    });


    // Reset any open menus if menu link has no dropdown on any focusing event  RRW-15271 EM
    $('.score-megamenu-basic-item, .score-megamenu-basic-item a').on("focus mouseenter", function (e) {
        let winw = window.innerWidth;
        if (winw > 991) {
            let smmdOpen = $(".score-megamenu-dropdown.open");
            smmdOpen.each(function () {
                $(this).removeClass("open").find("a[aria-expanded]").attr("aria-expanded", "false").blur();
            });

            $("a[data-toggle='dropdown']").each(function (e) {
                $(this).blur();
            });
        }
        //console.log("3: Reset any open menus if menu link has no dropdown on any focusing event");
    });

    //	Listen for any focus or mouseenter events on the menu triggers
    $('.score-megamenu-dropdown a[data-toggle="dropdown"]').on("focus mouseenter", function (e) {
        let winw = window.innerWidth;
        if (winw > 991) {
            let jqobj = $(this);
            let evt = e.type;			// focus or mouseenter
            let runflag = false;		// test to allow running if a Tab is the reason for a focus event
            if (evt == "focus") {
                if (SMMData.isTabbed) {
                    SMMData.isTabbed = false;	// reset
                    runflag = true;				// ok to run
                }
            } else {
                runflag = true;					// this is a mouseenter event
            }

            if (runflag) {						// only run if the menu is not already open
                if (!jqobj.closest(".score-megamenu-dropdown").hasClass("open")) {
                    jqobj.click();
                    //console.log("4: Listen for any focus or mouseenter events on the menu triggers");
                }
            }
        }

    });



    new Promise(function (resolve, reject) {
        header();
        resolve();
    });

    /* RRW-15006 - only trigger modal top offset on desktop (load and resize events) EM */
    const setModalTop = function (isdesktop) {

        // RRW-14865  
        let csmmd = $(".country-selector-modal .modal-dialog");

        if (isdesktop) {

            // Dynamically set country selector modal offset to be fit with top stripe 
            // depending on if banner above navigation exists
            let countrySelectorModalOffset = 0;
            let topBannerHeight = $('.score-header .rde-banner').height();
            let topStripeHeight = $('.score-header .brand-tabs').height();            

            if ($('.score-header .rde-banner').length) {
                countrySelectorModalOffset = topBannerHeight + topStripeHeight;                
            } else {
                countrySelectorModalOffset = topStripeHeight;
            }

            csmmd.css('top', countrySelectorModalOffset);

        } else {
            csmmd.css('top','');
        }

    }

    // limit how often setModalTop is run during resizing - EM
    let resizeEvt; 
    window.addEventListener('resize', function () {
        clearTimeout(resizeEvt);
        resizeEvt = setTimeout(widthtest, 500);
    });

    // run test on intial load and call when needed on resize - EM
    (window.widthtest = function () {
        $(window).width() < 992 ? setModalTop(false) : setModalTop(true);
    })();
});

define('Labels',['jquery', 'eventManager', 'constants', 'scorebootstrap', 'promise-polyfill'], function ($, eventManager, constants) {
    'use strict';

    function labels() {
        //activate input on click of label
        function labelInputFocus() {
            $('label').on('click', function () {
                $(this).siblings('input').focus();
            });
        }

        if (!BrainJocks.EE) {
            //input float labels
            var FloatLabel = function () {

                if (typeof Array.prototype.forEach != 'function') {
                    Array.prototype.forEach = function (callback) {
                        for (var i = 0; i < this.length; i++) {
                            callback.apply(this, [this[i], i, this]);
                        }
                    };
                }

                if (window.NodeList && !NodeList.prototype.forEach) {
                    NodeList.prototype.forEach = Array.prototype.forEach;
                }

                // add active class and placeholder
                var handleFocus = function handleFocus(e) {
                    var target = e.target;
                    target.parentNode.classList.add('active');
                    if (target.getAttribute('data-placeholder')) {
                        target.setAttribute('placeholder', target.getAttribute('data-placeholder'));
                    }
                }; // remove active class and placeholder

                var handleBlur = function handleBlur(e) {
                    var target = e.target;

                    if (!target.value) {
                        target.parentNode.classList.remove('active');
                    }

                    target.removeAttribute('placeholder');
                }; // register events

                var bindEvents = function bindEvents(element) {
                    var floatField = element.querySelector('input');
                    var floatTextarea = element.querySelector('textarea');

                    if (floatField) {
                        floatField.addEventListener('focus', handleFocus);
                        floatField.addEventListener('blur', handleBlur);
                    }
                    if (floatTextarea) {
                        floatTextarea.addEventListener('focus', handleFocus);
                        floatTextarea.addEventListener('blur', handleBlur);
                    }
                };
                // get DOM elements
                var init = function init() {
                    var floatContainers = document.querySelectorAll('.rde-float-container');
                    floatContainers.forEach(function (element) {
                        var input = element.querySelector('input');

                        if (input && input.value) {
                            element.classList.add('active');
                        }

                        bindEvents(element);
                    });
                    var floatContainersMarketo = document.querySelectorAll('.mktoFormRow');
                    floatContainersMarketo.forEach(function (element) {
                        var input = element.querySelector('input');
                        var textarea = element.querySelector('textarea');

                        if (input && input.value) {
                            element.classList.add('active');
                        }

                        if (textarea && textarea.value) {
                            element.classList.add('active');
                        }

                        bindEvents(element);
                    });
                };

                return {
                    init: init
                };
            }();
            FloatLabel.init();

            labelInputFocus();

            eventManager.subscribe(constants.MarketoFormLoaded, function () {
                FloatLabel.init();
            });
        }
    }

    new Promise(function (resolve, reject) {
        labels();
        resolve();
    });
});

define('MatchHeightCalls',['jquery', 'scorebootstrap', 'matchHeight', 'promise-polyfill'], function ($) {
    'use strict';

    function matchHeightCalls() {
        $(".guided-selling-wrapper .score-highlight.rde-products").matchHeight();

        if (!BrainJocks.EE) {
            //match height
            $('.rde-hero-wrapper .score-stripe').matchHeight();
            $('.rde-product-highlight').matchHeight();
            $('.rde-pro-product-relations-slider .slick-slide .score-highlight').matchHeight(); 
            $('.usaa-home-page .rde-product-highlight .score-highlight-body').matchHeight();
            $('.emea-content-page .score-style-box.rde-resource-highlight-wrapper .score-content-spot h3').matchHeight();
            $('.emea-content-page .score-style-box.rde-resource-highlight-wrapper .caption .score-highlight-body').matchHeight();
            $('.emea-content-page .score-style-box.rde-resource-highlight-wrapper').matchHeight();

            //perform match height after images are LL for Product Highlights
            window.addEventListener('productHighlightUpdated', function (e) {
                $('.rde-product-highlight').matchHeight();
                $('.usaa-home-page .rde-product-highlight .score-highlight-body').matchHeight();
                
            });
            
            $('.rde-offset-slider .score-section-hero, .rde-offset-slider .score-style-box').matchHeight();
            $('.rde-pro-image-after-content h2').matchHeight();
            $('.rde-pro-info-card').matchHeight();
            $('.rde-pro-info-card .score-content-spot h6').matchHeight();
            $('.rde-pro-info-card .score-content-spot p i').matchHeight();
            $('.score-style-box.rde-product-card .score-highlight h2').matchHeight();
            
            $('.rde-block-well').matchHeight();
            $('.honeywellhome-support-landing-page .rde-video-highlight .caption').matchHeight();
            $('.global-search #coveo-center-column .CoveoSearchInterface .coveo-card-layout .rde-coveo-title').matchHeight(); //RRW-4320
            $('.rde-pro-resources-page .rde-resource-experience-highlight .score-highlight-body p').matchHeight();
            $('.rde-pro-resources-page .score-style-box .rde-resource-highlight .caption').matchHeight();
            $('.rde-pro-resources-page .rde-resources-experience-section .score-highlight .score-highlight-body').matchHeight();
            //RRW-9020
            $(window).on("load", function () {
                setTimeout(function () {
                    if (document.querySelector('.rde-pro-line-tab a[data-toggle="tab"]')) {
                        $('.rde-pro-line-tab a[data-toggle="tab"]').on('click', function () {
                            $('.rde-pro-line-tab .score-highlight.rde-numerical').matchHeight();
                        });
                    }
                }, 500);
            });
        }

        //Guided Selling logic
        //match height
        $('.guided-selling-wrapper .score-column2 .score-left, .guided-selling-wrapper .score-column2 .score-right').matchHeight();

        //RRW-3290
        $(window).on("load", function () {
            $('.guided-selling-wrapper .score-column2 .score-left, .guided-selling-wrapper .score-column2 .score-right').matchHeight();
        });
    }

    new Promise(function (resolve, reject) {
        matchHeightCalls();
        resolve();
    });
});

define('Services/rde.analytics-gtm',["jquery", 'eventManager'], function ($, eventManager) {
    function GTM() { }
    GTM.prototype.init = function init() {

        loadGTMOptimizely();

        var isOtherRegion = false;

        // note: cookie delimiter is coming from TrustArc and configurable on its side
        // the delimiter is set per Consent Manager and affects all cookies, not only notice_behavior
        // this logic is using two options: comma or |, but if anything else, it'll be broken
        var locationCookie = getTrustarcBehaviorCookie();
        var rowNoticeBehavior = $("head #rde-row-notice-behaviour");
        if (locationCookie && rowNoticeBehavior && rowNoticeBehavior.length === 1) {
            var rowNoticeBehaviorValue = rowNoticeBehavior.first().attr("content");
            if (rowNoticeBehaviorValue) {
                var locationCookieSplit = locationCookie.split(/[\s,|]+/);
                var rowNoticeBehaviorSplit = rowNoticeBehaviorValue.split(/[\s,|]+/);

                if (locationCookieSplit.length === 2 &&
                    rowNoticeBehaviorSplit.length === 2 &&
                    locationCookieSplit[0] === rowNoticeBehaviorSplit[0] &&
                    locationCookieSplit[1] === rowNoticeBehaviorSplit[1]) {
                    isOtherRegion = true;
                }
            }
        }

        if (!isOtherRegion) {
            //Check for TrustArc Cookie Exists or if TrustArc Banner not in page
            if (document.cookie.match(/\bnotice_gdpr_prefs=[^:]*1[^:]*:/) || ($(".trust-arc-banner-container").length <= 0)) {
                loadGTM();
                return false;
            }

            //Check for TrustArc Cookie not exists to attach Event Handler
            if (!document.cookie.match(/\bnotice_gdpr_prefs=/) && ($(".trust-arc-banner-container").length > 0)) {
                //This method will add a Handler that will be fired on Post Message event
                setupCCMEvent();
                return false;
            }
        }
        else {
            loadGTM();
        }
    }

    //Setup TrustArc Event Handler
    function setupCCMEvent() {

        // handleMessage() is our Event handler method to fire GTM on User Acceptance
        window.addEventListener("message", handleMessage, false);
    }

    function handleMessage(e) {

        if (e.data == "") {
            return;
        }

        var data = JSON.parse(e.data);

        //Check if Post Event message is submit_preferences
        if (data.message == "submit_preferences") {
            console.log("Banner Event - submit_preferences");

            // Check if TrustArc cookie has Functional Cookies prefs value
            if (document.cookie.match(/\bnotice_gdpr_prefs=[^:]*1[^:]*:/)) {
                console.log("TrustArc Banner Accepted");
                loadGTM();
            }
            else {
                console.log("TrustArc Banner Rejected");
            }
        }
    }

    //Get location cookie, only continent code
    function getTrustarcBehaviorCookie() {
        var result = "";
        var rx = new RegExp("\\s*notice_behavior\\s*=\\s*([^;]*)").exec(document.cookie);
        if (rx && rx.length > 1) {
            result = rx[1];
        }
        return result;
    }


    function loadGTM() {
        console.log("Loading GTM...");

        window.dataLayer = window.dataLayer || [];

        window.dataLayer.push({
            'gtm.start':
                new Date().getTime(), event: 'gtm.js'
        });

        //global registrations of analytics and gtm loading should only happen in preview and live mode
        if (typeof define === 'function' && define.amd && !isPageEditor()) {
            // load up gtm and trigger 'gtm-loaded' event in case any components need this
            require(['GTM'], function () {
                eventManager.trigger('gtm-loaded', window.dataLayer);
            });
        };
    }

    function loadGTMOptimizely() {
        console.log("Loading GTM Optimizely Container...");

        window.dataLayer = window.dataLayer || [];

        window.dataLayer.push({
            'gtm.start':
                new Date().getTime(), event: 'gtm.js'
        });

        //global registrations of analytics and gtm loading should only happen in preview and live mode
        if (typeof define === 'function' && define.amd && !isPageEditor()) {
            // load up gtm and trigger 'gtm-loaded' event in case any components need this
            require(['GTMOptimizely'], function () {
                eventManager.trigger('gtm-loaded', window.dataLayer);
            });
        };
    }

    // extend the dataLayer object with additional properties
    GTM.prototype.trackData = function register(obj) {
        window.dataLayer = window.dataLayer || [];
        window.dataLayer.push(obj);
    }

    function isPageEditor() {
        if (typeof Sitecore == "undefined") {
            return false;
        }
        if (typeof Sitecore.PageModes == "undefined" || Sitecore.PageModes == null) {
            return false;
        }
        return Sitecore.PageModes.PageEditor != null;
    }

    return new GTM();

});
define('logService',[],function () {
    function LogService() { }

    LogService.prototype.log = function (sender, data) {
        if (document.body.dataset.logService === "true") {
            console && console.log && console.log(data);
        }
    };

    LogService.prototype.error = function (sender, data) {
        if (document.body.dataset.logService === "true") {
            console && console.log && console.log("ERROR", data);
        }
    };

    return new LogService(); // singleton 
});
define('analyticsCore',['Services/rde.analytics-gtm', 'logService'],function(analyticsGTM, logService) {
    function AnalyticsCoreService() { }

    AnalyticsCoreService.prototype.trackEvent = function (eventData) {       
        logService.log("analytics", eventData);
        analyticsGTM.trackData(eventData);
    };

    AnalyticsCoreService.prototype.trackImpression = function (impressionData) {
        logService.log("analytics", impressionData);
        analyticsGTM.trackData(impressionData);
    };

    return new AnalyticsCoreService();
});
define('storageService',[],function () {
    function StorageService() {
        Object.defineProperties(this, {
            eCommerceTokenNamespace: { value: "___t_e_cmm___" },
            CartNamespace: { value: "__rt__a____c___" },
            tokenValidationNamespace: { value: "__nv__a____o___n___" }
        });
    }

    StorageService.prototype.storeECommerceTokenLocally = function (token) {
        sessionStorage.setItem(this.eCommerceTokenNamespace, token);
    };

    StorageService.prototype.loadLocalECommerceToken = function () {
        return sessionStorage.getItem(this.eCommerceTokenNamespace);
    };

    StorageService.prototype.setTokenValidationFlag = function (flag) {
        sessionStorage.setItem(this.tokenValidationNamespace, flag);
    };

    StorageService.prototype.getTokenValidationFlag = function () {
        return sessionStorage.getItem(this.tokenValidationNamespace);
    };

    StorageService.prototype.storeCartLocally = function (cart) {
        sessionStorage.setItem(this.CartNamespace, JSON.stringify(cart));
    };

    StorageService.prototype.loadLocalCart = function () {
        return JSON.parse(sessionStorage.getItem(this.CartNamespace));
    };

    StorageService.prototype.clearLocalCart = function () {
        sessionStorage.removeItem(this.CartNamespace);
    };

    StorageService.prototype.clearECommerceToken = function () {
        sessionStorage.removeItem(this.eCommerceTokenNamespace);
    };

    StorageService.prototype.loadFederatedUserAccount = function (federatedUserAccountNamespace) {
        var user = window.localStorage.getItem(federatedUserAccountNamespace);

        return user ? JSON.parse(user) : null;
    };

    StorageService.prototype.setItem = function(key, value) {
        sessionStorage.setItem(key, value);
    };

    StorageService.prototype.getItem = function (key) {
        return sessionStorage.getItem(key);
    };

    StorageService.prototype.removeItem = function (key) {
        sessionStorage.removeItem(key);
    };

    return new StorageService();
});
define('endpoints',{
    GetCartEndpoint: "/rde/cart",
    AddToCartEndpoint: "/rde/addtocart",
    RemoveFromCartEndpoint: "/rde/removefromcart",
    IncreaseCartItemEndpoint: "/rde/increaseproductquantity",
    DecreaseCartItemEndpoint: "/rde/decreaseproductquantity",
    UpdateCartItemEndpoint: "/rde/updateproductquantity",
    ApplyPromoCodeEndpoint: "/rde/applypromocode",
    ApplyPaymentOptionEndpoint: "/rde/applypaymentoption",
    SubmitCartEndpoint: "/rde/submitcart",
    ApplyShippingOptionEndpoint: "/rde/applyshippingoption",

    eCommerceTokenEndpoint: "/rde/ecommercetoken",
    eCommerceCookieValidationEndpoint: "/rde/ecommercetokenvalidation",

    PriceEndpoint: "/rde/price",
    PriceListEndpoint: "/rde/pricelist",
    CrossSellProducts: "/rde/getCrossSellProducts",
    LoginFederatedAccount: "/rde/loginFederatedAccount",
    LogoutFederatedAccount: "/rde/logoutFederatedAccount",

    GetOrderByIdEndpoint: "/rde/order/getOrderById",
    GetOrderBySessionAndOrderIdEndpoint: "/rde/order/getOrderBySessionAndOrderId",
    GetOrderByCreditCardNumberEndpoint: "/rde/order/getOrderByCreditCardNumber",

    GetProfessionalsEndpoint: "/rde/findAPro/professionals",
    GetCategoriesEndpoint: "/rde/findAPro/categories",
    GetFiltersDataForFilterIds: "/rde/findAPro/GetFiltersDataForFilterIds",

    GetZipCode: "/rde/geoLocation/zipCode",

    FindProContactFormSubmitHeatingAndCooling: "/rde/findaprosubmitheatingandcooling",
    FindProContactFormSubmitPlumbing: "/rde/findaprosubmitplumbing",
    FindProContactFormSubmitHomeSecurity: "/rde/findaprosubmithomesecurity",

    GetProductsFromCategory: "/rde/getProductsFromCategory",

    SubmitAccessoryOrder: "/rde/submitAccessoryOrder",

    SubmitReturn: "/rde/return/submitReturn",

    InterstitialModalData: "/rde/getInterstitialModalData",

    GetShopper:"/rde/getShopper"

    // this will be coming from service dependency on MVC object
});
define('experienceEditorService',[],function () {
    function ExperienceEditorService() { }

    ExperienceEditorService.prototype.isEE = function() {
        return typeof Sitecore != typeof void 0 &&
            typeof Sitecore.PageModes != typeof void 0 &&
            Sitecore.PageModes != null &&
            Sitecore.PageModes.PageEditor != null;
    };
    
    return new ExperienceEditorService();
});
define('identityService',["jquery", "storageService", "eventManager", "constants", "endpoints", "logService", "experienceEditorService", "promise-polyfill"], function ($, storage, eventManager, constants, mvc, logService, experienceEditorService) {
    function IdentityService() {
        if (!experienceEditorService.isEE()) {
            //this.getECommerceToken();
        }
    }

    function getToken(resolve, reject, baseUrl, hardReset, isAuthenticated, userId, roles) {

        var parameters = (hardReset ? "&hardReset=true" : "");
        parameters += (isAuthenticated ? "&isAuthenticated=true" : "");
        parameters += (userId != null ? "&userId=" + userId : "");
        parameters += (roles != null ? "&roles=" + roles : "");

        $.ajax({
                url: baseUrl + mvc.eCommerceTokenEndpoint + "?" + parameters,
                xhrFields: { withCredentials: true }
            })
            .done(function (data) {
                logService.log(data);
                if (data.cookieValidation != null) {
                    if (data.cookieValidation === true) {
                        storage.setTokenValidationFlag("true");
                    } else {
                        storage.setTokenValidationFlag("false");
                        // set cookies for local domain in case requesting token from shared domain
                        if (document.cookie.indexOf('token') === -1) {
                            document.cookie = "token=" + data.token + ";path=/";
                        }
                        if (document.cookie.indexOf('token_expiration') === -1) {
                            var date = new Date();
                            date.setTime(date.getTime() + (20 * 60 * 1000)); // 20 mins
                            document.cookie = "token_expiration=" + data.token + ";path=/; expires=" + date.toGMTString();
                        }
                    }
                }
                storage.storeECommerceTokenLocally(data.token);
                eventManager.trigger(constants.IdentityECommerceTokenReceived);
                resolve(data.token);
            })
            .fail(function (data) {
                logService.error(data);

                eventManager.trigger(constants.IdentityECommerceTokenFailed);
                reject("Error: Cannot get token");
            });
    }

    IdentityService.prototype.getECommerceToken = function (baseUrl, hardLoad, hardReset, isAuthenticated, userId, roles) {
        if (!(hardLoad || hardReset) && this.tokenPromise) {
            return this.tokenPromise;
        }

        this.tokenPromise = new Promise(function (resolve, reject) {
            if (!hardLoad && !hardReset) {
                var token = storage.loadLocalECommerceToken();
                if (token) {
                    resolve(token);
                    return;
                }
            }

            var flag = storage.getTokenValidationFlag();
            if (flag === null) {
                $.ajax({
                        url: baseUrl + mvc.eCommerceCookieValidationEndpoint,
                        xhrFields: { withCredentials: true }
                    })
                    .done(function (data) {
                        getToken(resolve, reject, baseUrl, hardReset, isAuthenticated, userId, roles);
                    })
                    .fail(function (data) {
                        reject("Error: Cannot get token validation cookie");
                    });
            }
            else if (flag === "true") {
                getToken(resolve, reject, baseUrl, hardReset, isAuthenticated, userId, roles);
            } else {
                getToken(resolve, reject, "", hardReset, isAuthenticated, userId, roles);
            }
        });

        return this.tokenPromise;
    };

    return new IdentityService();
});
(function(window) {
    if (!Array.prototype.find) {
        Object.defineProperty(Array.prototype, 'find', {
            value: function (predicate) {
                // 1. Let O be ? ToObject(this value).
                if (this == null) {
                    throw new TypeError('"this" is null or not defined');
                }

                var o = Object(this);

                // 2. Let len be ? ToLength(? Get(O, "length")).
                var len = o.length >>> 0;

                // 3. If IsCallable(predicate) is false, throw a TypeError exception.
                if (typeof predicate !== 'function') {
                    throw new TypeError('predicate must be a function');
                }

                // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.
                var thisArg = arguments[1];

                // 5. Let k be 0.
                var k = 0;

                // 6. Repeat, while k < len
                while (k < len) {
                    // a. Let Pk be ! ToString(k).
                    // b. Let kValue be ? Get(O, Pk).
                    // c. Let testResult be ToBoolean(? Call(predicate, T,  kValue, k, O )).
                    // d. If testResult is true, return kValue.
                    var kValue = o[k];
                    if (predicate.call(thisArg, kValue, k, o)) {
                        return kValue;
                    }
                    // e. Increase k by 1.
                    k++;
                }

                // 7. Return undefined.
                return undefined;
            },
            configurable: true,
            writable: true
        });
    }
})(window);

define("Resideo/Polyfills/arrayFind", function(){});

define('cartService',["jquery", "eventManager", "storageService", "constants", "endpoints", "logService", "experienceEditorService", "Resideo/Polyfills/arrayFind", "promise-polyfill"],
    function ($, eventManager, storage, constants, mvc, logService, experienceEditorService) {
        function CartService() {
        }

        CartService.prototype.getCart = function (reload, language) {

            if (this.cartPromise) {
                return this.cartPromise;
            }

            if (!language)
                language = 'en-US';

            this.cartPromise = new Promise(function (resolve, reject) {
                if (!reload) {
                    var cart = storage.loadLocalCart(); 
                    if (cart) {
                        resolve(cart);
                        return;
                    }
                }

                var jqXhr = $.ajax({
                    url: mvc.GetCartEndpoint + '?sc_lang=' + language + "&token=" + storage.loadLocalECommerceToken(),
                    type: "GET",
                    contentType: "application/json; charset=utf-8"
                });

                jqXhr.done(function (data) {
                    logService.log(this, data);
                    
                    var item = data.Item1;
                    if (item) {
                        storage.storeCartLocally(item);

                        resolve(item);

                        if (reload) {
                            eventManager.trigger(constants.CartUpdated, item);
                        }
                    } else {
                        reject(data.Item2);
                    }
                });

                jqXhr.fail(function (jqXHR, textStatus, errorThrown) {
                    logService.error(this, jqXHR);

                    reject(jqXHR);
                });

            });

            return this.cartPromise;
        };

        CartService.prototype.addToCart = function (sku, language) {
            if (!language)
                language = 'en-US';

            var localCart = storage.loadLocalCart();
            var exists = false;
            var lineItemId = "";
            if (localCart && localCart.Items && localCart.Items.length > 0) {
                localCart.Items.forEach(function (lineItem, index) {
                    if (lineItem.SKU === sku) {
                        exists = true;
                        lineItemId = lineItem.ItemId;
                    }
                });
            }
            var jqXhr;
            if (exists) {
                jqXhr = $.ajax({
                    url: mvc.IncreaseCartItemEndpoint + '?sc_lang=' + language,
                    type: "POST",
                    data: { itemId: lineItemId, token: storage.loadLocalECommerceToken() }
                });
            }
            else {
                jqXhr = $.ajax({
                    url: mvc.AddToCartEndpoint + '?sc_lang=' + language,
                    type: "POST",
                    data: { sku: sku, token: storage.loadLocalECommerceToken() }
                });
            }

            jqXhr.done(function (data) {
                logService.log(this, data);

                var cart = data.Item1;
                if (cart) {
                    storage.storeCartLocally(cart);

                    eventManager.trigger(constants.CartUpdated, cart);

                    var item;
                    if (exists) {
                        item = getCartItemById(lineItemId, cart);
                    }
                    else {
                        item = getCartItemBySku(sku, cart);
                    }

                    eventManager.trigger(constants.CartItemAdded, item);
                    eventManager.trigger(constants.RenderInterstitialModal, { sku: sku, total: cart.Total });
                }
            }.bind(this));

            jqXhr.fail(function (jqXHR, textStatus, errorThrown) {
                logService.error(this, jqXHR);
            });

            return jqXhr;
        };

        CartService.prototype.removeFromCart = function (item, language) {
            if (!language)
                language = 'en-US';

            var jqXhr = $.ajax({
                url: mvc.RemoveFromCartEndpoint + '?sc_lang=' + language,
                type: "POST",
                data: { itemId: item.ItemId, token: storage.loadLocalECommerceToken() }
            });

            jqXhr.done(function (data) {
                logService.log(this, data);

                var cart = data.Item1;
                if (cart){
                    storage.storeCartLocally(cart);

                    eventManager.trigger(constants.CartUpdated, cart);

                    eventManager.trigger(constants.CartItemRemoved, item);
                }
            });

            jqXhr.fail(function (jqXHR, textStatus, errorThrown) {
                logService.error(this, jqXHR);
            });

            return jqXhr;
        };

        CartService.prototype.increaseQuantity = function (itemId, language) {
            if (!language)
                language = 'en-US';

            var jqXhr = $.ajax({
                url: mvc.IncreaseCartItemEndpoint + '?sc_lang=' + language,
                type: "POST",
                data: { itemId: itemId, token: storage.loadLocalECommerceToken() }
            });

            jqXhr.done(function (data) {
                logService.log(this, data);

                var cart = data.Item1;
                if (cart) {
                    storage.storeCartLocally(cart);

                    eventManager.trigger(constants.CartUpdated, cart);

                    var item = getCartItemById(itemId, cart);
                    eventManager.trigger(constants.CartQuantityUpdated, item);
                    //Analytics CartQuantityIncreased
                    eventManager.trigger(constants.CartQuantityIncreased, item, 1);
                }
            });

            jqXhr.fail(function (jqXHR, textStatus, errorThrown) {
                logService.error(this, jqXHR);
            });

            return jqXhr;
        };

        CartService.prototype.decreaseQuantity = function (itemId, language) {
            if (!language)
                language = 'en-US';

            var jqXhr = $.ajax({
                url: mvc.DecreaseCartItemEndpoint + '?sc_lang=' + language,
                type: "POST",
                data: { itemId: itemId, token: storage.loadLocalECommerceToken() }
            });

            jqXhr.done(function (data) {
                logService.log(this, data);

                var cart = data.Item1;
                if (cart) {
                    storage.storeCartLocally(cart);

                    eventManager.trigger(constants.CartUpdated, cart);

                    var item = getCartItemById(itemId, cart);
                    eventManager.trigger(constants.CartQuantityUpdated, item);
                    //Analytics CartQuantityDecreased
                    eventManager.trigger(constants.CartQuantityDecreased, item, 1);
                }
            });

            jqXhr.fail(function (jqXHR, textStatus, errorThrown) {
                logService.error(this, jqXHR);
            });

            return jqXhr;
        };

        CartService.prototype.updateQuantity = function (itemId, quantity, language) {
            if (!language)
                language = 'en-US';

            var jqXhr = $.ajax({
                url: mvc.UpdateCartItemEndpoint + '?sc_lang=' + language,
                type: "POST",
                data: { itemId: itemId, quantity: quantity, token: storage.loadLocalECommerceToken() }
            });

            jqXhr.done(function (data) {
                logService.log(this, data);

                var cart = data.Item1;
                if (cart) {
                    storage.storeCartLocally(cart);

                    eventManager.trigger(constants.CartUpdated, cart);

                    var item = getCartItemById(itemId, cart);
                    eventManager.trigger(constants.CartQuantityUpdated, item);
                    if (quantity < 0) {
                        //Analytics CartQuantityDecreased
                        eventManager.trigger(constants.CartQuantityDecreased, item, Math.abs(quantity));
                    }
                    else {
                        //Analytics CartQuantityIncreased
                        eventManager.trigger(constants.CartQuantityIncreased, item, quantity);
                    }
                }
            });

            jqXhr.fail(function (jqXHR, textStatus, errorThrown) {
                logService.error(this, jqXHR);
            });

            return jqXhr;
        };

        CartService.prototype.applyPromocode = function (promoCode, language) {
            if (!language)
                language = 'en-US';

            var jqXhr = $.ajax({
                url: mvc.ApplyPromoCodeEndpoint + '?sc_lang=' + language,
                type: "POST",
                data: { promoCode: promoCode, token: storage.loadLocalECommerceToken() }
            });

            jqXhr.done(function (data) {
                logService.log(this, data);

                if (data.Item2) {
                    if (data.Item2.length > 0) {
                        eventManager.trigger(constants.CartPromoCodeFailed, data, promoCode);
                    }
                } else {
                    storage.storeCartLocally(data.Item1);

                    eventManager.trigger(constants.CartUpdated, data.Item1);
                    eventManager.trigger(constants.CartPromoCodeApplied, promoCode);
                }
            });

            jqXhr.fail(function (jqXHR, textStatus, errorThrown) {
                logService.error(this, jqXHR);

                eventManager.trigger(constants.CartPromoCodeFailed, jqXHR, promoCode);
            });

            return jqXhr;
        };

        CartService.prototype.applyPaymentOption = function (sourceId, isPayPalPayment, language) {
            if (!language)
                language = 'en-US';

            var jqXhr = $.ajax({
                url: mvc.ApplyPaymentOptionEndpoint + '?sc_lang=' + language,
                type: "POST",
                data: { sourceId: sourceId, isPayPalPayment: isPayPalPayment, token: storage.loadLocalECommerceToken() }
            });

            jqXhr.done(function (data) {
                logService.log(this, data);

                if (data.Item2) {
                    if (data.Item2.length > 0) {
                        eventManager.trigger(constants.PaymentError, data.Item2[0].Code);
                    }
                } else {
                    storage.storeCartLocally(data.Item1);

                    eventManager.trigger(constants.CartUpdated, data.Item1);
                }
            });

            jqXhr.fail(function (jqXHR, textStatus, errorThrown) {
                logService.error(this, jqXHR);

                eventManager.trigger(constants.PaymentError, jqXHR);
            });

            return jqXhr;
        };

        CartService.prototype.applyShippingOption = function (shippingOptionId, language) {
            if (!language)
                language = 'en-US';

            var jqXhr = $.ajax({
                url: mvc.ApplyShippingOptionEndpoint + '?sc_lang=' + language,
                type: "POST",
                data: { shippingOptionId: shippingOptionId, token: storage.loadLocalECommerceToken() }
            });

            jqXhr.done(function (data) {
                var item = data.Item1;
                if (item) {
                    logService.log(this, item);

                    eventManager.trigger(constants.CartUpdated, item);
                }
            });

            jqXhr.fail(function (jqXHR, textStatus, errorThrown) {
                logService.error(this, jqXHR);
            });

            return jqXhr;
        };

        CartService.prototype.submitCart = function (language, ipAddress, site) {
            if (!language)
                language = 'en-US';

            var jqXhr = $.ajax({
                url: mvc.SubmitCartEndpoint + '?sc_lang=' + language + "&sc_site=" + site,
                type: "POST",
                data: { token: storage.loadLocalECommerceToken(), ipAddress: ipAddress }
            });

            jqXhr.done(function (data) {
                var item = data.Item1;
                if (item) {
                    logService.log(this, item);

                    //track purchase analytics event
                    var cartData = storage.loadLocalCart();
                    eventManager.trigger(constants.PurchaseCompleted, cartData);

                    storage.clearLocalCart();
                    eventManager.trigger(constants.CartSubmitted, item);
                } else {
                    if (data.Item2) {
                        logService.error(this, data.Item2);

                        eventManager.trigger(constants.CartSubmitFailed, data.Item2);
                    }
                }
            });

            jqXhr.fail(function (jqXHR, textStatus, errorThrown) {
                logService.error(this, jqXHR);

                eventManager.trigger(constants.CartSubmitFailed, jqXHR);
            });

            return jqXhr;
        };

        function getCartItemById(itemId, data) {
            return data.Items.find(function (item) {
                return item.ItemId === itemId;
            });
        }

        function getCartItemBySku(sku, data) {
            return data.Items.find(function (item) {
                return item.SKU === sku;
            });
        }

        CartService.prototype.updateCart = function (data) {
            storage.storeCartLocally(data);

            eventManager.trigger(constants.CartUpdated, data);
        };

        return new CartService();
    });
define('checkoutEvents',['jquery', 'eventManager', 'analyticsCore', 'identityService', 'cartService'], function ($, eventManager, core, identityService, cartService) {

    function AnalyticsCheckoutEvents() { };

    AnalyticsCheckoutEvents.prototype.init = function () {
        if ($(".cart-navigation").length) {
            identityService.getECommerceToken("").then(function (token) {
                cartService.getCart().then(function (cart) {

                    trackCheckoutAnalyticsEvent(cart);

                    $("#buyWithPayPalButton").on("click", function () {
                        trackCheckoutOptionAnalyticsEvent(cart);
                    });

                    $(".order-payment-button").on("click", function () {
                        trackCheckoutOptionAnalyticsEvent(cart);
                    });
                });
            });

            eventManager.subscribe("Payment:CartUpdatedWithPayment", function (cart) {
                trackCheckoutOptionAnalyticsEvent(cart);
            });
        }
    };

    function trackCheckoutAnalyticsEvent(cartData) {
        var cart;
        if (cartData.Item1) {
            cart = cartData.Item1;
        }
        else {
            cart = cartData;
        }
        var step = $(".cart-navigation").find("a.score-composite-link.active").index() + 1;
        var orderId = cart.CartId;

        var products = getProducts(cart);
        var eventTrackingObject = {
            //Event Name
            "event": "checkout",
            //ID 43-73
            "orderID": orderId,
            "ecommerce": {
                "checkout": {
                    //ID 43-74
                    "actionField": {
                        "step": step
                    },
                    //Array of products
                    "products": products
                }
            }
        };

        core.trackEvent(eventTrackingObject);
    }

    function getProducts(cart) {
        var products = [];
        cart.Items.forEach(function (item) {
            var product = {
                //ID 43-61
                "name": item.SkuTitle,
                //ID 43-62
                "brand": item.Brand,
                //ID 43-63
                "category": item.Category,
                //ID 43-65
                "id": item.SKU,
                //ID 43-66
                "variant": item.SkuTitle,
                //ID 43-67
                "price": editString(item.SalePrice),
                //ID 43-68
                "metric1": editString(item.ListPrice),
                //ID 43-69
                "quantity": item.Quantity
            };
            if (window.location.hostname.indexOf(tenantHWH) > -1) {
                //ID 43-60
                product.dimension20 = String(item.FamilyNumber);
            }
            else {
                //ID 43-60
                product.dimension1 = String(item.FamilyNumber);
            }
            products.push(product);
        });
        return products;
    }

    function editString(str) {
        if (str) {
            return parseFloat(str.slice(1).replace(/,/g, ''));
        }
    }

    function trackCheckoutOptionAnalyticsEvent(cartData) {
        var cart;
        if (cartData.Item1) {
            cart = cartData.Item1;
        }
        else {
            cart = cartData;
        }
        var step = $(".cart-navigation").find("a.score-composite-link.active").index() + 1;
        var option = "";
        if (step === 1 || step === 4) {
            return;
        }
        if (step === 2) {
            option = $('input[name=radio]:checked').data("description") || "";
        }
        if (step === 3 && cart && cart.Payment) {
            if (cart.Payment.CardType === "creditCard") {
                option = cart.Payment.Brand || "";
            }
            else {
                option = cart.Payment.CardType || "";
            }

        }
        var eventTrackingObject = {
            //Event Name
            "event": "checkoutOption",
            "orderID": cart.CartId,
            'ecommerce': {
                'checkout_option': {
                    'actionField': {
                        'step': step,
                        'option': option
                    }
                }
            }
        };

        core.trackEvent(eventTrackingObject);
    }

    return new AnalyticsCheckoutEvents();

});
define('purchaseEvents',['jquery', 'eventManager', 'constants', 'analyticsCore'], function ($, eventManager, constants, core) {

    function AnalyticsPurchaseEvents() { };

    function trackPurchaseCompleted(data) {
        var event = "purchase";
        var coupon = sessionStorage.getItem('_omo_rp') ? JSON.parse(sessionStorage.getItem('_omo_rp')).join(",") : "";
        var products = getProducts(data);

        var event_tracking_object = {
            //Event Name
            "event": event,
            "ecommerce": {
                "purchase": {
                    "products": products,
                    "actionField": {
                        //ID: 50-82
                        "id": String(data.CartId),
                        //ID: 50-83
                        "revenue": editString(data.Total),
                        //ID: 50-84
                        "tax": editString(data.Tax),
                        //ID: 50-85
                        "shipping": data.ShippingPriceValue,
                        //ID: 50-86
                        "coupon": coupon,
                        //ID: 50-87
                        "metric2": editString(data.Discount)
                    }
                }
            }
        };

        core.trackEvent(event_tracking_object);

        sessionStorage.removeItem('_omo_rp');
    };

    function getProducts(data) {
        var products = [];
        data.Items.forEach(function (item) {
            var product = {
                //ID: 50-60
                "name": item.SkuTitle,
                //ID: 50-62
                "brand": item.Brand,
                //ID: 50-63 
                "category": item.Category,
                //ID: 50-65
                "id": item.SKU,
                //ID: 50-66 
                "variant": item.SkuTitle,
                //ID: 50-67 
                "price": editString(item.SalePrice),
                //ID: 50-68 
                "metric1": editString(item.ListPrice),
                //ID: 50-69 
                "quantity": item.Quantity
            };
            if (window.location.hostname.indexOf(window.tenantHWH) > -1) {
                product.dimension20 = String(item.FamilyNumber);
            }
            else {
                product.dimension1 = String(item.FamilyNumber);
            }
            products.push(product);
        });
        return products;
    };

    function editString(str) {
        if (str) {
            return parseFloat(str.slice(1).replace(/,/g, ''));
        }
    };

    function trackOrderLookupSubmitted(data) {
        var event = "orderDetail";
        var event_tracking_object = {
            //Event Name
            "event": event,
            //ID 51-73
            "orderID": data
        };

        core.trackEvent(event_tracking_object);
    };

    function trackPurchaseError(data) {
        var event = "purchaseError";
        var event_tracking_object = {
            //Event Name
            "event": event,
            //ID 49-94
            "formErrorText": data.PaymentErrorMessage
        };

        core.trackEvent(event_tracking_object);
    };

    AnalyticsPurchaseEvents.prototype.init = function () {
        eventManager.subscribe(constants.PurchaseCompleted, trackPurchaseCompleted);
        eventManager.subscribe(constants.OrderLookupSubmitted, trackOrderLookupSubmitted);
        eventManager.subscribe(constants.PurchaseError, trackPurchaseError);
    };

    return new AnalyticsPurchaseEvents();

});
define('analyticsEvents',["checkoutEvents", "purchaseEvents"], function (checkoutEvents, purchaseEvents) {
    function AnalyticsEventService() { }
	
    AnalyticsEventService.prototype.init = function() {
        setTimeout(purchaseEvents.init(), 0);
        setTimeout(checkoutEvents.init(), 0);
    };

    return new AnalyticsEventService();
});
define('helpersService',["jquery", "logService", "constants"], function ($, logService, constants) {
    function HelpersService() { }

    HelpersService.prototype.isMobileDevice = function() {
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            return true;
        }
        return false;
    };

    HelpersService.prototype.showLoader = function (target) {
        logService.log("Helper Service", "Loader shown");
        if (target) {
            $(target).addClass('loaded');    
        } else {
            $('.rde-loader-button').addClass('loaded');  
        }
    };

    HelpersService.prototype.hideLoader = function (target) {
        logService.log("Helper Service", "Loader hidden");
        if (target) {
            $(target).removeClass('loaded');
        } else {
            $('.rde-loader-button').removeClass('loaded');
        }        
    };

    HelpersService.prototype.checkKey = function(key) {
        if (key === "Enter") {
            return true;
        }

        var parsed = parseInt(key, 10);

        if (isNaN(parsed)) {
            return false;
        }

        return true;
    };

    HelpersService.prototype.isPrintFriendlyView = function () {
        return HelpersService.prototype.getUrlParameters(window.location, constants.PrintPreviewAttributeName);
    };

    HelpersService.prototype.getPrintFriendlyUrl = function () {
        return HelpersService.prototype.setUrlParameters(window.location, constants.PrintPreviewAttributeName, true);
    };

    HelpersService.prototype.getUrlParameters = function (location, urlParam) {
        urlParam = decodeURIComponent(urlParam);

        var regEx = new RegExp("[\?|&]" + urlParam + "=([^&#]+|$)", "gi");
        var value = regEx.exec(location.href);

        return value ? value[1] : "";
    };

    HelpersService.prototype.setUrlParameters = function setUrlParameter(location, urlParam, value) {
        value = encodeURIComponent(value);
        if (location === undefined || location === null) {
            throw new Error("No location URL implemented");
        }

        var url = location.href;
        var regExp = new RegExp("([\?|&])(" + urlParam + "=[^&#]+|$)", "gi");

        // remove hash from localtion.href, since it can be a window.location.href, as well as a "a" HTML element.
        // later on we will restore hash from the window.location.href
        url = url.replace(/\#.+/, '');

        // Remove anchor
        var anchor = '';
        var hashPosition = window.location.href.indexOf('#');

        if (~hashPosition) {
            anchor = window.location.href.substring(hashPosition + 1);
            //url = window.location.href.substring(0, hashPosition);
        }

        // Clear out all current instances of this param in the query string
        if (regExp.test(url)) {
            url = url.replace(regExp, "$1");
            // If query string was something like ?param=value&otherparam=othervalue and ew removed param=value then we would end up with ?&
            if (url.indexOf("?&") > -1) {
                url = url.replace("?&", "?");
            }
            if (url.indexOf("&&") > -1) {
                url = url.replace("&&", "&");
            }
        }

        if (value) {
            if (url.indexOf("?") < 0) {
                url += "?";
            } else if (new RegExp("[\?&]").test(url.slice(-1)) === false) {
                url += "&";
            }
            url += (urlParam + "=" + value);
        }

        // If it is a simple anchor - leave the hash part, otherwise erase the hash part because it might have Facet filter
        var isSimpleAnchor = !/[=&]/.test(anchor);

        // Append anchor back to url
        if (~hashPosition && isSimpleAnchor) {
            url += '#' + anchor;
        }

        return url;
    };

    HelpersService.prototype.scrollToTheTopOfElement = function(element) {

        $('html, body').animate({
                scrollTop: element.offset().top - $("header")[0].offsetHeight
            },
            500);
    };

    HelpersService.prototype.roundNumber = function(num, scale) {
        if(!("" + num).includes("e")) {
            return +(Math.round(num + "e+" + scale)  + "e-" + scale);
        } else {
            var arr = ("" + num).split("e");
            var sig = ""
            if(+arr[1] + scale > 0) {
                sig = "+";
            }
            return +(Math.round(+arr[0] + "e" + sig + (+arr[1] + scale)) + "e-" + scale);
        }
    };

    HelpersService.prototype.newGUID = function() {
        return (S4() + S4() + "-" + S4() + "-4" + S4().substr(0, 3) + "-" + S4() + "-" + S4() + S4() + S4()).toLowerCase();
    }

    HelpersService.prototype.validateEmail = function(email) {
        var re =
            /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(String(email).toLowerCase());
    };

    function S4() {
        // fix browser compatibility according https://developer.mozilla.org/en-US/docs/Web/API/Window/crypto#Browser_compatibility
        var crypto = window.crypto || window.msCrypto;
        return (((1 + crypto.getRandomValues(new Uint32Array(1))[0]) * 0x10000) | 0).toString(16).substring(1);
    }

    return new HelpersService();
});
define('findaproMessages',['jquery', 'eventManager', 'constants', 'analyticsCore', 'helpersService'], function ($, eventManager, constants, core, helpersService) {

    function AnalyticsFindAProMessages() { };

    function trackNoResults(zip) {
        //ID 319
        var event = "noResults";
        var event_tracking_object = {
            //ID 319-01
            'findaproZipcode': zip || "",
            //Event Name
            "event": event
        }
        core.trackEvent(event_tracking_object);
    }

    function trackAutoSearch(zip) {
        //ID 312
        var event = "autoSearch";
        var event_tracking_object = {
            //ID 312-01
            'findaproZipcode': zip || "",
            //Event Name
            "event": event
        }
        core.trackEvent(event_tracking_object);
    }

    function trackManualSearch(zip) {
        //ID 313
        var event = "manualSearch";
        var event_tracking_object = {
            //ID 313-01
            'findaproZipcode': zip || "",
            //Event Name
            "event": event
        }
        core.trackEvent(event_tracking_object);
    }

    function trackFilters(filters) {
        //ID 315
        var appliedFilters = "";
        if (filters) {
            filters.forEach(function (filter) {
                if (filter) {
                    appliedFilters += filter.Name + ",";
                }
            });
        }
        var event = "filterResults";
        var event_tracking_object = {
            //ID 315-01
            'filterName': appliedFilters.slice(0, -1) || "",
            //Event Name
            "event": event
        }
        core.trackEvent(event_tracking_object);
    }

    function trackSort(sortMethod) {
        //ID 317
        var event = "sortResults";
        var event_tracking_object = {
            //ID 317-01
            'sortMethod': sortMethod || "",
            //Event Name
            "event": event
        }
        core.trackEvent(event_tracking_object);
    }

    function trackResults(results, zip) {
        //ID 314
        var event = "searchResults";
        if (results && zip) {
            results.forEach(function (result) {
                var findaproName = result ? result.Name : "";
                var event_tracking_object = {
                    //ID 314-01
                    'findaproName': findaproName,
                    //ID 314-02
                    'findaproZipcode': zip || "",
                    //Event Name
                    "event": event
                }
                core.trackEvent(event_tracking_object);
            });
        }
    }

    function trackFormSubmitError(errorText) {
        //ID: 320
        var event = "formSubmitError";
        var formErrorText = errorText ? errorText.trim() : "";
        var eventData = {
            "event": event,
            // ID: 320-1
            "formName": "Contact A Pro",
            // ID: 320-2
            "formErrorText": formErrorText
        };
        core.trackEvent(eventData);
    }

    function trackFormSubmit() {
        //ID: 321
        var event = "formSubmit";
        var findaproName = decodeURIComponent(helpersService.getUrlParameters(window.location, 'businessName'));
        var eventData = {
            "event": event,
            // ID: 321-1
            "formName": "Contact A Pro",
            // ID: 321-2
            "findaproName": findaproName || ""
        };
        core.trackEvent(eventData);
    }

    AnalyticsFindAProMessages.prototype.init = function () {
        eventManager.subscribe(constants.FindAProNoResults, trackNoResults);
        eventManager.subscribe(constants.FindAProAutoSearch, trackAutoSearch);
        eventManager.subscribe(constants.FindAProManualSearch, trackManualSearch);
        eventManager.subscribe(constants.FindAProFiltersApplied, trackFilters);
        eventManager.subscribe(constants.FindAProSort, trackSort);
        eventManager.subscribe(constants.FindAProResultsUpdated, trackResults);
        eventManager.subscribe(constants.FindAProErrorMessageShown, trackFormSubmitError);
        eventManager.subscribe(constants.FindAProSubmitted, trackFormSubmit);
    };

    return new AnalyticsFindAProMessages();

});
define('cartMessages',['jquery', 'eventManager', 'constants', 'analyticsCore'], function ($, eventManager, constants, core) {

    function AnalyticsCartMessages() { };

    var addToCartEventActionName = "addToCart";
    var removeFromCartEventActionName = "removeFromCart";

    function trackCartItemAdded(item) {
        if (item) {
            var quantity = item.Quantity;
            trackCartAddAnalyticsEvent(item, quantity);
        }
    }

    function trackCartQuantityIncreased(item, quantity) {
        if (item && quantity) {
            var quantity = quantity;
            trackCartAddAnalyticsEvent(item, quantity);
        }
    }

    function trackCartQuantityDecreased(item, quantity) {
        if (item && quantity) {
            var quantity = quantity;
            trackCartRemoveAnalyticsEvent(item, quantity);
        }
    }

    function trackRemoveFromCart(item) {
        if (item) {
            var quantity = item.Quantity;
            trackCartRemoveAnalyticsEvent(item, quantity);
        }
    }

    function trackCartAddAnalyticsEvent(item, quantity) {
        var product = getProduct(item, quantity);

        var eventTrackingObject = {
            //Event Name
            "event": addToCartEventActionName,
            "ecommerce": {
                "add": {
                    "products": []
                }
            }
        };

        eventTrackingObject.ecommerce.add.products.push(product);

        core.trackEvent(eventTrackingObject);
    }

    function trackCartRemoveAnalyticsEvent(item, quantity) {
        var product = getProduct(item, quantity);
        var eventTrackingObject = {
            //Event Name
            "event": removeFromCartEventActionName,
            "ecommerce": {
                "remove": {
                    "products": []
                }
            }
        };
        eventTrackingObject.ecommerce.remove.products.push(product);

        core.trackEvent(eventTrackingObject);
    }

    function getProduct(item, quantity) {
        var product = {
            //ID 36-65
            "id": item.SKU,
            //ID 36-61
            "name": item.SkuTitle,
            //ID 36-67
            "price": editString(item.SalePrice),
            //ID 36-68
            "metric1": editString(item.ListPrice),
            //ID 36-62
            "brand": item.Brand,
            //ID 36-63
            "category": item.Category,
            //ID 36-66
            "variant": item.SkuTitle,
            //ID 36-69
            "quantity": quantity
        };
        if (window.location.hostname.indexOf(tenantHWH) > -1) {
            //ID 36-60
            product.dimension20 = String(item.FamilyNumber);
        }
        else {
            //ID 36-60
            product.dimension1 = String(item.FamilyNumber);
        }
        return product;
    }

    function trackViewMiniCartEvent(cart) {
        var eventTrackingObject = {
            //ID 37-72
            "cartSubtotal": editString(cart.Subtotal),
            //Event Name
            "event": "viewMiniCart"
        };

        core.trackEvent(eventTrackingObject);
    }

    function trackCartPromoCodeApplied(promoCode) {
        var eventTrackingObject = {
            //ID 42-96
            "promoCode": promoCode,
            //Event Name
            "event": "promoCodeApply"
        };

        core.trackEvent(eventTrackingObject);

        var promo = JSON.parse(sessionStorage.getItem('_omo_rp')) || [];

        promo.push(promoCode);
        sessionStorage.setItem('_omo_rp', JSON.stringify(promo));
    }

    function trackCartPromoCodeFailed(data, promoCode) {
        var item = data.Item2;
        var description = item && item[0].Code === "unhandled_dr_error" ? "Coupon code is invalid. Coupon Code cannot be used." : item[0].Description;
        var formErrorText = description + " | " + promoCode;
        var eventTrackingObject = {
            //Event Name
            "event": "promoCodeError",
            //ID 41-94
            "formErrorText": formErrorText
        };

        core.trackEvent(eventTrackingObject);
    }

    function editString(str) {
        if (str) {
            return parseFloat(str.slice(1).replace(/,/g, ''));
        }
    }

    AnalyticsCartMessages.prototype.init = function () {
        eventManager.subscribe(constants.CartItemAdded, trackCartItemAdded);
        eventManager.subscribe(constants.CartItemRemoved, trackRemoveFromCart);
        eventManager.subscribe(constants.ViewMiniCart, trackViewMiniCartEvent);
        eventManager.subscribe(constants.CartQuantityDecreased, trackCartQuantityDecreased);
        eventManager.subscribe(constants.CartQuantityIncreased, trackCartQuantityIncreased);
        eventManager.subscribe(constants.CartPromoCodeApplied, trackCartPromoCodeApplied);
        eventManager.subscribe(constants.CartPromoCodeFailed, trackCartPromoCodeFailed);
    };

    return new AnalyticsCartMessages();

});
define('rebatesMessages',['jquery', 'eventManager', 'constants', 'analyticsCore'], function ($, eventManager, constants, core) {

    function AnalyticsRebatesMessages() { };

    function trackRebateClick(target) {
        var rebate = $(target).closest(".thermostat-rebate-result-panel").find("span.rde-rebate-data");
        if (rebate && rebate.length) {
            var rebateName = rebate.data("rebatename");
            var rebateProvider = rebate.data("rebateprovider");
            var rebateOffer = rebate.data("rebateoffer");
            //ID: 94
            var event = "rebateClick";
            var event_tracking_object = {
                //ID: 94-117
                'rebateName': rebateName || "",
                //ID: 94-118
                'rebateProvider': rebateProvider || "",
                //ID: 94-119
                'rebateOffer': rebateOffer || "",
                //Event Name
                "event": event
            }
            core.trackEvent(event_tracking_object);
        }
    };

    function trackRebateSearch(data) {
        //ID: 92
        var event = "rebateSearch";
        var event_tracking_object = {
            //ID: 92-081
            'zip': data || "",
            //Event Name
            "event": event
        }
        core.trackEvent(event_tracking_object);
    };

    function trackRebateNoResults(data) {
        //ID: 93
        var event = "rebateNoResultsFound";
        var event_tracking_object = {
            //ID: 93-081
            'zip': data || "",
            //Event Name
            "event": event
        }
        core.trackEvent(event_tracking_object);
    };

    AnalyticsRebatesMessages.prototype.init = function () {
        eventManager.subscribe(constants.RebateClick, trackRebateClick);
        eventManager.subscribe(constants.RebateSearch, trackRebateSearch);
        eventManager.subscribe(constants.RebateNoResults, trackRebateNoResults);
    };

    return new AnalyticsRebatesMessages();

});
define('bazaarVoiceMessages',['jquery', 'eventManager', 'constants', 'analyticsCore'], function ($, eventManager, constants, core) {

    function AnalyticsBazaarVoiceMessages() { };

    function trackModalOpen(data) {
        //ID: 52
        if (data && (data.contentType === "review")) {
            var event = "productReviewModalLoad";
            var eventData = {
                "event": event
            };
            core.trackEvent(eventData);
        }
    }

    function trackReviewSubmitted(data) {
        //ID: 53
        if (data && (data.contentType === "review")) {
            var event = "productPostReview";
            var eventData = {
                "event": event
            };
            core.trackEvent(eventData);
        }
    }

    AnalyticsBazaarVoiceMessages.prototype.init = function () {
        eventManager.subscribe(constants.ReviewModalOpen, trackModalOpen);
        eventManager.subscribe(constants.ReviewSubmitted, trackReviewSubmitted);
    };

    return new AnalyticsBazaarVoiceMessages();

});
define('returnItemsMessages',['jquery', 'eventManager', 'constants', 'analyticsCore'], function ($, eventManager, constants, core) {

    function AnalyticsReturnItemsMessages() { }

    function trackSubmitEvents(returnInfo) {
        trackReturn(returnInfo);
    }

    function trackReturn(returnInfo) {
        var eventTrackingObject = {
            //Event Name
            "event": "refund",
            //ID: 89 - 082
            "actionField": { "id": returnInfo.orderId },
            //ID: 89 - 116
            "returnReason": returnInfo.formattedReason,
            "products": []
        };

        $.each(returnInfo.orderItems, function (index, item) {
            if (item.checked) {
                eventTrackingObject.products.push({
                    //ID: 89 - 065
                    "id": item.sku || "",
                    //ID: 89 - 069
                    "quantity": item.quantity,
                    //ID: 89  075
                    "price": item.price
                });
            }
        });

        core.trackEvent(eventTrackingObject);
    }


    AnalyticsReturnItemsMessages.prototype.init = function () {
        eventManager.subscribe(constants.ReturnSubmitted, trackSubmitEvents);
    };

    return new AnalyticsReturnItemsMessages();
});
define('categorySectionMessages',['jquery', 'eventManager', 'constants', 'analyticsCore'], function($, eventManager, constants, core) {
    function AnalyticsCategorySectionTabs() { };

    function trackTabClick() {
        var event = "supportClick";
        var eventData = {
            "event": event
        };
        core.trackEvent(eventData);
    }

    AnalyticsCategorySectionTabs.prototype.init = function() {
        eventManager.subscribe(constants.CategorySectionTabClicked, trackTabClick);
    }

    return new AnalyticsCategorySectionTabs();
});
define('analyticsMessages',["jquery", "findaproMessages", "cartMessages", "rebatesMessages", "bazaarVoiceMessages", "returnItemsMessages", "categorySectionMessages"], function ($, findaproMessages, cartMessages, rebatesMessages, bazaarVoiceMessages, returnItemsMessages, categorySectionMessages) {
    function AnalyticsMessageHandlerService() { }

    AnalyticsMessageHandlerService.prototype.init = function () {
        setTimeout(findaproMessages.init(), 0);
        setTimeout(cartMessages.init(), 0);
        setTimeout(rebatesMessages.init(), 0);
        setTimeout(bazaarVoiceMessages.init(), 0);
        setTimeout(returnItemsMessages.init(), 0);
        setTimeout(categorySectionMessages.init(), 0);
    };

    return new AnalyticsMessageHandlerService();
});
define('componentButtons',["jquery", "analyticsCore", "eventManager"], function ($, core, eventManager) {

    var social = ["twitter", "facebook", "youtube", "linkedin"];
    var appLinks = ["apps.apple.com", "play.google.com", "itunes.apple.com"];
    var phoneLink = "tel:";
    var defaultImageText = "image";
    var defaultCartText = "shopping cart";
    var ctaButtons = ["find a pro", "find a retailer", "buy now"];

    function AnalyticsComponentButtons() { };

    AnalyticsComponentButtons.prototype.init = function() {

        $(document.body).on("click", "a", function (ev) {

            var href = ($(this).prop('href') || "").toLowerCase();
            var disabled = $(this).hasClass('disabled');
            //replacing startsWith() with indexOf() to fix issues in IE (IE doesn't support startsWith())
            if (!href || !href.length || disabled || href.indexOf("javascript") === 0) {
                return;
            }
            else {
                //All buttons / links
                var event = "buttonClick";
                var destinationURL = href || "";
                var buttonText;
                //Check if image button
                if ($(this).hasClass("score-image-button")) {
                    buttonText = defaultImageText;
                }
                //Check if shopping cart
                else if ($(this).hasClass("rde-mini-cart-button")) {
                    buttonText = defaultCartText;
                }
                else {
                    buttonText = $.trim($(this).text().replace(/\s\s+/g, ' ')) || "";
                }

                var button_tracking_object = {
                    //ID: 9-30
                    "destinationURL": destinationURL,
                    //ID: 9-32
                    "buttonText": buttonText,
                    //Event Name
                    "event": event
                };
                core.trackEvent(button_tracking_object);
            }

            //Social link click
            if (checkSocialLinks(href)) {
                var event = "socialLinkClick";
                var destinationURL = href || "";
                var button_tracking_object = {
                    //ID: 12-30
                    "destinationURL": destinationURL,
                    //Event Name
                    "event": event
                };
                core.trackEvent(button_tracking_object);
            }
            //Download app link click
            if (checkAppLinks(href)) {
                var event = "appLinkClick";
                var destinationURL = href || "";
                var button_tracking_object = {
                    //ID: 14-30
                    "destinationURL": destinationURL,
                    //Event Name
                    "event": event
                };
                core.trackEvent(button_tracking_object);
            }
            //Phone number click
            if (checkPhoneLinks(href)) {
                var event = "phoneNumberClick";
                var phoneNumber = href || "";
                var button_tracking_object = {
                    //ID: 15-35
                    "phoneNumber": phoneNumber,
                    //Event Name
                    "event": event
                };
                core.trackEvent(button_tracking_object);
            }

            //External links click
            if (checkExternalLinks($(this))) {
                var event = "externalLinkClick";
                var destinationURL = href || "";
                var button_tracking_object = {
                    //ID: 11-30
                    "destinationURL": destinationURL,
                    //Event Name
                    "event": event
                };
                core.trackEvent(button_tracking_object);
            }

            //PDP View All button click
            if ($(this).hasClass("rde-view-more")) {
                var event = "viewAllProductSpecs";
                var button_tracking_object = {
                    //ID: 35
                    //Event Name
                    "event": event
                };
                core.trackEvent(button_tracking_object);
            }

            //CTA buttons click
            if (checkCTA($(this))) {
                var event = "callToActionClick";
                var destinationURL = href || "";
                var cta = $.trim($(this).text()) || "";
                var button_tracking_object = {
                    //ID: 10-30
                    "destinationURL": destinationURL,
                    //ID: 10-33
                    "CTA": cta,
                    //Event Name
                    "event": event
                };
                core.trackEvent(button_tracking_object);
            }

            //Slider Link click
            if (checkSliderButton($(this))) {
                var event = "sliderLinkClick";
                var slider = $(this).closest(".slick-slider")[0];
                var slide = $("[data-slick-index='" + slider.slick.currentSlide + "']");
                var slideNumber = slider.slick.currentSlide+1;
                var slideName = findTitle(slide);
                var button_tracking_object = {
                    //ID: 62-38
                    "slideName": slideName,
                    //ID: 62-39
                    "slideNumber": slideNumber,
                    //Event Name
                    "event": event
                };
                core.trackEvent(button_tracking_object);
            }

        });
        //Track CTAs that are not links
        eventManager.subscribe("CTAClicked", function (text, url) {
            var button_tracking_object = {
                //ID: 9-30
                "destinationURL": location.protocol+"//"+location.hostname+url || "",
                //ID: 9-32
                "buttonText": text || "",
                //Event Name
                "event": "buttonClick"
            };

            var cta_tracking_object = {
                //ID: 10-30
                "destinationURL": location.protocol +"//"+ location.hostname + url || "",
                //ID: 10-33
                "CTA": text || "",
                //Event Name
                "event": "callToActionClick"
            };
            core.trackEvent(button_tracking_object);
            core.trackEvent(cta_tracking_object);
        });

        //Track retailer exit link click
        $(".rde-retailers a").on("click", function (ev) {
            var host = ($(this).prop('hostname') || "").toLowerCase();
            var event = "retailerExitLinkClick";
            var destinationURL = host || "";
            var button_tracking_object = {
                //ID: 85-114
                "destinationHostname": destinationURL,
                //Event Name
                "event": event
            };
            core.trackEvent(button_tracking_object);
        });

        //Track find a pro tooltip click
        $("#sidebar").on("click", ".rde-tooltip", function () {
            var buttonText = $("#Tooltip").find("strong").first().text().trim();
            var event = "buttonClick";
            var button_tracking_object = {
                //ID: 316-01
                "buttonText": buttonText || "",
                //Event Name
                "event": event
            };
            core.trackEvent(button_tracking_object);
        });

        //Track find a pro info window click
        $("#rde-map").on("click", "#info-window a", function (ev) {
            var businessName = $(this).closest("#info-window").find(".name-icon .name").text().trim();
            var buttonText = $(ev.target).text().trim();
            var event = "findaproClick";
            var button_tracking_object = {
                //ID: 318-01, 318-02, 318-03
                "buttonText": businessName + ":" + buttonText || "",
                //Event Name
                "event": event
            };
            core.trackEvent(button_tracking_object);
        });

        //Track partner card click
        $(".rde-partner-card-wrapper").on("click", ".score-highlight", function (ev) {
            var partnerName = $("h2", this).first().text().trim();
            var event = "partnerClick";
            var button_tracking_object = {
                //ID: 300-01
                "partnerName": partnerName || "",
                //Event Name
                "event": event
            };
            core.trackEvent(button_tracking_object);
        });
    };

    function checkSocialLinks(href) {
        if (social.some(function(el) {
            return href.indexOf(el) > -1;
        })) {
            return true;
        }
    }
    function checkAppLinks(href) {
        if (appLinks.some(function(el) {
            return href.indexOf(el) > -1;
        })) {
            return true;
        }
    }
    function checkPhoneLinks(href) {
        if (href.indexOf(phoneLink) > -1) {
            return true;
        }
    }
    function checkExternalLinks(obj) {
        var hostname = $(obj).prop('hostname');
        if (hostname && hostname.length && hostname !== window.location.hostname) {
            return true;
        }
    }

    function checkCTA(obj) {
        var text = ($.trim($(obj).text().replace(/\s\s+/g, ' ')) || "").toLowerCase();
        if (ctaButtons.some(function (el) {
            return (text.indexOf(el) > -1);
        })) {
            return true;
        }
    }
    //Checking only for rde hero slider, content is not available for offset slider at this point
    function checkSliderButton(button) {
        if ($(button).hasClass("score-button") && $(button).parents().is(".rde-hero-slider.slick-slider")) {
            return true;
        }
    }

    function findTitle(html) {

        var defaultLabel = "";

        var h1 = $("h1", html).first().text();
        var h2 = $("h2", html).first().text();
        var h3 = $("h3", html).first().text();
        var p = $("p", html).first().text();

        return h1 || h2 || h3 || p || defaultLabel;
    }
    return new AnalyticsComponentButtons();
}); 
define('componentSlider',["jquery", "analyticsCore"], function ($, core) {
    function AnalyticsComponentSlider() { }

    AnalyticsComponentSlider.prototype.init = function () {

        //Hero, OffSet and Highlight hero slider left/right keydown
        $(".rde-hero-slider.slick-slider, .rde-offset-slider.slick-slider, .rde-highlight-hero-slider .slick-slider, .rde-pro-content-video-slider.slick-slider").on("keydown", function (ev) {
            if (ev.keyCode == 37 || ev.keyCode == 39) {
                var slideChangeType = ev.type || "";
                var slider = $(this).closest(".slick-slider")[0];

                $(slider).one("afterChange", function (e, slick, currentSlide) {
                    trackChange(slider, slideChangeType);
                });
            }
        });

        //Hero, OffSet and Highlight hero slider dots click
        $(".rde-hero-slider .slick-dots li, .rde-offset-slider .slick-dots li, .rde-highlight-hero-slider .slick-dots li, .rde-pro-content-video-slider .slick-dots li").on("click", function (ev) {
            var slideChangeType = ev.type || "";
            var slider = $(this).closest(".slick-slider")[0];
            if (slider) {
                trackChange(slider, slideChangeType);
            }
        });

        //Hero, OffSet and Highlight hero slider swipe
        $(".rde-hero-slider.slick-slider, .rde-offset-slider.slick-slider, .rde-highlight-hero-slider .slick-slider, .rde-pro-content-video-slider.slick-slider").on("swipe", function (ev) {
            var slideChangeType = ev.type || "";
            var slider = $(this)[0];
            if (slider) {
                trackChange(slider, slideChangeType);
            }
        });

        //Highlight hero slider arrow click
        $(".rde-highlight-hero-slider .slick-arrow").on("click", function (ev) {
            var slideChangeType = ev.type || "";
            var slider = $(this).closest(".slick-slider")[0];
            if (slider) {
                trackChange(slider, slideChangeType);
            }
        });

        //Highlight hero slider arrow click
        $(".rde-highlight-hero-slider .slick-arrow").on("click", function (ev) {
            var slideChangeType = ev.type || "";
            var slider = $(this).closest(".slick-slider")[0];
            if (slider) {
                trackChange(slider, slideChangeType);
            }
        });


        //PDP Image gallery slider arrow click 
        $(".rde-pdp-gallery-thumbnails .slick-arrow").on("click", function (ev) {
            var slider = $(this).closest(".slick-slider")[0];
            trackGalleryChange(slider);
        });

        //PDP Image Gallery slider image click
        $(".rde-pdp-gallery-thumbnails .slick-slide").on("click", function (ev) {
            var slider = $(this).closest(".slick-slider")[0];
            trackGalleryChange(slider);
        });

        //PDP Image Gallery slider left/right keydown
        $(".rde-pdp-gallery-thumbnails.slick-slider, .rde-pdp-gallery.slick-slider").on("keydown", function (ev) {
            if (ev.keyCode == 37 || ev.keyCode == 39) {
                var slider = $(this)[0];

                $(slider).one("afterChange", function (e, slick, currentSlide) {
                    trackGalleryChange(slider);
                });
            }
        });

        //PDP Image Gallery dots click
        $(".rde-pdp-gallery-thumbnails .slick-dots li").on("click", function (ev) {
            var slider = $(this).closest(".slick-slider")[0];
            trackGalleryChange(slider);
        });

        //PDP Image Gallery swipe
        $(".rde-pdp-gallery.slick-slider, .rde-pdp-gallery-thumbnails.slick-slider").on("swipe", function (ev) {
            var slider = $(this)[0];
            trackGalleryChange(slider);
        });
    };

    function findTitle(html) {

        var defaultLabel = "";

        var h1 = $("h1", html).first().text().trim() || $("h1", html).last().text();
        var h2 = $("h2", html).first().text().trim() || $("h2", html).last().text();
        var h3 = $("h3", html).first().text().trim() || $("h3", html).last().text();
        var p = $("p", html).first().text().trim() || $("p", html).last().text();

        return h1 || h2 || h3 || p || defaultLabel;
    }

    function findEventName(slider) {

        if ($(slider).hasClass("rde-hero-slider")) {
            return "heroSliderAdvance";
        }
        else if ($(slider).hasClass("rde-offset-slider") || $(slider).hasClass("rde-pro-content-video-slider")) {
            return "offsetSliderAdvance";
        }
        else if ($(slider).hasClass("rde-highlight-hero-slider") || $(slider).closest(".score-stripe").hasClass("rde-highlight-hero-slider")) {
            return "highlightSliderAdvance";
        }
        else if ($(slider).hasClass("rde-pdp-gallery-thumbnails")) {
            return "productPhotoChange";
        }
        else if ($(slider).hasClass("rde-pdp-gallery")) {
            return "productPhotoChange";
        }
        else { return "" };
    }

    function findImageUrl(html) {

        var defaultURL = "";
        var imageURL = $("img", html).first().prop('src');

        return imageURL || defaultURL;
    }

    function trackChange(slider, slideChangeType) {
        var slide = $(slider).find("[data-slick-index='" + slider.slick.currentSlide + "']");
        var slideNumber = slider.slick.currentSlide + 1;
        var slideName = $.trim(findTitle(slide));
        var event = findEventName(slider);
        var slider_tracking_object = {
            //ID 18-38, 19-38
            "slideName": slideName,
            //ID 18-39, 19-39
            "slideNumber": slideNumber,
            //ID 18-40, 19-40
            "slideChangeType": slideChangeType,
            //Event Name
            "event": event
        }
        core.trackEvent(slider_tracking_object);
    }

    function trackGalleryChange(slider) {
        var slide = $("[data-slick-index='" + slider.slick.currentSlide + "']");
        var event = findEventName(slider);
        var imageUrl = findImageUrl(slide);
        var slider_tracking_object = {
            //ID 32-49
            "productImageURL": imageUrl,
            //Event Name
            "event": event
        }
        core.trackEvent(slider_tracking_object);
    }

    return new AnalyticsComponentSlider();
});
define('componentNavigation',["jquery", "analyticsCore"], function ($, core) {
    function AnalyticsComponentNavigation() { }

    AnalyticsComponentNavigation.prototype.init = function () {

        var defaultImageText = "image";

        //PDP product section navigation
        $(".product-section-navigation-item a").on("click", function (ev) {
            var event = "productPageNavSelection";
            var productNavText = $.trim($(this).text()) || "";
            var nav_tracking_object = {
                //ID 34-52
                "productNavText": productNavText,
                //Event Name
                "event": event
            }
            core.trackEvent(nav_tracking_object);
        });

        //Solution page navigation
        $(".solutions-sticky-navigation-item a, .product-family-sticky-navigation-item a").on("click", function (ev) {
            var event = "solutionPageNavSelection";
            var solutionNavText = $.trim($(this).text()) || "";
            var nav_tracking_object = {
                //ID 49-99
                "solutionNavText": solutionNavText,
                //Event Name
                "event": event
            }
            core.trackEvent(nav_tracking_object);
        });

        //Bread Crumb navigation
        $(".score-breadcrumb a").on("click", function (ev) {
            var event = "breadCrumbClick";
            var breadCrumbText = $.trim($(this).text()) || "";
            var destinationURL = $(this).prop('href') || "";
            var nav_tracking_object = {
                //ID 8-29
                "breadCrumbText": breadCrumbText,
                //ID 8-30
                "destinationURL": destinationURL,
                //Event Name
                "event": event
            }
            core.trackEvent(nav_tracking_object);
        });

        //Footer navigation
        $(".score-footer a").on("click", function (ev) {
            var event = "bottomNavSelection";
            var navText;
            if ($(this).hasClass("score-image-button")) {
                navText = defaultImageText;
            }
            else {
                navText = $.trim($(this).text().replace(/\s\s+/g, ' ')) || "";
            }
            var destinationURL = $(this).prop('href') || "";
            var nav_tracking_object = {
                //ID 6-27
                "navText": navText,
                //ID 6-30
                "destinationURL": destinationURL,
                //Event Name
                "event": event
            }
            core.trackEvent(nav_tracking_object);
        });

        //Header navigation
        $(".score-header a").on("click", function (ev) {
            var event = "topNavSelection";
            var navText;
            if ($(this).hasClass("score-image-button")) {
                navText = defaultImageText;
            }
            else if ($(this).hasClass("rde-mini-cart-button")) {
                navText = "shopping cart";
            }
            else {
                navText = $.trim($(this).text().replace(/\s\s+/g, ' ')) || "";
            }
            var destinationURL = $(this).prop('href') || "";
            var nav_tracking_object = {
                //ID 5-27
                "navText": navText,
                //ID 5-30
                "destinationURL": destinationURL,
                //Event Name
                "event": event
            }
            core.trackEvent(nav_tracking_object);
        });

        //Support topics navigation
        $(".rde-support-topics a").on("click", function (ev) {
            //ID 800.5
            var event = "supportClick";
            var eventCategory = "Popular Support Topics";
            var eventAction = "Link Click";
            var eventLabel = $.trim($(this).text().replace(/\s\s+/g, ' ')) || "";
            var nav_tracking_object = {
                //Event Name
                "event": event,
                "eventCategory": eventCategory,
                "eventAction": eventAction,
                "eventLabel": eventLabel
            }
            core.trackEvent(nav_tracking_object);
        });
    };

    return new AnalyticsComponentNavigation();
}); 
define('componentDropdown',["jquery", "analyticsCore"], function ($, core) {
    function AnalyticsComponentDropdown() { }

    AnalyticsComponentDropdown.prototype.init = function () {

        //PDP product variant selector change
        $(".product-variant-selector .dropdown-menu li").on("click", function (ev) {
            var event = "productModelSelection";
            var productModel = $.trim($(this).text()) || "Not set";
            var drop_tracking_object = {
                //ID 31-50
                "productModel": productModel,
                //Event Name
                "event": event
            }
            core.trackEvent(drop_tracking_object);
        });
    };

    return new AnalyticsComponentDropdown();
}); 
define('componentSearch',["jquery", "analyticsCore"], function ($, core) {
    function AnalyticsComponentSearch() {
    }

    var pageURL = document.location.href;
    var isSearchPage = $("body").hasClass("coveo-search") || $("body").hasClass("emea-coveo-search"); 
    var isSupportSearchPage = $("body").hasClass("support-search") || $("#rde-search-tab-support").hasClass("coveo-selected") || $("#hwh-search-tab-support").hasClass("coveo-selected");
    var isGlobalSearchPage = $("body").hasClass("global-search");
    var isProSearchPage = pageURL && (pageURL.indexOf("pro/search") > -1);

    AnalyticsComponentSearch.prototype.init = function () {

        if (isSearchPage) {
            // Coveo search new query, no results and federatedSearchLoad on page load
            var text = $(".CoveoSearchbox").children(":visible").text();
            getSearchQuery(text);

            if ($(".coveo-query-summary-no-results-string").length != 0 || (!$(".CoveoResult").length && !$(".coveo-placeholder-result").length)) {
                getNoResultsData(text);
            }
            else {
                if (isProSearchPage) {
                    setTimeout(function () {
                        getResutltInfo();
                    }, 500);
                }
            }

            // Coveo search new query
            $(".CoveoSearchInterface").on("newQuery", function (e) {
                // find text inside any search boxes
                var text = $(e.target).find(".CoveoSearchbox").children(":visible").text();
                getSearchQuery(text);
            });

            // Coveo Category Change
            $(".product-type-top-navigation, .product-type-side-navigation, .product-type-side-navigation-hierarchy").on("click", "a", function () {
                var productCategory = $(this);
                trackProductCategoryChange(productCategory);
            });

            // Coveo Filters Change
            $(".CoveoFacet").on("click", function (ev) {
                getFiltersData(ev);
            });

            // Coveo No Results
            $(".CoveoSearchInterface").on("noResults", function (e) {
                var text = $(e.target).find(".CoveoSearchbox").children(":visible").text();
                getNoResultsData(text);
            });

            // Coveo Pagination
            $(".CoveoSearchInterface").on("click", ".coveo-pager-list-item", function (ev) {
                var paginationElement = $(this);
                if (!isSupportSearchPage && !isProSearchPage) {
                    trackProductPaginationClick(paginationElement);
                }
            });

            //Coveo federated search load
            $(".rde-pro-page .CoveoSearchInterface").on("querySuccess", function (e) {
                if (isProSearchPage) {
                    // Get term
                    var term = e.detail.query.q || "";
                    //Get results count
                    var resultsCount = e.detail.results.totalCountFiltered;
                    //Track search load
                    if (term && resultsCount) {
                        trackFederatedSearchLoad(term, resultsCount);
                    }
                }
            });
        }

    };

    // Coveo No Results
    function getNoResultsData(text) {
        var event = "";
        var keyName = "";

        if (isSupportSearchPage) {
            event = "consumerSupportNoResultsFound";
            keyName = "supportSearchQuery";
        }
        else if (isProSearchPage) {
            event = "federatedSearchNoResults";
            keyName = "term";
        }
        else {
            return;
        }

        // if we find text, track it
        if (text) {
            trackSearchBoxNoResutlt(text, event, keyName);
        }
    }

    // Coveo Search Query
    function getSearchQuery(text) {
        var event = "";
        var varName = "";

        if (isGlobalSearchPage) {
            event = "siteSearchQuery";
            varName = "term";
        }
        else if (isSupportSearchPage) {
            event = "consumerSupportSearch";
            varName = "supportSearchQuery";
        }
        else if (isProSearchPage) {
            event = "federatedSearch";
            varName = "term";
        }
        else {
            return;
        }
        // if we find text, track it
        if (text) {
            trackSearchBoxSubmit(text, event, varName);
        }
    }

    // Coveo Add / Remove filters
    function getFiltersData(ev) {
        //Coveo facet values are stopping click propagation so using selector in .on() function doesn"t trigger event
        var coveoFacet = $(ev.currentTarget);
        var coveoFacetValue = $(ev.target).closest("li.coveo-facet-value");
        var filterEvent = "";
        var filterCategoryKey = "";
        var filterNameKey = "";

        if (isSupportSearchPage) {
            filterEvent = coveoFacetValue.hasClass("coveo-selected") ? "consumerSupportFilterAdd" : "consumerSupportFilterRemove";
            filterCategoryKey = "supportFilterCategory";
            filterNameKey = "supportFilterName";
        }
        else if (isProSearchPage) {
            filterEvent = coveoFacetValue.hasClass("coveo-selected") ? "federatedFilterAdd" : "federatedFilterRemove";
            filterCategoryKey = "federatedFilterCategory";
            filterNameKey = "federatedFilterName";
        }
        else {
            filterEvent = coveoFacetValue.hasClass("coveo-selected") ? "productFilterAdd" : "productFilterRemove";
            filterCategoryKey = "productFilterCategory";
            filterNameKey = "productFilterName";
        }

        if (coveoFacetValue.length) {
            trackAddRemoveFilterAnalytics(coveoFacet, coveoFacetValue, filterEvent, filterCategoryKey, filterNameKey);
        }
    }

    function getPaginationIndex(paginationElement) {
        var index;
        var currentIndex;
        if (paginationElement.hasClass("coveo-pager-next")) {
            currentIndex = $(".coveo-pager-list-item.coveo-active a").text();
            index = ++currentIndex;
        } else if (paginationElement.hasClass("coveo-pager-previous")) {
            currentIndex = $(".coveo-pager-list-item.coveo-active a").text();
            index = --currentIndex;
        } else if (paginationElement.hasClass("coveo-pager-list-item")) {
            index = paginationElement.find("a").text();
        }
        return parseInt(index, 0);
    }

    function trackProductPaginationClick(paginationElement) {
        var paginationIndex = getPaginationIndex(paginationElement);
        var productPaginationObject = {
            //ID 29-48
            "productPagination": paginationIndex,
            //Event Name
            "event": "productPaginationClick"
        }
        core.trackEvent(productPaginationObject);
    }

    function getResutltInfo() {
        var term = $(".rde-pro-page").find(".CoveoSearchbox").children(":visible").text();
        var resultCountSelect = $(".rde-pro-page .CoveoQuerySummary .coveo-highlight:nth-child(3)")[0];
        var resultsCountStr = resultCountSelect ? resultCountSelect.innerText : null;
        resultsCount = resultsCountStr ? parseInt(resultsCountStr.replace(/,/g, '')) : null;
        //Track search load
        if (term && resultsCount) {
            trackFederatedSearchLoad(term, resultsCount);
        }
    }

    function trackProductCategoryChange(productCategory) {
        var productCategoryName = productCategory.text();
        var productCategoryChangeObject = {
            //ID 24-63
            "products.category": productCategoryName,
            //Event Name
            "event": "productCategoryChange"
        }
        core.trackEvent(productCategoryChangeObject);
    }

    function trackAddRemoveFilterAnalytics(coveoFacet, coveoFacetValue, filterEvent, filterCategoryKey, filterNameKey) {
        var filterCategory = coveoFacet.data("title");
        var filterName = coveoFacetValue.data("value");

        var filterAnalyticsObject = {
            //Event Name
            "event": filterEvent
        }
        //ID 27-45
        filterAnalyticsObject[filterCategoryKey] = filterCategory;
        //ID 27-46
        filterAnalyticsObject[filterNameKey] = filterName;
        core.trackEvent(filterAnalyticsObject);
    }

    function trackSearchBoxSubmit(term, event, varName) {
        var analyticsObject = {
            "event": event
        }
        analyticsObject[varName] = term;
        core.trackEvent(analyticsObject);
    }

    function trackSearchBoxNoResutlt(term, event, varName) {

        var analyticsObject = {
            //Event Name
            "event": event
        }
        //ID 82-28
        analyticsObject[varName] = term;
        core.trackEvent(analyticsObject);
    }

    function trackFederatedSearchLoad(term, resultsCount) {
        var analyticsObject = {
            //Event Name
            "event": "federatedSearchLoad",
            //ID 55-28
            "term": term,
            //ID 55-100
            "federatedResultsNum": resultsCount
        }
        core.trackEvent(analyticsObject);
    }
    return new AnalyticsComponentSearch();
});
define('componentCoveoTile',["jquery", "analyticsCore"], function ($, core) {
    function AnalyticsComponentCoveoTile() { }

    AnalyticsComponentCoveoTile.prototype.init = function () {
        //Product Coveo Tile Click
        $(".CoveoSearchInterface").on("click", ".CoveoResult", function (ev) {
            var data = $(this).find("span.rde-product-data");
            if (data && data.length) {
                var id = data.data("id");
                var dimension1 = data.data("familynumber");
                var name = data.data("productname");
                var brand = data.data("brand");
                var category = data.data("category");
                var list = "Search result";
                var position = $(".CoveoResult").index($(this)) + 1;
                var event = "productClick";
                var product = {
                    //ID
                    "id": id,
                    //ID: 23-61
                    "name": name,
                    //ID: 23-62
                    "brand": brand,
                    //ID: 23-63 
                    "category": category,
                    //ID: 23-71
                    "position": position
                };
                if (window.location.hostname.indexOf(tenantHWH) > -1) {
                    //ID: 23-60
                    product.dimension20 = String(dimension1);
                }
                else {
                    //ID: 23-60
                    product.dimension1 = String(dimension1);
                }

                var tile_tracking_object = {
                    //Event Name
                    "event": event,
                    "ecommerce": {
                        "click": {
                            "products": [],
                            "actionField": [{
                                //ID: 23-70
                                "list": list
                            }]
                        }
                    }
                };

                tile_tracking_object.ecommerce.click.products.push(product);

                core.trackEvent(tile_tracking_object);
            }
        });
    };

    return new AnalyticsComponentCoveoTile();
}); 
define('componentResources',["jquery", "analyticsCore"], function ($, core) {
    function AnalyticsComponentResources() { }

    AnalyticsComponentResources.prototype.init = function () {

        //PDP resources download
        $(".rde-resources-slider .slick-slide a, .pro-product-resources .score-highlight a.score-button").on("click", function (ev) {
            var event = "resourceLinkClick";
            var href = ($(this).prop('href') || "").toLowerCase();
            if (!href || !href.length) {
                return;
            }
            var destinationURL = href;
            var fileExtension = href.split(".").pop();
            var res_tracking_object = {
                //ID 13-30
                "destinationURL": destinationURL,
                //ID 13-34
                "fileExtension": fileExtension,
                //Event Name
                "event": event
            }
            core.trackEvent(res_tracking_object);
        });
    };

    return new AnalyticsComponentResources();
}); 
define('componentYoutube',["youtube_api", "analyticsCore"],function (y, core) {
        // Possible milestones
    var milestones = [0, .25, .5, .75, 1];

        function YoutubeVideoTracker() {
        }

    function onPlayerStateChange() {
        var player = this;

        // Wait until youtube player is ready
        if (!player.getPlayerState) return;

        var state = player.getPlayerState();

        // Skip execution if state has not been changed
        if (state == player.tracking.playerState) return;

        // Save current state
        player.tracking.playerState = state;

            // Track milestone events while video is playing
        if (player.tracking.playerState == YT.PlayerState.PLAYING) {
            trackStartPlay(player);

            var trackingInterval = setInterval(
                function trackMilestoneEvents() {
                var elapsedTime = player.getCurrentTime() / player.getDuration();
                var lastMilestone = player.tracking.milestone != undefined ? player.tracking.milestone : -1;

                // Get milestone index that matches elapsed time
                var milestone = _.findLastIndex(milestones, function (m) { return elapsedTime >= m; });

                // Raise analytics event if new milestone reached
                if (milestone > lastMilestone) {
                    player.tracking.milestone = milestone;
                    trackMilestones(player, milestone);
                }

                if (player.tracking.playerState !== YT.PlayerState.PLAYING) {
                    clearInterval(trackingInterval);
                    player.tracking.milestone = -1;
                }
            }, 500);
        }
    }   

        function trackMilestones(player, milestone) {
            var event = "videoView";
            var videoName = player.getVideoData().title;
            var youtube_tracking_object = {
                //ID: 17-36
                "videoName": videoName,
                //ID: 17-37
                "videoPercent": milestones[milestone] * 100,
                //Event Name
                "event": event
            }
            core.trackEvent(youtube_tracking_object);
        }

        function trackStartPlay(player) {
            var event = "videoPlay";
            var videoName = player.getVideoData().title;
            var youtube_tracking_object = {
                //ID: 16-36
                "videoName": videoName,
                //Event Name
                "event": event
            }
            core.trackEvent(youtube_tracking_object);
        }

        function trackYoutubeVideosIn(container) {
            var iframes = container.querySelectorAll('iframe[src*="youtube.com"],iframe[src*="youtube-nocookie.com"]');
            var players = Array.prototype.map.call(iframes, function (i) {
                if (i.src.indexOf("autoplay=1") > -1 && i.src.indexOf("muted=1") > -1 && i.src.indexOf("loop=1") > -1)
                {
                    return;
                }
                if (typeof i.id !== "undefined" && i.id !== "")
                {
                    var player = YT.get(i.id);

                    if (player) {
                        return player;
                    }
                    else {
                        //needed timeout as there is console errors being logged when executing line below without timeout
                        setTimeout(function () {
                            return new YT.Player(i.id);
                        }, 600);
                    }                    
                }
            });
            // we have to poll youtube player states via setInterval
            // since addEventListener('onStateChange', ..) is not fired for dynamically moved iframes across the DOM 
            // e.g.Modal with Button components move its content to body
            players.forEach(function (player) {
                // Attach tracking property to each youtube player to keep milestone information as well as other stuff
                if (player) {
                    player.tracking = {};
                    player.interval = setInterval(onPlayerStateChange.bind(player), 500);
                }
            });
    }    

        YoutubeVideoTracker.prototype.init = function () {
            if (y && 'error_resideo_fallback' in y) {
                return;
            }

            // Track state of all youtube players when youtube api loaded
            YT.ready(function () {
                trackYoutubeVideosIn(document.body);
            });
        }

        return new YoutubeVideoTracker();
    });
define('componentVimeo',['require', "analyticsCore", 'promise-polyfill'], function (require, core) {

    // Possible milestones
    var cues = [0, .25, .5, .75, 1];

    function VimeoVideoTracker() { }

    VimeoVideoTracker.prototype.init = function () {
        var iframes = document.body.querySelectorAll('iframe[src*="player.vimeo.com"]');

        if (iframes.length > 0) {
            this.loadApi()
                .then(this._wrapVideo.bind(this, iframes))
                .then(this._onReady.bind(this));
        }
    };

    VimeoVideoTracker.prototype.loadApi = function () {
        return new Promise(function(resolve, reject) {
            require(["//player.vimeo.com/api/player.js"], resolve, reject);
        });
    }

    // wrap the iframe object into vimeo objects
    VimeoVideoTracker.prototype._wrapVideo = function (iframeEls, WrapperFn) {
        if (WrapperFn && 'error_resideo_fallback' in WrapperFn) {
            return;
        }

        return Array.prototype.map.call(iframeEls, function (el) {
            if (el.src.indexOf("autoplay=1") > -1 && el.src.indexOf("muted=1") > -1 && el.src.indexOf("loop=1") > -1) {
                return void 0;
            }
            if (typeof el.id !== "undefined" && el.id !== "") {
                return new WrapperFn(el.id);
            }
        }).filter(function (obj) { return !!obj }); // remove undefined objects
    }

    VimeoVideoTracker.prototype._onReady = function (players) {
        if (!players) return;

        var that = this;
        players.forEach(function(player) {
            if (!player) return; // do nothing

            // Wait until player is ready
            player.ready().then(that.trackVideo.bind(that, player));
        });
    }

    VimeoVideoTracker.prototype.trackVideo = function (player) {
        //Get video duration and set cuepoints
        player.getDuration().then(function (duration) {
            if (duration) {
                cues.forEach(function (cue, key, arr) {
                    var cuetime = duration * cue;
                    var last = arr[arr.length - 1];
                    if (cue === last) {
                        cuetime = (duration * cue) - 1;
                    }
                    player.addCuePoint(cuetime, {
                        percent: cue
                    });
                });
            }
        });

        player.on('play', function () {
            player.getVideoTitle().then(function (title) {

                var event = "videoPlay";
                var vimeo_tracking_object = {
                    //ID 16-36
                    "videoName": title || "Not set",
                    //Event Name
                    "event": event
                }
                core.trackEvent(vimeo_tracking_object);

            });
        });

        player.on('cuepoint', function (data) {
            player.getVideoTitle().then(function (title) {
                var event = "videoView";
                var vimeo_tracking_object = {
                    //ID 17-36
                    "videoName": title || "Not set",
                    //ID 17-37
                    "videoPercent": data.data.percent * 100,
                    //Event Name
                    "event": event
                }
                core.trackEvent(vimeo_tracking_object);
            });
        });
    }

    return new VimeoVideoTracker();
    });
define('componentProducts',["jquery", "analyticsCore"], function ($, core) {
    function AnalyticsComponentProducts() { }

    AnalyticsComponentProducts.prototype.init = function () {

        //Related Products Click
        $(".product-related-products a").on("click", function (ev) {
            var product = $(this);
            var list = "Related products";
            var position = $(".product-related-products a").index($(product)) + 1;
            trackProductClick(list, position, product);
        });

        //Product List Item Click (Featured and Supported)
        $(".product-list a").on("click", function (ev) {
            var product = $(this);
            var list = "Product List";
            var position = $(".product-list a").index($(product)) + 1;
            trackProductClick(list, position, product);
        });

        //Product Highlight Click and Cross Sell Product Click
        $(".product-highlight").on("click", function (ev) {
            var product = $(this);
            var list = "Product Highlight";
            var position = $(".product-highlight").index($(product)) + 1;
            trackProductClick(list, position, product);
        });

        //Pro Product Relations Click
        $(".pro-product-relations a").on("click", function (ev) {
            var product = $(this);
            var list = "Pro product relations";
            var position = $(".pro-product-relations a").index($(product)) + 1;
            trackProductClick(list, position, product);
        });

        //Score button Top Nav Product click
        $(".score-megamenu-content a.score-button").on("click", function (ev) {
            var href = $(this).attr('href');
            var data = $('body').find("span.rde-product-links");
            if (data && data.length) {
                var links = data.data("productLinks");

                var link = $.grep(links, function (n, i) {
                    return n.Url === href;
                });
                if (link && link.length > 0) {
                    var list = "Product Links - Top Nav";
                    var position = $(".score-megamenu-content .rde-sub-section-wrapper a.score-button").index($(this));
                    trackProductLinkClick(list, position, link);
                }
            }
        });


        //Accordion tab being clicked
        $('.coveo-search-button').on('click', function () {

            var event = "search";
            var value = $(this).attr('data-tab');
            var event_tracking_object = {
                "event": 'search',
                'eventCategory': 'Support Search',
                'eventAction': 'Product Search',
                //search box value
                'eventLabel': jQuery(".CoveoSearchbox").children(":visible").text()
            };

            //captures analytics
            core.trackEvent(event_tracking_object);
        });
    };

    function trackProductClick(list, position, product) {
        var data = $(product).find("span.rde-product-data");
        if (data && data.length) {
            var id = data.data("id");
            var dimension1 = data.data("familynumber");
            var name = data.data("productname");
            var brand = data.data("brand");
            var category = data.data("category");
            var event = "productClick";
            var trackingProduct = {
                //ID
                "id": id,
                //ID: 23-61
                "name": name,
                //ID: 23-62
                "brand": brand,
                //ID: 23-63 
                "category": category,
                //ID: 23-71
                "position": position
            };

            if (window.location.hostname.indexOf(tenantHWH) > -1) {
                //ID: 23-60
                trackingProduct.dimension20 = String(dimension1);
            }
            else {
                //ID: 23-60
                trackingProduct.dimension1 = String(dimension1);
            }

            var product_tracking_object = {
                //Event Name
                "event": event,
                "ecommerce": {
                    "click": {
                        "products": [],
                        "actionField": {
                            //ID: 23-70
                            "list": list
                        }
                    }
                }
            };
            product_tracking_object.ecommerce.click.products.push(trackingProduct);

            core.trackEvent(product_tracking_object);
        }
    };

    function trackProductLinkClick(list, position, link) {
        var id = link[0].SkuNumber;
        var dimension1 = link[0].FamilyNumber;
        var name = link[0].Name;
        var brand = link[0].Brand;
        var category = link[0].Category;
        var event = "productClick";
        var trackingProduct = {
            //ID
            "id": id,
            //ID: 23-61
            "name": name,
            //ID: 23-62
            "brand": brand,
            //ID: 23-63 
            "category": category,
            //ID: 23-71
            "position": position
        };

        if (window.location.hostname.indexOf(tenantHWH) > -1) {
            //ID: 23-60
            trackingProduct.dimension20 = String(dimension1);
        }
        else {
            //ID: 23-60
            trackingProduct.dimension1 = String(dimension1);
        }

        var product_tracking_object = {
            //Event Name
            "event": event,
            "ecommerce": {
                "click": {
                    "products": [],
                    "actionField": {
                        //ID: 23-70
                        "list": list
                    }
                }
            }
        };

        product_tracking_object.ecommerce.click.products.push(trackingProduct);

        core.trackEvent(product_tracking_object);
    };


    return new AnalyticsComponentProducts();
}); 
define('componentForms',["jquery", "analyticsCore", "eventManager", "constants"], function ($, core, eventManager, constants) {

    var marketoFormIds = ["3007", "3335", "3336", "3341", "3340", "3339"];

    function AnalyticsComponentForms() { }

    AnalyticsComponentForms.prototype.init = function () {
        $('form[name ="CheckoutForm"]').on("focus", "input", function () {
            var formField = $(this);
            trackFormFieldActivation(formField);
        });

        $('form[name ="CheckoutForm"]').on("click", ".nice-select", function () {
            if (!$(this).hasClass("open")) {
                var formField = $(this).siblings("select");
                trackFormFieldActivation(formField);
            }
        });

        $('form[name ="CheckoutForm"]').on("click", ":checkbox", function () {
            var formField = $(this);
            trackFormFieldActivation(formField);
        });

        $('form[name ="CheckoutForm"]').on("click", ":radio", function () {
            var formField = $(this);
            trackFormFieldActivation(formField);
        });

        //Marketo form
        eventManager.subscribe(constants.MarketoFormSubmitSuccess, function (values) {
            if (marketoFormIds.some(function (el) {
                return el === values.formid;
            })) {
                trackMarketoForm(values);
            }
        });
    };

    AnalyticsComponentForms.prototype.trackFormSubmit = function (formArray, formName, cart) {
        trackFormSubmit(formArray, formName, cart);
    };

    AnalyticsComponentForms.prototype.trackFormSubmitError = function (errors, formName) {
        trackFormSubmitError(errors, formName);
    };

    AnalyticsComponentForms.prototype.trackFormFieldActivation = function (formField) {
        trackFormFieldActivation(formField);
    };

    //Marketo Form analytics
    function trackMarketoForm(values) {
        var proUserExpertise;
        if (values.expertise) {
            proUserExpertise = $.type(values.expertise) === "string" ? values.expertise : values.expertise.join(', ');
        }
            var country = values.Country || "";

            var eventTrackingObject = {
                //Event Name
                'event': 'formSubmit',
                //ID 48-97
                'proUserExpertise': proUserExpertise || "",
                //ID 48-98
                'country': country
            };

        core.trackEvent(eventTrackingObject);
    };

    function trackFormFieldActivation(formField) {
        var formFieldName = formField.attr("name") || formField.data("name");
        var formName = formField.closest("form").attr("name");
        var eventTrackingObject = {
            //Event Name
            "event": "formFieldActivation",
            //ID 46-92
            "formName": formName,
            //ID 46-93
            "formFieldName": formFieldName
        };

        core.trackEvent(eventTrackingObject);
    };

    function mapErrorsData(errors, formName) {
        var mappedProducts =
            errors.map(function (error) {
                return {
                    //ID 47-92
                    "formName": formName,
                    //ID 47-93
                    "formFieldName": error.element.name,
                    //ID 47-94
                    "formErrorText": error.message
                }
            });

        return mappedProducts;
    };

    function trackFormSubmitError(errors, formName) {
        var mappedErrors = mapErrorsData(errors, formName);
        var eventTrackingObject = {
            //Event Name
            "event": "formSubmitError",
            //Array of errors
            "errors": mappedErrors
        };
        core.trackEvent(eventTrackingObject);
    };

    function trackFormSubmit(formArray, formName, cart) {
        if (formArray) {
            var formData = objectifyForm(formArray);
            var eventTrackingObject = {
                //Event Name
                "event": "formSubmit",
                //ID 48-76
                "shippingMethod": formData.ShippingMethod,
                //ID 48-77
                "billingMethod": formData.BillingMethod,
                //ID 48-80
                "state": formData.State,
                //ID 48-81
                "zip": formData.ZipCode,
                //ID 48-92
                "formName": formName,
                //ID 48-95
                "emailSubscription": formData.OptInChecked
            };
            if (cart && cart.Payment) {
                //ID 48-78
                eventTrackingObject.paymentMethod = cart.Payment.CardType;
                //ID 48-79
                eventTrackingObject.creditCardType = cart.Payment.Brand;
            }
            core.trackEvent(removeUndefinedFields(eventTrackingObject));
        }
    };

    function removeUndefinedFields(obj) {
        Object.keys(obj).forEach(
            function (key) {
                if (!obj[key]) {
                    delete obj[key];
                }
            });

        return obj;
    };

    function objectifyForm(formArray) {//serialize data function

        var returnArray = {};
        for (var i = 0; i < formArray.length; i++) {
            returnArray[formArray[i]['name']] = formArray[i]['value'];
        }
        return returnArray;
    };

    return new AnalyticsComponentForms();
});
define('componentModal',["jquery", "analyticsCore", "eventManager", "constants"], function ($, core, eventManager, constants) {
    function AnalyticsComponentModal() { }

    AnalyticsComponentModal.prototype.init = function () {

        //Interstitial dialog modal loaded
        eventManager.subscribe(constants.InterstitialDialogLoaded, function () {
            var event = "productModalLoad";
            var event_tracking_object = {
                //ID 45
                "event": event
            };

            core.trackEvent(event_tracking_object);
        });

        //Call us modal loaded
        $('.rde-call-modal').on('shown.bs.modal', function () {
            var event = "callUsModalLoad";
            var event_tracking_object = {
                //ID 66
                "event": event
            };

            core.trackEvent(event_tracking_object);
        });

        //Call us modal loaded
        $('.live-chat-button').on('click', function () {
            var event = "liveChatModalLoad";
            var event_tracking_object = {
                //ID 67
                "event": event
            };

            core.trackEvent(event_tracking_object);
        });

        //Feedback modal loaded
        eventManager.subscribe("Feedback:ShowModal", function (data) {
            var event = "articleCommentModalLoad";
            var event_tracking_object = {
                //ID 68
                "event": event
            };

            core.trackEvent(event_tracking_object);
        });

        //App status modal loaded
        $('.rde-app-modal').on('shown.bs.modal', function () {
            var event = "appStatusModalLoad";
            var event_tracking_object = {
                //ID 65
                "event": event
            };

            core.trackEvent(event_tracking_object);
        });

        //Thermostat wiring compatibility modal step 1
        eventManager.subscribe("WiringCompatibilityTool:Step-1", function (data) {
            var event = "virtualPage";
            var virtualPageName = "/us/en/modal/thermostatWiringChecklist/removeCover";
            var event_tracking_object = {
                //ID 600.1
                "event": event,
                "virtualPageName": virtualPageName
            };

            core.trackEvent(event_tracking_object);
        });

        //Thermostat wiring compatibility modal step 2
        eventManager.subscribe("WiringCompatibilityTool:Step-2", function (data) {
            var event = "virtualPage";
            var virtualPageName = "/us/en/modal/thermostatWiringChecklist/identifyYourVoltage";
            var event_tracking_object = {
                //ID 600.2
                "event": event,
                "virtualPageName": virtualPageName
            };

            core.trackEvent(event_tracking_object);
        });

        //Thermostat wiring compatibility modal step 3
        eventManager.subscribe("WiringCompatibilityTool:Step-3", function (data) {
            var event = "virtualPage";
            var virtualPageName = "/us/en/modal/thermostatWiringChecklist/selectAllWiresYouSee";
            var event_tracking_object = {
                //ID 600.3
                "event": event,
                "virtualPageName": virtualPageName
            };

            core.trackEvent(event_tracking_object);
        });

        //Thermostat wiring compatibility modal step 4
        eventManager.subscribe("WiringCompatibilityTool:Step-4", function (data) {
            var event = "virtualPage";
            var virtualPageName = "/us/en/modal/thermostatWiringChecklist/wifiConnectivity";
            var event_tracking_object = {
                //ID 600.4
                "event": event,
                "virtualPageName": virtualPageName
            };

            core.trackEvent(event_tracking_object);
        });

        //Thermostat wiring compatibility modal step 5
        eventManager.subscribe("WiringCompatibilityTool:Step-5", function (data) {
            var event = "virtualPage";
            var virtualPageName = "/us/en/modal/thermostatWiringChecklist/extraWires";
            var event_tracking_object = {
                //ID 600.5
                "event": event,
                "virtualPageName": virtualPageName
            };

            core.trackEvent(event_tracking_object);
        });

        //Thermostat wiring compatibility modal step 6
        eventManager.subscribe("WiringCompatibilityTool:Step-6", function (data) {
            var event = "virtualPage";
            var virtualPageName = "/us/en/modal/thermostatWiringChecklist/wiringIsCompatible";
            var event_tracking_object = {
                //ID 600.6
                "event": event,
                "virtualPageName": virtualPageName
            };

            core.trackEvent(event_tracking_object);
        });

        //Thermostat wiring compatibility modal step 7
        eventManager.subscribe("WiringCompatibilityTool:Step-7", function (data) {
            var event = "virtualPage";
            var virtualPageName = "/us/en/modal/thermostatWiringChecklist/wiringNotCompatible";
            var event_tracking_object = {
                //ID 600.7
                "event": event,
                "virtualPageName": virtualPageName
            };

            core.trackEvent(event_tracking_object);
        });

        //Thermostat wiring compatibility modal step 10
        eventManager.subscribe("WiringCompatibilityTool:Step-10", function (data) {
            var event = "virtualPage";
            var virtualPageName = "/us/en/modal/thermostatWiringChecklist/highVoltageSystem";
            var event_tracking_object = {
                "event": event,
                "virtualPageName": virtualPageName
            };

            core.trackEvent(event_tracking_object);
        });

        //Thermostat wiring compatibility modal step 11
        eventManager.subscribe("WiringCompatibilityTool:Step-11", function (data) {
            var event = "virtualPage";
            var virtualPageName = "/us/en/modal/thermostatWiringChecklist/identifyMyThermostatWires";
            var event_tracking_object = {
                "event": event,
                "virtualPageName": virtualPageName
            };

            core.trackEvent(event_tracking_object);
        });

        //Welcome! Save 15% modal loaded
        eventManager.subscribe("NewVisitor:ShowModal", function (data) {
            var event = "virtualPage";
            var virtualPageName = "/us/en/modal/ylm/welcome-save-15";
            var event_tracking_object = {
                //ID 600.8
                "event": event,
                "virtualPageName": virtualPageName
            };

            core.trackEvent(event_tracking_object);
        });

        //Timeout modal loaded
        eventManager.subscribe(constants.TimeoutAlert, function () {
            var event = "timeoutAlert";
            var eventCategory = "Timeout Alert";
            var eventAction = "popup"
            var event_tracking_object = {
                //ID 900.1
                "event": event,
                "eventCategory": eventCategory,
                "eventAction": eventAction
            };

            core.trackEvent(event_tracking_object);
        });

        eventManager.trigger("ComponentModal:Loaded");
    };

    return new AnalyticsComponentModal();
}); 
define('componentQuiz',["jquery", "analyticsCore", "eventManager", "constants"], function ($, core, eventManager, constants) {
    function AnalyticsComponentQuiz() { }

    AnalyticsComponentQuiz.prototype.init = function () {
        //Quiz answer submitted analytics
        eventManager.subscribe(constants.QuizAnswerSubmitted, function (question, answer, home, category) {
            if (home === answer) {
                eventLabel = answer;
                var quizAnalyticData = { "home": home, "category": category };
                sessionStorage.setItem('_pt_mh', JSON.stringify(quizAnalyticData));
            }
            else {
                eventLabel = home + "," + answer;
            }
            var event = "guidedSellingStepComplete";
            var quiz_tracking_object = {
                "eventCategory": "Guided Selling  " + category,
                "eventAction": question || "",
                "eventLabel": eventLabel || "",
                //Event Name
                "event": event
            }
            core.trackEvent(quiz_tracking_object);
        });
        
        //Results page load
        if ($("body").hasClass("guided-selling-body")) {
            var event = "guidedSellingReco";
            var solutionStatement = $(".guided-selling").find("h1").first().text();
            var analyticData = JSON.parse(sessionStorage.getItem('_pt_mh'));
            var homeType = analyticData ? analyticData.home : "";
            var cat = analyticData ? analyticData.category : "";
            var recoCategories = "";
            $(".guided-selling").find("h2").each(function () {
                recoCategories += "," + $(this).text();
            });
            var quiz_tracking_object = {
                "eventCategory": "Guided Selling  " + cat,
                "eventAction": solutionStatement || "",
                "eventLabel": homeType + recoCategories || "",
                //Event Name
                "event": event
            }
            core.trackEvent(quiz_tracking_object);
            sessionStorage.removeItem('_pt_mh');

            //PDF Download
            $(".guided-selling-body .guided-selling a.score-composite-link").not("a.share-feature-btn").on("click", function () {
                var event = "downloadPDF";
                var file = ($(this).prop('href') || "").split("/").pop();
                var eventLabel = decodeURIComponent(file.slice(0, file.lastIndexOf('?')));
                var quiz_tracking_object = {
                    "eventCategory": "Guided Selling  " + cat,
                    "eventLabel": eventLabel || "",
                    //Event Name
                    "event": event
                }
                core.trackEvent(quiz_tracking_object);
            });

            //Email share
            $(".guided-selling-body .guided-selling a.share-feature-btn").on("click", function () {
                var event = "emailShare";
                var quiz_tracking_object = {
                    "guidedSellingCategoryReco": "Guided Selling  " + cat,
                    //Event Name
                    "event": event
                }
                core.trackEvent(quiz_tracking_object);
            });
        }

    };

    return new AnalyticsComponentQuiz();
}); 
define('componentAccordion',["jquery", "analyticsCore", "eventManager", "constants"], function ($, core, eventManager, constants) {
    function AnalyticsComponentAccordion() { }

    AnalyticsComponentAccordion.prototype.init = function () {

        //Accordion tab being clicked
        $('.rde-accordion-tab').on('click', function () {

            var pane = $(this).parent().parent().siblings('.panel-collapse');

            //pane expands before this check is reached. The idea is to capture analytics only when it's being expanded
            if ($(pane).attr('aria-expanded') === 'true') {
                var event = "accordionClick";
                var value = $(this).attr('data-tab');
                var event_tracking_object = {
                    //ID 67
                    "event": event,
                    'eventCategory': $('.additional-support').text(),
                    'eventAction': value
                };

                //captures analytics
                core.trackEvent(event_tracking_object);
            }
        });

        //Link within the accordion clicked
        $('.rde-accordion-link').on('click', function () {

            var event = "accordionClick";

            //gets the tab root
            var tabRoot = $(this).parentsUntil(".score-accordion-panel").parent();

            //selects accross all children looking for the tab
            var tabName = $(tabRoot).find('.rde-accordion-tab').attr('data-tab');
            var event_tracking_object = {
                //ID 67
                "event": event,
                'eventCategory': $('.additional-support').text(),
                'eventAction': tabName,
                'eventLabel': $(this).text().trim()
            };

            //captures analytics
            core.trackEvent(event_tracking_object);
        });

        //Multi step article section click
        $('.js-anchor-section').on('click', function () {

            //Subsection(eventLabel) should be empty. Sends page title(h1) and the current section(tab) being clicked
            var event_tracking_object = {
                "event": "accordionClick",
                'eventCategory': "Support: " + $('h1').text().trim(),
                'eventAction': $(this).text().trim(),
                'eventLabel': ''
            };

            //captures analytics			
            core.trackEvent(event_tracking_object);

        });

        //Multi step article sub-section click
        $('.js-anchor-panel').on('multitaskPanelClick', function (e) {


            //Subsection(eventLabel) clicked. Sends page title(h1) and the current section(tab) being clicked
            var event_tracking_object = {
                "event": "accordionClick",
                'eventCategory': "Support: " + $('h1').text().trim(),
                'eventAction': $(this).parents('.score-accordion-panel').find('h4').text().trim(),
                'eventLabel': $(this).text().trim()
            };

            //captures analytics			
            core.trackEvent(event_tracking_object);

        });

        $('.rde-tab-dropdown .nav-tabs a').on('click', function () {

            //Tab clicked
            supportPage("supportClick", $('h1').text().trim(), $(this).text().trim(), '');
        });

        $('.rde-view-more').on('click', function () {

            //view more button clicked
            supportPage("supportClick", $('h1').text().trim(), $(this).text().trim(), '');
        });


        $('.category-selection-item').on('click', function () {

            //links to support search tab
            supportPage("supportClick", $('h1').text().trim(), $('.coveo-selected').text().trim(), $(this).text().trim());
        });

        $('.rde-coveo-resultitem').on('click', function () {

            supportPage("supportClick", $('h1').text().trim(), $('.coveo-selected').text().trim(), $(this).text().trim());
        });


        var supportPage = function (event, category, action, label) {
            var event_tracking_object = {
                "event": event,
                'eventCategory': category,
                'eventAction': action,
                'eventLabel': label
            };

            //captures analytics
            core.trackEvent(event_tracking_object);
        }
    };

    return new AnalyticsComponentAccordion();
});
define('analyticsComponent',["jquery", "componentButtons", "componentSlider", "componentNavigation", "componentDropdown", "componentSearch", "componentCoveoTile", "componentResources", "componentYoutube", "componentVimeo", "componentProducts", "componentForms", "componentModal", "componentQuiz", "componentAccordion"],
    function ($, buttons, slider, navigation, dropdown, search, coveotile, resources, youtube, vimeo, products, forms, modal, quiz, accordion) {
    function AnalyticsComponentService() { }

    AnalyticsComponentService.prototype.init = function () {
        if (!$("body").hasClass("experience-editor")) {
            setTimeout(buttons.init.bind(buttons), 0);
            setTimeout(slider.init.bind(slider), 0);
            setTimeout(navigation.init.bind(navigation), 0);
            setTimeout(dropdown.init.bind(dropdown), 0);
            setTimeout(search.init.bind(search), 0);
            setTimeout(coveotile.init.bind(coveotile), 0);
            setTimeout(resources.init.bind(resources), 0);
            setTimeout(youtube.init.bind(youtube), 0);
            setTimeout(vimeo.init.bind(vimeo), 0);
            setTimeout(products.init.bind(products), 0);
            setTimeout(forms.init.bind(forms), 0);
            setTimeout(modal.init.bind(modal), 0);
            setTimeout(quiz.init.bind(quiz), 0);
            setTimeout(accordion.init.bind(quiz), 0);
        }
    };

    return new AnalyticsComponentService();
});
define('impression',['jquery', 'eventManager', 'constants', 'analyticsCore'], function ($, eventManager, constants, core) {

    function AnalyticsImpressions() {};

    AnalyticsImpressions.prototype.init = function () {

        //Page load
        setTimeout(function () {
            var products = [];

            //Check for products on coveo pages
            if ($("body").hasClass("coveo-search")) {
                if ($(".rde-coveo-resultitem").length) {
                    getResults(products);
                }
            }
            else {
                //Check for products on other pages
                checkProducts(products);
            }
        }, 500);

        //Triggers impression on search page pagination click and filters
        $(".CoveoSearchInterface").on('newResultsDisplayed', function (e, args) {
                var products = [];

                //Check for coveo items
                getResults(products);
            });

        //Check for Cross Sell Products
        eventManager.subscribe(constants.InterstitialDialogLoaded, function () {
            var products = [];
            if ($(".rde-product-highlight").length) {
                getCartModalItems(products);
            }
        });

        //Featured items in an empty cart
        eventManager.subscribe(constants.CartisEmpty, function () {

            var products = [];

            getEmptyCartFeaturedItems(products);
        });

        //Pro Top menu category click
        $(".rde-pro-page .score-megamenu-content a.score-composite-link").on("click", function () {

            var linkId = $($(this)).data("show");

            var products = [];

            getTopNavFeaturedItms(products, linkId);
        });

        //Pro Top menu open
        $(".rde-pro-page .score-megamenu-dropdown > a").on("click", function () {
            if ($(this).parent().hasClass("open")) {
                $(this).attr("aria-expanded", false);
                $(this).siblings().first().attr("aria-expanded", false);
                return;
            };
            var active = $(this).parent().find(".score-composite-link.active");

            var linkId = $(active).data("show");

            var products = [];
            $(this).attr("aria-expanded", true);
            $(this).siblings().first().attr("aria-expanded", true);
            getTopNavFeaturedItms(products, linkId);
        });

        //Consumer Top menu open
        $(".rde-header-3-0 .score-megamenu-dropdown > a").on("click", function () {
            if ($(this).parent().hasClass("open")) {
                $(this).attr("aria-expanded", false);
                $(this).siblings().first().attr("aria-expanded", false);
                return;
            };

            var products = [];
            $(this).attr("aria-expanded", true);
            $(this).siblings().first().attr("aria-expanded", true);
            getTopNavFeaturedItms(products, $(this).parent());
        });

        //Check for Product List Items in Tabs
        $(".rde-pro-line-tab .nav-tabs a").on("click", function () {
            setTimeout(function () {
                var products = [];

                if ($(".score-tab-panel.active .product-list a").length) {
                    getProductListInTabsItems(products);
                }

                //Push data 
                if (!$.isEmptyObject(products)) {
                    trackProducts(products);
                }
            }, 400);
        });
    };

    function checkProducts(products) {

        //Check for Related Products
        if ($(".product-related-products a").length) {
            getRelatedProducts(products);
        }

        //Check for Product List Items
        if ($(".product-list a").length) {
            getProductListItems(products);
        }

        //Check for Product List Items in Tabs
        if ($(".score-tab-panel.active .product-list a").length) {
            getProductListInTabsItems(products);
        }

        //Check for Product Highlight and Cross Sell Products
        if ($(".product-highlight").length) {
            getProductHighlightItems(products);
        }

        //Check for Pro Product Relations
        if ($(".pro-product-relations").length) {
            getProProductRelations(products);
        }

        if (!$.isEmptyObject(products)) {
            trackProducts(products);
        }
    };

    function getTopNavFeaturedItms(products, linkId) {
        if (products && linkId) {
            $(linkId).find(".product-highlight").each(function (key, value) {
                var list = "Product Highlight - Top Nav";
                var position = $(".product-highlight").index($(value)) + 1;
                getTileData(value, products, list, position);
            }).promise().done(function () {
                if (!$.isEmptyObject(products)) {
                    trackProducts(products);
                }
            });
        }
    };

    function getEmptyCartFeaturedItems(products) {
        $(".empty-cart .product-highlight").each(function (key, value) {
            var list = "Featured Products";
            var position = key + 1;
            getTileData(value, products, list, position);
        }).promise().done(function () {
            if (!$.isEmptyObject(products)) {
                trackProducts(products);
            }
        });
    };

    function getResults(products) {
        $(".rde-coveo-resultitem").not(".coveo-hidden .rde-coveo-resultitem").each(function (key, value) {
            var list = "Search result";
            var position = key + 1;
            getTileData(value, products, list, position);
        }).promise().done(function(){
            if (!$.isEmptyObject(products)) {
                trackProducts(products);
            }
		});
    };

    function getCartModalItems(products) {
        $(".interstitial-dialog .rde-product-highlight").each(function (key, value) {
            var list = "Cart Modal";
            var position = key + 1;
            getTileData(value, products, list, position);
        }).promise().done(function () {
            if (!$.isEmptyObject(products)) {
                trackProducts(products);
            }
        });
    };

    function getRelatedProducts(products) {
         $(".product-related-products a").not("a.slick-cloned").each(function (key, value) {
            var list = "Related products";
            var position = key + 1;
            getTileData(value, products, list, position);
        });
    };

    function getProProductRelations(products) {
        $(".pro-product-relations a").not("a.slick-cloned").each(function (key, value) {
            var list = "Pro product relations";
            var position = key + 1;
            getTileData(value, products, list, position);
        });
    };

    function getProductListItems(products) {
        $(".product-list a").not(".score-tab-panel .product-list a, a.slick-cloned").each(function (key, value) {
            var list = "Product List";
            var position = key + 1;
            getTileData(value, products, list, position);
        });
    };

    function getProductListInTabsItems(products) {
        $(".score-tab-panel.active .product-list a").not("a.slick-cloned").each(function (key, value) {
            var list = "Product List";
            var position = key + 1;
            getTileData(value, products, list, position);
        });
    };

    function getProductHighlightItems(products) {
        $(".product-highlight").not(".empty-cart .product-highlight, .score-megamenu .product-highlight").each(function (key, value) {
            var list = "Product Highlight";
            var position = key + 1;
            getTileData(value, products, list, position);
        });
    };

    function getTileData(value, products, list, position) {
        var tile = $(value).find("span.rde-product-data");
        if (tile && tile.length) {
            var id = tile.data("id");
            var dimension1 = tile.data("familynumber");
            var name = tile.data("productname");
            var brand = tile.data("brand");
            var category = tile.data("category");

            var tileData = {
                id: id,
                dimension1: String(dimension1),
                name: name,
                brand: brand,
                category: category,
                list: list,
                position: position
            };
            products.push(tileData);
        }
    };

    //Catalog page and Products Impressions
    function trackProducts(products) {
        var impressions = getImpressions(products);
        var impression_tracking_object = {
            "event": "impressions",
            "ecommerce": {
                "impressions": impressions
            }
        };

        core.trackImpression(impression_tracking_object);
    };

    function getImpressions(products) {
        var impressions = [];
        products.forEach(function (el) {
            var impression = {
                //ID
                "id": el.id,
                //ID: 22-54
                "name": el.name,
                //ID: 22-55
                "brand": el.brand,
                //ID: 22-56
                "category": el.category,
                //ID: 22-59
                "list": el.list,
                //ID: 22-58
                "position": el.position
            }
            if (window.location.hostname.indexOf(tenantHWH) > -1) {
                //ID: 22-53
                impression.dimension20 = String(el.dimension1);
            }
            else {
                //ID: 22-53
                impression.dimension1 = String(el.dimension1);
            }

            impressions.push(impression);
        });
        return impressions;
    };

    return new AnalyticsImpressions();

});
define('analyticsImpressions',["jquery", "analyticsCore", "impression"], function ($, core, impression) {
    function AnalyticsImpressionService() { }

    //Page loaded
    AnalyticsImpressionService.prototype.pageLoaded = function (obj) {
        var impression_tracking_object = {
            "event": "pageLoad",
            //ID: 1-1
            "prodVersion": obj.prodVersion,
            //ID: 1-6
            "userLanguage": obj.userLanguage,
            //ID: 1-9
            "siteEnvironment": obj.siteEnvironment,
            //ID: 1-10
            "siteBrowserTabCount": obj.siteBrowserTabCount,
            //ID: 1-11
            "pageID": obj.pageID,
            //ID: 1-12
            "pageTitle": obj.pageTitle,
            //ID: 1-13
            "pagePath": obj.pagePath,
            //ID: 1-14
            "pageCategory": obj.pageCategory,
            //ID: 1-15
            "pageURL": obj.pageURL,
            //ID: 1-16
            "pageParameters": obj.pageParameters,
            //ID: 1-17
            "pageHash": obj.pageHash,
            //ID: 1-18
            "pageReferringURL": obj.pageReferringURL,
            //ID: 1-19
            "pageEffectiveDate": obj.pageEffectiveDate,
            //ID: 1-20
            "pageLanguage": obj.pageLanguage,
            //ID: 1-21
            "pageGeoRegion": obj.pageGeoRegion,
            //ID: 1-22
            "pageBreadCrumbs": obj.pageBreadCrumbs,
            //ID: 1-23
            "pageLength": obj.pageLength,
            //ID: 1-24
            "pageWidth": obj.pageWidth
        };

        core.trackImpression(impression_tracking_object);
    };

    //Navigation
    AnalyticsImpressionService.prototype.trackNavigation = function (obj) {
        var impression_tracking_object = {
            //ID: 4-26
            "browserNavType": obj.browserNavType,
            //ID: 4-30
            "destinationURL": obj.destinationURL,
            //ReferringURL
            "referringURL": obj.referringURL,
            //Event Name
            "event": "browserNav"
        };

        core.trackImpression(impression_tracking_object);
    };

    //404 page loaded
    AnalyticsImpressionService.prototype.pageNotFoundLoaded = function (obj) {
        var impression_tracking_object = {
            "event": "pageError",
            //ID: 2-12
            "pageTitle": obj.pageTitle
        };

        core.trackImpression(impression_tracking_object);
    };


    //PDP loaded
    AnalyticsImpressionService.prototype.productDetailPageLoaded = function (obj) {
        var product = getProduct(obj);
        var impression_tracking_object = {
            "ecommerce": {
                "detail": {
                    "products": []
                }
            }
        };

        impression_tracking_object.ecommerce.detail.products.push(product);
        core.trackImpression(impression_tracking_object);
    };

    function getProduct(obj) {
        var product = {
            //ID
            "id": obj.id,
            //ID: 30-61
            "name": obj.name,
            //ID: 30-62
            "brand": obj.brand,
            //ID: 30-63 
            "category": obj.category
        };

        if (window.location.hostname.indexOf(window.tenantHWH) > -1) {
            product.dimension20 = String(obj.dimension1);
        }
        else {
            product.dimension1 = String(obj.dimension1);
        }

        return product;
    }

    AnalyticsImpressionService.prototype.init = function () {
        setTimeout(impression.init(), 0);
    };

    return new AnalyticsImpressionService();
});
define('analyticsService',["analyticsEvents", "analyticsMessages", "analyticsComponent", "analyticsImpressions"], function (events, messages, components, impressions) {
    function AnalyticsService() { }

    AnalyticsService.prototype.init = function() {
        setTimeout(events.init(), 0);
        setTimeout(messages.init(), 0);
        setTimeout(components.init(), 0);
        setTimeout(impressions.init(), 0);
    };

    return new AnalyticsService();
});
define('ModulesLoadedActions',['jquery', 'knockout', 'analyticsService', 'Services/rde.analytics-gtm', 'helpersService', 'scorebootstrap'], function ($, knockout, analytics, gtm, helpersService) {
    'use strict';

    function modulesLoadedActions() {
    }

    //add/remove height of page wrapper top padding for cookie banner
    function updatePageWrapperPadding() {
        if ($('.keystone-feature-cookiebanner').is(':visible')) {
            var cookieHeight = $('.keystone-feature-cookiebanner').height() + 'px';
            $('.page-wrapper').css('padding-top', cookieHeight);
        }

        $('#HOMESEUCookie-CookieDismiss').click(function () {
            $('.page-wrapper').css('padding-top', 0);
        });
    }

    function setPrintFriendlyClass() {
        $("body").addClass("print-preview");
    }

    // run any logic after score modules have loaded
    modulesLoadedActions.prototype.postload = function () {
        gtm.init();
        analytics.init();
        //start for pdps
        if (typeof startProductViewModel == 'function') {
            startProductViewModel(knockout);
            if (typeof pdpOnLoadAnalytics == 'function') {
                pdpOnLoadAnalytics();
            }
            //page onload for analytics
        } else {
            if (typeof pageOnLoadAnalytics == 'function') {
                pageOnLoadAnalytics();
            }
        }

        updatePageWrapperPadding();
        if (helpersService.isPrintFriendlyView())
            setPrintFriendlyClass();

        setTimeout(function () {
            if (typeof initLazyLoading === "function") {
                initLazyLoading();
            }
        }, 0);

        if (document.querySelector('.slick-slider')) {
            setTimeout(function () {
                $('.slick-slider').on('beforeChange', function () {
                    if (typeof initLazyLoading === "function") {
                        initLazyLoading();
                    }
                });
            }, 0);
        }
    };
    return new modulesLoadedActions();
});

define('Navigation',['jquery', 'scorebootstrap', 'promise-polyfill'], function ($) {
    'use strict';

    function navigation() {
        //prevents dropdown from closing when clicked inside
        $(document).on("click", ".score-megamenu .dropdown-menu", function (e) {
            e.stopPropagation();
        });
        $(".score-megamenu-dropdown>a").attr("aria-expanded", false);
        $(".score-megamenu-dropdown>ul").attr("aria-hidden", false);
       
        //Hide dropdown on new Coveo request
        document.body.addEventListener("querySuccess", function (e, args) {
            $('.score-megamenu-dropdown').removeClass('open');
        });

        //animate override for default bootstrap navigation dropdown
        function dropdownAnimation() {
            $('.score-megamenu-dropdown').on('show.bs.dropdown', function (e) {
                var dropDown = $(this).find('.dropdown-menu'),
                    origMarginTop = parseInt(dropDown.css('margin-top'));
                dropDown.css({
                    'margin-top': (origMarginTop + 20) + 'px',
                    opacity: 0
                }).animate({ 'margin-top': origMarginTop + 'px', opacity: 1 }, 300, function () {
                    $(this).css({ 'margin-top': '' });
                });
            });
        };

        //resets megamenu active/display states
        function resetMobileMenu() {
            $('.navbar-collapse').on('hide.bs.collapse', function () {
                $('.score-megamenu-content > a.active').removeClass('active');
                $('.rde-section-wrapper > a.active').removeClass('active');
                $('.rde-sub-section-wrapper').removeClass('display');
                $('.rde-sub-level-wrapper').removeClass('display');
            });
        }

        var moveSecondaryNav_Interval;
        //move secondary nav into mobile collapse menu
        function moveSecondaryNav() {
            clearTimeout(moveSecondaryNav_Interval);
            moveSecondaryNav_Interval = setTimeout(function () {
                if ($(window).width() <= 991 && !jQuery(".navbar-toggle").is(":hidden")) {
                    $('.rde-secondary-nav').appendTo('.navbar-collapse').addClass('reveal');
                }
                else if ($(window).width() > 991 && jQuery(".navbar-toggle").is(":hidden")) {
                    $('.rde-secondary-nav').appendTo('header > .container > .score-column1 > .score-center');
                }
                else {
                    $('.rde-secondary-nav').appendTo('header > .container > .score-column1 > .score-center');
                }
            }, 250);
        }

        var moveUtilityNav_Interval;
        //move utility nav into mobile collapse menu
        function moveUtilityNav() {
            clearTimeout(moveUtilityNav_Interval);
            moveUtilityNav_Interval = setTimeout(function () {
                if ($(window).width() <= 991 && !jQuery(".navbar-toggle").is(":hidden")) {
                    $('.rde-utility-nav').parent().addClass('utility-nav-desktop-container');
                    $('.rde-utility-nav').appendTo('.navbar-collapse').addClass('reveal');
                    $('.utility-nav-desktop-container').remove('.rde-utility-nav');
                }
                else if ($(window).width() > 991 && jQuery(".navbar-toggle").is(":hidden")) {
                    $('.rde-utility-nav').appendTo('.brand-tabs > .full-width > .score-column1 > .score-center').removeClass('reveal');
                    $('.rde-utility-nav').parent().removeClass('utility-nav-desktop-container');
                    $(document).remove('.navbar-collapse > .rde-utility-nav');
                }
                else {
                    $('.rde-utility-nav').appendTo('.brand-tabs > .full-width > .score-column1 > .score-center').removeClass('reveal');
                    $('.rde-utility-nav').parent().removeClass('utility-nav-desktop-container');
                    $(document).remove('.navbar-collapse > .rde-utility-nav');
                }
            }, 260);
        }

        //Corporate language selection dropdown menu - mobile
        var menu = $('.corporate-gray-background .page-wrapper .score-menu-list');
        var wrapperActiveItem = $(".corporate-gray-background .page-wrapper .score-menu-list-item.active").clone();
        menu.wrap("<div class='menu-list-wrapper'></div>");
        wrapperActiveItem.prependTo(".menu-list-wrapper");

        var toggleMobileClass = function () {
            if ($(window).width() < 992) {
                $(".menu-list-wrapper").addClass('mobile');
            } else {
                $(".menu-list-wrapper").removeClass('mobile');
            }
        }();

        $(".corporate-gray-background .page-wrapper .score-menu-list-item.active").on('click', function () {
            if ($(this).hasClass('open')) {
                $(this).removeClass('open');
            } else {
                $(this).addClass('open');
            }
            if (menu.hasClass('open')) {
                menu.removeClass('open');
            } else {
                menu.addClass('open');
            }
        });

        //HWH support landing page category selection dropdown menu - mobile
        var hwhCategorySelectionMenu = $('.honeywellhome-support-landing-page .page-wrapper .score-menu-list');
        if ($(".honeywellhome-support-landing-page .page-wrapper .score-menu-list-item.active").length === 0) {
            $(".honeywellhome-support-landing-page .page-wrapper .score-menu-list-item:first").addClass('active');
        }
        var hwhCategorySelectionWrapperActiveItem = $(".honeywellhome-support-landing-page .page-wrapper .score-menu-list-item.active").clone();
        hwhCategorySelectionMenu.wrap("<div class='menu-list-wrapper'></div>");
        hwhCategorySelectionWrapperActiveItem.prependTo(".menu-list-wrapper");

        $(".honeywellhome-support-landing-page .page-wrapper .score-menu-list-item.active").on('click', function () {
            if ($(this).hasClass('open')) {
                $(this).removeClass('open');
            } else {
                $(this).addClass('open');
            }
            if (hwhCategorySelectionMenu.hasClass('open')) {
                hwhCategorySelectionMenu.removeClass('open');
            } else {
                hwhCategorySelectionMenu.addClass('open');
            }
        });

        //RDE support landing page category selection dropdown menu - mobile
        var rdeCategorySelectionMenu = $('.resideo-support-landing-page .page-wrapper .score-menu-list');
        if ($(".resideo-support-landing-page .page-wrapper .score-menu-list-item.active").length === 0) {
            $(".resideo-support-landing-page .page-wrapper .score-menu-list-item:first").addClass('active');
        }
        var rdeCategorySelectionWrapperActiveItem = $(".resideo-support-landing-page .page-wrapper .score-menu-list-item.active").clone();
        rdeCategorySelectionMenu.wrap("<div class='menu-list-wrapper'></div>");
        rdeCategorySelectionWrapperActiveItem.prependTo(".menu-list-wrapper");

        $(".resideo-support-landing-page .page-wrapper .score-menu-list-item.active").on('click', function () {
            if ($(this).hasClass('open')) {
                $(this).removeClass('open');
            } else {
                $(this).addClass('open');
            }
            if (rdeCategorySelectionMenu.hasClass('open')) {
                rdeCategorySelectionMenu.removeClass('open');
            } else {
                rdeCategorySelectionMenu.addClass('open');
            }
        });

        $(window).on('resize', function () {
            if ($(window).width() < 992) {
                $(".menu-list-wrapper").addClass('mobile');
            } else {
                $(".menu-list-wrapper").removeClass('mobile');
            }
        });

        //accordion style menu for mobile header navigation 3.0
        function navigationAccordionMenu() {
            $('.rde-content-column > .score-composite-link').click(function () {
                $(this).toggleClass('active');
            });
        }

        if (!BrainJocks.EE) {
            //active class for product category
            $('.score-megamenu-content > a').click(function () {
                $('.score-megamenu-content > a.active').removeClass('active');
                $(this).addClass('active');

                $('.dropdown-menu').animate({ scrollTop: 0 }, 500);
            });

            //slide dropdown up for desktop only
            if ($(window).width() > 991) {
                dropdownAnimation();
            }

            //show sections based on category selections
            $('.score-megamenu-content .score-composite-link').click(function (e) {
                var $div = $($(this).data('show')).addClass('display');
                $div.siblings('div').removeClass('display');

                $div.find('.rde-section-wrapper .score-button:not(.rde-back)').removeClass('active');
                $div.find('.rde-section-wrapper .score-button:not(.rde-back)').first().addClass('active');
                $div.find('.rde-section-wrapper .rde-sub-section-wrapper').removeClass('display');
                //add default display to sections only for desktop and tablet landscape
                if ($(window).width() > 991) {
                    $div.find('.rde-section-wrapper .rde-sub-section-wrapper').first().addClass('display');
                }
            });

            //close dropdown menu on back button click
            $('.score-megamenu-content > .rde-back').click(function (e) {
                $('.megamenu-full').trigger('click.bs.dropdown');
                $('.megamenu-small').trigger('click.bs.dropdown');
            });

            //active class for product type
            $('.rde-section-wrapper > a').click(function () {
                $(this).parent().find($('.rde-section-wrapper > a.active')).removeClass('active');
                $(this).addClass('active');
            });

            //remove display for sections that is only used on desktop and tablet landscape
            if ($(window).width() < 768) {
                $('.rde-sub-section-wrapper').removeClass('display');
            }

            //show sections based on product type selections
            $('.rde-section-wrapper .score-button').click(function (e) {
                var $div = $($(this).data('show')).addClass('display');
                $div.siblings('div').removeClass('display');
            });

            //remove display of section wrapper on back button click
            $('.rde-section-wrapper > .rde-back').click(function (e) {
                $('.rde-sub-level-wrapper').removeClass('display');
            });

            //remove display of sub section wrapper on back button click
            $('.rde-sub-section-wrapper > .rde-back').click(function (e) {
                $('.rde-sub-section-wrapper').removeClass('display');
            });

            resetMobileMenu();
            moveSecondaryNav();
            moveUtilityNav();
            navigationAccordionMenu();

            $(window).resize(function () {
                moveSecondaryNav();
                moveUtilityNav();
            });
        }
    }

    new Promise(function (resolve, reject) {
        navigation();
        resolve();
    });
});


define('text!Resideo/Components/WiringCompatibilityTool/Templates/WiringCompatibilityModal.html',[],function () { return '<div class="modal modal-900 fade score-modal rde-wiring-compatibility-modal enhanced" id="wcModal" tabindex="-1" role="dialog" aria-labelledby="wiringCompatibility_01">\r\n    <div class="modal-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n                <h4 class="modal-title" id="wcModalHeader">&nbsp;</h4>\r\n            </div>\r\n\r\n            <div class="modal-body">\r\n                <div class="score-style-box rde-step-wrapper" id="wcModalContent">\r\n                    <img src="/Areas/Resideo/img/wiring-tool-loading-v2.png" alt="Wiring Compatibility Tool Loading Image" />\r\n                </div>\r\n            </div>\r\n\r\n            <div class="modal-footer"></div>\r\n        </div>\r\n    </div>\r\n\r\n</div>';});

define('Resideo/Components/WiringCompatibilityTool/WiringCompatibilityTool',['jquery', 'underscore', 'eventManager', 'constants', 'text!Resideo/Components/WiringCompatibilityTool/Templates/WiringCompatibilityModal.html', 'cartService', 'helpersService'], function ($, _, eventManager, constants, modalTemplate, cartService, helpersService) {

    var StepIndex = 0;
    var Steps;
    var WireConfigMatch;
    var SuccessProductList;
    var SpecialCaseProductList;
    var BackFrom2 = false;
    var CurrentProductSku;
    var MSAStepsOfset = 0;
    var PreviousStepIndex = 0;
    var IsAdditionalStep = false;
    var ProductsFileUrl;
    var ScProductsFileUrl;

    function WiringCompatibilityTool() {
        eventManager.subscribe("WiringCompatibilityTool:Start", function (args) {
            CurrentProductSku = undefined;
            Start();
        });

        eventManager.subscribe("MSAWiringCompatibilityTool:Start", function (args) {
            CurrentProductSku = $("#rde-product-sku").attr("content");
            MSAStepsOfset = 2;
            Start();
        });
    }

    function Start() {
        new Promise(function (resolve, reject) {
            var modalTemplateCompiled = _.template(modalTemplate);

            WireConfigMatch = undefined;

            //append modal structure
            if ($(".page-wrapper").find("#wcModal").length == 0)
                $(".page-wrapper").append(modalTemplateCompiled);

            //show modal
            $("#wcModal").modal();

            //reset steps if closed
            $('#wcModal').on('hidden.bs.modal', function () {
                StepIndex = 0;
                $("#wcModalContent").html('<img src="/Areas/Resideo/img/wiring-tool-loading-v2.png" alt="Wiring Compatibility Tool Loading Image" />');
            });
			
            $('.rde-interstistial-dialog-new').on('hidden.bs.modal', function () {
                if ($("#wcModal").is(":visible")) {
                    $('body').addClass('modal-open');
                }
            });
			

            resolve();
        });

        //get wizard info and start
        $.getJSON("/rde/wiringcompatibilitytool/getwizard", function (data) {
            Steps = data;
            LoadStep();
        });
    }

    //Load a Step using undercore mapped with the item from /sitecore/content/Resideo/Resideo Resources/Wiring Compatibility Tool
    function LoadStep() {
        $.each(Steps, function (i, item) {
            if (i == StepIndex) {
                $("#wcModalHeader").text(item.Header);
                $.get("/Areas/Resideo/js/Components/WiringCompatibilityTool/Templates/Step" + (i + 1).toString() + ".html", function (htmlTemplate) {
                    var stepTemplateCompiled = _.template(htmlTemplate);
                    item.Products = SuccessProductList;
                    item.ProductsFileUrl = ProductsFileUrl;
                    item.PriceLabel = coveoSitecoreDictionary.priceLabel;
                    item.PriceStrickenLabel = coveoSitecoreDictionary.priceStrickenLabel;
                    $("#wcModalContent").html(stepTemplateCompiled(item));
                    LoadWires(item);
                    StartSlider();
                    BindEvents(item);
                    AddToCart(i);
                    setFocus();
                });
                eventManager.trigger("WiringCompatibilityTool:Step-" + (i + 1).toString());
            }
        });
    }

    // set focus to a step title
    function setFocus() {
        $("#wcTitle")[0].focus();
    }

    //bind events after loading each step
    function BindEvents(item) {
        //bind next actions
        $("#wcModalContent").find(".rde-wc-prev").on('click', function (event) { event.preventDefault(); LoadPrev(); });
        $("#wcModalContent").find(".rde-wc-ok").on('click', function (event) { event.preventDefault(); LoadPrev(); });
        $("#wcModalContent").find(".rde-wc-next").on('click', function (event) { event.preventDefault(); LoadNext(); });
        $("#wcModalContent").find(".rde-wc-first").on('click', function (event) { event.preventDefault(); LoadFirst(); });
        $("#wcModalContent").find(".rde-wc-next-step-2").on('click', function (event) { event.preventDefault(); Step2Next(item); });
        $("#wcModalContent").find(".rde-wc-next-step-3").on('click', function (event) { event.preventDefault(); Step3Next(item); });
        $("#wcModalContent").find(".rde-wc-next-step-4").on('click', function (event) { event.preventDefault(); Step4Next(item); });
        $("#wcModalContent").find(".rde-wc-next-step-5").on('click', function (event) { event.preventDefault(); Step5Next(item); });
        $("#wcModalContent").find(".rde-wc-close").on('click', function (event) { event.preventDefault(); $('#wcModal').modal('hide'); });
        $("#wcModalContent").find(".rde-wc-additional-step").on('click', function (event) { event.preventDefault(); LoadAdditionalStep($(this)); });
        //toggle wire selection button active state
        $("#wcModalContent").find('.rde-wire-selections button').on('click', function (event) {
            event.preventDefault();
            $(this).toggleClass('active');
            if ($(this).attr("aria-pressed") == 'true') {
                $(this).attr("aria-pressed", false);
            }
            else {
                $(this).attr("aria-pressed", true);
            }
            if ($("#wcModalContent").find('.rde-wire-selections button.active').length > 0)
                $(".rde-wc-next-step-3").removeAttr('disabled');
            else
                $(".rde-wc-next-step-3").attr('disabled', 'disabled');
        });

        //view all wire selections 
        $("#wcModalContent").find('.rde-view-more').on('click', function (event) {
            event.preventDefault();
            $("#wcModalContent").find('.rde-wire-selections').addClass('expanded');
            $(this).hide();
            $("#wcModalContent").find('.rde-view-less').show();
            $(".rde-wire-selections button")[0].focus();

        });
        //view less wire selections
        $("#wcModalContent").find('.rde-view-less').on('click', function (event) {
            event.preventDefault();
            $("#wcModalContent").find('.rde-wire-selections').removeClass('expanded');
            $(this).hide();
            $("#wcModalContent").find('.rde-view-more').show();
            $(".rde-wire-selections button")[0].focus();
        });
    }

    function StartSlider() {
        $("#wcModalContent").find('.rde-wiring-compatibility-slider').slick({
            slidesToShow: 3,
            slidesToScroll: 1,
            arrows: true,
            dots: false,
            responsive: [
                {
                    breakpoint: 767,
                    settings: {
                        slidesToShow: 1,
                        arrows: true,
                        dots: true
                    }
                }
            ]
        });

        $("#wcModalContent").find('.rde-wiring-compatibility-slider').on('beforeChange', function (event, slick, currentSlide, nextSlide) {
            var indexSlide = 0;
            if (slick.activeBreakpoint == 767) {
                if ((nextSlide > currentSlide && currentSlide + 1 == nextSlide) || (nextSlide < currentSlide && slick.slideCount - currentSlide - 1 == nextSlide && nextSlide == 0)) {
                    if (nextSlide > currentSlide) {
                        indexSlide = nextSlide;
                    }
                    else {
                        indexSlide = slick.slideCount + nextSlide;
                    }

                }
                else {
                    if (currentSlide == 0) {
                        indexSlide = nextSlide - slick.slideCount;
                    }
                    else {
                        indexSlide = nextSlide;
                    }
                }
            }
            else {
                if ((nextSlide > currentSlide && currentSlide + 1 == nextSlide) || (nextSlide < currentSlide && slick.slideCount - currentSlide - 1 == nextSlide && nextSlide == 0)) {
                    if (nextSlide > currentSlide) {
                        indexSlide = nextSlide + 2;
                    }
                    else {
                        indexSlide = slick.slideCount + nextSlide + 2;
                    }

                }
                else {
                    if (currentSlide == 0) {
                        indexSlide = nextSlide - slick.slideCount;
                    }
                    else {
                        indexSlide = nextSlide;
                    }
                }
            }
            var slickSlidetext = ".slick-slide[data-slick-index='" + indexSlide + "'] .score-highlight";
            jQuery(slickSlidetext).first().attr("style", "display:block")

        });
    }

    //load all wire letters from the wire configuration in the Wire step
    function LoadWires(item) {
        if (!item.Wires || item.Wires.length == 0)
            return;

        var wires = [];

        for (var i = 0; i < item.Wires.length; i++) {
            for (var k = 0; k < item.Wires[i].CompatibilityMatrix[0].length; k++) {
                var letter = item.Wires[i].CompatibilityMatrix[0][k];
                if (letter != "" && wires.indexOf(letter) < 0)
                    wires.push(letter);
            }
        }

        //add buttons
        for (var i = 1; i < wires.length; i++) {
            if (i > 20) {
                $("#wcModalContent").find('.rde-wire-selections').append("<button class='rde-wire-button-hidden' aria-label='" + wires[i] + " Wire' aria-pressed='false' >" + wires[i] + "</button>")
            }
            else {
                $("#wcModalContent").find('.rde-wire-selections').append("<button aria-label='" + wires[i] + " Wire'  aria-pressed='false'>" + wires[i] + "</button>")
            }
        }
    }

    //move to first step
    function LoadFirst() {
        StepIndex = 0;
        LoadStep();
    }

    //simple move to the next step
    function LoadNext() {
        StepIndex++;
        LoadStep();
    }

    //simple move to the previous step
    function LoadPrev() {
        if (!IsAdditionalStep) {
            if (BackFrom2 && StepIndex != 1)
                StepIndex = 1;
            else if (StepIndex >= 4)
                StepIndex = 2;
            else
                StepIndex--;
        }
        else {
            StepIndex = PreviousStepIndex;
            IsAdditionalStep = false;
        }

        LoadStep();
    }

    //move next for the second step where a questinary is required
    function Step2Next(item) {
        var cancelStep = false;
        $('input[name="question"]:checked').each(function (i, question) {
            if ($(question).val() == "yes") {
                //redirect
                cancelStep = true;
                StepIndex = parseInt(item.StepFailure) + MSAStepsOfset - 1;
                BackFrom2 = true;
                LoadStep();
            }
        });

        //no yes selected, move forward.
        if (!cancelStep) {
            BackFrom2 = false;
            LoadNext();
        }
    }

    //move next on the wire selection. Contains the logic to map what user selected with the spreadsheet content
    function Step3Next(item) {
        if (item.Wires && item.Wires.length > 0) {

            WireConfigMatch = undefined;

            var selected = [];
            $("#wcModalContent").find("button.active").each(function (i, btn) {
                selected.push($(btn).text());
            });

            //iterate colors (purple, yellow, etc) to find the selected index for each selected letter
            for (var i = 0; i < item.Wires.length; i++) {


                var selectedIndex = [];

                //iterate first line to get in what index the letter is selected
                for (var k = 0; k < item.Wires[i].CompatibilityMatrix[0].length; k++) {
                    var letter = item.Wires[i].CompatibilityMatrix[0][k];
                    if (selected.indexOf(letter) > -1)
                        selectedIndex.push(k);
                }

                //iterate other lines 
                for (var k = 1; k < item.Wires[i].CompatibilityMatrix.length; k++) {
                    var matched = 0;
                    var total = 0;

                    //count all x`s
                    for (var y = 0; y < item.Wires[i].CompatibilityMatrix[k].length; y++) {
                        if (item.Wires[i].CompatibilityMatrix[k][y].toLowerCase() == "x") {
                            total++;
                        }
                    }

                    //count how many matched
                    for (var y = 0; y < selectedIndex.length; y++) {
                        if (item.Wires[i].CompatibilityMatrix[k][selectedIndex[y]].toLowerCase() == "x") {
                            matched++;
                        }
                    }

                    //if the number of x is the same of letters matched, it matches the line
                    if (total > 0 && total == matched && total == selected.length) {
                        // Check id current SKU matches Compatibility Matrix otherwise show compatible products list
                        if (CurrentProductSku) {
                            if (CurrentSkuMatch(item.Wires[i].Products)) {
                                WireConfigMatch = item.Wires[i];
                                break;
                            }
                        } else {
                            WireConfigMatch = item.Wires[i];
                            break;
                        }
                    }
                }

                //if found, break loop
                if (WireConfigMatch)
                    break;
            }

            //if WireConfigMatch is set, we found a line
            if (WireConfigMatch) {
                // Exceptional case for the Yellow and Blue categories match
                var ofset = MSAStepsOfset;
                var nextStep = parseInt(WireConfigMatch.NextStepSuccess);
                if (CurrentProductSku && (nextStep === 4 || nextStep === 5)) {
                    ofset = 0;
                }
                StepIndex = nextStep + ofset - 1;
                SuccessProductList = WireConfigMatch.Products;
                SpecialCaseProductList = WireConfigMatch.SpecialCaseProducts;
                ProductsFileUrl = WireConfigMatch.ProductsFileUrl;
                ScProductsFileUrl = WireConfigMatch.ScProductsFileUrl;

            }
            else
                StepIndex = parseInt(item.StepFailure) + MSAStepsOfset - 1;

            LoadStep();
        }
    }

    function CurrentSkuMatch(products) {
        var result = false;
        products.forEach(function (product) {
            if (product.SKUNumber == CurrentProductSku) {
                result = true;
            }
        });

        return result;
    }

    //move next 
    function Step4Next(item) {
        var cancelStep = false;
        $('input[name="question"]:checked').each(function (i, item) {
            if ($(item).val() == "yes") {
                // proceed to not-compatible step or redirect
                cancelStep = true;
                if (CurrentProductSku) {
                    StepIndex = 8;
                    LoadStep();
                } else {
                    window.location.href = $("#wcModalContent").find(".rde-wc-next-step-4").attr('data-redirect-url');
                }
            }
        });

        if (!cancelStep) {
            StepIndex = parseInt(item.StepSuccess) + MSAStepsOfset - 1;
            LoadStep();
        }
    }

    //move next 
    function Step5Next(item) {
        var cancelStep = false;
        $('input[name="question"]:checked').each(function (i, answer) {
            if ($(answer).val() == "no") {
                // proceed to not-compatible step or redirect
                cancelStep = true;
                if (CurrentProductSku) {
                    StepIndex = 8;
                    LoadStep();
                } else {
                    if (SpecialCaseProductList.length > 0) {
                        SuccessProductList = SpecialCaseProductList;
                        ProductsFileUrl = ScProductsFileUrl;
                        StepIndex = parseInt(item.StepSuccess) + MSAStepsOfset - 1;
                        LoadStep();
                    }
                    else {
                        window.location.href = $("#wcModalContent").find(".rde-wc-next-step-5").attr('data-redirect-url');
                    }
                }
            }
        });

        if (!cancelStep) {
            StepIndex = parseInt(item.StepSuccess) + MSAStepsOfset - 1;
            LoadStep();
        }
    }
    function LoadAdditionalStep(element) {
        IsAdditionalStep = true;
        PreviousStepIndex = StepIndex;
        StepIndex = $(element[0]).attr("data-step") - 1;
        LoadStep();
        eventManager.trigger("WiringCompatibilityTool:Step-" + (StepIndex + 1).toString());
    }

    function AddToCart(i) {
        if (i != 5)
            return;

        $("#wcModalContent").on("click", ".js-add-to-cart", function (e) {
            var button = this;
            var SKU = $(button).attr("sku-number");

            e.preventDefault();
            helpersService.showLoader(button);

            cartService.addToCart(SKU)
                .done(function () {
                    setTimeout(function () {
                        helpersService.hideLoader(button);
                    }, 1000);
                });
        });
    }


    WiringCompatibilityTool.init = function init() {
        return new WiringCompatibilityTool();
    };

return WiringCompatibilityTool;
});
define('Resideo/Components/VideoModal/VideoModal',['jquery'], function($) {
    function VideoModal() {
        $('.hwh-video-modal-button').click(function () {
            openVideoModal(this);
        });

        $('.rde-video-modal-button').click(function () {
            openVideoModal(this);
        });

        $('.hwh-video-modal-button').keypress(function (e) {
	        if (e.key === "Enter") {
		        openVideoModal(this);
	        }
        });

        $('.rde-video-modal-button').keypress(function (e) {
	        if (e.key === "Enter") {
		        openVideoModal(this);
	        }
        });
    }

    function openVideoModal(that) {
        var modal = $(that).siblings('div.rde-video-modal')[0];

        if (modal) {
            // Subscribe particular modal to a hide and shown events
            var youtubeVideo = $(modal).find('.score-youtube-video')[0];
            $(modal).on('hide.bs.modal', function () {
                callPlayer(youtubeVideo, 'pauseVideo');
            });

            $(modal).on('shown.bs.modal', function () {
                var isInteractedWithUser = $(this).attr('isInteractedWithUser');
                // According to Youtube IFrame API documentation, embedded media cannot be played automatically in Chrome and Safari.
                // https://developers.google.com/youtube/iframe_api_reference#Autoplay_and_scripted_playback
                // We can play embedded media via API in muted state only or when user has already interacted with the player.
                if (!isInteractedWithUser) {
                    callPlayer(youtubeVideo, 'mute');
                }
                callPlayer(youtubeVideo, 'playVideo');
                $(this).attr('isInteractedWithUser', true);
            });

            //Show modal
            $(modal).modal('show');
        }
    }

    function callPlayer(youtubeVideo, func) {
        var iframe;
        if (youtubeVideo) {
            iframe = youtubeVideo.getElementsByTagName('iframe')[0];
        }
        if (iframe) {
            iframe.contentWindow.postMessage(JSON.stringify({
                "event": "command",
                "func": func,
                "args": [],
                "id": "score-youtube-video"
            }), "https://www.youtube.com");
        }
    }

    VideoModal.init = function init() {
        return new VideoModal();
    }

    return VideoModal;
});
define('Resideo/Modules/ClickableContainer',['jquery'], function ($) {
    function ClickableContainer() {
        new Promise(function (resolve, reject) {
            initClickableContainer();

            if ("Coveo" in window) {
                var root = document.body;
                if (root) {
                    Coveo.$$(root).on("newResultsDisplayed", function (e, args) {
                        initClickableContainer();
                    });
                }
            }
            resolve();
        });

        window.addEventListener('productChanged', function (e) {
            initClickableContainer();
        });
    }

    function initClickableContainer() {
        setTimeout(function () {
            if (document.querySelector('.rde-js-link-container')) {
                $(".rde-js-link-container").on('click', function (e) {
                    var href = $(this).find("a.rde-js-link-container-anchor").attr('href');
                    if (href) {
                        var target = $(this).find("a.rde-js-link-container-anchor").attr('target');
                        if (target && target == '_blank')
                            window.open(href);
                        else
                            window.location.href = href;
                    }
                });

                $(".rde-js-link-container").find("a, button:not(.rde-tooltip)").on('click', function (e) {
                    e.stopPropagation();
                });

                $(".rde-js-link-container").find("button.rde-tooltip, .rde-tooltip-wrapper .dropdown-menu").on('click', function (e) {
                    $(this).dropdown();
                    var menu = $(this).siblings(".dropdown-menu")[0];
                    menu.focus();
                    e.stopPropagation();
                });

                //activate dropdown
                $(".rde-js-link-container").find("button.rde-tooltip").each(function (i, item) { $(item).click() });
            }
        }, 0);
    }

    ClickableContainer.init = function init() {
        return new ClickableContainer();
    };

    return ClickableContainer;
});


define('productService',["jquery", "eventManager", "constants", "endpoints", "logService", "storageService", "identityService"],
    function ($, eventManager, constants, mvc, logService, storageService, identityService) {
        function ProductService() { }
        
        ProductService.prototype.getPrice = function (sku, language) {
            if (!language)
                language = 'en-US';
                
            return identityService.getECommerceToken("").then(function (token) {
                
                var jqXhr = $.ajax({
                    url: mvc.PriceEndpoint + "?sku=" + sku + "&token=" + token + '&sc_lang=' + language,
                    type: "GET",
                    contentType: "application/json; charset=utf-8"
                });

                jqXhr.done(function (data, textStatus, jqXHR) {
                    logService.log(this, data);

                    var item = data.Item1;
                    if (item) {
                        eventManager.trigger(constants.ProductPriceReturned, item);
                    } else {
                        logService.error(this, data);

                        eventManager.trigger(constants.ProductPriceFailed);
                    }
                });

                jqXhr.fail(function (jqXHR, textStatus, errorThrown) {
                    logService.error(this, jqXHR);

                    eventManager.trigger(constants.ProductPriceFailed);
                });

                return jqXhr;
            });
        };

        ProductService.prototype.getPriceList = function (skus, language) {
            if (!language)
                language = 'en-US';

            return identityService.getECommerceToken("").then(function (token) {

                var jqXhr = $.ajax({
                    url: mvc.PriceListEndpoint + "?skus=" + skus + "&token=" + token + '&sc_lang=' + language,
                    type: "GET",
                    contentType: "application/json; charset=utf-8"
                });

                jqXhr.done(function (data, textStatus, jqXHR) {
                    logService.log(this, data);

                    var item = data.Item1;
                    if (item) {
                        eventManager.trigger(constants.ProductPriceReturned, item);
                    } else {
                        logService.error(this, data);

                        eventManager.trigger(constants.ProductPriceFailed);
                    }
                });

                jqXhr.fail(function (jqXHR, textStatus, errorThrown) {
                    logService.error(this, jqXHR);

                    eventManager.trigger(constants.ProductPriceFailed);
                });

                return jqXhr;
            });
        };

        ProductService.prototype.getCrossSellProducts = function (sku, language) {
            if (!language)
                language = 'en-US';

            var jqXhr = $.ajax({
                url: mvc.CrossSellProducts + "?sku=" + sku + "&sc_lang=" + language,
                type: "GET",
                contentType: "application/json; charset=utf-8"
            });

            return jqXhr;
        };

        ProductService.prototype.triggerInterstitialDialog = function() {
            var sku = storageService.getItem(constants.PDPSku);

            if (sku) {
                storageService.removeItem(constants.PDPSku);
                eventManager.trigger(constants.ShowInterstitialDialog, sku);
            }
        };

        ProductService.prototype.getInterstitialModalData = function (sku, language) {
            if (!language)
                language = 'en-US';

            var jqXhr = $.ajax({
                url: mvc.InterstitialModalData + "?sku=" + sku + "&sc_lang=" + language + "&token=" + storageService.loadLocalECommerceToken(),
                type: "GET",
                contentType: "application/json; charset=utf-8"
            });

            return jqXhr;
        };

        return new ProductService();
    });
define('priceSpiderCustom',["jquery"],
    function ($) {
        function PriceSpiderCustom() { }

        PriceSpiderCustom.prototype.rebind = function submitOrder() {
            setTimeout(function () {
                if (typeof PriceSpider != "undefined") {
                    PriceSpider.rebind(
                        function () {
                            $(".js-find-a-retailer-group").each(function (i, item) {
                                if ($(item).find(".ps-widget").is(".ps-enabled")) {
                                    $(item).find(".js-find-a-retailer-default").hide();
                                }
                                if ($(item).find(".ps-widget").is(".ps-no-sku") || $(item).find(".ps-widget").is(".ps-no-sellers")) {
                                    if ($(item).find(".ps-widget").is(".remove-not-hide")) {
                                        $(item).find(".ps-widget").remove();
                                    }
                                    else {
                                        $(item).find(".ps-widget").hide();
                                    }
                                }
                                $(item).show();
                            });
                        }
                    );
                }
            }, 500);
        };

        return new PriceSpiderCustom();
    });
define('Resideo/Modules/PriceLoader',['jquery', 'cartService', 'productService', 'logService', 'eventManager', 'helpersService', 'storageService', 'constants', 'priceSpiderCustom', 'matchHeight'],
    function ($, cartService, productService, logService, eventManager, helpersService, storageService, constants, priceSpiderCustom, matchHeight) {
        var PRICE = "data-sel-price";
        var PRICE_BEFORE = "data-sel-price-before-promo";
        var ADD_BUTTON = "data-sel-add-to-cart-btn";
        var LABEL_ADD = "data-label-add-to-cart";
        var LABEL_BACKORDER = "data-label-backorder";
        var LABEL_PREORDER = "data-label-pre-order";
        var LABEL_OUT_STOCK = "data-label-out-of-stock";
        var CART_URL = "data-cart-url";
        var PRICE_LABEL = "data-price-label";
        var PRICE_STRICKEN_LABEL = "data-price-stricken-label";
        var SR_OLD_PRICE = "data-sr-old-price";
        var SR_NEW_PRICE = "data-sr-new-price";

        function PriceLoader() {
            new Promise(function (resolve, reject) {
                initPriceLoader();
                priceSpiderCustom.rebind();

                if ("Coveo" in window) {
                    var root = document.body;
                    if (root) {
                        Coveo.$$(root).on("newResultsDisplayed", function (e, args) {
                            initPriceLoader();
                            priceSpiderCustom.rebind();
                        });
                    }
                }
                resolve();
            });

            window.addEventListener('productChanged', function (e) {
                initPriceLoader();
                if ($('.js-find-a-retailer-group-rebind').length != 0) {
                    setTimeout(function () {
                        if (typeof PriceSpider != "undefined") {
                            PriceSpider.rebind();
                        }
                    }, 100);
                }
            });
        }

        function getElement(sku, dataName) {
            return $(".js-price-loader[data-sku='" + sku + "']").find("." + getData(sku, dataName));
        }

        function getData(sku, dataName) {
            return $(".js-price-loader[data-sku='" + sku + "']").attr(dataName);
        }

        function disableButton(btn) {
            $(btn).prop('disabled', true);
            $(btn).addClass('disabled');
            $(btn).css('cursor', 'default');
            $(btn).css('pointer-events', 'auto');
        }

        function enableButton(btn) {
            $(btn).prop('disabled', false);
            $(btn).removeAttr('disabled');
            $(btn).removeClass('disabled');
            $(btn).css('cursor', '');
            $(btn).css('pointer-events', '');
        }

        function initPriceLoader() {
            setTimeout(function () {

                //retrive unique list of all skus for price gathering in DR
                var skus = [];
                $(".js-price-loader[data-sku]").each(function (i, el) {
                    if ($.inArray($(el).attr('data-sku'), skus) === -1) skus.push($(el).attr('data-sku'));
                });

                if (skus.lenght == 0)
                    return;

                //prepare buttons
                $.each(skus, function (i, sku) {
                    $btn = getElement(sku, ADD_BUTTON);
                    setOnClick($btn, sku);
                    disableButton($btn);
                });

                //get prices and set UI
                var listOfSkus = skus.join(",");
                if (listOfSkus && listOfSkus != "") {
                    productService.getPriceList(listOfSkus)
                        .then(function (priceData) {
                            if (priceData) {
                                var list = priceData.Item1;
                                if (list) {
                                    $.each(list, function (i, item) {
                                        var sku = item.SKU;
                                        $btn = getElement(sku, ADD_BUTTON);

                                        if (item.ListedPrice == item.SalePrice) {
                                            getElement(sku, PRICE_BEFORE).hide();
                                        } else {
                                            getElement(sku, PRICE_BEFORE).show();
                                            getElement(sku, PRICE_BEFORE).text(item.ListedPrice);
                                            getElement(sku, SR_OLD_PRICE).text(getData(sku, PRICE_STRICKEN_LABEL) + " " + item.ListedPrice);
                                        }

                                        getElement(sku, PRICE).text(item.SalePrice);
                                        getElement(sku, SR_NEW_PRICE).text(getData(sku, PRICE_LABEL) + " " + item.SalePrice);
                                        if (item.IsPreorder) {
                                            $btn.html("<span>" + getData(sku, LABEL_PREORDER) + "<span>");
                                            enableButton($btn);
                                        } else if (item.IsInStock) {
                                            $btn.html("<span>" + getData(sku, LABEL_ADD) + "<span>");
                                            enableButton($btn);
                                        } else if (item.IsBackorder) {
                                            $btn.html("<span>" + getData(sku, LABEL_BACKORDER) + "<span>");
                                            enableButton($btn);
                                        } else {
                                            $btn.html("<span>" + getData(sku, LABEL_OUT_STOCK) + "<span>");
                                            disableButton($btn);
                                        }
                                    });

                                    $('.score-highlight-body').matchHeight();
                                } else {
                                    // error
                                    if (priceData.Item2) {
                                        logService.error(priceData.Item2[0]);
                                    } else {
                                        logService.error('SKU failed loading price');
                                    }
                                }
                            } else {
                                logService.error('SKU failed loading price');
                            }

                        }, function (error) {
                            console.error(error);
                        });
                }

            }, 0);
        }



        function setOnClick(btn, sku) {
            $(btn).addClass("rde-loader-button");

            $(btn).on('keypress', function (e) {
                if ((e.keyCode || e.which) == 13) {
                    $(btn).click();
                }
            });
            $(btn).click(function (e) {
                e.preventDefault();

                if ($(this).hasClass("disabled"))
                    return false;

                $(btn).append("<div class='animation-container'><div></div><div></div><div></div><div></div></div>");
                helpersService.showLoader($(btn));

                cartService.addToCart(sku)
                    .done(function (data) {
                        var item = data.Item1;
                        if (item) {
                            setTimeout(function () {
                                helpersService.hideLoader($("button.rde-loader-button.loaded, a.rde-loader-button.loaded"));
                            }, 1000);
                        } else {
                            logService.error(data.Item2);
                            helpersService.hideLoader();
                        }
                    })
                    .fail(function (data) {
                        // error
                        helpersService.hideLoader();
                    });
            });
        }

        PriceLoader.init = function init() {
            return new PriceLoader();
        };

        return PriceLoader;
    });



define('text!Resideo/Modules/SkuListLoaderTemplates/loading.html',[],function () { return '<style>\r\n    .card {\r\n        background-color: #fff;\r\n        height: auto;\r\n        width: auto;\r\n        overflow: hidden;\r\n        /*margin: 12px;*/\r\n        border-radius: 5px;\r\n        /* box-shadow: 9px 17px 45px -29px\r\n                        rgba(0, 0, 0, 0.44);*/\r\n    }\r\n\r\n    /* Card image loading */\r\n    .card__image img {\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n\r\n    .card__image.loading {\r\n        height: 300px;\r\n        width: 400px;\r\n    }\r\n\r\n    .card__bar.loading {\r\n        height: 30px;\r\n        width: 100%;\r\n        margin-bottom: 15px;\r\n    }\r\n\r\n    /* Card title */\r\n    .card__title {\r\n        padding: 8px;\r\n        font-size: 22px;\r\n        font-weight: 700;\r\n    }\r\n\r\n        .card__title.loading {\r\n            height: 1rem;\r\n            width: 50%;\r\n            /*margin: 1rem;*/\r\n            border-radius: 3px;\r\n        }\r\n\r\n    /* Card description */\r\n    .card__description {\r\n        padding: 8px;\r\n        font-size: 16px;\r\n    }\r\n\r\n        .card__description.loading {\r\n            height: 3rem;\r\n            /*margin: 1rem;*/\r\n            border-radius: 3px;\r\n        }\r\n\r\n    /* The loading Class */\r\n    .loading {\r\n        position: relative;\r\n        background-color: #EDEDED;\r\n    }\r\n\r\n        /* The moving element */\r\n        .loading::after {\r\n            display: block;\r\n            content: "";\r\n            position: absolute;\r\n            width: 100%;\r\n            height: 100%;\r\n            transform: translateX(-100%);\r\n            background: -webkit-gradient(linear, left top, right top, from(transparent), color-stop(rgba(255, 255, 255, 0.5)), to(transparent));\r\n            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);\r\n            /* Adding animation */\r\n            animation: loading 0.8s infinite;\r\n        }\r\n\r\n    /* Loading Animation */\r\n    @keyframes loading {\r\n        100% {\r\n            transform: translateX(100%);\r\n        }\r\n    }\r\n</style>\r\n\r\n<div class="card">\r\n    <hr />\r\n    <div class="card__bar loading"></div>\r\n    <div class="card__bar loading"></div>\r\n    <div class="card__bar loading"></div>\r\n</div>';});


define('text!Resideo/Modules/SkuListLoaderTemplates/default.html',[],function () { return '<div>\r\n    <hr />\r\n    <%\r\n    //prepare constants and ids\r\n    var n = 5;\r\n    var ulId = "showmorelink_ul_" + (Math.floor(Math.random() * 1000000000));\r\n    var linkAId = "showmorelink_ul_" + (Math.floor(Math.random() * 1000000000));\r\n    var linkBId = "hidemorelink_ul_" + (Math.floor(Math.random() * 1000000000));\r\n\r\n    //filter list\r\n    const filteredSkus = [];\r\n\t\r\n\t//search matching exact sku\r\n\t_.each(skus, function(sku){\r\n        if (sku.SkuNumber.toLowerCase() == keyword.toLowerCase()) {\r\n            filteredSkus.push(sku);\r\n        }\r\n    });\r\n\t\r\n\t//search by keyword\r\n\tif (filteredSkus.length == 0){\r\n\t\t_.each(skus, function(sku){\r\n\t\t\tif (keyword == "" || (keyword.toLowerCase().split(" ").reduce(function(b, c) {return (((sku.SearchText.toLowerCase().indexOf(b)  >= 0 || b == "1") && sku.SearchText.toLowerCase().indexOf(c)  >= 0)) ? (b = "1") == "1": false;}))) {\r\n\t\t\t\tfilteredSkus.push(sku);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n    //calculate list to display and to be hidden\r\n    var firstStop = filteredSkus.length < n ? filteredSkus.length : n;\r\n    var secondStart = (filteredSkus.length < n ? filteredSkus.length : n) ;\r\n    var secondStop = (filteredSkus.length - (filteredSkus.length < n ? filteredSkus.length : n)) + secondStart;\r\n    %>\r\n    <ul>\r\n        <% _.each(filteredSkus.slice(0, firstStop), function(sku){ %>\r\n        <li>\r\n            <a href="<%- sku.Url%>"><%- sku.SkuNumber%> - <%- sku.SkuTitle%></a>\r\n        </li>\r\n        <% }); %>\r\n    </ul>\r\n    <ul id="<%-ulId%>" style="display:none;">\r\n        <% _.each(filteredSkus.slice(secondStart, secondStop), function(sku){ %>\r\n        <li>\r\n            <a href="<%- sku.Url%>"><%- sku.SkuNumber%> - <%- sku.SkuTitle%></a>\r\n        </li>\r\n        <% }); %>\r\n    </ul>\r\n    <a href="javascript:void(0);" id="<%-linkAId%>" onclick="document.getElementById(\'<%-linkAId%>\').style.display = \'none\';document.getElementById(\'<%-linkBId%>\').style.display = \'block\';document.getElementById(\'<%-ulId%>\').style.display = \'block\';" style="display:<%-(secondStart < secondStop ? \'block\' : \'none\')%>;"><%-coveoSitecoreDictionary.viewAll%></a>\r\n    <a href="javascript:void(0);" id="<%-linkBId%>" onclick="document.getElementById(\'<%-linkAId%>\').style.display = \'block\';document.getElementById(\'<%-linkBId%>\').style.display = \'none\';document.getElementById(\'<%-ulId%>\').style.display = \'none\';" style="display:none;"><%-coveoSitecoreDictionary.viewLess%></a>\r\n\r\n</div>';});

define('Resideo/Modules/SkuListLoader',['jquery', 'underscore', 'text!Resideo/Modules/SkuListLoaderTemplates/loading.html', 'text!Resideo/Modules/SkuListLoaderTemplates/default.html'],
    function ($, _, templateLoading, templateDefault) {
        function SkuListLoader() {
            new Promise(function (resolve, reject) {
                initSkuListLoader();

                if ("Coveo" in window) {
                    var root = document.body;
                    if (root) {
                        Coveo.$$(root).on("newResultsDisplayed", function (e, args) {
                            initSkuListLoader();
                        });
                    }
                }
                resolve();
            });
        }

        function initSkuListLoader() {
            setTimeout(function () {

                var templateLoadingCompiled = _.template(templateLoading);
                var templateDefaultCompiled = _.template(templateDefault);

                var keyword = "";
                $(".magic-box-input").find('input[type="text"]').each(function (i, item) {
                    if ($(item).val() != "") {
                        keyword = $(item).val();
                    }
                });

                $(".rde-catalog-sku-list").each(function (i, item) {
                    var ids = $(item).data("skus");
                    $(item).empty();
                    $(item).append(templateLoadingCompiled());
                    $.ajax({
                        url: "/rde/getskulistbyids",
                        type: 'POST',
                        data: { ids: ids, language: $("#rde-language").attr("content"), site: $("#rde-site").attr("content"), }
                    }).done(function (result) {
                        console.log(result);
                        $(item).empty();
                        $(item).append(templateDefaultCompiled({ skus: result, keyword: keyword }));
                    });
                });

            }, 0);
        }

        SkuListLoader.init = function init() {
            return new SkuListLoader();
        };

        return SkuListLoader;
    });


define('PageMisc',[
    'jquery',
    'Resideo/Components/WiringCompatibilityTool/WiringCompatibilityTool',
    'Resideo/Components/VideoModal/VideoModal',
    'Resideo/Modules/ClickableContainer',
    'Resideo/Modules/PriceLoader',
    'Resideo/Modules/SkuListLoader',
    'scorebootstrap',
    'promise-polyfill',
    'eventManager'
],
    function ($, wiringCompatibilityTool, videoModal, clickableContainer, priceLoader, skuListLoader, _scorebootstrap, _promisepolyfill,  eventManager) {
    'use strict';

    function pageMisc() {
        //clear cache to all AJAX request - Needed for Internet Explorer
        $.ajaxSetup({
            cache: false,
            data: { "rdesite": $("#rde-site").attr("content"), "rdelanguage": $("html").attr("lang") }
        });

        wiringCompatibilityTool.init();
        clickableContainer.init();

        //check if priceLoader has to wait until the right token is resolved
        if (!$('#priceLoaderStopper') || $('#priceLoaderStopper').attr("data-wait") !== "true") {
            priceLoader.init();
        }

        skuListLoader.init();

        //on page load remove "active" state from input - Energy Calc
        $(".energy-calculator-intro .rde-float-container").removeClass('active'); //RUH-550

        function zoomDetection() {
            var zoomwidth = (((window.outerWidth) / window.innerWidth) * 100).toFixed();

            if (zoomwidth == 400) {
                $('body').addClass('zoom-400');
            } else {
                $('body').removeClass('zoom-400');
            }
        }

        //Accordions - Make sure elements are visible while collapsing and expanding panes
        function accordionPanelAlwaysVisible() {
            if (document.querySelector('.panel-collapse')) {
                $('.panel-collapse').on('shown.bs.collapse', function (e) {
                    var panel = $(this).closest('.panel');
                    if (panel.offset().top < $(window).scrollTop()) {
                        $('html,body').animate({
                            scrollTop: panel.offset().top - 150
                        }, 0);
                    }
                });
            }
        }

        if ($(".ss-scroll").hasClass("ss-hidden")) {
            $(".rde-pdp-video-wrapper").addClass("scroll-hidden");
        }

        //only Experience Editor
        if (BrainJocks.EE) {
            if ($("body").hasClass("product-page")) {
                setTimeout(function () {
                    $(window).scrollTop($(window).scrollTop() + 1);
                }, 1000);
            }
        }

        if (!BrainJocks.EE) {
            //run only in preview and frontend

            zoomDetection();
            accordionPanelAlwaysVisible();

            $(window).resize(function () {
                zoomDetection();
            });
            
        }

        eventManager.subscribe("pause videos force all", function (data) {
            $("*[id^='yt']").each(function (i, item) {
                var video_src = $(item).attr('src');
                $(item).attr('src', '');  
                $(item).attr('src', video_src); 
            });
        });

        videoModal.init();
        }

        //RDO-5933&8123- Anchor not landing on correct point on a page
        $(document).ready(function () {
            if ($('.CustomPointAnchor').length) {
                setTimeout(function () {
                    if ($(window.location.hash).length) {
                        $('html, body').animate({
                            scrollTop: $(window.location.hash).offset().top
                        }, 10);
                    }
                }, 1500);
            }
        });

        // RDO-13453 - styling for events page german site
        Array.from(document.querySelectorAll('.accButton')).forEach((element, index) => {
            var p_id = element.parentNode.parentNode.attributes.id.value
            element.setAttribute('href', "#" + p_id);
            element.setAttribute('data-toggle', 'collapse');
        });

    new Promise(function (resolve, reject) {
        pageMisc();
        resolve();
    });
});

define('Search',['jquery', 'scorebootstrap', 'promise-polyfill'], function ($) {
    'use strict';

    function search() {
        if (!BrainJocks.EE) {
            //open/close search in header

            if (document.querySelector('.CoveoSearchbox') || document.querySelector('header .rde-search-button')) {
                var lazyLoadCoveo = function () {
                    //lazy load Coveo CSS
                    var href = $("#_CoveoFullSearchCSS").data('href');
                    var lazy = false;
                    if (href && href != "" && $("#_CoveoFullSearchCSS").attr('href') == undefined) {
                        $("#_CoveoFullSearchCSS").attr('href', href);
                        lazy = true;
                    }
                    href = $("#_CoveoForSitecoreCSS").data('href');
                    if (href && href != "" && $("#_CoveoForSitecoreCSS").attr('href') == undefined) {
                        $("#_CoveoForSitecoreCSS").attr('href', href);
                        lazy = true;
                    }
                    return lazy;
                }

                if (document.querySelector('.CoveoSearchbox')) {
                    $('.CoveoSearchbox').on('click', function (e) {
                        lazyLoadCoveo();
                    });
                    $('.CoveoSearchbox input').on('focus', function (e) {
                        lazyLoadCoveo();
                    });
                }

                if (document.querySelector('header .rde-search-button')) {
                    $('header .rde-search-button').on('click', function (e) {
                        var showTimeout = lazyLoadCoveo() ? 1000 : 0;

                        e.preventDefault();

                        $("header .CoveoSearchbox").hide();
                        $("header .coveo-for-sitecore-search-box-container").css('min-height', '68px')

                        setTimeout(function () {
                            $(this).toggleClass('active');
                            $('.CoveoSearchInterface').toggleClass('open');
                            $('.score-megamenu-dropdown').removeClass('open');
                            $('header .CoveoSearchbox').find('input').focus();
                            if (/Android/.test(navigator.appVersion)) {
                                var headerHeight = $("header").height();
                                $("header").css({ "margin-top": -headerHeight });
                            }
                        }, showTimeout / 3);

                        setTimeout(function () {
                            $("header .CoveoSearchbox").show();
                            $("header .coveo-for-sitecore-search-box-container").css('min-height', 'unset');
                            $("header .CoveoSearchbox").find("input[type='text']").focus();
                        }, showTimeout);
                    });
                }
            }

            $(document).keyup(function (e) {
                if (!e) e = event;
                if (e.keyCode == 27) {
                    e.stopPropagation();

                    //check if the clicked area is drop up or not
                    if ($('header').has(e.target).length === 0) {
                        $('header .rde-search-button').removeClass('active');
                        $('.CoveoSearchInterface').removeClass('open');
                        if (/Android/.test(navigator.appVersion)) {
                            $('header').css({ "margin-top": "" });
                        }
                    }
                }
            });

            $(document).click(function (e) {
                e.stopPropagation();

                //check if the clicked area is drop up or not
                if ($('header').has(e.target).length === 0) {
                    $('header .rde-search-button').removeClass('active');
                    $('.CoveoSearchInterface').removeClass('open');
                    if (/Android/.test(navigator.appVersion)) {
                        $('header').css({ "margin-top": "" });
                    }
                }
            });

            if (document.querySelector('.rde-mini-cart-button, .score-megamenu-dropdown a')) {
                $('.rde-mini-cart-button, .score-megamenu-dropdown a').click(function () {
                    $('header .rde-search-button').removeClass('active');
                    $('.CoveoSearchInterface').removeClass('open');
                    if (/Android/.test(navigator.appVersion)) {
                        $('header').css({ "margin-top": "" });
                    }
                });
            }

            ////RRW-6914 Add class if empty CoveoPager
            //setTimeout(function () { 
            //    if ($('.honeywellhome-support-landing-page .CoveoPager .coveo-pager-list li, .resideo-support-landing-page .CoveoPager .coveo-pager-list li').length < 1) {
            //        $('.CoveoPager').addClass('pager-empty');
            //    }
            //}, 500);

            //RRW-6626 Custom coveo scroll
            $(".CoveoSearchInterface").find(".CoveoResultList[data-custom-scroll-enabled]").each(function (i, item) {
                var coveoResultList = item.CoveoResultList;
                if (!coveoResultList || !coveoResultList.options) {
                    return;
                }
                var searchInterface = coveoResultList.searchInterface;
                var scrollContainer = coveoResultList.options.infiniteScrollContainer;
                var scrollToTopEnabled = coveoResultList.options.enableScrollToTop;
                var customScrollEnabled = item.dataset.customScrollEnabled.toLowerCase() == "true" ? true : false;
                if (scrollToTopEnabled || !customScrollEnabled || !searchInterface) {
                    return;
                }
                $(searchInterface.element).on("click", ".coveo-pager-list-item", function (ev) {
                    if (coveoResultList.disabled) {
                        return;
                    }
                    coveoResultList.bind.oneRootElement("deferredQuerySuccess", function (e, data) {
                        var headerOffset = $("header").length > 0 ? $("header")[0].offsetHeight : 0;
                        var searchInterfacePosition = searchInterface.element.getBoundingClientRect().top - headerOffset * 1.3;
                        if (searchInterfacePosition > 0) {
                            return;
                        }
                        if (scrollContainer && typeof scrollContainer.scrollTo === 'function') {
                            scrollContainer.scrollTo(0, window.pageYOffset + searchInterfacePosition);
                        }
                    });
                });
            });
        }
    }

    new Promise(function (resolve, reject) {
        search();
        resolve();
    });

    // custom arrow icons alt text
    function altAddFn() {
        setTimeout(function () {
            var decodeHtmlUmlautCharCodes = str =>
                str.replace(/(&#(\d+);)/g, (match, capture, charCode) =>
                    String.fromCharCode(charCode));
            var leftIcon = document.querySelector('.coveo-pager-previous-icon-svg');
            if (typeof (dict) != 'undefined' && dict) {
                if (leftIcon != null) {
                    leftIcon.setAttribute("alt", decodeHtmlUmlautCharCodes(dict.Go_back_to_the_previous_page));
                    leftIcon.setAttribute("aria-label", decodeHtmlUmlautCharCodes(dict.Go_back_to_the_previous_page));
                }
                var rightIcon = document.querySelector('.coveo-pager-next-icon-svg');
                if (rightIcon != null) {
                    rightIcon.setAttribute("alt", decodeHtmlUmlautCharCodes(dict.Go_to_the_next_page));
                    rightIcon.setAttribute("aria-label", decodeHtmlUmlautCharCodes(dict.Go_to_the_next_page));
                }
                $('.coveo-pager-list-item').each(function (index, element) {
                    element.setAttribute('aria-label', dict.Page + " " + element.innerText);
                });
            }
            //Remove tab index RRW-14768
            $('.global-search a.CoveoResultLink').each(function () {
                this.removeAttribute('tabindex');
            });
            //pagination 
            var selectedPager = $('.coveo-pager-list');
            if (selectedPager.length > 0) {
                selectedPager[0].setAttribute("aria-label", dict.Pagination);
            }

            //suggestion
            var selectListbox = $('.coveo-magicbox-suggestions');
            for (var j = 0; j < selectListbox.length; j++) {
                if (selectListbox[j] != null) {
                    selectListbox[j].setAttribute("aria-label", dict.Suggestions);
                }
            }
            // to add the aria-label in coveo facet and coveo sort
            var facetParent = $('.coveo-facet-values .coveo-facet-value')
            for (var i = 0; i < facetParent.length; i++) {
                var labelAriaVal = facetParent[i].attributes["aria-label"].nodeValue;
                if (facetParent[i].children[0].ariaLabel == null) {
                    facetParent[i].children[0].setAttribute("aria-label", dict.Label + " " + labelAriaVal);
                }
            }
            var dFacetParent = $('.coveo-dynamic-hierarchical-facet-values .coveo-dynamic-hierarchical-facet-value')
            for (var i = 0; i < dFacetParent.length; i++) {
                var labelAriaVal = dFacetParent[i].attributes["aria-label"].nodeValue;
                if (dFacetParent[i].children[0].ariaLabel == null) {
                    dFacetParent[i].children[0].setAttribute("aria-label", dict.Label + " " + labelAriaVal);
                }
            }
            //Label...
            var sortParent = $('.coveo-sort-section .coveo-sort-container')
            for (var i = 0; i < sortParent.length; i++) {
                var labelAriaVal = sortParent[i].children[0].attributes["data-caption"].nodeValue;
                var labelnodeAriaVal = sortParent[i].children[0].attributes["data-sort-criteria"].nodeValue;
                if (sortParent[i].children[0].ariaLabel == null) {
                    sortParent[i].children[0].setAttribute("aria-label", dict.Label + " " + labelAriaVal);
                    if (labelnodeAriaVal == "relevancy")
                        sortParent[i].children[0].children[0].setAttribute("aria-label", dict.Sort_results_by + " " + labelAriaVal);
                }
            }
            //RRW-11782
            var searchLabel = $('.coveo-search-button-svg');
            for (var j = 0; j < searchLabel.length; j++) {
                if (searchLabel[j] != null) {
                    searchLabel[j].setAttribute("aria-label", dict.Search_your_query_here);
                }
            }
            var clearLabel = $('.magic-box-clear-svg');
            for (var j = 0; j < clearLabel.length; j++) {
                if (clearLabel[j] != null) {
                    clearLabel[j].setAttribute("aria-label", dict.Clear_search_box);
                }
            }
            var loadingLabel = $('.coveo-search-button-loading-svg');
            for (var j = 0; j < loadingLabel.length; j++) {
                if (loadingLabel[j] != null) {
                    loadingLabel[j].setAttribute("aria-label", dict.Loading_results);
                }
            }
            //RRW-10860
            for (var i = 0; i < $('.coveo-visible-to-screen-reader-only').length; i++) {
                var txt = $('.coveo-visible-to-screen-reader-only')[i].innerHTML;
                if ($('.coveo-visible-to-screen-reader-only')[i].innerHTML != '') {
                    $('.coveo-visible-to-screen-reader-only')[i].remove();
                }
            }
            //RRW-10441
            $('.coveo-pager-list').removeAttr('role');

            //RRW-10442
            $('label.coveo-facet-value-label, .coveo-checkbox-label').each(function () {
                var NewElement = $("<div />");
                $.each(this.attributes, function (i, attrib) {
                    $(NewElement).attr(attrib.name, attrib.value);
                });
                $(this).replaceWith(function () {
                    return $(NewElement).append($(this).contents());
                });

            });
            //10409
            $('.CoveoFacet').each(function () {
                var labelText = this.attributes['data-title'].value;
                $(this.children[0].children[1].children[2]).attr('aria-label', 'More Settings for ' + labelText);
            });

            //10445
            $('li.coveo-pager-list-item').each(function () {
                var NewElement = $(this.children[0]);
                $.each(this.attributes, function (i, attrib) {
                    if (NewElement[0].attributes.class != null)
                        var anchorAtt = NewElement[0].attributes.class.value;
                    if (attrib.name == 'class') {
                        attrib.value = attrib.value + ' ' + anchorAtt;
                    }
                    $(NewElement).attr(attrib.name, attrib.value);
                    $(NewElement).removeAttr("aria-hidden");
                    if ($(NewElement).hasClass("coveo-pager-next")) {
                        $(NewElement).attr("aria-label", '');
                    }
                });
                var al = this.attributes;
                for (var v = 0; v < al.length; v++)
                    this.removeAttribute(al[v].nodeName);
                this.removeAttribute('tabindex');
                this.removeAttribute('role');
                $(this).on("mouseup", function () {
                    $(this).removeClass("coveo-accessible-button-pressed");
                    this.removeAttribute('class');
                    return $(this.children[0]).addClass("coveo-accessible-button-pressed");
                });
            });

            //RRW-12690 // RRW - 14360
            if (typeof(dict) != 'undefined' && dict != null && dict.Search_title != null) {
                $('.coveo-search-button-svg').each(function () {
                    this.children[0].innerHTML = dict.Search_title;
                });
            }
            else {
                $('.coveo-search-button-svg').each(function () {
                    this.children[0].innerHTML = dict.Search;
                });
            }

            //RRW-11817
            $('.result-template').each(function () {
                var p_id = $(this).parent().parent().attr('id');
                $(this).attr('id', this.id + '-' + p_id);
            });

            // RRW-10407
            $('.coveo-checkbox-button').each(function () {
                this.setAttribute('id', this.getAttribute('aria-label').replace(/[^\w\s]/gi, '').replace(/ /g, "-"));
            });
            var ls = window['sessionStorage'];
            var efocus = ls.getItem("id");
            if (efocus != null) {
                var focusItem = $(".coveo-checkbox-button[id='" + efocus.replace("'", "\\'") + "']");
                if (focusItem == null) { efocus = null; }
                else {
                    if ($(".coveo-checkbox-button[aria-pressed='true']") != null) {
                        focusItem.focus({
                            preventScroll: true
                        });
                    }
                }
            }
            $(document).on("click", function (e) {
                var setitem = ls.setItem("id", e.target.id);
            });

            //RRW-13034  
            //  $('.coveo-magicbox-suggestions').attr('aria-label', 'Coveo-magic-box-suggestions');

            //RRW - 12997 , RRW-12946 , RRW-14360
            if (typeof (dict) != 'undefined' && dict != null) {
                if (dict.Search_title != null) {
                    $('.coveo-search-button-svg').each(function () {
                        this.setAttribute('alt', dict.Search_title);
                    });
                }
                else {
                    $('.coveo-search-button-svg').each(function () {
                        this.setAttribute('alt', dict.Search);
                    });
                }
            }

            //RRW-10245 
            $('.coveo-magicbox-suggestions').each(function (index, element) {
                this.setAttribute('id', 'coveo-magicbox-suggestions-' + index);
            });

            $('.CoveoForSitecoreContext').each(function (index, element) {
                if (this.attributes.id != null) {
                    $(this).attr('id', this.attributes.id.value + '-' + index);
                }
            });


            //RRW-13032
            $('.CoveoOmnibox').each(function (index, element) {
                if (index == '0') {
                    this.setAttribute('id', 'searchbox-header');
                    this.setAttribute('aria-labelledby', 'searchbox-header');
                }
                else {
                    this.setAttribute('id', 'searchbox');
                    this.setAttribute('aria-labelledby', 'searchbox');
                }
            });


            if (typeof (dict) != 'undefined' && dict != null) {

                //RRW - 13030
                $('.CoveoDynamicFacet').each(function (index, element) {
                    this.setAttribute('id', this.attributes['id'].value + '-' + (this.attributes['data-id'] ? this.attributes['data-id'].value : ""));

                    var childdestelement = $(this).children();
                    if (childdestelement.length > 0) {
                        var labelAriaVal = this.attributes["data-title"].nodeValue;
                        var facetname = $(this).find('.coveo-dynamic-facet-header').children();
                        facetname[0].setAttribute("aria-label", labelAriaVal + " " + dict.Facet);
                        $.each(facetname, function (i, attrib) {
                            if (attrib.attributes.length == 0) {
                                for (var i = 0; i < attrib.children.length; i++) {
                                    if (attrib.children[i].className == "coveo-dynamic-facet-header-btn coveo-dynamic-facet-header-expand") {
                                        attrib.children[i].setAttribute("aria-label", dict.Expand_facet + " " + labelAriaVal + " " + dict.Facet);
                                        attrib.children[i].setAttribute("title", dict.Expand_facet + " " + labelAriaVal + " " + dict.Facet);
                                        var childsvg = attrib.children[i].children[0];
                                        childsvg.setAttribute("aria-label", dict.Arrow_down);
                                        var titleattr = childsvg.children[0];
                                        titleattr.innerHTML = dict.Arrow_down;
                                    }
                                    else if (attrib.children[i].className == "coveo-dynamic-facet-header-btn coveo-dynamic-facet-header-collapse") {
                                        attrib.children[i].setAttribute("aria-label", dict.Collapse_facet + " " + labelAriaVal + " " + dict.Facet);
                                        attrib.children[i].setAttribute("title", dict.Collapse_facet + " " + labelAriaVal + " " + dict.Facet);
                                        var childsvg = attrib.children[i].children[0];
                                        childsvg.setAttribute("aria-label", dict.Arrow_up);
                                        var titleattr = childsvg.children[0];
                                        titleattr.innerHTML = dict.Arrow_up;
                                    }
                                }
                            }
                        });

                        var inputtext = $(this).find('.coveo-combobox-wrapper .coveo-combobox-input').children();
                        $.each(inputtext, function (j, attrib) {
                            if (attrib.nodeName.toLowerCase() == 'input') {
                                attrib.setAttribute("aria-label", dict.Search_for_values_in + " " + labelAriaVal + " " + dict.Facet);
                            }
                        });
                    }
                });

                //CoveoBreadcrumb
                $('.CoveoBreadcrumb').attr('aria-label', dict.Active_filters);
                $('.magic-box-input').find(':input').attr('aria-label', dict.Search).attr('title', dict.HoverText);
                $('.coveo-dynamic-facet-breadcrumb-value-clear svg').each(function (index, element) {
                    element.setAttribute('aria-label', dict.clear);
                });
                $('.coveo-dynamic-facet-breadcrumb-value').each(function (index, element) {
                    element.setAttribute('aria-label', dict.Remove_inclusion_filter_on + " " + element.outerText);
                });
                $('.coveo-dynamic-hierarchical-facet-value').each(function (index, element) {
                    var childdestelement = element.children;
                    if (childdestelement.length > 0) {
                        for (var i = 0; i < childdestelement.length; i++) {
                            if (childdestelement[i].className == "coveo-dynamic-hierarchical-facet-value-count") {
                                var facetCount = childdestelement[i].outerText.slice(1, -1);
                            }
                            else if (childdestelement[i].className == "coveo-dynamic-hierarchical-facet-value-label") {
                                var facet = childdestelement[i];
                                var facetTile = childdestelement[i].attributes["title"].nodeValue
                            }
                        }
                        var arialLabel = dict.Inclusion_filter_on + " " + facetTile + ";" + facetCount + " " + dict.Results;
                        element.setAttribute('aria-label', arialLabel);
                        facet.setAttribute('aria-label', dict.Label + " " + arialLabel);
                    }
                });
            }
        }, 3000);
    }
    //RRW-11796
    function rolemagic() {
        setTimeout(function () {
            $('.coveo-magicbox-suggestions').each(function () {
                var magicboxRoleDiv = this.children[0]

                if (magicboxRoleDiv.hasAttribute('role')) {

                    magicboxRoleDiv.setAttribute("aria-selected", "false");
                }
            });
        }, 1500);
    }
    $('[role="combobox"]').on('blur', function () { rolemagic(); })
    $('[role="combobox"]').on('click', function () { rolemagic(); })
    $('.rde-search-button').on('click', function () { rolemagic(); })
    $(document).ready(function () {
        //RRW-10203
        $('#signup-view #Email').attr('autocomplete', 'new-email');
        $('#signup-view #Password').attr('autocomplete', 'new-password');

        altAddFn();
        rolemagic()
        //RRW-6914 Add class if empty CoveoPager
        if (typeof Coveo !== 'undefined') {
            var root = Coveo.$$(document).find('.support-category-results .CoveoSearchInterface');

            //show/hide pagination text
            if (root != null) {
                Coveo.$$(root).on("newResultsDisplayed", function (e) {
                    if ($('.coveo-pager-list li').length < 1) {
                        $('.CoveoPager').addClass('pager-empty');
                    }
                    else {
                        $('.CoveoPager').removeClass('pager-empty');
                    }
                });
            }
            //set pagination arrow aria-label and alt
            var pageroot = Coveo.$$(document).find('.page-wrapper .CoveoSearchInterface')
            if (pageroot != null) {
                var decodeHtmlUmlautCharCodes = str =>
                    str.replace(/(&#(\d+);)/g, (match, capture, charCode) =>
                        String.fromCharCode(charCode));
                Coveo.$$(pageroot).on("newResultsDisplayed", function (e) {
                    var leftIcon = document.querySelector('.coveo-pager-previous-icon-svg');

                    if (typeof (dict) != 'undefined' && dict != null) {
                        if (leftIcon != null) {
                            leftIcon.setAttribute("alt", decodeHtmlUmlautCharCodes(dict.Go_back_to_the_previous_page));
                            leftIcon.setAttribute("aria-label", decodeHtmlUmlautCharCodes(dict.Go_back_to_the_previous_page));
                        }
                        var rightIcon = document.querySelector('.coveo-pager-next-icon-svg');
                        if (rightIcon != null) {
                            rightIcon.setAttribute("alt", decodeHtmlUmlautCharCodes(dict.Go_to_the_next_page));
                            rightIcon.setAttribute("aria-label", decodeHtmlUmlautCharCodes(dict.Go_to_the_next_page));
                        }
                    }
                });
            }

        }
    });
    $(".coveo-pager-list,.CoveoTab,.coveo-sort-container,.CoveoFacet,.CoveoDynamicFacet,.CoveoDynamicHierarchicalFacet,.CoveoBreadcrumb").on("click", function () { altAddFn() });


});

define('SlickSliderCalls',['jquery', 'scorebootstrap', 'matchHeight', 'slick', 'promise-polyfill'], function ($) {
    'use strict';

    function slickSliderCalls() {

        //init slick sliders
        if (document.querySelector('.rde-hero-slider')) {
            $('.rde-hero-slider').not('.autoplay').slick({
                slidesToShow: 1,
                dots: true,
                arrows: false,
                regionLabel: 'carousel1'
            });

            $('.rde-hero-slider.autoplay').slick({
                slidesToShow: 1,
                dots: true,
                arrows: false,
                autoplay: true,
                autoplaySpeed: 10000,
                pauseOnHover: false,
                regionLabel: 'carousel1'
            });
        }

        if (document.querySelector('.rde-offset-slider .score-style-box')) {
            $('.rde-offset-slider .score-style-box').slick({
                slidesToShow: 1,
                slidesToScroll: 1,
                dots: true,
                arrows: false
            });
        }

        if (document.querySelector('.rde-highlight-hero-slider .score-style-box:not(.rde-pro-highlight-card-mobile-only-slider)')) {
            $('.rde-highlight-hero-slider .score-style-box:not(.rde-pro-highlight-card-mobile-only-slider)').slick({
                slidesToShow: 3,
                slidesToScroll: 1,
                dots: true,
                focusOnSelect: true,
                arrows: false,
                responsive: [
                    {
                        breakpoint: 991,
                        settings: {
                            slidesToShow: 1,
                            slidesToScroll: 1
                        }
                    }
                ],
                
            });
        }

        if (document.querySelector('.rde-two-up-slider')) {
            $('.rde-two-up-slider').slick({
                slidesToShow: 2,
                slidesToScroll: 1,
                dots: false,
                focusOnSelect: true,
                arrows: true,
                responsive: [
                    {
                        breakpoint: 991,
                        settings: {
                            slidesToShow: 1,
                            slidesToScroll: 1
                        }
                    },
                    {
                        breakpoint: 480,
                        settings: {
                            slidesToShow: 1,
                            slidesToScroll: 1,
                            dots: true,
                            arrows: false
                        }
                    }
                ]
            });
        }

        if (document.querySelector('.thumbnail-slider')) {
            //Executive leadership slick slider init
            $('.thumbnail-slider').slick({
                slidesToShow: 3,
                slidesToScroll: 1,
                dots: true,
                focusOnSelect: true,
                infinite: true,
                responsive: [
                    {
                        breakpoint: 991,
                        settings: {
                            slidesToShow: 2,
                            slidesToScroll: 2
                        }
                    },
                    {
                        breakpoint: 480,
                        settings: {
                            slidesToShow: 1,
                            slidesToScroll: 1
                        }
                    }
                ],
                arrows: true
            });
        }

        if (document.querySelector('.rde-product-image-slider .slides-to-show-6')) {
            $('.rde-product-image-slider .slides-to-show-6').slick({
                slidesToShow: 6,
                slidesToScroll: 6,
                dots: false,
                arrows: true,
                responsive: [
                    {
                        breakpoint: 766,
                        settings: {
                            slidesToShow: 2,
                            slidesToScroll: 2,
                            arrows: false
                        }
                    }
                ]
            });
        }

        if (document.querySelector('.rde-product-image-slider .slides-to-show-3')) {
            $('.rde-product-image-slider .slides-to-show-3').slick({
                slidesToShow: 3,
                slidesToScroll: 3,
                dots: false,
                arrows: true,
                responsive: [
                    {
                        breakpoint: 766,
                        settings: {
                            slidesToShow: 2,
                            slidesToScroll: 2,
                            arrows: false
                        }
                    }
                ]
            });
        }

        if (document.querySelector('.rde-pro-content-slider-static-video .score-right .score-style-box')) {
            $('.rde-pro-content-slider-static-video .score-right .score-style-box').slick({
                slidesToShow: 1,
                slidesToScroll: 1,
                dots: true,
                arrows: false
            });
        }

        if (document.querySelector('.rde-pro-content-video-slider')) {
            $('.rde-pro-content-video-slider').slick({
                slidesToShow: 1,
                slidesToScroll: 1,
                dots: true,
                arrows: false
            });

            //adding functionality to not pop up the modal after moving to the next slide
            var isVideoSlideSliding = false;

            $('.rde-pro-content-video-slider').on('beforeChange',
                function () {
                    isVideoSlideSliding = true;
                });

            $('.rde-pro-content-video-slider').on('afterChange',
                function () {
                    isVideoSlideSliding = false;
                });

            $('.rde-pro-content-video-slider .score-button.rde-play').on('click',
                function (e) {
                    if (isVideoSlideSliding) {
                        e.stopImmediatePropagation();
                        e.preventDefault();
                    }
                });
            //end of functionality to not pop up the modal after moving to the next slide
        }

        if ($(window).width() < 767) {
            if (document.querySelector('.rde-pro-highlight-card-mobile-only-slider')) {
                $('.rde-pro-highlight-card-mobile-only-slider').on('init', function (event, slick, currentSlide, nextSlide) {
                    setTimeout(function () {
                        $('.rde-pro-line-tab .tab-content .tab-pane:first').find('.score-highlight').matchHeight();
                    }, 1000);
                });

                $('.rde-pro-highlight-card-mobile-only-slider').slick({
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    dots: true,
                    arrows: false,
                    infinite: false
                });
            }

            if (document.querySelector('.rde-pro-highlight-hero-mobile-only-slider .score-style-box')) {
                $('.rde-pro-highlight-hero-mobile-only-slider .score-style-box').slick({
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    dots: false,
                    arrows: false,
                    infinite: false,
                    centerMode: true
                });
            }
        }

        if ($(window).width() < 991) {
            if (document.querySelector('.rde-sticky-anchor-nav .section-navigation ul')) {
                $('.rde-sticky-anchor-nav .section-navigation ul').slick({
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    dots: false,
                    arrows: false,
                    infinite: false,
                    variableWidth: true
                });
            }

            if (document.querySelector('.rde-pro-line-tab')) {
                setTimeout(function () {
                    $('.rde-pro-line-tab .nav-tabs').slick({
                        slidesToShow: 1,
                        slidesToScroll: 1,
                        dots: false,
                        arrows: false,
                        infinite: false,
                        variableWidth: true
                    });

                    $('.rde-pro-line-tab .nav-tabs li').on('click',
                        function () {
                            $(this).closest('.nav-tabs').find('li').removeClass('active');
                            $(this).toggleClass('active');
                            var target_tab_selector = $(this).find('a').attr('href');
                            $(target_tab_selector).siblings().removeClass('active in');
                            $(target_tab_selector).addClass('active in');

                            $(target_tab_selector).find('.slick-initialized').slick('refresh');
                            $(target_tab_selector).find('.score-highlight').matchHeight();
                        });
                },
                    500);
            }
        }

        $('.slick-slider .score-highlight').matchHeight();
        setTimeout(function () {
            $('.rde-pro-line-tab .tab-content .tab-pane:first').find('.score-highlight').matchHeight();
        }, 600);

        if (document.querySelector('.slick-slider .caption')) {
            //when clicking on caption area
            $('.slick-slider').on('click', '.caption', function (e) {
                if (e.target.tagName != 'A' && e.target.tagName != 'IMG')
                    e.preventDefault();
            });
            //tab keyboard event to move focus from caption(contains anchor tag) to active slick-dots
            $(".rde-hero-slider.slick-slider .caption a").on('keydown', function (e) {
                var keyCode = e.keyCode || e.which;

                if (keyCode == 9 && !e.shiftKey) {
                    if ($(e.target).closest('.rde-hero-slider.slick-slider').find('.slick-dots li.slick-active button')) {
                        e.preventDefault();
                        $(e.target).closest('.rde-hero-slider.slick-slider').find(".slick-dots li.slick-active button").click();
                    }
                }
            });
            $(".slick-slider li").on('keydown', function (e) {
                var keyCode = e.keyCode || e.which;
                if (e.shiftKey && keyCode == 9) {
                    e.preventDefault();
                    //$($(".slick-current")[0]).find("a").focus();
                }
                if (keyCode === 39) {
                    var lastDot = $(".slick-slider li")[$(".slick-slider li").length - 1];
                    var firstDot = $(".slick-slider li")[0];
                    var lastDottext = $(lastDot).find("button").text();
                    var firstDottext = $(firstDot).find("button").text();
                    if ($(this).find("button").text() === lastDottext) {
                        $(firstDot).first().find("button").trigger("click");
                    }
                    else {
                        $(this).next().find("button").trigger("click");
                    }
                }
                if (keyCode === 37) {
                    var lastDot = $(".slick-slider li")[$(".slick-slider li").length - 1];
                    var firstDot = $(".slick-slider li")[0];
                    var lastDottext = $(lastDot).find("button").text();
                    var firstDottext = $(firstDot).find("button").text();
                    if ($(this).find("button").text() === firstDottext) {
                        $(lastDot).last().find("button").trigger("click");
                    }
                    else {
                        $(this).prev().find("button").trigger("click");
                    }
                }
            });
        }
        if (document.querySelector(".slick-slider li")) {
            window.onresize = function () { disableBricks(); }
            window.onload = function () { disableBricks(); }
            function disableBricks() {
                if ($(window).width() < 768)
                    $(".slick-slider li button").attr("disabled", true);
                else
                    $(".slick-slider li button").attr("disabled", false);

            }
        }
    }

    function slickSliderCallsEE() {
        // Let energy calculator look good in experience editor
        if ($("body").hasClass("energy-calculator")) {
            function summerCoolingSlider() {
                if (document.querySelector('.summer-cooling-setting-slider')) {
                    $('.summer-cooling-setting-slider').slick({
                        slidesToShow: 4,
                        slidesToScroll: 1,
                        dots: false,
                        arrows: false,
                        infinite: false,
                        responsive: [
                            {
                                breakpoint: 991,
                                settings: {
                                    slidesToShow: 1,
                                    arrows: true
                                }
                            },
                            {
                                breakpoint: 480,
                                settings: {
                                    slidesToShow: 1,
                                    arrows: true
                                }
                            }
                        ]
                    });
                }
            };

            function winterHeatingSlider() {
                if (document.querySelector('.winter-heating-setting-slider')) {
                    $('.winter-heating-setting-slider').slick({
                        slidesToShow: 4,
                        slidesToScroll: 1,
                        dots: false,
                        arrows: false,
                        infinite: false,
                        responsive: [
                            {
                                breakpoint: 991,
                                settings: {
                                    slidesToShow: 1,
                                    arrows: true
                                }
                            },
                            {
                                breakpoint: 480,
                                settings: {
                                    slidesToShow: 1,
                                    arrows: true
                                }
                            }
                        ]
                    });
                }
            }

            $(window).on('resize', function () {
                setTimeout(function () {
                    summerCoolingSlider();
                    winterHeatingSlider();
                }, 500);
            });
        }
    }

    new Promise(function (resolve, reject) {
        if (BrainJocks.EE) {
            slickSliderCallsEE();
        } else {
            slickSliderCalls();
        }
        resolve();
    });
});

/*! ScrollMagic v2.0.6 | (c) 2018 Jan Paepke (@janpaepke) | license & info: http://scrollmagic.io */
!function(e,t){"function"==typeof define&&define.amd?define('ScrollMagic',t):"object"==typeof exports?module.exports=t():e.ScrollMagic=t()}(this,function(){"use strict";var e=function(){};e.version="2.0.6",window.addEventListener("mousewheel",function(){});var t="data-scrollmagic-pin-spacer";e.Controller=function(r){var o,s,a="ScrollMagic.Controller",l="FORWARD",c="REVERSE",f="PAUSED",u=n.defaults,d=this,h=i.extend({},u,r),g=[],p=!1,v=0,m=f,w=!0,y=0,S=!0,b=function(){for(var e in h)u.hasOwnProperty(e)||delete h[e];if(h.container=i.get.elements(h.container)[0],!h.container)throw a+" init failed.";w=h.container===window||h.container===document.body||!document.body.contains(h.container),w&&(h.container=window),y=z(),h.container.addEventListener("resize",T),h.container.addEventListener("scroll",T);var t=parseInt(h.refreshInterval,10);h.refreshInterval=i.type.Number(t)?t:u.refreshInterval,E()},E=function(){h.refreshInterval>0&&(s=window.setTimeout(A,h.refreshInterval))},x=function(){return h.vertical?i.get.scrollTop(h.container):i.get.scrollLeft(h.container)},z=function(){return h.vertical?i.get.height(h.container):i.get.width(h.container)},C=this._setScrollPos=function(e){h.vertical?w?window.scrollTo(i.get.scrollLeft(),e):h.container.scrollTop=e:w?window.scrollTo(e,i.get.scrollTop()):h.container.scrollLeft=e},F=function(){if(S&&p){var e=i.type.Array(p)?p:g.slice(0);p=!1;var t=v;v=d.scrollPos();var n=v-t;0!==n&&(m=n>0?l:c),m===c&&e.reverse(),e.forEach(function(e){e.update(!0)})}},L=function(){o=i.rAF(F)},T=function(e){"resize"==e.type&&(y=z(),m=f),p!==!0&&(p=!0,L())},A=function(){if(!w&&y!=z()){var e;try{e=new Event("resize",{bubbles:!1,cancelable:!1})}catch(t){e=document.createEvent("Event"),e.initEvent("resize",!1,!1)}h.container.dispatchEvent(e)}g.forEach(function(e){e.refresh()}),E()};this._options=h;var N=function(e){if(e.length<=1)return e;var t=e.slice(0);return t.sort(function(e,t){return e.scrollOffset()>t.scrollOffset()?1:-1}),t};return this.addScene=function(t){if(i.type.Array(t))t.forEach(function(e){d.addScene(e)});else if(t instanceof e.Scene)if(t.controller()!==d)t.addTo(d);else if(g.indexOf(t)<0){g.push(t),g=N(g),t.on("shift.controller_sort",function(){g=N(g)});for(var n in h.globalSceneOptions)t[n]&&t[n].call(t,h.globalSceneOptions[n])}return d},this.removeScene=function(e){if(i.type.Array(e))e.forEach(function(e){d.removeScene(e)});else{var t=g.indexOf(e);t>-1&&(e.off("shift.controller_sort"),g.splice(t,1),e.remove())}return d},this.updateScene=function(t,n){return i.type.Array(t)?t.forEach(function(e){d.updateScene(e,n)}):n?t.update(!0):p!==!0&&t instanceof e.Scene&&(p=p||[],-1==p.indexOf(t)&&p.push(t),p=N(p),L()),d},this.update=function(e){return T({type:"resize"}),e&&F(),d},this.scrollTo=function(n,r){if(i.type.Number(n))C.call(h.container,n,r);else if(n instanceof e.Scene)n.controller()===d&&d.scrollTo(n.scrollOffset(),r);else if(i.type.Function(n))C=n;else{var o=i.get.elements(n)[0];if(o){for(;o.parentNode.hasAttribute(t);)o=o.parentNode;var s=h.vertical?"top":"left",a=i.get.offset(h.container),l=i.get.offset(o);w||(a[s]-=d.scrollPos()),d.scrollTo(l[s]-a[s],r)}}return d},this.scrollPos=function(e){return arguments.length?(i.type.Function(e)&&(x=e),d):x.call(d)},this.info=function(e){var t={size:y,vertical:h.vertical,scrollPos:v,scrollDirection:m,container:h.container,isDocument:w};return arguments.length?void 0!==t[e]?t[e]:void 0:t},this.loglevel=function(){return d},this.enabled=function(e){return arguments.length?(S!=e&&(S=!!e,d.updateScene(g,!0)),d):S},this.destroy=function(e){window.clearTimeout(s);for(var t=g.length;t--;)g[t].destroy(e);return h.container.removeEventListener("resize",T),h.container.removeEventListener("scroll",T),i.cAF(o),null},b(),d};var n={defaults:{container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100}};e.Controller.addOption=function(e,t){n.defaults[e]=t},e.Controller.extend=function(t){var n=this;e.Controller=function(){return n.apply(this,arguments),this.$super=i.extend({},this),t.apply(this,arguments)||this},i.extend(e.Controller,n),e.Controller.prototype=n.prototype,e.Controller.prototype.constructor=e.Controller},e.Scene=function(n){var o,s,a="BEFORE",l="DURING",c="AFTER",f=r.defaults,u=this,d=i.extend({},f,n),h=a,g=0,p={start:0,end:0},v=0,m=!0,w=function(){for(var e in d)f.hasOwnProperty(e)||delete d[e];for(var t in f)L(t);C()},y={};this.on=function(e,t){return i.type.Function(t)&&(e=e.trim().split(" "),e.forEach(function(e){var n=e.split("."),r=n[0],i=n[1];"*"!=r&&(y[r]||(y[r]=[]),y[r].push({namespace:i||"",callback:t}))})),u},this.off=function(e,t){return e?(e=e.trim().split(" "),e.forEach(function(e){var n=e.split("."),r=n[0],i=n[1]||"",o="*"===r?Object.keys(y):[r];o.forEach(function(e){for(var n=y[e]||[],r=n.length;r--;){var o=n[r];!o||i!==o.namespace&&"*"!==i||t&&t!=o.callback||n.splice(r,1)}n.length||delete y[e]})}),u):u},this.trigger=function(t,n){if(t){var r=t.trim().split("."),i=r[0],o=r[1],s=y[i];s&&s.forEach(function(t){o&&o!==t.namespace||t.callback.call(u,new e.Event(i,t.namespace,u,n))})}return u},u.on("change.internal",function(e){"loglevel"!==e.what&&"tweenChanges"!==e.what&&("triggerElement"===e.what?E():"reverse"===e.what&&u.update())}).on("shift.internal",function(){S(),u.update()}),this.addTo=function(t){return t instanceof e.Controller&&s!=t&&(s&&s.removeScene(u),s=t,C(),b(!0),E(!0),S(),s.info("container").addEventListener("resize",x),t.addScene(u),u.trigger("add",{controller:s}),u.update()),u},this.enabled=function(e){return arguments.length?(m!=e&&(m=!!e,u.update(!0)),u):m},this.remove=function(){if(s){s.info("container").removeEventListener("resize",x);var e=s;s=void 0,e.removeScene(u),u.trigger("remove")}return u},this.destroy=function(e){return u.trigger("destroy",{reset:e}),u.remove(),u.off("*.*"),null},this.update=function(e){if(s)if(e)if(s.enabled()&&m){var t,n=s.info("scrollPos");t=d.duration>0?(n-p.start)/(p.end-p.start):n>=p.start?1:0,u.trigger("update",{startPos:p.start,endPos:p.end,scrollPos:n}),u.progress(t)}else T&&h===l&&N(!0);else s.updateScene(u,!1);return u},this.refresh=function(){return b(),E(),u},this.progress=function(e){if(arguments.length){var t=!1,n=h,r=s?s.info("scrollDirection"):"PAUSED",i=d.reverse||e>=g;if(0===d.duration?(t=g!=e,g=1>e&&i?0:1,h=0===g?a:l):0>e&&h!==a&&i?(g=0,h=a,t=!0):e>=0&&1>e&&i?(g=e,h=l,t=!0):e>=1&&h!==c?(g=1,h=c,t=!0):h!==l||i||N(),t){var o={progress:g,state:h,scrollDirection:r},f=h!=n,p=function(e){u.trigger(e,o)};f&&n!==l&&(p("enter"),p(n===a?"start":"end")),p("progress"),f&&h!==l&&(p(h===a?"start":"end"),p("leave"))}return u}return g};var S=function(){p={start:v+d.offset},s&&d.triggerElement&&(p.start-=s.info("size")*d.triggerHook),p.end=p.start+d.duration},b=function(e){if(o){var t="duration";F(t,o.call(u))&&!e&&(u.trigger("change",{what:t,newval:d[t]}),u.trigger("shift",{reason:t}))}},E=function(e){var n=0,r=d.triggerElement;if(s&&(r||v>0)){if(r)if(r.parentNode){for(var o=s.info(),a=i.get.offset(o.container),l=o.vertical?"top":"left";r.parentNode.hasAttribute(t);)r=r.parentNode;var c=i.get.offset(r);o.isDocument||(a[l]-=s.scrollPos()),n=c[l]-a[l]}else u.triggerElement(void 0);var f=n!=v;v=n,f&&!e&&u.trigger("shift",{reason:"triggerElementPosition"})}},x=function(){d.triggerHook>0&&u.trigger("shift",{reason:"containerResize"})},z=i.extend(r.validate,{duration:function(e){if(i.type.String(e)&&e.match(/^(\.|\d)*\d+%$/)){var t=parseFloat(e)/100;e=function(){return s?s.info("size")*t:0}}if(i.type.Function(e)){o=e;try{e=parseFloat(o())}catch(n){e=-1}}if(e=parseFloat(e),!i.type.Number(e)||0>e)throw o?(o=void 0,0):0;return e}}),C=function(e){e=arguments.length?[e]:Object.keys(z),e.forEach(function(e){var t;if(z[e])try{t=z[e](d[e])}catch(n){t=f[e]}finally{d[e]=t}})},F=function(e,t){var n=!1,r=d[e];return d[e]!=t&&(d[e]=t,C(e),n=r!=d[e]),n},L=function(e){u[e]||(u[e]=function(t){return arguments.length?("duration"===e&&(o=void 0),F(e,t)&&(u.trigger("change",{what:e,newval:d[e]}),r.shifts.indexOf(e)>-1&&u.trigger("shift",{reason:e})),u):d[e]})};this.controller=function(){return s},this.state=function(){return h},this.scrollOffset=function(){return p.start},this.triggerPosition=function(){var e=d.offset;return s&&(e+=d.triggerElement?v:s.info("size")*u.triggerHook()),e};var T,A;u.on("shift.internal",function(e){var t="duration"===e.reason;(h===c&&t||h===l&&0===d.duration)&&N(),t&&O()}).on("progress.internal",function(){N()}).on("add.internal",function(){O()}).on("destroy.internal",function(e){u.removePin(e.reset)});var N=function(e){if(T&&s){var t=s.info(),n=A.spacer.firstChild;if(e||h!==l){var r={position:A.inFlow?"relative":"absolute",top:0,left:0},o=i.css(n,"position")!=r.position;A.pushFollowers?d.duration>0&&(h===c&&0===parseFloat(i.css(A.spacer,"padding-top"))?o=!0:h===a&&0===parseFloat(i.css(A.spacer,"padding-bottom"))&&(o=!0)):r[t.vertical?"top":"left"]=d.duration*g,i.css(n,r),o&&O()}else{"fixed"!=i.css(n,"position")&&(i.css(n,{position:"fixed"}),O());var f=i.get.offset(A.spacer,!0),u=d.reverse||0===d.duration?t.scrollPos-p.start:Math.round(g*d.duration*10)/10;f[t.vertical?"top":"left"]+=u,i.css(A.spacer.firstChild,{top:f.top,left:f.left})}}},O=function(){if(T&&s&&A.inFlow){var e=h===l,t=s.info("vertical"),n=A.spacer.firstChild,r=i.isMarginCollapseType(i.css(A.spacer,"display")),o={};A.relSize.width||A.relSize.autoFullWidth?e?i.css(T,{width:i.get.width(A.spacer)}):i.css(T,{width:"100%"}):(o["min-width"]=i.get.width(t?T:n,!0,!0),o.width=e?o["min-width"]:"auto"),A.relSize.height?e?i.css(T,{height:i.get.height(A.spacer)-(A.pushFollowers?d.duration:0)}):i.css(T,{height:"100%"}):(o["min-height"]=i.get.height(t?n:T,!0,!r),o.height=e?o["min-height"]:"auto"),A.pushFollowers&&(o["padding"+(t?"Top":"Left")]=d.duration*g,o["padding"+(t?"Bottom":"Right")]=d.duration*(1-g)),i.css(A.spacer,o)}},_=function(){s&&T&&h===l&&!s.info("isDocument")&&N()},P=function(){s&&T&&h===l&&((A.relSize.width||A.relSize.autoFullWidth)&&i.get.width(window)!=i.get.width(A.spacer.parentNode)||A.relSize.height&&i.get.height(window)!=i.get.height(A.spacer.parentNode))&&O()},D=function(e){s&&T&&h===l&&!s.info("isDocument")&&(e.preventDefault(),s._setScrollPos(s.info("scrollPos")-((e.wheelDelta||e[s.info("vertical")?"wheelDeltaY":"wheelDeltaX"])/3||30*-e.detail)))};this.setPin=function(e,n){var r={pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer"};if(n=i.extend({},r,n),e=i.get.elements(e)[0],!e)return u;if("fixed"===i.css(e,"position"))return u;if(T){if(T===e)return u;u.removePin()}T=e;var o=T.parentNode.style.display,s=["top","left","bottom","right","margin","marginLeft","marginRight","marginTop","marginBottom"];T.parentNode.style.display="none";var a="absolute"!=i.css(T,"position"),l=i.css(T,s.concat(["display"])),c=i.css(T,["width","height"]);T.parentNode.style.display=o,!a&&n.pushFollowers&&(n.pushFollowers=!1);var f=T.parentNode.insertBefore(document.createElement("div"),T),d=i.extend(l,{position:a?"relative":"absolute",boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"});if(a||i.extend(d,i.css(T,["width","height"])),i.css(f,d),f.setAttribute(t,""),i.addClass(f,n.spacerClass),A={spacer:f,relSize:{width:"%"===c.width.slice(-1),height:"%"===c.height.slice(-1),autoFullWidth:"auto"===c.width&&a&&i.isMarginCollapseType(l.display)},pushFollowers:n.pushFollowers,inFlow:a},!T.___origStyle){T.___origStyle={};var h=T.style,g=s.concat(["width","height","position","boxSizing","mozBoxSizing","webkitBoxSizing"]);g.forEach(function(e){T.___origStyle[e]=h[e]||""})}return A.relSize.width&&i.css(f,{width:c.width}),A.relSize.height&&i.css(f,{height:c.height}),f.appendChild(T),i.css(T,{position:a?"relative":"absolute",margin:"auto",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(A.relSize.width||A.relSize.autoFullWidth)&&i.css(T,{boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"}),window.addEventListener("scroll",_),window.addEventListener("resize",_),window.addEventListener("resize",P),T.addEventListener("mousewheel",D),T.addEventListener("DOMMouseScroll",D),N(),u},this.removePin=function(e){if(T){if(h===l&&N(!0),e||!s){var n=A.spacer.firstChild;if(n.hasAttribute(t)){var r=A.spacer.style,o=["margin","marginLeft","marginRight","marginTop","marginBottom"],a={};o.forEach(function(e){a[e]=r[e]||""}),i.css(n,a)}A.spacer.parentNode.insertBefore(n,A.spacer),A.spacer.parentNode.removeChild(A.spacer),T.parentNode.hasAttribute(t)||(i.css(T,T.___origStyle),delete T.___origStyle)}window.removeEventListener("scroll",_),window.removeEventListener("resize",_),window.removeEventListener("resize",P),T.removeEventListener("mousewheel",D),T.removeEventListener("DOMMouseScroll",D),T=void 0}return u};var R,k=[];return u.on("destroy.internal",function(e){u.removeClassToggle(e.reset)}),this.setClassToggle=function(e,t){var n=i.get.elements(e);return 0!==n.length&&i.type.String(t)?(k.length>0&&u.removeClassToggle(),R=t,k=n,u.on("enter.internal_class leave.internal_class",function(e){var t="enter"===e.type?i.addClass:i.removeClass;k.forEach(function(e){t(e,R)})}),u):u},this.removeClassToggle=function(e){return e&&k.forEach(function(e){i.removeClass(e,R)}),u.off("start.internal_class end.internal_class"),R=void 0,k=[],u},w(),u};var r={defaults:{duration:0,offset:0,triggerElement:void 0,triggerHook:.5,reverse:!0,loglevel:2},validate:{offset:function(e){if(e=parseFloat(e),!i.type.Number(e))throw 0;return e},triggerElement:function(e){if(e=e||void 0){var t=i.get.elements(e)[0];if(!t||!t.parentNode)throw 0;e=t}return e},triggerHook:function(e){var t={onCenter:.5,onEnter:1,onLeave:0};if(i.type.Number(e))e=Math.max(0,Math.min(parseFloat(e),1));else{if(!(e in t))throw 0;e=t[e]}return e},reverse:function(e){return!!e}},shifts:["duration","offset","triggerHook"]};e.Scene.addOption=function(e,t,n,i){e in r.defaults||(r.defaults[e]=t,r.validate[e]=n,i&&r.shifts.push(e))},e.Scene.extend=function(t){var n=this;e.Scene=function(){return n.apply(this,arguments),this.$super=i.extend({},this),t.apply(this,arguments)||this},i.extend(e.Scene,n),e.Scene.prototype=n.prototype,e.Scene.prototype.constructor=e.Scene},e.Event=function(e,t,n,r){r=r||{};for(var i in r)this[i]=r[i];return this.type=e,this.target=this.currentTarget=n,this.namespace=t||"",this.timeStamp=this.timestamp=Date.now(),this};var i=e._util=function(e){var t,n={},r=function(e){return parseFloat(e)||0},i=function(t){return t.currentStyle?t.currentStyle:e.getComputedStyle(t)},o=function(t,n,o,s){if(n=n===document?e:n,n===e)s=!1;else if(!u.DomElement(n))return 0;t=t.charAt(0).toUpperCase()+t.substr(1).toLowerCase();var a=(o?n["offset"+t]||n["outer"+t]:n["client"+t]||n["inner"+t])||0;if(o&&s){var l=i(n);a+="Height"===t?r(l.marginTop)+r(l.marginBottom):r(l.marginLeft)+r(l.marginRight)}return a},s=function(e){return e.replace(/^[^a-z]+([a-z])/g,"$1").replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})};n.extend=function(e){for(e=e||{},t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e},n.isMarginCollapseType=function(e){return["block","flex","list-item","table","-webkit-box"].indexOf(e)>-1};var a=0,l=["ms","moz","webkit","o"],c=e.requestAnimationFrame,f=e.cancelAnimationFrame;for(t=0;!c&&t<l.length;++t)c=e[l[t]+"RequestAnimationFrame"],f=e[l[t]+"CancelAnimationFrame"]||e[l[t]+"CancelRequestAnimationFrame"];c||(c=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-a)),i=e.setTimeout(function(){t(n+r)},r);return a=n+r,i}),f||(f=function(t){e.clearTimeout(t)}),n.rAF=c.bind(e),n.cAF=f.bind(e);var u=n.type=function(e){return Object.prototype.toString.call(e).replace(/^\[object (.+)\]$/,"$1").toLowerCase()};u.String=function(e){return"string"===u(e)},u.Function=function(e){return"function"===u(e)},u.Array=function(e){return Array.isArray(e)},u.Number=function(e){return!u.Array(e)&&e-parseFloat(e)+1>=0},u.DomElement=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName};var d=n.get={};return d.elements=function(t){var n=[];if(u.String(t))try{t=document.querySelectorAll(t)}catch(r){return n}if("nodelist"===u(t)||u.Array(t))for(var i=0,o=n.length=t.length;o>i;i++){var s=t[i];n[i]=u.DomElement(s)?s:d.elements(s)}else(u.DomElement(t)||t===document||t===e)&&(n=[t]);return n},d.scrollTop=function(t){return t&&"number"==typeof t.scrollTop?t.scrollTop:e.pageYOffset||0},d.scrollLeft=function(t){return t&&"number"==typeof t.scrollLeft?t.scrollLeft:e.pageXOffset||0},d.width=function(e,t,n){return o("width",e,t,n)},d.height=function(e,t,n){return o("height",e,t,n)},d.offset=function(e,t){var n={top:0,left:0};if(e&&e.getBoundingClientRect){var r=e.getBoundingClientRect();n.top=r.top,n.left=r.left,t||(n.top+=d.scrollTop(),n.left+=d.scrollLeft())}return n},n.addClass=function(e,t){t&&(e.classList?e.classList.add(t):e.className+=" "+t)},n.removeClass=function(e,t){t&&(e.classList?e.classList.remove(t):e.className=e.className.replace(RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))},n.css=function(e,t){if(u.String(t))return i(e)[s(t)];if(u.Array(t)){var n={},r=i(e);return t.forEach(function(e){n[e]=r[s(e)]}),n}for(var o in t){var a=t[o];a==parseFloat(a)&&(a+="px"),e.style[s(o)]=a}},n}(window||{});return e});
define('Tabs',['jquery', 'ScrollMagic', 'StickyKit', 'scorebootstrap', 'matchHeight', 'promise-polyfill'], function ($, ScrollMagic) {
    'use strict';

    //stickyTabs mobile logic
    var mobileStickyTabs = function () {
        if (document.querySelector('.first-highlight-trigger')) {
            if ($(".first-highlight-trigger").offset()) {
                var distance = $(".first-highlight-trigger").offset().top;
                var $window = $(window);
                var headerHeight = $(".guided-selling-body .score-header").outerHeight();
                var stickyTabsHeight = $(".guided-selling-body .rde-navigation-tabs").outerHeight();
                var totalHeight = headerHeight + stickyTabsHeight;

                var currentState = 0;
                var lastState = 0;

                $window.scroll(function() {
                    if ($window.width() < 992) {
                        var stripePosition = $(".score-stripe.rde-block-wrapper").offset().top;

                        var offsetTop = $(".rde-navigation-tabs").height() * 2; //twice the tabs
                        offsetTop += $("header").height(); // + the fixed header

                        if (($window.scrollTop() > (distance - offsetTop)) &&
                            (($window.scrollTop() - stripePosition) < -totalHeight)) {
                            currentState = 1;
                        } else {
                            currentState = 0;
                        }

                        if (currentState != lastState) {
                            if (currentState === 0) {
                                $(".rde-navigation-tabs").removeClass("fixed");
                                $(".rde-navigation-tabs").addClass("static");
                            } else {
                                $(".rde-navigation-tabs").removeClass("static");
                                $(".rde-navigation-tabs").addClass("fixed");
                            }

                            lastState = currentState;
                        }
                    }
                });
            }
        }
    };

    new Promise(function (resolve, reject) {
        //need to scope this
        mobileStickyTabs();

        $(window).on("resize", function () {
            mobileStickyTabs();
        });

        //Sticky
        if ($(window).width() > 991) {
            $('.rde-side-tabs').stick_in_parent({ offset_top: 152, recalc_every: 1 });
        }

        var resizeId;

        //Calling Guided Selling logic - sticky kit, mobile sticky tabs, matchHeight on window resize
        $(window).on("resize", function () {
            clearTimeout(resizeId);
            resizeId = setTimeout(function () {
                if ($(window).width() > 991) {
                    $('.rde-side-tabs').stick_in_parent({ offset_top: 152, recalc_every: 1 });
                    $('.guided-selling-wrapper .score-column2 .score-left, .guided-selling-wrapper .score-column2 .score-right').matchHeight()
                }
            }, 250);

            if ($(window).width() < 992) {
                $(".rde-side-tabs").trigger("sticky_kit:detach");
            }
        });

        //Guided Selling ScrollMagic tabs animation
        var secondActiveButton = $('.rde-navigation-tabs .score-style-box .score-image-button:nth-child(2)');

        ////Set active first side tab
        $(".rde-navigation-tabs .score-style-box:first-of-type").addClass("rde-navigaction-tabs-active");
        $(".rde-navigation-tabs .score-style-box:first-of-type .score-image-button:nth-child(2)").addClass("active");

        var controller = new ScrollMagic.Controller();

        new ScrollMagic.Scene({ triggerElement: ".guided-selling-wrapper .first-highlight-trigger", duration: 200, offset: 200 })
            .on('enter', function () {
                $(".rde-navigation-tabs .score-style-box:first-of-type").addClass("rde-navigaction-tabs-active");
                $(secondActiveButton).addClass("active");
                $(".rde-navigation-tabs .score-style-box:nth-child(2)").removeClass("rde-navigaction-tabs-active");
            }).addTo(controller);

        new ScrollMagic.Scene({ triggerElement: ".guided-selling-wrapper .second-highlight-trigger", duration: 200, offset: 50 })
            .on('enter', function () {
                $(".rde-navigation-tabs .score-style-box:first-of-type").removeClass("rde-navigaction-tabs-active");
                $(".rde-navigation-tabs .score-style-box:first-of-type .score-image-button:nth-child(2)").removeClass("active");
                $(".rde-navigation-tabs .score-style-box:nth-child(2)").addClass("rde-navigaction-tabs-active");
                $(secondActiveButton).addClass("active");
                $(".rde-navigation-tabs .score-style-box:nth-child(3)").removeClass("rde-navigaction-tabs-active");
            }).addTo(controller);

        new ScrollMagic.Scene({ triggerElement: ".guided-selling-wrapper .third-highlight-trigger", duration: 200, offset: 30 })
            .on('enter', function () {
                $(".rde-navigation-tabs .score-style-box:nth-child(2)").removeClass("rde-navigaction-tabs-active");
                $(".rde-navigation-tabs .score-style-box:nth-child(2) .score-image-button:nth-child(2)").removeClass("active");
                $(".rde-navigation-tabs .score-style-box:nth-child(3)").addClass("rde-navigaction-tabs-active");
                $(secondActiveButton).addClass("active");
                $(".rde-navigation-tabs .score-style-box:nth-child(4)").removeClass("rde-navigaction-tabs-active");
            }).addTo(controller);

        new ScrollMagic.Scene({ triggerElement: ".guided-selling-wrapper .fourth-highlight-trigger", duration: 200, offset: 0 })
            .on('enter', function () {
                $(".rde-navigation-tabs .score-style-box:nth-child(3)").removeClass("rde-navigaction-tabs-active");
                $(".rde-navigation-tabs .score-style-box:nth-child(3) .score-image-button:nth-child(2)").removeClass("active");
                $(".rde-navigation-tabs .score-style-box:nth-child(4)").addClass("rde-navigaction-tabs-active");
                $(secondActiveButton).addClass("active");
            }).addTo(controller);

        resolve();
    });
});

define('Corporate',[
    "jquery", 
    "slick",
    "ellipsis",
    "matchHeight",
    "promise-polyfill"
],
    function ($, slick, ellipsis) {
    "use strict";

    new Promise(function (resolve, reject) {
        if (document.querySelector('.article-slider')) {
            //Dynamic news article slider
            $('.article-slider').slick({
                slidesToShow: 3,
                slidesToScroll: 1,
                dots: true,
                infinite: true,
                focusOnSelect: true,
                responsive: [
                    {
                        breakpoint: 991,
                        settings: {
                            slidesToShow: 2,
                            slidesToScroll: 2
                        }
                    },
                    {
                        breakpoint: 480,
                        settings: {
                            slidesToShow: 1,
                            slidesToScroll: 1
                        }
                    }
                ],
                arrows: true
            });
            $(".article-slider a").click(function (e) {
                e.stopPropagation();
            });
        }

        //MatchHeight
        if (document.querySelector('.corporate-slick-slider .slick-slider .score-highlight')) {
            $('.corporate-slick-slider .slick-slider .score-highlight .score-highlight-body').matchHeight();
            $('.corporate-slick-slider .slick-slider .score-highlight').matchHeight();
        }
        
        if (document.querySelector('.thumbnail-slider .score-highlight')) {
            //$('.thumbnail-slider .score-highlight').matchHeight();
            $('.thumbnail-slider .score-highlight .score-highlight-body').matchHeight();
            $('.thumbnail-slider .score-highlight .heading-wrapper').matchHeight();
        }

        if (document.querySelector('.articles-list .article')) {
            $('.articles-list .article').matchHeight();
        }
        
        if (document.querySelector('.score-highlight.rde-news-white-wrapper')) {
            $('.score-highlight.rde-news-white-wrapper').matchHeight();
        }
        
        if (document.querySelector('.article-slider .article')) {
            $('.article-slider .article').matchHeight();
            $(window).on('resize', function () {
                $('.article-slider .article').matchHeight();
            });
        }

        //News list ellipsis
        var root = document.querySelector(".CoveoSearchInterface");
        if (root) {
            Coveo.$$(root).on("newResultsDisplayed", function (e, args) {
                $('.rde-coveo-content-wrapper .rde-coveo-item-title').ellipsis({
                    lines: 2,
                    ellipClass: 'ellip',
                    responsive: true
                });
            });
        }
        resolve();

        //RRW-8569
        if (!$('.article-image').children().length > 0) {
            $('.rde-news-container .score-style-box.rde-offset-box').addClass('no-image');
        }
    });
});

define('AriaLabel',['jquery', 'scorebootstrap', 'promise-polyfill'], function ($) {
    'use strict';

    function SetAriaLabel() {
        //RRW-14198 AMP 2
        //set arial-Label to anchor tag having target='_blank'
        var decodeHtmlUmlautCharCodes = str => str.replace(/(&#(\d+);)/g, (match, capture, charCode) => String.fromCharCode(charCode));
        $('a[target="_blank"]').not('.CoveoResultLink').each(function () {
            var ariaLabel = $(this).attr('aria-label');
            if (typeof ariaLabel !== "undefined" && ariaLabel.trim().length > 0) {
                $(this).attr('aria-label', $(this).attr('aria-label') + "," + decodeHtmlUmlautCharCodes(resideoSitecoreDictionary.openInNewWindowLabel));
            }
            else if ($(this).text().trim().length > 0) {
                $(this).attr('aria-label', $(this).text() + "," + decodeHtmlUmlautCharCodes(resideoSitecoreDictionary.openInNewWindowLabel));
            }
        });
    }
    new Promise(function (resolve, reject) {
        SetAriaLabel();
        resolve();
    });
});
;(function(root, factory) {
  if (typeof exports === 'object') {
    module.exports = factory(window, document)
  } else {
    root.SimpleScrollbar = factory(window, document)
  }
})(this, function(w, d) {
  var raf = w.requestAnimationFrame || w.setImmediate || function(c) { return setTimeout(c, 0); };

  function initEl(el) {
    if (Object.prototype.hasOwnProperty.call(el, 'data-simple-scrollbar')) return;
    Object.defineProperty(el, 'data-simple-scrollbar', { value: new SimpleScrollbar(el) });
  }

  // Mouse drag handler
  function dragDealer(el, context) {
    var lastPageY;

    el.addEventListener('mousedown', function(e) {
      lastPageY = e.pageY;
      el.classList.add('ss-grabbed');
      d.body.classList.add('ss-grabbed');

      d.addEventListener('mousemove', drag);
      d.addEventListener('mouseup', stop);

      return false;
    });

    function drag(e) {
      var delta = e.pageY - lastPageY;
      lastPageY = e.pageY;

      raf(function() {
        context.el.scrollTop += delta / context.scrollRatio;
      });
    }

    function stop() {
      el.classList.remove('ss-grabbed');
      d.body.classList.remove('ss-grabbed');
      d.removeEventListener('mousemove', drag);
      d.removeEventListener('mouseup', stop);
    }
  }

  // Constructor
  function ss(el) {
    this.target = el;

    this.direction = w.getComputedStyle(this.target).direction;

    this.bar = '<div class="ss-scroll">';

    this.wrapper = d.createElement('div');
    this.wrapper.setAttribute('class', 'ss-wrapper');

    this.el = d.createElement('div');
    this.el.setAttribute('class', 'ss-content');

    if (this.direction === 'rtl') {
      this.el.classList.add('rtl');
    }

    this.wrapper.appendChild(this.el);

    while (this.target.firstChild) {
      this.el.appendChild(this.target.firstChild);
    }
    this.target.appendChild(this.wrapper);

    this.target.insertAdjacentHTML('beforeend', this.bar);
    this.bar = this.target.lastChild;

    dragDealer(this.bar, this);
    this.moveBar();

    w.addEventListener('resize', this.moveBar.bind(this));
    this.el.addEventListener('scroll', this.moveBar.bind(this));
    this.el.addEventListener('mouseenter', this.moveBar.bind(this));

    this.target.classList.add('ss-container');

    var css = w.getComputedStyle(el);
  	if (css['height'] === '0px' && css['max-height'] !== '0px') {
    	el.style.height = css['max-height'];
    }
  }

  ss.prototype = {
    moveBar: function(e) {
      var totalHeight = this.el.scrollHeight,
          ownHeight = this.el.clientHeight,
          _this = this;

      this.scrollRatio = ownHeight / totalHeight;

      var isRtl = _this.direction === 'rtl';
      var right = isRtl ?
        (_this.target.clientWidth - _this.bar.clientWidth + 18) :
        (_this.target.clientWidth - _this.bar.clientWidth) * -1;

      raf(function() {
        // Hide scrollbar if no scrolling is possible
        if(_this.scrollRatio >= 1) {
          _this.bar.classList.add('ss-hidden')
        } else {
          _this.bar.classList.remove('ss-hidden')
          _this.bar.style.cssText = 'height:' + Math.max(_this.scrollRatio * 100, 10) + '%; top:' + (_this.el.scrollTop / totalHeight ) * 100 + '%;right:' + right + 'px;';
        }
      });
    }
  }

  function initAll() {
    var nodes = d.querySelectorAll('*[ss-container]');

    for (var i = 0; i < nodes.length; i++) {
      initEl(nodes[i]);
    }
  }

  d.addEventListener('DOMContentLoaded', initAll);
  ss.initEl = initEl;
  ss.initAll = initAll;

  var SimpleScrollbar = ss;
  return SimpleScrollbar;
});

define("simpleScrollbar", function(){});

(function(root) {
define("timepicker", ["jquery"], function() {
  return (function() {
/*! bootstrap-timepicker v0.5.2 
* http://jdewit.github.com/bootstrap-timepicker 
* Copyright (c) 2016 Joris de Wit and bootstrap-timepicker contributors 
* MIT License 
*/!function(a,b,c){"use strict";var d=function(b,c){this.widget="",this.$element=a(b),this.defaultTime=c.defaultTime,this.disableFocus=c.disableFocus,this.disableMousewheel=c.disableMousewheel,this.isOpen=c.isOpen,this.minuteStep=c.minuteStep,this.modalBackdrop=c.modalBackdrop,this.orientation=c.orientation,this.secondStep=c.secondStep,this.snapToStep=c.snapToStep,this.showInputs=c.showInputs,this.showMeridian=c.showMeridian,this.showSeconds=c.showSeconds,this.template=c.template,this.appendWidgetTo=c.appendWidgetTo,this.showWidgetOnAddonClick=c.showWidgetOnAddonClick,this.icons=c.icons,this.maxHours=c.maxHours,this.explicitMode=c.explicitMode,this.handleDocumentClick=function(a){var b=a.data.scope;b.$element.parent().find(a.target).length||b.$widget.is(a.target)||b.$widget.find(a.target).length||b.hideWidget()},this._init()};d.prototype={constructor:d,_init:function(){var b=this;this.showWidgetOnAddonClick&&this.$element.parent().hasClass("input-group")&&this.$element.parent().hasClass("bootstrap-timepicker")?(this.$element.parent(".input-group.bootstrap-timepicker").find(".input-group-addon").on({"click.timepicker":a.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":a.proxy(this.highlightUnit,this),"click.timepicker":a.proxy(this.highlightUnit,this),"keydown.timepicker":a.proxy(this.elementKeydown,this),"blur.timepicker":a.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":a.proxy(this.mousewheel,this)})):this.template?this.$element.on({"focus.timepicker":a.proxy(this.showWidget,this),"click.timepicker":a.proxy(this.showWidget,this),"blur.timepicker":a.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":a.proxy(this.mousewheel,this)}):this.$element.on({"focus.timepicker":a.proxy(this.highlightUnit,this),"click.timepicker":a.proxy(this.highlightUnit,this),"keydown.timepicker":a.proxy(this.elementKeydown,this),"blur.timepicker":a.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":a.proxy(this.mousewheel,this)}),this.template!==!1?this.$widget=a(this.getTemplate()).on("click",a.proxy(this.widgetClick,this)):this.$widget=!1,this.showInputs&&this.$widget!==!1&&this.$widget.find("input").each(function(){a(this).on({"click.timepicker":function(){a(this).select()},"keydown.timepicker":a.proxy(b.widgetKeydown,b),"keyup.timepicker":a.proxy(b.widgetKeyup,b)})}),this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=null,this.updateFromElementVal()},clear:function(){this.hour="",this.minute="",this.second="",this.meridian="",this.$element.val("")},decrementHour:function(){if(this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else this.hour<=0?this.hour=this.maxHours-1:this.hour--},decrementMinute:function(a){var b;b=a?this.minute-a:this.minute-this.minuteStep,0>b?(this.decrementHour(),this.minute=b+60):this.minute=b},decrementSecond:function(){var a=this.second-this.secondStep;0>a?(this.decrementMinute(!0),this.second=a+60):this.second=a},elementKeydown:function(a){switch(a.which){case 9:if(a.shiftKey){if("hour"===this.highlightedUnit){this.hideWidget();break}this.highlightPrevUnit()}else{if(this.showMeridian&&"meridian"===this.highlightedUnit||this.showSeconds&&"second"===this.highlightedUnit||!this.showMeridian&&!this.showSeconds&&"minute"===this.highlightedUnit){this.hideWidget();break}this.highlightNextUnit()}a.preventDefault(),this.updateFromElementVal();break;case 27:this.updateFromElementVal();break;case 37:a.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:switch(a.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update();break;case 39:a.preventDefault(),this.highlightNextUnit(),this.updateFromElementVal();break;case 40:switch(a.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update()}},getCursorPosition:function(){var a=this.$element.get(0);if("selectionStart"in a)return a.selectionStart;if(c.selection){a.focus();var b=c.selection.createRange(),d=c.selection.createRange().text.length;return b.moveStart("character",-a.value.length),b.text.length-d}},getTemplate:function(){var a,b,c,d,e,f;switch(this.showInputs?(b='<input type="text" class="bootstrap-timepicker-hour" maxlength="2"/>',c='<input type="text" class="bootstrap-timepicker-minute" maxlength="2"/>',d='<input type="text" class="bootstrap-timepicker-second" maxlength="2"/>',e='<input type="text" class="bootstrap-timepicker-meridian" maxlength="2"/>'):(b='<span class="bootstrap-timepicker-hour"></span>',c='<span class="bootstrap-timepicker-minute"></span>',d='<span class="bootstrap-timepicker-second"></span>',e='<span class="bootstrap-timepicker-meridian"></span>'),f='<table><tr><td><a href="#" data-action="incrementHour"><span class="'+this.icons.up+'"></span></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><span class="'+this.icons.up+'"></span></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><span class="'+this.icons.up+'"></span></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><span class="'+this.icons.up+'"></span></a></td>':"")+"</tr><tr><td>"+b+'</td> <td class="separator">:</td><td>'+c+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+d+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+e+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><span class="'+this.icons.down+'"></span></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><span class="'+this.icons.down+'"></span></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><span class="'+this.icons.down+'"></span></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><span class="'+this.icons.down+'"></span></a></td>':"")+"</tr></table>",this.template){case"modal":a='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">&times;</a><h3>Pick a Time</h3></div><div class="modal-content">'+f+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';break;case"dropdown":a='<div class="bootstrap-timepicker-widget dropdown-menu">'+f+"</div>"}return a},getTime:function(){return""===this.hour?"":this.hour+":"+(1===this.minute.toString().length?"0"+this.minute:this.minute)+(this.showSeconds?":"+(1===this.second.toString().length?"0"+this.second:this.second):"")+(this.showMeridian?" "+this.meridian:"")},hideWidget:function(){this.isOpen!==!1&&(this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),"modal"===this.template&&this.$widget.modal?this.$widget.modal("hide"):this.$widget.removeClass("open"),a(c).off("mousedown.timepicker, touchend.timepicker",this.handleDocumentClick),this.isOpen=!1,this.$widget.detach())},highlightUnit:function(){this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.showMeridian?this.highlightMeridian():this.showSeconds?this.highlightSecond():this.highlightMinute();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var a=this.$element.get(0),b=this;this.highlightedUnit="hour",a.setSelectionRange&&setTimeout(function(){b.hour<10?a.setSelectionRange(0,1):a.setSelectionRange(0,2)},0)},highlightMinute:function(){var a=this.$element.get(0),b=this;this.highlightedUnit="minute",a.setSelectionRange&&setTimeout(function(){b.hour<10?a.setSelectionRange(2,4):a.setSelectionRange(3,5)},0)},highlightSecond:function(){var a=this.$element.get(0),b=this;this.highlightedUnit="second",a.setSelectionRange&&setTimeout(function(){b.hour<10?a.setSelectionRange(5,7):a.setSelectionRange(6,8)},0)},highlightMeridian:function(){var a=this.$element.get(0),b=this;this.highlightedUnit="meridian",a.setSelectionRange&&(this.showSeconds?setTimeout(function(){b.hour<10?a.setSelectionRange(8,10):a.setSelectionRange(9,11)},0):setTimeout(function(){b.hour<10?a.setSelectionRange(5,7):a.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}return this.hour===this.maxHours-1?void(this.hour=0):void this.hour++},incrementMinute:function(a){var b;b=a?this.minute+a:this.minute+this.minuteStep-this.minute%this.minuteStep,b>59?(this.incrementHour(),this.minute=b-60):this.minute=b},incrementSecond:function(){var a=this.second+this.secondStep-this.second%this.secondStep;a>59?(this.incrementMinute(!0),this.second=a-60):this.second=a},mousewheel:function(b){if(!this.disableMousewheel){b.preventDefault(),b.stopPropagation();var c=b.originalEvent.wheelDelta||-b.originalEvent.detail,d=null;switch("mousewheel"===b.type?d=-1*b.originalEvent.wheelDelta:"DOMMouseScroll"===b.type&&(d=40*b.originalEvent.detail),d&&(b.preventDefault(),a(this).scrollTop(d+a(this).scrollTop())),this.highlightedUnit){case"minute":c>0?this.incrementMinute():this.decrementMinute(),this.highlightMinute();break;case"second":c>0?this.incrementSecond():this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian();break;default:c>0?this.incrementHour():this.decrementHour(),this.highlightHour()}return!1}},changeToNearestStep:function(a,b){return a%b===0?a:Math.round(a%b/b)?(a+(b-a%b))%60:a-a%b},place:function(){if(!this.isInline){var c=this.$widget.outerWidth(),d=this.$widget.outerHeight(),e=10,f=a(b).width(),g=a(b).height(),h=a(b).scrollTop(),i=parseInt(this.$element.parents().filter(function(){return"auto"!==a(this).css("z-index")}).first().css("z-index"),10)+10,j=this.component?this.component.parent().offset():this.$element.offset(),k=this.component?this.component.outerHeight(!0):this.$element.outerHeight(!1),l=this.component?this.component.outerWidth(!0):this.$element.outerWidth(!1),m=j.left,n=j.top;this.$widget.removeClass("timepicker-orient-top timepicker-orient-bottom timepicker-orient-right timepicker-orient-left"),"auto"!==this.orientation.x?(this.$widget.addClass("timepicker-orient-"+this.orientation.x),"right"===this.orientation.x&&(m-=c-l)):(this.$widget.addClass("timepicker-orient-left"),j.left<0?m-=j.left-e:j.left+c>f&&(m=f-c-e));var o,p,q=this.orientation.y;"auto"===q&&(o=-h+j.top-d,p=h+g-(j.top+k+d),q=Math.max(o,p)===p?"top":"bottom"),this.$widget.addClass("timepicker-orient-"+q),"top"===q?n+=k:n-=d+parseInt(this.$widget.css("padding-top"),10),this.$widget.css({top:n,left:m,zIndex:i})}},remove:function(){a("document").off(".timepicker"),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime:function(a){if(this.$element.val())this.updateFromElementVal();else if("current"===a){var b=new Date,c=b.getHours(),d=b.getMinutes(),e=b.getSeconds(),f="AM";0!==e&&(e=Math.ceil(b.getSeconds()/this.secondStep)*this.secondStep,60===e&&(d+=1,e=0)),0!==d&&(d=Math.ceil(b.getMinutes()/this.minuteStep)*this.minuteStep,60===d&&(c+=1,d=0)),this.showMeridian&&(0===c?c=12:c>=12?(c>12&&(c-=12),f="PM"):f="AM"),this.hour=c,this.minute=d,this.second=e,this.meridian=f,this.update()}else a===!1?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(a)},setTime:function(a,b){if(!a)return void this.clear();var c,d,e,f,g,h;if("object"==typeof a&&a.getMonth)e=a.getHours(),f=a.getMinutes(),g=a.getSeconds(),this.showMeridian&&(h="AM",e>12&&(h="PM",e%=12),12===e&&(h="PM"));else{if(c=(/a/i.test(a)?1:0)+(/p/i.test(a)?2:0),c>2)return void this.clear();if(d=a.replace(/[^0-9\:]/g,"").split(":"),e=d[0]?d[0].toString():d.toString(),this.explicitMode&&e.length>2&&e.length%2!==0)return void this.clear();f=d[1]?d[1].toString():"",g=d[2]?d[2].toString():"",e.length>4&&(g=e.slice(-2),e=e.slice(0,-2)),e.length>2&&(f=e.slice(-2),e=e.slice(0,-2)),f.length>2&&(g=f.slice(-2),f=f.slice(0,-2)),e=parseInt(e,10),f=parseInt(f,10),g=parseInt(g,10),isNaN(e)&&(e=0),isNaN(f)&&(f=0),isNaN(g)&&(g=0),g>59&&(g=59),f>59&&(f=59),e>=this.maxHours&&(e=this.maxHours-1),this.showMeridian?(e>12&&(c=2,e-=12),c||(c=1),0===e&&(e=12),h=1===c?"AM":"PM"):12>e&&2===c?e+=12:e>=this.maxHours?e=this.maxHours-1:(0>e||12===e&&1===c)&&(e=0)}this.hour=e,this.snapToStep?(this.minute=this.changeToNearestStep(f,this.minuteStep),this.second=this.changeToNearestStep(g,this.secondStep)):(this.minute=f,this.second=g),this.meridian=h,this.update(b)},showWidget:function(){this.isOpen||this.$element.is(":disabled")||(this.$widget.appendTo(this.appendWidgetTo),a(c).on("mousedown.timepicker, touchend.timepicker",{scope:this},this.handleDocumentClick),this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.place(),this.disableFocus&&this.$element.blur(),""===this.hour&&(this.defaultTime?this.setDefaultTime(this.defaultTime):this.setTime("0:0:0")),"modal"===this.template&&this.$widget.modal?this.$widget.modal("show").on("hidden",a.proxy(this.hideWidget,this)):this.isOpen===!1&&this.$widget.addClass("open"),this.isOpen=!0)},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM"},update:function(a){this.updateElement(),a||this.updateWidget(),this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}})},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){this.setTime(this.$element.val())},updateWidget:function(){if(this.$widget!==!1){var a=this.hour,b=1===this.minute.toString().length?"0"+this.minute:this.minute,c=1===this.second.toString().length?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(a),this.$widget.find("input.bootstrap-timepicker-minute").val(b),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(c),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(a),this.$widget.find("span.bootstrap-timepicker-minute").text(b),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(c),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(this.$widget!==!1){var a=this.$widget.find("input.bootstrap-timepicker-hour").val()+":"+this.$widget.find("input.bootstrap-timepicker-minute").val()+(this.showSeconds?":"+this.$widget.find("input.bootstrap-timepicker-second").val():"")+(this.showMeridian?this.$widget.find("input.bootstrap-timepicker-meridian").val():"");this.setTime(a,!0)}},widgetClick:function(b){b.stopPropagation(),b.preventDefault();var c=a(b.target),d=c.closest("a").data("action");d&&this[d](),this.update(),c.is("input")&&c.get(0).setSelectionRange(0,2)},widgetKeydown:function(b){var c=a(b.target),d=c.attr("class").replace("bootstrap-timepicker-","");switch(b.which){case 9:if(b.shiftKey){if("hour"===d)return this.hideWidget()}else if(this.showMeridian&&"meridian"===d||this.showSeconds&&"second"===d||!this.showMeridian&&!this.showSeconds&&"minute"===d)return this.hideWidget();break;case 27:this.hideWidget();break;case 38:switch(b.preventDefault(),d){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),c.get(0).setSelectionRange(0,2);break;case 40:switch(b.preventDefault(),d){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),c.get(0).setSelectionRange(0,2)}},widgetKeyup:function(a){(65===a.which||77===a.which||80===a.which||46===a.which||8===a.which||a.which>=48&&a.which<=57||a.which>=96&&a.which<=105)&&this.updateFromWidgetInputs()}},a.fn.timepicker=function(b){var c=Array.apply(null,arguments);return c.shift(),this.each(function(){var e=a(this),f=e.data("timepicker"),g="object"==typeof b&&b;f||e.data("timepicker",f=new d(this,a.extend({},a.fn.timepicker.defaults,g,a(this).data()))),"string"==typeof b&&f[b].apply(f,c)})},a.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,disableMousewheel:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,orientation:{x:"auto",y:"auto"},secondStep:15,snapToStep:!1,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:"body",showWidgetOnAddonClick:!0,icons:{up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},maxHours:24,explicitMode:!1},a.fn.timepicker.Constructor=d,a(c).on("focus.timepicker.data-api click.timepicker.data-api",'[data-provide="timepicker"]',function(b){var c=a(this);c.data("timepicker")||(b.preventDefault(),c.timepicker())})}(jQuery,window,document);

  }).apply(root, arguments);
});
}(this));

function euCookieImplementationRun(culture, domain) {
    var defaultResult = {
        "culture": "en-US",
        "bannerText": "This site uses cookies to simplify and improve your usage and experience with this website.  Cookies are small text files stored on the device you are using to access this website.  If you ignore or close this message and continue without turning off your cookies in your browser settings, we will assume that you are consenting to our use of cookies on this website and on related HOMES websites.  For further information on our use of cookies, please see our ",
        "privacyStatementText": "Privacy Statement",
        "privacyStatementLink": "//eubanner.honeywellhome.com/Privacy/Pages/en.aspx",
        "consentButtonText": "Don't show this message again"
    };

    // Get the Master Cookie Name and Value
    var masterCookieName = BannerConstants.get('MASTER_COOKIE_NAME');
    var masterCookieValue = BannerConstants.get('MASTER_COOKIE_VALUE');

    // Create our instances

    var cookieJar = new CookieJar(masterCookieName, masterCookieValue, domain);
    var repository = new BannerRepository(BannerConstants.get("COOKIE_SERVICE_URL"), culture, defaultResult);
    var controller = new BannerController(cookieJar, repository);
    var bannerView = new BannerView(controller);

    // Render the view
    bannerView.render();

    // Tell the Controller about the view
    controller.setView(bannerView);

    // Ask the controller to evaluate if the user gave a prior
    // Implied Consent
    controller.evaluateImpliedConsent();

}


var BannerConstants = (function () {

    var privateData = {
        'COOKIE_SERVICE_URL': '//eubanner.honeywellhome.com/api/BannerText/',
        'COOKIE_BANNER_DIV_ID_SELECTOR': '#HOMESEUCookie-Banner',
        'COOKIE_BANNER_TEXT_ID_SELECTOR': '#HOMESEUCookie-BannerText',
        'COOKIE_BANNER_PRIVACY_LINK_ID_SELECTOR': '#HOMESEUCookie-PrivacyLink',
        'COOKIE_BANNER_PRIVACY_TEXT_ID_SELECTOR': '#HOMESEUCookie-PrivacyText',
        'COOKIE_BANNER_CONSENT_BUTTON_ID_SELECTOR': '#HOMESEUCookie-CookieDismiss',
        'MASTER_COOKIE_NAME': '__HOMESEUCookie',
        'MASTER_COOKIE_VALUE': 'Set',
        'CookieExpirationPeriodInMilliSeconds': 15552000000 // 180 days * 24 hrs/day * 60 mins/hr * 60 secs/min * 1000 millisecs/sec
    };

    return {
        get: function (name) { return privateData[name]; }
    };

})();
//
//  BannerController.js
//
//  This is the 'Controller' component in our MVC (Model-View-Controller) architecture
//
//
function BannerController(cookieJar, repository) {

    // The cookieJar object handles the cookie CRUD functions
    this.cookieJar = cookieJar;

    // Save a reference to our Repository
    this.repository = repository;

    // This method will check if implied consent was given earlierEval
    // by the user. We do this by checking the tracking cookie value
    this.evaluateImpliedConsent = function () {
        this.view.hideBanner();
        if (!this.cookieJar.exists()) {
            repository.get(jQuery.proxy(this.onBannerTextReturned, this));
        }
    };

    // When the Banner Info is returned, we:
    //  1. Show the View
    //  2. Update the Banner Elements
    this.onBannerTextReturned = function (thedata) {
        this.view.showBanner();
        this.view.setBannerInfo(thedata);
    };

    // This method handles the implied consent
    // We need to do the following upon Implied Consent:
    //  1. Hide the Banner
    //  2. Create our tracking cookie
    this.impliedConsent = function () {
        this.cookieJar.createCookie();
        this.view.hideBanner();
    };

    // Save our View Reference
    this.setView = function (val) {
        this.view = val;
    };

} // class BannerController
//
//  BannerRepository.js
//
//  This file implements the "Repository" (aka the "Model" in our Model-View-Controller
//  architecture)
//
//  This is the only class which is aware of the Back-End Rest Service
//
function BannerRepository(baseUrl, culture, defaultResult) {

    this.baseUrl = baseUrl;
    // Save the passed-in Culture
    this.culture = culture;
    this.defaultResult = defaultResult;

    // This is our method which received the CookieBanner object from
    // our REST Service
    this.get = function (onSuccess) {
        var self = this;
        CrossDomainClient.ajax({
            url: self.baseUrl + self.culture,
            success: function (theData) {
                onSuccess(theData);
            },
            error: function (xhr, ajaxOption, thrownError) {
                onSuccess(self.defaultResult);
            }
        }
        );
    };
} // class BannerRepository
//
//  Function BannerView. This is the "View" component of our MVC (Model-View-Controller)
//  architecture
//
function BannerView(controller) {

    // Save a reference to our controller
    this.controller = controller;

    var bannerDivId = BannerConstants.get('COOKIE_BANNER_DIV_ID_SELECTOR');
    var bannerTextId = BannerConstants.get('COOKIE_BANNER_TEXT_ID_SELECTOR');
    var bannerPrivacyTextId = BannerConstants.get('COOKIE_BANNER_PRIVACY_TEXT_ID_SELECTOR');
    var bannerPrivacyLinkId = BannerConstants.get('COOKIE_BANNER_PRIVACY_LINK_ID_SELECTOR');
    var consentButtonId = BannerConstants.get('COOKIE_BANNER_CONSENT_BUTTON_ID_SELECTOR');

    // Save a reference to the Banner as a whole
    this.root = jQuery(bannerDivId);

    // Save a reference to the Consent Button
    this.closeButton = jQuery(consentButtonId);

    // This method sets the differnt Cookie Banner Components
    this.setBannerInfo = function (theCookieBannerData) {

        // Set the main Banner Text
        jQuery(bannerTextId).append(theCookieBannerData.bannerText);

        // Set the Privacy Text
        jQuery(bannerPrivacyTextId).append(theCookieBannerData.privacyStatementText);

        // Set the Privacy Link
        jQuery(bannerPrivacyLinkId).attr('href', theCookieBannerData.privacyStatementLink);

        // Set the text of the "Consent Button"
        this.closeButton.html(theCookieBannerData.consentButtonText);
    };

    // This method renders our view
    this.render = function () {

        // Hookup our Event Handler on our Consent Button
        this.closeButton.click(jQuery.proxy(this.onCloseButtonClick, this));
    };

    this.onCloseButtonClick = function (e) {
        e.preventDefault();
        this.controller.impliedConsent();
    };

    // Method to show the view
    this.hideBanner = function () {
        this.root.hide();
    };

    // Method to hide the view
    this.showBanner = function () {
        this.root.show();
    };

} // class BannerView
//
//  CookieJar.js 
//
//  This class implements the pure-Cookie-related functionality
//  for the EU Cookie Compliance Solution
//
function CookieJar(name, expectedFlag, domain) {

    // Save the name and expected value of the Master Cookie
    this.name = name;
    this.expectedFlag = expectedFlag;

    // Save the domain
    this.domain = domain;

    // This method tests existance of the Cookie by 
    // evaluating both the name and expected value of 
    // the cookie
    this.exists = function () {

        var value = this.getCookieValue();
        if (value === undefined) {
            return false;
        } else {
            return value === this.expectedFlag;
        }

    }; // method exists

    // This method creates our Master Cookie
    this.createCookie = function () {

        // Get the expiration period
        var expiration = this.getCookieExpirationPeriodString();

        // Create our Cookie string, and set the cookie
        var cookie = this.name + "=" + this.expectedFlag + "|" + this.domain + "; expires=" + expiration + "; path=/" + "; domain=" + this.domain + ";";
        //        var cookie = this.name + "=" + this.expectedFlag + "; expires=" + expiration + "; path=/";
        //jQuery.cookie(this.name, this.expectedFlag, { path: '/', domain: this.domain });
        this.setCookie(cookie);

    }; // method createCookie

    // This method returns the cookie value
    // For details on the algorithm used, please refer to: http://www.quirksmode.org/js/cookies.html
    this.getCookieValue = function () {

        var ca = this.getCookies();
        for (var i = 0; i < ca.length; i++) {
            var parsed = ca[i].split("|")
            var domain = parsed[1]
            var value = parsed[0]
            var c = ca[i];
            while (value.charAt(0) == ' ') {
                value = value.substring(1, c.length);
            }

            if (value.indexOf(this.name) == 0 && domain == this.domain) {
                return value.substring(this.name.length + 1, c.length);
            }
        }

        return undefined;

    }; // method getCookieValue

    // This private method reutrns the Cookie Expiration Date
    // We use the 'CookieExpirationPeriodInMilliSeconds' constant to 
    // control the expiration period
    this.getCookieExpirationPeriodString = function () {

        var cookieExpirationInMilliseconds = BannerConstants.get('CookieExpirationPeriodInMilliSeconds');
        var date = new Date();
        date.setTime(date.getTime() + cookieExpirationInMilliseconds);
        return date.toGMTString();

    }; // method getCookieExpirationPeriodString

    // This method sets our cookie value
    this.setCookie = function (value) {
        document.cookie = value;
    };

    // This method splits up our document.cookie string (in split-up format)
    this.getCookies = function () {
        return document.cookie.split(';');
    };

} // class CookieJar
var CrossDomainClient = {}
CrossDomainClient.ajax = function (settings) {
    if (/msie/.test(navigator.userAgent.toLowerCase()) && window.XDomainRequest) {
        var xdr = new XDomainRequest();
        xdr.open("get", settings.url);
        xdr.onload = function () {
            var JSON = jQuery.parseJSON(xdr.responseText);
            if (JSON == null || typeof (JSON) == 'undefined') {
                JSON = jQuery.parseJSON(data.firstChild.textContent);
            }
            settings.success(JSON);
        };
        xdr.onerror = function () {
            settings.error();
        };
        xdr.onprogress = function () { };
        xdr.ontimeout = function () { };
        setTimeout(function () {
            xdr.send();
        }, 0);
    } else {
        jQuery.ajax(settings);
    }
};
define("eucookiebanner", function(){});

;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('validation',["jquery", "jqueryValidate", "jqueryValidateUnobtrusive", "jqueryUnobtrusiveAjax"], factory) :
        typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("jqueryValidate"), require("jqueryValidateUnobtrusive"), require("jqueryUnobtrusiveAjax")) :
            console && console.error('rde.jquery.validate.unobtrusive does not support non-amd script loading.');
}(this/* window */, function ($) {

    $.validator.unobtrusive.adapters.add(
        'shouldmatch', ['propertyname'], function (options) {
            options.rules['shouldmatch'] = options.params;
            options.messages['shouldmatch'] = options.message;
        }
    );

    $.validator.addMethod('shouldmatch', function (value, element, params) {
        var valueToCompare = "";
        var closestForm = $(element).closest('form');

        var elementNew = findByName(closestForm, params.propertyname);
        if (elementNew.attr('type') === "checkbox") {
            valueToCompare = elementNew.is(":checked");
        } else {
            valueToCompare = elementNew.val();
        }

        if (valueToCompare.toString().toLowerCase() === value.toString().toLowerCase())
            return true;

        return false;
    }, '');

    function findByName(currentForm, name) {
        return currentForm.find("[name='" + name + "']");
    }
}));
; (function (global, factory) {
    typeof define === 'function' && define.amd ? define('bullseyeService',["jquery", "endpoints", "eventManager", "promise-polyfill"], factory) :
        typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("endpoints"), require("eventManager"), require("promise-polyfill")) :
            console && console.error('Bullseye does not support non-amd script loading.');
}(this/* window */, function ($, endpoints, eventManager) {

    function BullseyeService() {

    }

    BullseyeService.prototype.fetchStores = function fetch(siteName, zip, radius, pageIndex, pageSize, sorting, categories, city, state, country) {
        jqXhr = $.ajax({
            url: endpoints.GetProfessionalsEndpoint,
            type: "GET",
            data: { SiteName: siteName, ZipCode: zip, Radius: radius, StartIndex: pageIndex, PageSize: pageSize, SortingType: sorting, Categories: categories, City: city, State: state, Country:country  },
            error: function (e) {
                eventManager.trigger("error-bullseye-search", e.status);
            }
        });

        return jqXhr;
    };


    BullseyeService.prototype.fetchCategories = function fetch(siteName, zip, radius, type, city, state) {
        jqXhr = $.ajax({
            url: endpoints.GetCategoriesEndpoint,
            type: "GET",
            data: { SiteName: siteName, ZipCode: zip, Radius: radius, Type: type, City: city, State: state }
        });

        return jqXhr;
    };


    BullseyeService.prototype.GetFiltersDataForFilterIds = function GetFiltersDataForFilterIds(siteName, filterIds) {
        jqXhr = $.ajax({
            url: endpoints.GetFiltersDataForFilterIds,
            type: "GET",
            data: { SiteName: siteName, commaSeparatedFilterIds: filterIds }
        });

        return jqXhr;
    };

    return new BullseyeService(); // singleton
}));
; (function (global, factory) {
    typeof define === 'function' && define.amd ? define('geolocationService',["jquery", "endpoints", "promise-polyfill"], factory) :
        typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("endpoints"), require("promise-polyfill")) :
        console && console.error('Bullseye does not support non-amd script loading.');
}(this/* window */, function ($, endpoints) {

    function GeolocationService() {

    }

    GeolocationService.prototype.fetchZipCode = function fetchZipCode(latitude, longitude) {
        var jqXhr = $.ajax({
            url: endpoints.GetZipCode,
            type: "GET",
            data: { Latitude: latitude, Longitude: longitude }
        });

        return jqXhr;
    }

    return new GeolocationService(); // singleton
}));
define('findAPro',["jquery", 'eventManager', 'constants', 'endpoints', 'logService'], function ($, eventManager, constants, mvc, logService) {
    function FindAPro() { }

    FindAPro.prototype.SubmitContactForm = function (type, data, language) {
        if (!language)
            language = 'en-US';

        var submit_url = '';
        switch (type) {
            case 'HeatingAndCoolingPro':
                submit_url = mvc.FindProContactFormSubmitHeatingAndCooling;
                break;
            case 'PlumbingPro':
                submit_url = mvc.FindProContactFormSubmitPlumbing;
                break;
            case 'HomeSecurityPro':
                submit_url = mvc.FindProContactFormSubmitHomeSecurity;
                break;
        }

        if (submit_url) {
            $.ajax({
                url: submit_url + '?sc_lang=' + language,
                type: "POST",
                data: data
            }).done(function(data) {
                logService.log(this, data);

                if (data) {
                    eventManager.trigger(constants.FindAProSubmitted);
                }
            }).fail(function(jqXHR, textStatus, errorThrown) {
                logService.error(this, jqXHR);

                eventManager.trigger(constants.FindAProSubmitFailed, errorThrown);
            });
        }
    };

    return new FindAPro();
});
define('feedbackService',["jquery"],
    function ($) {
        function FeedbackService() { }

        FeedbackService.prototype.saveFeedback = function (site, articleId, isHelpful, title, comment, url) {

            var jqXhr = $.ajax({
                url: "/rde/savefeedback?sc_site=" + site,
                type: "POST",
                data: { articleId: articleId, helpful: isHelpful, title: title, comment: comment, url: url }
            });

            return jqXhr;
        };

        return new FeedbackService();
    });
define('getStartedService',["jquery", "endpoints", "logService"],
    function ($, mvc, logService) {
        function GetStartedService() { }

        GetStartedService.prototype.getProductsFromCategory = function getProductsFromCategory(typeId, dsId) {
            jqXhr = $.ajax({
                url: mvc.GetProductsFromCategory,
                type: "GET",
                data: { TypeId: typeId, DatasourceId: dsId }
            });

            return jqXhr;
        };

        return new GetStartedService();
    });
define('returnService',["jquery", "endpoints", "logService"],
    function ($, mvc, logService) {
        function ReturnService() { }

        ReturnService.prototype.submitReturn = function submitReturn(data) {
            jqXhr = $.ajax({
                url: mvc.SubmitReturn,
                type: "POST",
                data: { submitReturnArgs: data }
            });

            return jqXhr;
        };

        return new ReturnService();
    });
define('accessoryService',["jquery", "endpoints", "logService"],
    function ($, mvc, logService) {
        function AccessoryService() { }

        AccessoryService.prototype.submitOrder = function submitOrder(order) {
            jqXhr = $.ajax({
                url: mvc.SubmitAccessoryOrder,
                type: "POST",
                data: order
            });

            return jqXhr;
        };

        return new AccessoryService();
    });
define('shopperService',["jquery", "endpoints", "logService", "identityService","storageService"],
    function ($, mvc, logService, identityService, storage) {
        function ShopperService() { }

        ShopperService.prototype.getShopper = function (reload) {

            if (this.shopperPromise) {
                return this.shopperPromise;
            }

            this.shopperPromise = new Promise(function (resolve, reject) {
                var jqXhr = $.ajax({
                    url: mvc.GetShopper + "?token=" + storage.loadLocalECommerceToken(),
                    type: "GET",
                    contentType: "application/json; charset=utf-8"
                });

                jqXhr.done(function (data, textStatus, jqXHR) {
                    logService.log(this, data);
                    if (data) {
                        resolve(data);
                    }
                    else {
                        reject("No data Found");
                    }
                });

                jqXhr.fail(function (jqXHR, textStatus, errorThrown) {
                    logService.log(this, jqXHR);
                    reject(jqXhr);
                });
            });

            return this.shopperPromise;
        };
        return new ShopperService();
    });
define('contextService',["jquery"], function ($) {

    function ContextService() { }

    ContextService.prototype.getSite = function() {
        return $("#rde-site").attr("content");
    };

    ContextService.prototype.getSiteQueryParameter = function () {
        return "&rdesite=" + this.getSite();
    };

    ContextService.prototype.getLanguage = function () {
        return $("html").attr("lang");
    };

    ContextService.prototype.getLanguageQueryParameter = function () {
        return "&rdelanguage=" + this.getLanguage();
    };
    
    return new ContextService();
});
define('accessibilityService',["jquery"],
    function ($) {
        function AccessibilityService() { }

        AccessibilityService.prototype.modifyDDLAriaLabel = function modifyDDLAriaLabel(id, value) {
            var text = $("label[for="+id+"]").text();
            $("#" + id).attr("aria-label", text + " " + value + " " + resideoSitecoreDictionary.selectedLabel);
            $("#" + id).focus();
        };

        return new AccessibilityService();
    });
define('PersonalizationModal',['jquery', 'eventManager'], function ($, eventManager) {

    eventManager.subscribe("DisplayPresetModal1", function (data) {
        $.ajax({
            url: "/rde/getsnippetid",
            type: 'POST',
            data: { sitename: data.sitename }
        })
            .done(function (result) {
                if (result != "") {
                    $.ajax({
                        url: "/rde/get-snippet?s=" + result + "&l=" + data.lang,
                        type: 'GET',
                        contentType: 'application/json; charset=utf-8'
                    })
                        .done(function (data) {                           
                            $('<div class="modal fade promotional-modal" id="promotionalModal" tabindex="-1" role="dialog" aria-labelledby="promotionalModal">' +
                                '<div class="modal-dialog" role="document">' +
                                '<div class="modal-content"> <div class="modal-header">' +
                                '<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>' +
                                '<div class="modal-body">' +
                                data +
                                '</div></div></div>').modal();
                        });
                }
                else {
                    var cookieName = "newVisitor";
                    if (document.cookie.indexOf(cookieName) === -1) {
                        //not exists, add and show modal
                        var d = new Date();
                        var c = new Date(d.getFullYear() + 10, d.getMonth(), d.getDate());
                        document.cookie = cookieName + "=false;path=/; expires=" + c.toGMTString();
                        eventManager.trigger("NewVisitor:ShowModal");
                    }
                }

            });


    });

});


( function( $ ) {
	$.fn.paginate = function( options ) {
		var defaults = {
			pagination_class: "pagination",
			items_per_page: 4,
			prev_next: true,
            prev_text: '<svg focusable="false" enable-background="new 0 0 11 20" viewBox="0 0 11 20" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Left Arrow" class="product-list-pages-prev-icon-svg" alt="Left Arrow"><title>Left Arrow</title><g fill="currentColor"><path d="m10.692 1.811c.412-.413.411-1.086 0-1.5-.2-.201-.465-.311-.746-.311-.283 0-.548.11-.747.31l-8.892 8.939c-.198.2-.307.466-.307.75 0 .286.109.551.305.748l8.893 8.941c.2.201.466.312.748.312h.001c.281 0 .546-.11.745-.309.199-.201.308-.468.308-.753 0-.284-.109-.548-.306-.745l-8.146-8.194z"></path></g></svg>',
            next_text: '<svg focusable="false" enable-background="new 0 0 11 20" viewBox="0 0 11 20" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Right Arrow" class="product-list-pages-next-icon-svg" alt="Right Arrow"><title>Right Arrow</title><g fill="currentColor"><path d="m .308 18.189c-.412.413-.411 1.086 0 1.5.2.201.465.311.746.311.282 0 .547-.11.747-.31l8.891-8.939c.199-.2.307-.466.307-.75 0-.286-.109-.551-.305-.748l-8.893-8.942c-.199-.2-.465-.311-.747-.311-.001 0-.001 0-.001 0-.281 0-.546.11-.745.309-.198.201-.308.468-.308.753 0 .284.11.548.306.745l8.145 8.193z"></path></g></svg>'
		};

		// Merge deafults into options
		var options = $.extend( defaults, options );

		obj = $( this );

		// Count entries in block for pagination
       //  var n = obj.children().size();
        
        var n = obj.children().length;
		// Calculate number of pages
		var pages = Math.ceil( n / options.items_per_page );

		// Add a div after the #slideshow to put the navigation controls in
		if (pages > 1) {
			obj.append(
				$('<div/>').addClass(options.pagination_class + "__controls").append(
					$('<ul/>').attr("aria-label", "Pagination").addClass(options.pagination_class))
			);
        }

        function createPaginationControls(pages) {

            // Add Previous button
           
                if (options.prev_next == true) {
					obj.find("." + options.pagination_class).append('<li class="prev" aria-label="Previous" style="display:none"><a href="javascript:void(0)">' + options.prev_text + '</a></li>');
                }
               
			// For each div (slide) add a link in span for controls
			for ( var i = 0; i < pages; i++ ) {
				obj.find( "." + options.pagination_class ).append( '<li><a href="#' + ( i + 1 ) + '">' + ( i + 1 ) + '</a></li>' );
			};
          
                // Add Next Button
            if (options.prev_next == true) {
                if (pages > 3) {
                    obj.find("." + options.pagination_class).append('<li class="next" aria-label="Next"><a href="javascript:void(0)">' + options.next_text + '</a></li>');
                }
                else {
					obj.find("." + options.pagination_class).append('<li class="next" aria-label="Next" style="display:none" ><a href="javascript:void(0)">' + options.next_text + '</a></li>');
                }
            }
       
        }

        
		function showPage( page_number ) {
			var start_from = ( page_number * options.items_per_page );
			var end_on = ( ( page_number + 1 ) * options.items_per_page );
			obj.children().not( '.pagination__controls' ).css( 'display', 'none' ).slice( start_from, end_on ).css( 'display', 'block' );
		}

		function showHidePrevNext(liObj) {
			MoveToHeadPortion();

			if ($(liObj).text() == "" || pages <= 3)
				return;

			var number = parseInt($(liObj).text());

			if (number == 1)
				$(liObj).siblings(".prev").hide();
			else
				$(liObj).siblings(".prev").show();
			

			if (number == pages)
				$(liObj).siblings(".next").hide();
			else
				$(liObj).siblings(".next").show();
			
		}
		function MoveToHeadPortion() {
			var height = $(obj).offset().top - 200;
			$('html, body').animate({
				scrollTop: height
			}, 0);
		}
		createPaginationControls( pages );
		showPage( 0 );

        obj.find('.pagination li').not(".prev,.next").first().addClass('active');     

		// Navigate to the coresponding slide when clicking on a nav-control
		obj.find( '.pagination li' ).not( ".prev,.next" ).click( function() {

			// Reset the obj element to match the current pagination element
			obj = $(this).parent().parent().parent();

			if ( options.prev_next == true ) {
				var pageIndex = $( this ).index() - 1;
			} else {
				var pageIndex = $( this ).index();
			};

			// remove active class from all elements
			$(this).parent().children().removeClass( 'active' );
			$(this).addClass('active');
			showHidePrevNext(this);
			showPage( pageIndex );
		} );

		// Navigate to the previous slide when clicking on the prev button
		obj.find( '.pagination li.prev' ).click( function() {

			// Reset the obj element to match the current pagination element
			obj = $(this).parent().parent().parent();

			pageIndex = $( this ).parent().find( 'li.active' ).index() - 2;
			if ( pageIndex < 0 ) pageIndex = 0;

			$( this ).parent().find( 'li.active' ).removeClass( 'active' );
			$(this).parent().find('li:nth-child(' + (pageIndex + 2) + ')').addClass('active');
			showHidePrevNext($(this).siblings(".active"));
			showPage( pageIndex );
		} );

		// Navigate to the next slide when clicking on the next button
		obj.find( '.pagination li.next' ).click( function() {

			// Reset the obj element to match the current pagination element
			obj = $(this).parent().parent().parent();

			pageIndex = $( this ).parent().find( 'li.active' ).index();
			if ( pageIndex > pages - 1 ) pageIndex = pages - 1;

			$( this ).parent().find( 'li.active' ).removeClass( 'active' );
			$(this).parent().find('li:nth-child(' + (pageIndex + 2) + ')').addClass('active');
			showHidePrevNext($(this).siblings(".active"));
			showPage( pageIndex );
		} );

	};
})(jQuery);

jQuery(document).ready(function () {
    jQuery("div").find("[id ^='pagination-']").each(function () {
        var items = jQuery(this).find(".two-rows").length;
        var Itemsperpage = 4;
        if (items > 0) {
            Itemsperpage = 8;
        }
        jQuery(this).paginate({
            items_per_page: Itemsperpage
        });
    });
});
    
define("pagination", function(){});

define('componentHero',["analyticsCore"], function(core) {
    function AnalyticsComponentHero() { }

    AnalyticsComponentHero.prototype.init = function() {
        // ...
    };

    return new AnalyticsComponentHero();
});
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/Accordion',["jquery", "eventManager", 'loglevel', "cssEscape"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require('loglevel'), require("cssEscape")) :
    console && console.error('Accordion does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, log) {

    function Accordion(scope, stateChangeMessages) {
        var self = this;
        Object.defineProperty(this, "$scope", { enumerable: true, value: $(scope) });

        //#region message transmitter registration
        if (stateChangeMessages.length) {
            this.$scope.on("shown.bs.collapse hidden.bs.collapse", function () {

                stateChangeMessages.forEach(function (eventName) {
                    log.debug("Accordion raises message: \'%s\'", eventName);

                    eventManager.trigger(eventName, self);
                });

                return false;
            });
        }
        //#endregion

        this._setupDeepLinking();
    }

    Accordion.prototype._setupDeepLinking = function () {
        var that = this;
        // make accordion panel with anchors change the URL to make them sticky
        this.$scope.on('shown.bs.collapse',
            function (e) {
                var anchor = '';
                var oldHash = window.location.hash.substring(1);

                var anchorLink = $(e.target).closest('.panel').find('a[data-toggle="collapse"][href*="#collapse-"][data-anchorable="True"]');
                if (anchorLink.length) {
                    anchor = anchorLink.attr("href").replace("#collapse-", "");
                }

                if (anchor) {
                    window.history && window.history.pushState && window.history.pushState(null, null, '#' + anchor);
                    window.location.hash = anchor;
                } else {
                    // if we open a panel without deep linking, we should release previously selected anchorable panel.
                    if (oldHash && $(e.target).closest('.panel-group').find('a[data-toggle="collapse"][href*="#' + CSS.escape('collapse-' + oldHash) + '"][data-anchorable="True"]').length) {
                        // clear hash without page jump in modern browsers
                        window.history && window.history.pushState && window.history.pushState(null, null, '');
                        window.location.hash = '';
                    }
                    // otherwise we don't care.
                }
            });

        // make all tabs with anchors to be visible when we walk along the browser history
        $(window).on("hashchange", function () {
            if (!window.location.hash) return !1;
            
            // find a tab which should be activated within current tabset. otherwise keep tabset without any changes.
            var panel = that.$scope.find('a[href="#' + CSS.escape('collapse-' + window.location.hash.substring(1)) + '"]');
            if (panel.length) {
                panel.trigger("click");
            }
        });
    }


    Accordion.init = function init(args) {
        return args.IsEditorEditing === true ? null : new Accordion(args.scope, args.StateChangeMessagesTransmitting || []);
    };

    return Accordion;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/AccordionPanel',["jquery", "eventManager"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager")) :
    console && console.error('AccordionPanel does not support non-amd script loading.');
}(this/* window */, function ($, eventManager) {
    function AccordionPanel(scope, stateChangeMessages, onShowMessagesPerformer, onHideMessagePerformer) {
        ///<summary>Initialize a new instance of AccordionPanel. Subscribe to messages which are passed to current instance.</summary>

        var self = this;
        Object.defineProperty(this, "scope", { enumerable: true, value: scope });
        Object.defineProperty(this, "$scope", { enumerable: true, value: $(scope) });

        //#region state change message transmitter registration
        if (stateChangeMessages.length) {
            this.$scope.find('.collapse').on("shown.bs.collapse hidden.bs.collapse", function () {
                stateChangeMessages.forEach(function (eventName) {
                    eventManager.trigger(eventName, self);
                });

                return !1;
            });
        }
        //#endregion

        //#region show messages performer
        if (onShowMessagesPerformer.length) {
            onShowMessagesPerformer.forEach(function(messageName) {
                eventManager.subscribe(messageName, self.show, self);
            });
        }
        //#endregion

        //#region hide mesage performer
        if (onHideMessagePerformer.length) {
            onHideMessagePerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.hide, self);
            });
        }
        //#endregion

        this.$scope.find('.collapse').on('shown.bs.collapse', this._onPanelShowHandler.bind(this));
        this.$scope.find('.collapse').on('hidden.bs.collapse', this._onPanelHideHandler.bind(this));
    }

    AccordionPanel.prototype._onPanelShowHandler = function (e) {
        $(this).trigger('focus', [this, e]);
    }

    AccordionPanel.prototype._onPanelHideHandler = function (e) {
        $(this).trigger('blur', [this, e]);
    }

    /**
     * Unfold current accordion panel
     */
    AccordionPanel.prototype.show = function () {
        this.$scope.find('.collapse').collapse('show');
    }

    /**
     * Fold current accordion panel
     */
    AccordionPanel.prototype.hide = function () {
        this.$scope.find('.collapse').collapse('hide');
    }

    AccordionPanel.init = function init(args) {
        if (args.IsEditorEditing) return null;

        var accordion = new AccordionPanel(args.scope,
            args.StateChangeMessagesTransmitting || [],
            args.ShowActionMessages || [],
            args.HideActionMessages || []);

        return accordion;
    };

    return AccordionPanel;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/BackToTop',["jquery", "eventManager"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager")) :
    console && console.error('Back To Top does not support non-amd script loading.');
}(this/* window */, function ($, eventManager) {
    function BackToTop(scope, clickMessagesTransmitting, stateChangeMessages, onShowMessagesPerformer, onHideMessagePerformer, animationDuration, showOnScroll, showOnScrollOffset) {
        ///<summary>Initialize a new instance of Back To Top. Subscribe to messages which are passed to current instance.</summary>

        var self = this;
        
        Object.defineProperties(this, {
            scope: { enumerable: true, value: scope },
            $scope: { enumerable: true, value: $(scope) },
            stateChangeMessages: { enumerable: true, value: stateChangeMessages.slice() }
        });

        BackToTop.prototype.scroll = function () {
            var scrollTop = $(window).scrollTop();
            if (scrollTop > showOnScrollOffset) {
                this.$scope.show();
            } else {
                this.$scope.hide();
            }
        };

        if (showOnScroll) {
            this.scroll();

            $(window).on('scroll', function () {
                self.scroll();
            });
        }
      
        this.$scope.on("click", function (e) { 
            e.preventDefault();
            $('html,body').animate({
                scrollTop: 0
            }, animationDuration);
        });

        //#region click messages transmitting registration
        if (clickMessagesTransmitting.length) {
            this.$scope.on("click", function (e) {
                e.preventDefault();
                clickMessagesTransmitting.forEach(function (ev) {
                    eventManager.trigger(ev, self);
                });

                return !1;
            }).on('keyup', function (e) {
                // catch enter key only
                if (e.keyCode === 13) {
                    e.preventDefault();
                    clickMessagesTransmitting.forEach(function (ev) {
                        eventManager.trigger(ev, self);
                    });

                    return !1;
                }
            });
        }
        //#endregion

        //#region show messages performer
        if (onShowMessagesPerformer.length) {
            onShowMessagesPerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.show, self);
            });

        }
        //#endregion


        //#region hide mesage performer
        if (onHideMessagePerformer.length) {
            onHideMessagePerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.hide, self);
            });
        }
        //#endregion

        this.$scope.on('focus', this._onFocusHandler.bind(this));
        this.$scope.on('blur', this._onBlurHandler.bind(this));
    }

    BackToTop.prototype._onFocusHandler = function (e) {
        $(this).trigger('focus', [this, e]);
    }

    BackToTop.prototype._onBlurHandler = function (e) {
        $(this).trigger('blur', [this, e]);
    }

    BackToTop.prototype.show = function () {
        ///<summary>Make panel visible with jQuery.show() method.</summary>
        this.$scope.show();

        var self = this;
        if (this.stateChangeMessages.length) {
            this.stateChangeMessages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    };

    BackToTop.prototype.hide = function () {
        ///<summary>Make panel hidden with jQuery.hide() method.</summary>
        this.$scope.hide();

        var self = this;
        if (this.stateChangeMessages.length) {
            this.stateChangeMessages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    };

    BackToTop.init = function init(args) {
        if (args.IsEditorEditing) return null;

        var button = new BackToTop(args.scope,
            args.ClickMessagesTransmitting || [],
            args.StateChangeMessagesTransmitting || [],
            args.ShowActionMessages || [],
            args.HideActionMessages || [],
            args.AnimationDuration || 1000,
            args.ShowOnScroll,
            args.ShowOnScrollOffset || 100);

        return button;
    };

    return BackToTop;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/BasicMenuItem',["jquery", "eventManager", 'loglevel'], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require('loglevel')) :
    console && console.error('BasicMenuItem does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, log) {
    function BasicMenuItem(scope, clickMessagesTransmitting) {
        var self = this;
        Object.defineProperty(this, "$scope", { enumerable: true, value: $(scope) });


        //#region click messages transmitting registration
        if (clickMessagesTransmitting.length) {
            this.$scope.on("click", "a", function (e) {
                e.preventDefault();

                clickMessagesTransmitting.forEach(function (eventName) {
                    log.debug("BasicMenuItem raises message: \'%s\'", eventName);

                    eventManager.trigger(eventName, self);
                });

                return !1;
            });
        }
        //#endregion
    }

    BasicMenuItem.init = function init(args) {
        return args.IsEditorEditing === true
            ? null
            : new BasicMenuItem(args.scope,
                                args.ClickMessagesTransmitting || []);
    };

    return BasicMenuItem;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/BrightcoveVideo',["jquery", "eventManager", 'loglevel'], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require('loglevel')) :
    console && console.error('BrightcoveVideo does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, log) {

    function BrightcoveVideo(scope, stateChangeMessages, onPlayMessagesPerformer, onPauseMessagePerformer, id, allowFullScreen, showCaptioning) {
        ///<summary>Initialize a new instance of YoutubeVideo. Subscribe to messages which are passed to current instance.</summary>

        var self = this, instance = {};
        instance.stateChangeMessages = stateChangeMessages.slice();
        
        Object.defineProperties(this, {
            $scope: { enumerable: true, value: $(scope) },
            stateChangeMessages: {
                enumerable: true,
                get: function () {
                    return instance.stateChangeMessages.slice();
                }
            },
            player: { enumerable: false, value: videojs(id) },
            isInteractedWithUser: { enumerable: true, configurable: true, writable: true, value: false }
        });

        this.addStateChangeMessage = function addStateChangeMessage(message) {
            if (!message) return;
            if (instance.stateChangeMessages.indexOf(message) > -1) {
                log.debug("Component is already registered for event " + message);
                return;
            }
            
            instance.stateChangeMessages.push(String(message));
        };

        //#region play message performer
        if (onPlayMessagesPerformer.length) {
            onPlayMessagesPerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.play, self);
            });
        }
        //#endregion

        //#region show messages performer
        if (onPauseMessagePerformer.length) {
            onPauseMessagePerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.pause, self);
            });
        }
        //#endregion

        if (this.stateChangeMessages.length) {
            this.stateChangeMessages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }

        if (!allowFullScreen) {
            self.$scope.find('.vjs-fullscreen-control').hide();
        }

        if (showCaptioning) {
            this.player.on("loadedmetadata", this._onLoadedMetadataHandler.bind(this));
        }

        this.player.on("play", this._onPlayHandler.bind(this));
        this.player.on("pause", this._onPauseHandler.bind(this));
    }

    BrightcoveVideo.prototype._onPlayHandler = function (e) {
        this.isInteractedWithUser = true;
    }

    BrightcoveVideo.prototype._onPauseHandler = function (e) {
        this.isInteractedWithUser = true;
    }

    BrightcoveVideo.prototype._onLoadedMetadataHandler = function () {
        // Get the browser language 
        var browserLanguage = navigator.language || navigator.userLanguage; // IE <= 10;
        browserLanguage = browserLanguage.substr(0, 2);
        // Get the captions
        var trackLanguage;
        var tracks = this.player.textTracks();

        for (var i = 0; i < (tracks.length); i++) {
            trackLanguage = tracks[i].language.substr(0, 2);
            // Set the default caption language
            // When the caption language equals the browser language, then set it as default 
            if (trackLanguage) {
                if (trackLanguage === browserLanguage) {
                    tracks[i].mode = "showing";
                    return;
                } else {
                    tracks[i].mode = "disabled";
                }
            }
        }
    }

    BrightcoveVideo.prototype.play = function () {
        ///<summary>Start playing the video.</summary>

        if (this.isInteractedWithUser) {
            this.player.muted(false);
            this.player.volume(1.0);
        }

        this.player.play();

        this.transmitStateChange();
    }

    BrightcoveVideo.prototype.pause = function () {
        ///<summary>Put the video on pause.</summary>

        this.player.pause();

        this.transmitStateChange();
    }

    BrightcoveVideo.prototype.transmitStateChange = function () {
        var messages = this.stateChangeMessages, self = this;
        if (messages.length) {
            messages.forEach(function (ev) {
                eventManager.trigger(ev, self, self.player);
            });
        }

    }
    // #endregion

    BrightcoveVideo.init = function init(args) {
        return args.IsEditorEditing === true
            ? null
            : new BrightcoveVideo(args.scope,
                                  args.StateChangeMessagesTransmitting || [],
                                  args.PlayActionMessages || [],
                                  args.PauseActionMessages || [],
                                  args.Id,
                                  args.AllowFullScreen,
                                  args.ShowCaptioning);
    };

    return BrightcoveVideo;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/Button',["jquery", "eventManager"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager")) :
    console && console.error('Button does not support non-amd script loading.');
}(this/* window */, function ($, eventManager) {
    function Button(scope, clickMessagesTransmitting, stateChangeMessages, onShowMessagesPerformer, onHideMessagePerformer) {
        ///<summary>Initialize a new instance of Button. Subscribe to messages which are passed to current instance.</summary>

        var self = this;
        Object.defineProperties(this, {
            scope: { enumerable: true, value: scope },
            $scope: { enumerable: true, value: $(scope) },
            stateChangeMessages: { enumerable: true, value: stateChangeMessages.slice() }
        });

        //#region click messages transmitting registration
        if (clickMessagesTransmitting.length) {
            this.$scope.on("click", function (e) {
                e.preventDefault();
                clickMessagesTransmitting.forEach(function (ev) {
                    eventManager.trigger(ev, self);
                });

                return !1;
            }).on('keyup', function (e) {
                // catch enter key only
                if (e.keyCode === 13) {
                    e.preventDefault();
                    clickMessagesTransmitting.forEach(function (ev) {
                        eventManager.trigger(ev, self);
                    });

                    return !1;
                }
            });
        }
        //#endregion

        //#region show messages performer
        if (onShowMessagesPerformer.length) {
            onShowMessagesPerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.show, self);
            });

        }
        //#endregion


        //#region hide mesage performer
        if (onHideMessagePerformer.length) {
            onHideMessagePerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.hide, self);
            });
        }
        //#endregion

        this.$scope.on('focus', this._onFocusHandler.bind(this));
        this.$scope.on('blur', this._onBlurHandler.bind(this));
    }

    Button.prototype._onFocusHandler = function(e) {
        $(this).trigger('focus', [this, e]);
    }

    Button.prototype._onBlurHandler = function(e) {
        $(this).trigger('blur', [this, e]);
    }

    Button.prototype.show = function () {
        ///<summary>Make panel visible with jQuery.show() method.</summary>
        this.$scope.show();

        var self = this;
        if (this.stateChangeMessages.length) {
            this.stateChangeMessages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    };

    Button.prototype.hide = function () {
        ///<summary>Make panel hidden with jQuery.hide() method.</summary>
        this.$scope.hide();

        var self = this;
        if (this.stateChangeMessages.length) {
            this.stateChangeMessages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    };

    Button.init = function init(args) {
        if (args.IsEditorEditing) return null;

        var button = new Button(args.scope,
            args.ClickMessagesTransmitting || [],
            args.StateChangeMessagesTransmitting || [],
            args.ShowActionMessages || [],
            args.HideActionMessages || []);

        return button;
    };

    return Button;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/ButtonMenuItem',["jquery", "eventManager", 'loglevel'], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager")) :
    console && console.error('ButtonMenuItem does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, log) {

    function ButtonMenuItem(scope, clickMessagesTransmitting) {
        var self = this;
        Object.defineProperty(this, "scope", { enumerable: true, value: scope });
        Object.defineProperty(this, "$scope", { enumerable: true, value: $(scope) });
        Object.defineProperty(this, 'clickMessagesTransmitting', { enumerable: true, value: clickMessagesTransmitting });

        //#region click messages transmitting registration
        if (clickMessagesTransmitting.length) {
            this.$scope.on("click", "a", function (e) {
                e.preventDefault();

                clickMessagesTransmitting.forEach(function (eventName) {
                    log.debug("ButtonMenuItem raises message: \'%s\'", eventName);

                    eventManager.trigger(eventName, self);
                });

                return !1;
            }).on('keyup', 'a', function (e) {
                // catch enter key only
                if (e.keyCode === 13) {
                    e.preventDefault();
                    clickMessagesTransmitting.forEach(function (eventName) {
                        log.debug("ButtonMenuItem raises message: \'%s\'", eventName);

                        eventManager.trigger(eventName, self);
                    });

                    return !1;
                }
            });
        }
        //#endregion

        this.$scope.on('focus', 'a', this._onFocusHandler.bind(this));
        this.$scope.on('blur', 'a', this._onBlurHandler.bind(this));
    }

    ButtonMenuItem.prototype._onFocusHandler = function (e) {
        $(this).trigger('focus', [this, e]);
    }

    ButtonMenuItem.prototype._onBlurHandler = function (e) {
        $(this).trigger('blur', [this, e]);
    }

    ButtonMenuItem.init = function init(args) {
        if (args.IsEditorEditing) return null;

        var buttonMenuItem = new ButtonMenuItem(args.scope, args.ClickMessagesTransmitting || []);

        return buttonMenuItem;
    };

    return ButtonMenuItem;
}));
; (function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/Carousel',["jquery", "eventManager"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager")) :
    console && console.error('Carousel does not support non-amd script loading.');
}(this/* window */, function ($, eventManager) {

    function Carousel(scope, carouselId) {
        var self = this;
        Object.defineProperty(this, "scope", { enumerable: true, value: scope, writable: !1 });
        Object.defineProperty(this, "$scope", { enumerable: true, value: $(scope), writable: !1 });
        Object.defineProperty(this, 'lastDirection', { enumerable: !1, value: void 0, writable: !0 });

        self.buildIndicator(carouselId);
        self.fallbackIndicators(carouselId);

        this.$scope.on('slide.bs.carousel', this._onBeforeChangeSlide.bind(this));
        this.$scope.on('slid.bs.carousel', this._onAfterChangeSlide.bind(this));
    }


    Carousel.prototype.buildIndicator = function (carouselId) {
        var slides = $('.carousel-inner .item', this.$scope).map(function (i) {
            return "<li data-target=\"#" + carouselId + "\" data-slide-to=\"" + i + "\"" + (!i ? " class=\"active\"" : "") + "><!-- --></li>";
        }).get().join("");

        if (slides.length > 0) {
            this.$scope.prepend("<ol class=\"carousel-indicators\">" + slides + "</ol>");
        }
    }

    Carousel.prototype.fallbackIndicators = function (carouselId) {
        var $carousel = this.$scope;
        var id = carouselId;
        var relatedIndicators = $('li[data-target="#' + id + '"]', this.$scope);
        $carousel.on('slid.bs.carousel', function (e) {
            var index = $carousel.find('.carousel-inner .item').index($carousel.find('.carousel-inner .active'));
            relatedIndicators.removeClass('active');
            relatedIndicators.filter('[data-slide-to="' + index + '"]').addClass('active');
        });
    }

    /**
     * Notify the world about slide is going to be changed
     * @param {jQuery.Event} event from bootstrap carousel 
     */
    Carousel.prototype._onBeforeChangeSlide = function (e) {
        this.lastDirection = e.direction;
        $(this).trigger('beforeChange.slider', [this, e.direction]);
    }

    /**
     * Notify the world about slide was changed
     * @param {jQuery.Event} event from bootstrap carousel 
     */
    Carousel.prototype._onAfterChangeSlide = function (e) {
        this.lastDirection = e.direction;
        $(this).trigger('afterChange.slider', [this, e.direction]);
    }

    Carousel.init = function(args) {
        if (args.IsEditorEditing) return null;

        var carousel = new Carousel(args.scope, args.CarouselId || []);

        return carousel;
    }

    return Carousel;
}));

;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/CarouselPane',["jquery", "eventManager", 'loglevel'], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require('loglevel')) :
    console && console.error('CarouselPane does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, log) {

    function CarouselPane(scope, selectActionMessages) {
        var self = this;
        Object.defineProperty(this, "$scope", { enumerable: true, value: $(scope) });

        //#region select on mesage performer
        if (selectActionMessages.length) {
            selectActionMessages.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.makeActive, self);
            });
        }
        //#endregion
    }

    CarouselPane.prototype.makeActive = function () {
        var carousel = this.$scope.closest('.carousel');

        if (!carousel) {
            log.error("Cannot detect carousel element. Carousel panel selection canceled.");
            return !1;
        }

        var index = carousel.find('.carousel-inner > .item').index(this.$scope);
        carousel.carousel(index);
    };


    CarouselPane.init = function init(args) {
        return args.IsEditorEditing === true
            ? null
            : new CarouselPane(args.scope, args.SelectActionMessages || []);
    };

    return CarouselPane;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Utils/window',[], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory() :
    console && console.error('Window does not support non-amd script loading.');
}(this/* window */, function() {
    return this; /* window */
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Base/PictureAsBackground',["jquery", "picturefill", "score_bootstrap/Utils/window"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("picturefill"), require("score_bootstrap/Utils/window")) :
    console && console.error('PictureAsBackground does not support non-amd script loading.');
}(this/* window */, function ($, picturefill, global) {

    function PictureAsBackground($scope, picSelector, eePicSelector) {

        if (!this.$scope) { this.$scope = $scope; }
        this.picSelector = picSelector;
        this.eePicSelector = eePicSelector;

        // combination of a selector for the Published View HTML and a selector for the Experience Editor   
        this.allPicSelector = this.picSelector + "," + this.eePicSelector;
        // default image selector, looks into picture tag and find the default img
        this.defImgSelector = this.picSelector + " img," + this.eePicSelector + " img";

        // init picturefill for an old browser
        if (this.$scope.find(this.allPicSelector).length > 0) {
            picturefill({ context: this.$scope.find(this.allPicSelector).get(0) });
        }

        $(global).on('resize.score', this._resizeHandler.bind(this));
        this._updateBackgroundWhenImageLoaded();

        //#region Handle EE field update event.
        if (typeof Sitecore != typeof void 0 && typeof Sitecore.PageModes != typeof void 0 && Sitecore.PageModes != null && Sitecore.PageModes.PageEditor != null) {
            // wrap picture object into sitecore jQuery object, since SCORE use jQuery 3.x and Sitecore is on jQuery 1.x/2.x and they aren't compatable 
            var $scPicture = $sc(this.$scope.find(this.allPicSelector).get(0));

            var cId = Sitecore.PageModes.ChromeManager.getChrome($scPicture).controlId();
            var that = this;

            var originalHandleMessage = Sitecore.PageModes.ChromeTypes.Field.prototype.handleMessage;
            Sitecore.PageModes.ChromeTypes.Field.prototype.handleMessage = function (message, params, sender) {
                originalHandleMessage.call(this, message, params, sender);
                if (message === "chrome:field:editcontrolcompleted" && this.controlId() == cId) {
                    that._updateBackgroundWhenImageLoaded();
                }
            };
        }
        //#endregion EE handling end
    }

    PictureAsBackground.prototype.update = function () {
        var $img = this.$scope.find(this.defImgSelector);
        if (!$img.length) return;

        var img = $img.get(0);
        var src = img.currentSrc !== void 0 ? img.currentSrc : img.src;

        // image is not set, or was cleared.
        if (src.substr(-img.getAttribute('srcset').length) === img.getAttribute('srcset')) { // cannot use img.srcset because of IE11
            // clear background image
            this.$scope.css({ backgroundImage: "" });
            return;
        }

        // update background image for the parent only in case if it was changed, otherwise don't waste our time.
        if (this.$scope.css('backgroundImage') !== "url(" + src + ")") {
            this.$scope.css({ backgroundImage: "url(" + src + ")" });
        }
    }

    PictureAsBackground.prototype._resizeHandler = function () {
        this._updateBackgroundWhenImageLoaded();
    }

    PictureAsBackground.prototype._updateBackgroundWhenImageLoaded = function () {
        var $img = this.$scope.find(this.defImgSelector);
        if ($img.get(0).complete && $img.get(0).naturalHeight > 0) {
            // update background if image already loaded
            this.update();
        } else {
            // wait until a real picture image will be loaded, Otherwise we got default image (blank image).
            $img.on('load', this.update.bind(this));
        }
    }

    

    return PictureAsBackground;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/CarouselPicturePane',["jquery", "eventManager", 'loglevel', "score_bootstrap/Base/PictureAsBackground"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require('loglevel'), require("score_bootstrap/Base/PictureAsBackground")) :
    console && console.error('CarouselPane does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, log, PictureAsBackground) {

    function CarouselPicturePane(scope, selectActionMessages) {
        var self = this;

        Object.defineProperty(this, "$scope", { enumerable: !0, value: $(scope) });

        //#region select on mesage performer
        if (selectActionMessages.length) {
            selectActionMessages.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.makeActive, self);
            });
        }
        //#endregion

        PictureAsBackground.call(this, scope, '> .score-carousel-pic-pane-body > picture', '> .score-editField-group > .pic-thumb > picture');
    }

    CarouselPicturePane.prototype = Object.create(PictureAsBackground.prototype);

    CarouselPicturePane.prototype.makeActive = function () {
        var carousel = this.$scope.closest('.carousel');

        if (!carousel) {
            log.error("Cannot detect carousel element. Carousel panel selection canceled.");
            return !1;
        }

        var index = carousel.find('.carousel-inner > .item').index(this.$scope);
        carousel.carousel(index);
    };

    CarouselPicturePane.init = function init(args) {
        return new CarouselPicturePane(args.scope, args.SelectActionMessages || []);
    };

    return CarouselPicturePane;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/GoogleMap',["jquery", 'loglevel'], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require('loglevel')) :
    console && console.error('GoogleMap does not support non-amd script loading.');
}(this/* window */, function ($, log) {
    var defaultLat = 0, defaultLng = 0, defaultZoom = 12;

    function GoogleMap(scope, lat, lng, zoom, allowZoom, allowPan) {
        var $mapCanvas = $(".google-map-canvas", scope), $pinElements, center, map, $panel;

        if (!$mapCanvas.length) {
            log.warn("Skipping GoogleMap initialization, cannot find .google-map-canvas element");
            return;
        }
        log.debug(allowPan);
        $pinElements = $(".google-map-pin", $mapCanvas).remove();
        center = new google.maps.LatLng(lat, lng);
        map = new google.maps.Map($mapCanvas[0], {
            center: center,
            zoom: zoom,
            scrollwheel: false,
            zoomControl: allowZoom,
            disableDoubleClickZoom: !allowZoom,
            draggable: allowPan,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            panControl: allowPan
        });

        $pinElements.each(function () {
            var $pin = $(this);
            var description = $pin.html().trim();
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(parseFloat($pin.attr("data-lat")), parseFloat($pin.attr("data-lng"))),
                map: map,
                title: $pin.attr("data-title"),
                cursor: description ? 'pointer' : 'default'
            });

            if (description) {
                description = new google.maps.InfoWindow({ content: description });
                marker.addListener('click', function () {
                    description.open(map, marker);
                });
            }
        });

        google.maps.event.addListenerOnce(map, "idle", (function ($canvas) {
            var $iframe = $("iframe", $canvas);
            if ($iframe.length > 0) {
                $iframe.attr("title", "Google Map");
            }
        }).bind(null, $mapCanvas));

        $mapCanvas.show();

        // The map must be visible at the time when it is rendered, otherwise it does not render correctly.
        // In some cases, it is not visible on page load and needs to be rerendered manually.
        function rerender() {
            google.maps.event.trigger(map, 'resize');
            map.setCenter(center);
            map.setZoom(zoom);
        }

        // If the map is inside a variable column then it needs to be rerendered after it has been
        // initialized, otherwise it looks weird because its initialized while the width is 0.
        if ($mapCanvas.closest(".score-variable-column").length) {
            rerender();
        }

        // If the map is inside a hidden accordion/tab/modal panel, it needs to be rerendered when that panel is made visible.
        $panel = $mapCanvas.closest(".score-accordion-panel");
        if ($panel.length) {
            $panel.on("shown.bs.collapse", rerender);
        }

        $panel = $mapCanvas.closest(".score-tab");
        if ($panel.length) {
            $panel.on("shown.bs.tab", rerender);
        }

        $panel = $mapCanvas.closest(".score-modal");
        if ($panel.length) {
            $panel.on("shown.bs.modal", rerender);
        }

        // If the map is inside a hidden carousel pane it needs to be rerendered when that pane is made visible.
        $panel = $mapCanvas.closest(".score-carousel");
        if ($panel.length) {
            $panel.on("slid.bs.carousel", rerender);
        }
    }

    GoogleMap.init = function init(args) {
        return args.IsEditorEditing === true ? null : new GoogleMap(
            args.scope,
            parseFloat(args.Latitude) || defaultLat,
            parseFloat(args.Longitude) || defaultLng,
            parseInt(args.ZoomLevel || defaultZoom, 10),
            Boolean(args.AllowsZoom),
            Boolean(args.AllowsPan)
        );
    };

    //requireJS load handler - used for passing google maps key to require module definition
    GoogleMap.load = function (name, req, onLoad) {
        // load google deps with google key
        require(["https://maps.googleapis.com/maps/api/js?v=quarterly&key=" + name + "&libraries=places"], function () {
            onLoad(GoogleMap);
        });
    }

    return GoogleMap;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/IFrame',["jquery", "eventManager"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager")) :
    console && console.error('Iframe does not support non-amd script loading.');
}(this/* window */, function ($, eventManager) {

    function Iframe(scope) {
        ///<summary>Initialize a new instance of Iframe. Subscribe to messages which are passed to current instance.</summary>

        var self = this;
        Object.defineProperty(this, '$scope', { enumerable: true, value: $(scope) });

        var iframeComp = $('iframe', this.$scope);

        // #region calculate the size with 4:3 ratio
        if (iframeComp.data('autosize') !== 'disabled') {
            var iframeHolder = iframeComp.parent();
            var width = iframeHolder.width();

            //This calculation will set the size to a 4:3 ratio.
            iframeComp.css({
                'height': (width / 1.25 | 0) + 'px', 
                'width': width + 'px'
            });
        }
        //#endregion
    }

    Iframe.init = function init(args) {
        return args.IsEditorEditing === true
            ? null
            : new Iframe(args.scope);
    };

    return Iframe;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/KalturaVideo',["jquery", "eventManager", 'loglevel'], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require('loglevel')) :
    console && console.error('Kaltura Video does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, log) {

    function KalturaVideo(scope, targetId, wid, uiconfid, videoId, autoPlay, allowFullScreen, closedCaptions, stateChangeMessages, onPlayMessagesPerformer, onPauseMessagePerformer) {
        ///<summary>Initialize a new instance of KalturaVideo. Subscribe to messages which are passed to current instance.</summary>

        var self = this, instance = {};
        instance.stateChangeMessages = stateChangeMessages.slice();
        
        Object.defineProperties(this, {
            scope: { enumerable: true, value: scope },
            $scope: { enumerable: true, value: $(scope) },
            stateChangeMessages: {
                enumerable: true,
                get: function () {
                    return instance.stateChangeMessages.slice();
                }
            },
            trackPlayStartTimeout: {
                enumerable: !1,
                value: void 0,
                writable: !0
            },
            trackTimelineInterval: {
                enumerable: !1,
                value: void 0,
                writable: !0,
            },
            currentTime: {
                enumerable: !1,
                get: function() {
                    return this.player ? Math.floor(this.player.evaluate('{video.player.currentTime}')) : void 0;
                }
            }
        });
        
        this.addStateChangeMessage = function addStateChangeMessage(message) {
            if (!message) return;
            if (instance.stateChangeMessages.indexOf(message) > -1) {
                log.debug("Component is already registered for event " + message);
                return;
            }
            
            instance.stateChangeMessages.push(String(message));
        };

        //#region play message performer
        if (onPlayMessagesPerformer.length) {
            onPlayMessagesPerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.play, self);
            });
        }
        //#endregion

        //#region show messages performer
        if (onPauseMessagePerformer.length) {
            onPauseMessagePerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.pause, self);
            });
        }
        //#endregion
        
        if (this.stateChangeMessages.length) {
            this.stateChangeMessages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }

        Object.defineProperties(this,
            {
                videoId: { enumerable: !1, value: videoId },
                player: { enumerable: !1, value: void 0, writable: !0 }
            });

        var flashVars = { // flashvars allows you to set runtime uiVar configuration overrides. 
            'autoPlay': !!autoPlay,
            'autoMute': !!autoPlay
        }

        if (!!closedCaptions) {
            flashVars.closedCaptions = {
                'hideWhenEmpty': true
            };
        }

        kWidget.embed({
            'targetId': targetId,
            'wid': wid,
            'uiconf_id': uiconfid,
            'entry_id' : videoId,
            'flashvars': flashVars,
            'params':{ // params allows you to set flash embed params such as wmode, allowFullScreen etc
                    'wmode': 'transparent'
            },
            'readyCallback' : (function(playerId) {
                var player = document.querySelector('#' + playerId);
                this.player = player;
                //this.player.kBind('playerPlayed', this._onPlayHandler.bind(this));
                this.player.kBind('playerPaused', this._onPauseHandler.bind(this));
                this.player.kBind('playerPlayEnd', this._onEndedHandler.bind(this));
                this.player.kBind('playerStateChange', this._onStateChange.bind(this));

            }).bind(this)
        });

        mw.setConfig('EmbedPlayer.EnableFullscreen', !!allowFullScreen);
    }

    KalturaVideo.prototype._onStateChange = function (playerState) {
        if (playerState === 'playing') {
            this._onPlayHandler();
        }
    }
    KalturaVideo.prototype._onPlayHandler = function () {
        if (this.currentTime === 0) {
            $(this).trigger('start.video', [this.currentTime]);
        }

        $(this).trigger('update.timeline', [this.currentTime]);
        this.startTrackTimeline();
    }

    KalturaVideo.prototype._onPauseHandler = function () {
        this.stopTrackTimeline();
        if (Math.floor(this.player.evaluate('{duration}')) != this.currentTime) {
            $(this).trigger('pause.video', [this.currentTime]);
        }
    }

    KalturaVideo.prototype._onEndedHandler = function () {
        this.stopTrackTimeline();
        $(this).trigger('end.video', [this.currentTime]);
    }

    KalturaVideo.prototype.startTrackTimeline = function () {
        if (this.trackTimelineInterval) {
            clearInterval(this.trackTimelineInterval);
        }

        this.trackTimelineInterval = setInterval((function () {
            $(this).trigger('update.timeline', [this.currentTime]);
        }).bind(this), 1000 /* 1 second */);

        $(this).trigger('update.timeline', [this.currentTime]);
    }

    KalturaVideo.prototype.stopTrackTimeline = function () {
        if (this.trackTimelineInterval) {
            clearInterval(this.trackTimelineInterval);
        }
    }

    KalturaVideo.prototype.play = function () {
        ///<summary>Start playing the video.</summary>
        var kdp = this.$scope.find('.kaltura-wrapper')[0];
        kdp.sendNotification("doPlay");
        this.transmitStateChange();
    }

    KalturaVideo.prototype.pause = function () {
        ///<summary>Put the video on pause.</summary>
        var kdp = this.$scope.find('.kaltura-wrapper')[0];
        kdp.sendNotification("doPause");
        this.transmitStateChange();
    }

    KalturaVideo.prototype.transmitStateChange = function () {
        var messages = this.stateChangeMessages, self = this;
        if (messages.length) {
            messages.forEach(function (ev) {
                eventManager.trigger(ev, self, self.player);
            });
        }

    }
    // #endregion

    KalturaVideo.init = function init(args) {
        if (args.IsEditorEditing) return null;

        var video = new KalturaVideo(args.scope, args.targetId, args.wid, args.uiconfid, args.videoId, args.autoPlay, args.allowFullScreen, args.closedCaptions,
            args.StateChangeMessagesTransmitting || [],
            args.PlayActionMessages || [],
            args.PauseActionMessages || []);

        return video;
    };

    //requireJS load handler - used for passing Kaltura PartnerId and Kaltura UiConf Id kto require module definition
    KalturaVideo.load = function (name, req, onLoad) {
        if (!name || name.length <= 0) {
            log.error("Cannot load Kaltura API, please specify KalturaParnerId and KalturaUiConfId");
            return;
        }

        var nameParts = name.split('|');

        var partnerId = nameParts[0];
        var uiConfId = nameParts[1];

        // load kaltura deps with google key
        require(["//cdnapi.kaltura.com/p/" + partnerId + "/sp/" + partnerId + "00/embedIframeJs/uiconf_id/" + uiConfId + "/partner_id/" + partnerId], function () {
            onLoad(KalturaVideo);
        });
    }

    return KalturaVideo;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/MegaMenuButtonMenu',["jquery", "eventManager", 'loglevel'], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require('loglevel')) :
    console && console.error('MegaMenuButtonMenu does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, log) {

    function MegaMenuButtonMenu(scope, clickMessagesTransmitting, stateChangeMessages, onShowMessagesTransmitter, onHideMessageTransmitter) {
        var self = this;
        Object.defineProperty(this, "$scope", { enumerable: true, value: $(scope) });


        //#region click messages transmitting registration
        if (clickMessagesTransmitting.length) {
            this.$scope.on("click", "button", function() {
                clickMessagesTransmitting.forEach(function(eventName) {
                    log.debug("MegaMenuButtonMenu raises message: \'%s\'", eventName);

                    eventManager.trigger(eventName, self);
                });

                // don't hide event, otherwise bootstrap dropdown won't ever open.
                return 1;
            });
        }
        //#endregion

        //#region state change message transmitter registration
        if (stateChangeMessages.length) {
            this.$scope.on("shown.bs.dropdown hidden.bs.dropdown", function () {
                stateChangeMessages.forEach(function (eventName) {
                    log.debug("MegaMenuButtonMenu raises message: \'%s\'", eventName);

                    eventManager.trigger(eventName, self);
                });

                return !1;
            });
        }
        //#endregion

        //#region on show message transmitter registration
        if (onShowMessagesTransmitter.length) {
            this.$scope.on("shown.bs.dropdown", function() {
                onShowMessagesTransmitter.forEach(function(eventName) {
                    log.debug("MegaMenuButtonMenu raises message: '%s'", eventName);

                    eventManager.trigger(eventName, self);
                });

                return !1;
            });
        }
        //#endregion

        //#region on hide message transmitter registration
        if (onHideMessageTransmitter.length) {
            this.$scope.on("hidden.bs.dropdown", function() {
                onHideMessageTransmitter.forEach(function(eventName) {
                    log.debug("MegaMenuButtonMenu raises message: '%s'", eventName);

                    eventManager.trigger(eventName, self);
                });

                return !1;
            });
        }
        //#endregion

    }

    MegaMenuButtonMenu.init = function init(args) {
        return args.IsEditorEditing === true
            ? null
            : new MegaMenuButtonMenu(args.scope,
                                  args.ClickMessagesTransmitting || [],
                                  args.StateChangeMessagesTransmitting || [],
                                  args.ShowMessagesTransmitting || [],
                                  args.HideMessagesTransmitting || []);
    };

    return MegaMenuButtonMenu;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/MegaMenuItem',["jquery", "eventManager", 'loglevel'], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require('loglevel')) :
    console && console.error('MegaMenuItem does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, log) {

    function MegaMenuItem(scope, clickMessagesTransmitting) {
        var self = this;
        Object.defineProperty(this, "$scope", { enumerable: true, value: $(scope) });

        //#region click messages transmitting registration
        if (clickMessagesTransmitting.length) {
            this.$scope.on("click", "a.dropdown-toggle.toggle-caret", function (e) {
                e.preventDefault();

                clickMessagesTransmitting.forEach(function (eventName) {
                    log.debug("MegaMenuItem raises message: \'%s\'", eventName);

                    eventManager.trigger(eventName, self);
                });

                return 1;
            });
        }
        //#endregion
    }

    MegaMenuItem.init = function init(args) {
        return args.IsEditorEditing === true
            ? null
            : new MegaMenuItem(args.scope, args.ClickMessagesTransmitting || []);
    };

    return MegaMenuItem;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/MenuListImageLink',["jquery", "eventManager", 'loglevel'], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require('loglevel')) :
    console && console.error('MenuListImageLink does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, log) {

    function MenuListImageLink(scope, clickMessagesTransmitting) {
        var self = this;
        Object.defineProperty(this, "$scope", { enumerable: true, value: $(scope) });


        //#region click messages transmitting registration
        if (clickMessagesTransmitting.length) {
            this.$scope.on("click", "a", function (e) {
                e.preventDefault();

                clickMessagesTransmitting.forEach(function (eventName) {
                    log.debug("MenuListImageLink raises message: \'%s\'", eventName);

                    eventManager.trigger(eventName, self);
                });

                return !1;
            });
        }
        //#endregion
    }

    MenuListImageLink.init = function init(args) {
        return args.IsEditorEditing === true
            ? null
            : new MenuListImageLink(args.scope,
                                args.ClickMessagesTransmitting || []);
    };

    return MenuListImageLink;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/MenuListItem',["jquery", "eventManager", 'loglevel'], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require('loglevel')) :
    console && console.error('MenuListItem does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, log) {

    function MenuListItem(scope, clickMessagesTransmitting) {
        var self = this;
        Object.defineProperty(this, "$scope", { enumerable: true, value: $(scope) });


        //#region click messages transmitting registration
        if (clickMessagesTransmitting.length) {
            this.$scope.on("click", "a", function (e) {
                e.preventDefault();

                clickMessagesTransmitting.forEach(function (eventName) {
                    log.debug("MenuListItem raises message: \'%s\'", eventName);

                    eventManager.trigger(eventName, self);
                });

                return !1;
            });
        }
        //#endregion
    }

    MenuListItem.init = function init(args) {
        return args.IsEditorEditing === true
            ? null
            : new MenuListItem(args.scope, args.ClickMessagesTransmitting || []);
    };

    return MenuListItem;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/Modal',["jquery", "eventManager"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager")) :
    console && console.error('Modal does not support non-amd script loading.');
}(this/* window */, function ($, eventManager) {

    function Modal(scope, stateChangeMessages, onShowMessagePerformer, onHideMessagePerformer, onShowMessagesTransmitter, onHideMessageTransmitter) {
        ///<summary>Initialize a new instance of Panel. Subscribe to messages which are passed to current instance.</summary>

        var self = this;
        //Object.defineProperty(this, "$scope", { enumerable: true, value: $(scope) });
        Object.defineProperties(this,
        {
            $scope: { enumerable: true, value: $(scope) },
            onShowMessagesTransmitter: {
                enumerable: true,
                value: onShowMessagesTransmitter.slice()
            },
            onHideMessageTransmitter: {
                enumerable: true,
                value: onHideMessageTransmitter.slice()
            }
        });


        function doShow() {
            self.show();
            if (stateChangeMessages.length) {
                stateChangeMessages.forEach(function (ev) {
                    eventManager.trigger(ev, "shown");
                });
            }
        }

        function doHide() {
            self.hide();
            if (stateChangeMessages.length) {
                stateChangeMessages.forEach(function (ev) {
                    eventManager.trigger(ev, "hidden");
                });
            }
        }

        if (onShowMessagePerformer.length) {
            onShowMessagePerformer.forEach(function (ev) {
                eventManager.subscribe(ev, doShow);
            });
        }

        if (onHideMessagePerformer.length) {
            onHideMessagePerformer.forEach(function (ev) {
                eventManager.subscribe(ev, doHide);
            });
        }

        //this.$scope.find(".modal-header button.close").on("click", doHide);
        this.$scope.on('hidden.bs.modal', doHide);
        this.$scope.on('shown.bs.modal', doShow);
    }

    Modal.prototype.show =  function show() {
        this.$scope.modal("show");
        this.$scope.attr("aria-hidden", "false")
        this.notifyOnShow();
    };

    Modal.prototype.notifyOnShow = function () {
        var self = this;
        if (this.onShowMessagesTransmitter.length) {
            this.onShowMessagesTransmitter.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    }

    Modal.prototype.hide =  function hide() {
        this.$scope.modal("hide");
        this.$scope.attr("aria-hidden", "true")
        this.notifyOnHide();
    };

    Modal.prototype.notifyOnHide = function() {
        var self = this;
        if (this.onHideMessageTransmitter.length) {
            this.onHideMessageTransmitter.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    }

    Modal.init = function init(args) {
        return args.IsEditorEditing === true ? null : new Modal(
            args.scope,
            args.StateChangeMessagesTransmitting || [],
            args.ShowActionMessages || [],
            args.HideActionMessages || [],
            args.ShowMessagesTransmitting || [],
            args.HideMessagesTransmitting || []
        );
    };

    return Modal;
}));
define('score_bootstrap/Models/Liking/PageLikingModel',[],function () {
    "use strict";

    function PageLikingModel() {

        var instance = {
                userName: '',
                dateLiked: null
            };

        Object.defineProperties(this, {

            userName: {
                enumerable: true,
                get: function () { return instance.userName; },
                set: function (value) {
                    if (value) {
                        instance.userName = String(value);
                    }
                }
            },

            isLiked: {
                enumerable: true,
                get: function () { return instance.isLiked; },
                set: function (value) {
                    if (value) {
                        instance.isLiked = true;
                    } else {
                        instance.isLiked = false;
                    }
                }
            },

            pageId: {
                enumerable: true,
                get: function () { return instance.pageId; },
                set: function (value) {
                    if (value) {
                        instance.pageId = String(value);
                    }
                }
            },

            siteName: {
                enumerable: true,
                get: function () { return instance.siteName; },
                set: function (value) {
                    if (value) {
                        instance.siteName = String(value);
                    }
                }
            },

            pageVersion: {
                enumerable: true,
                get: function () { return instance.pageVersion; },
                set: function (value) {
                    if (value) {
                        instance.pageVersion = String(value);
                    }
                }
            },

            uniqueId: {
                enumerable: true,
                get: function () { return instance.uniqueId; },
                set: function (value) {
                    if (value) {
                        instance.uniqueId = String(value);
                    }
                }
            },

            language: {
                enumerable: true,
                get: function () { return instance.language; },
                set: function (value) {
                    if (value) {
                        instance.language = String(value);
                    }
                }
            },
            
            dateLiked: {
                enumerable: true,
                get: function () { return instance.dateLiked; },
                set: function (value) {
                    if (value) {
                        instance.dateLiked = Date(value);
                    } else {
                        instance.dateLiked = null;
                    }
                    
                }
            },

            isInProgress: {
                enumerable: true,
                get: function () { return instance.isInProgress; },
                set: function (value) {
                    if (value) {
                        instance.isInProgress = true;
                    } else {
                        instance.isInProgress = false;
                    }
                }
            }
        });
    }

    return PageLikingModel;
});
define('score_bootstrap/Components/PageLike',[
    "jquery",
    "knockout",
    "score_bootstrap/Models/Liking/PageLikingModel",
    "eventManager"
], function (
    $,
    ko,
    PageLikingModel,
    eventManager
) {
    "use strict";

    function PageLike(scope, renderingParameters, isLiked, likeNumber, dateLiked, userName, pageId, siteName, pageVersion, uniqueId, language, likePageApiUrl) {
        var self = this;
        var instance = {};
        instance.pageLikeMessagesTransmitting = renderingParameters.PageLikeMessagesTransmitting.slice();
        instance.unlikeMessagesTransmitting = renderingParameters.UnlikeMessagesTransmitting.slice();
        instance.showMessagesTransmitting = renderingParameters.ShowMessagesTransmitting.slice();
        instance.hideMessagesTransmitting = renderingParameters.HideMessagesTransmitting.slice();
        instance.clickMessagesTransmitting = renderingParameters.ClickMessagesTransmitting.slice();

        this.likeNumber = ko.observable(likeNumber);
        this.isLiked = ko.observable(isLiked);
        this.show = ko.observable(true);

        initializePageLikingModel();

        var pageLikingModel;
        function initializePageLikingModel() {
            pageLikingModel = new PageLikingModel();
            if (userName !== undefined) pageLikingModel.userName = userName;
            if (pageId !== undefined) pageLikingModel.pageId = pageId;
            if (dateLiked !== undefined) pageLikingModel.dateLiked = dateLiked;
            if (siteName !== undefined) pageLikingModel.siteName = siteName;
            if (pageVersion !== undefined) pageLikingModel.pageVersion = pageVersion;
            if (uniqueId !== undefined) pageLikingModel.uniqueId = uniqueId;
            if (language !== undefined) pageLikingModel.language = language;
            if (isLiked !== undefined) pageLikingModel.isLiked = isLiked;
        }

        Object.defineProperties(this, {
            pageLikingModel: { value: pageLikingModel },
            likePageApiUrl: { value: likePageApiUrl },
            pageLikeMessagesTransmitting: {
                enumerable: true,
                get: function () {
                    return instance.pageLikeMessagesTransmitting.slice();
                }
            },
            unlikeMessagesTransmitting: {
                enumerable: true,
                get: function () {
                    return instance.unlikeMessagesTransmitting.slice();
                }
            },
            showMessagesTransmitting: {
                enumerable: true,
                get: function () {
                    return instance.showMessagesTransmitting.slice();
                }
            },
            hideMessagesTransmitting: {
                enumerable: true,
                get: function () {
                    return instance.hideMessagesTransmitting.slice();
                }
            },
            clickMessagesTransmitting: {
                enumerable: true,
                get: function () {
                    return instance.clickMessagesTransmitting.slice();
                }
            }
        });

        this.clickOnLike = function () {
            if (!self.pageLikingModel.isLiked) {
                self.pageLikeAction();
            } else {
                self.pageUnlikeAction();
            }
        }

        this.pageLikeAction = function () {
            if (!self.pageLikingModel.isLiked && !self.pageLikingModel.isInProgress) {
                self.pageLikingModel.isLiked = true;
                self.pageLikingModel.isInProgress = true;
                self.likePageRequest().then(function (data) {
                    self.likeNumber(data.LikesCount);
                    self.isLiked(data.IsLiked);
                    self.pageLikingModel.isInProgress = false;
                });

                self.transmitPageLikeMessage();
                self.transmitShowMessage();
                self.transmitClickMessage();
            }
        }

        this.pageUnlikeAction = function () {
            if (self.pageLikingModel.isLiked && !self.pageLikingModel.isInProgress) {
                self.pageLikingModel.isLiked = false;
                self.pageLikingModel.isInProgress = true;
                self.likePageRequest().then(function (data) {
                    self.likeNumber(data.LikesCount);
                    self.isLiked(data.IsLiked);
                    self.pageLikingModel.isInProgress = false;
                });

                self.transmitResetPageLikeMessage();
                self.transmitHideMessage();
                self.transmitClickMessage();
            }
        }

        this.showLike = function () {
            self.show(true);
        }

        this.hideLike = function () {
            self.show(false);
        }

        if (renderingParameters.PageLikeActionMessage.length) {
            renderingParameters.PageLikeActionMessage.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.pageLikeAction, self);
            });
        }

        if (renderingParameters.PageUnlikeActionMessage.length) {
            renderingParameters.PageUnlikeActionMessage.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.pageUnlikeAction, self);
            });
        }

        if (renderingParameters.ShowActionMessages.length) {
            renderingParameters.ShowActionMessages.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.showLike, self);
            });
        }

        if (renderingParameters.HideActionMessages.length) {
            renderingParameters.HideActionMessages.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.hideLike, self);
            });
        }

        if (this.pageLikeMessagesTransmitting.length) {
            this.pageLikeMessagesTransmitting.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }

        if (this.unlikeMessagesTransmitting.length) {
            this.unlikeMessagesTransmitting.forEach(function(ev) {
                eventManager.trigger(ev, self);
            });
        }

        ko.applyBindings(this, scope);
    }

    PageLike.prototype.transmitPageLikeMessage = function () {
        var messages = this.pageLikeMessagesTransmitting, self = this;
        if (messages.length) {
            messages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    }

    PageLike.prototype.transmitResetPageLikeMessage = function () {
        var messages = this.unlikeMessagesTransmitting, self = this;
        if (messages.length) {
            messages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    }

    PageLike.prototype.transmitShowMessage = function () {
        var messages = this.showMessagesTransmitting, self = this;
        if (messages.length) {
            messages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    }

    PageLike.prototype.transmitHideMessage = function () {
        var messages = this.hideMessagesTransmitting, self = this;
        if (messages.length) {
            messages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    }

    PageLike.prototype.transmitClickMessage = function () {
        var messages = this.clickMessagesTransmitting, self = this;
        if (messages.length) {
            messages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    }
    
    PageLike.prototype.likePageRequest = function likePageRequest() {
        var jqXHR = $.ajax({
            url: this.likePageApiUrl,
            data: JSON.stringify(this.pageLikingModel),
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "json"
        });

        return jqXHR;
    }

    PageLike.init = function init(args) {
        return args.IsExperienceEditorEditing === true ? null :
            new PageLike(args.scope, args.RenderingParameters, args.IsLiked, args.LikeNumber, args.DateLiked, args.UserName, args.PageId, args.SiteName, args.PageVersion, args.UniqueId, args.Language, args.LikePageApiUrl);
    };

    return PageLike;
});
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/Panel',["jquery", "eventManager"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager")) :
    console && console.error('Panel does not support non-amd script loading.');
}(this/* window */, function ($, eventManager) {

    function Panel(scope, stateChangeMessages, onShowMessagesPerformer, onHideMessagePerformer) {
        ///<summary>Initialize a new instance of Panel. Subscribe to messages which are passed to current instance.</summary>

        var self = this;
        Object.defineProperty(this, "scope", { enumerable: true, value: scope });
        Object.defineProperty(this, "$scope", { enumerable: true, value: $(scope) });
        Object.defineProperty(this, "stateChangeMessages", { enumerable: true, value: stateChangeMessages.slice() });

        //#region show messages performer
        if (onShowMessagesPerformer.length) {
            onShowMessagesPerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.show, self);
            });

        }
        //#endregion


        //#region hide mesage performer
        if (onHideMessagePerformer.length) {
            onHideMessagePerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.hide, self);
            });
        }
        //#endregion

        // https://brainjocks.atlassian.net/browse/SCORE-1334
        // prevents Alert being removed from DOM, when X button is clicked
        self.$scope.on('close.bs.alert', function () {
            self.$scope.hide();
            return false;
        });
    }

    Panel.prototype.show = function () {
        ///<summary>Make panel visible with jQuery.show() method.</summary>
        this.$scope.show();

        var self = this;
        if (this.stateChangeMessages.length) {
            this.stateChangeMessages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    };

    Panel.prototype.hide = function () {
        ///<summary>Make panel hidden with jQuery.hide() method.</summary>
        this.$scope.hide();

        var self = this;
        if (this.stateChangeMessages.length) {
            this.stateChangeMessages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    };

    Panel.init = function init(args) {
        return args.IsEditorEditing === true
            ? null
            : new Panel(args.scope,
                        args.StateChangeMessagesTransmitting || [],
                        args.ShowActionMessages || [],
                        args.HideActionMessages || []);
    };

    return Panel;
}));
; (function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/Picture',["jquery", "eventManager", "picturefill"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require("picturefill")) :
    console && console.error('Picture does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, picturefill) {

    function Picture(scope, stateChangeMessages, onShowMessagesPerformer, onHideMessagePerformer) {
        ///<summary>Initialize a new instance of Picture. </summary>

        var self = this;
        Object.defineProperty(this, '$scope', { enumerable: true, value: $(scope) });
        Object.defineProperty(this, "stateChangeMessages", { enumerable: true, value: stateChangeMessages.slice() });

        //#region show messages performer
        if (onShowMessagesPerformer.length) {
            onShowMessagesPerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.show, self);
            });

        }
        //#endregion


        //#region hide mesage performer
        if (onHideMessagePerformer.length) {
            onHideMessagePerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.hide, self);
            });
        }
        //#endregion

        picturefill({ context: this.$scope.get(0) });
    }

    Picture.prototype.show = function () {
        ///<summary>Make panel visible with jQuery.show() method.</summary>
        this.$scope.show();

        var self = this;
        if (this.stateChangeMessages.length) {
            this.stateChangeMessages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    };

    Picture.prototype.hide = function () {
        ///<summary>Make panel hidden with jQuery.hide() method.</summary>
        this.$scope.hide();

        var self = this;
        if (this.stateChangeMessages.length) {
            this.stateChangeMessages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    };

    Picture.init = function init(args) {
        return args.IsEditorEditing === true
            ? null
            : new Picture(args.scope,
                args.StateChangeMessagesTransmitting || [],
                args.ShowActionMessages || [],
                args.HideActionMessages || []);
    };

    return Picture;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/PictureHero',["jquery", "eventManager", "score_bootstrap/Base/PictureAsBackground"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require("score_bootstrap/Base/PictureAsBackground")) :
    console && console.error('PictureHero does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, PictureAsBackground) {
    
    function PictureHero(scope) {
        ///<summary>Initialize a new instance of PictureStripe.</summary>

        Object.defineProperty(this, "$scope", { enumerable: !0, value: $(scope) });

        PictureAsBackground.call(this, scope, '> picture', '> .score-editField-group > .pic-thumb > picture');
    }

    PictureHero.prototype = Object.create(PictureAsBackground.prototype);

    PictureHero.init = function init(args) {
        return new PictureHero(args.scope);
    };

    return PictureHero;
}));
; (function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/PictureHighlight',["picturefill"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("picturefill")) :
    console && console.error('Picture does not support non-amd script loading.');
}(this/* window */, function (picturefill) {

    // Loads picturefill.js to support <picture> tag in IE

}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/PictureStripe',["jquery", "eventManager", "score_bootstrap/Base/PictureAsBackground"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require("score_bootstrap/Base/PictureAsBackground")) :
    console && console.error('PictureStripe does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, PictureAsBackground) {
    
    function PictureStripe(scope) {
        ///<summary>Initialize a new instance of PictureStripe.</summary>

        Object.defineProperty(this, "$scope", { enumerable: !0, value: $(scope) });

        PictureAsBackground.call(this, scope, '> picture', '> .score-editField-group > .pic-thumb > picture');
    }

    PictureStripe.prototype = Object.create(PictureAsBackground.prototype);

    PictureStripe.init = function init(args) {
        return new PictureStripe(args.scope);
    };

    return PictureStripe;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/PictureStyleBox',["jquery", "eventManager", "score_bootstrap/Base/PictureAsBackground"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require("score_bootstrap/Base/PictureAsBackground")) :
    console && console.error('PictureStyleBox does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, PictureAsBackground) {
    
    function PictureStyleBox(scope, stateChangeMessages, onShowMessagesPerformer, onHideMessagePerformer) {
        ///<summary>Initialize a new instance of StyleBox. Subscribe to messages which are passed to current instance.</summary>

        var self = this;

        Object.defineProperty(this, "$scope", { enumerable: !0, value: $(scope) });
        Object.defineProperty(this, "stateChangeMessages", { enumerable: !0, value: stateChangeMessages.slice() });

        //#region show messages performer
        if (onShowMessagesPerformer.length) {
            onShowMessagesPerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.show, self);
            });

        }
        //#endregion


        //#region hide mesage performer
        if (onHideMessagePerformer.length) {
            onHideMessagePerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.hide, self);
            });
        }
        //#endregion

        PictureAsBackground.call(this, scope, '> picture', '> .score-editField-group > .pic-thumb > picture');

    }

    PictureStyleBox.prototype = Object.create(PictureAsBackground.prototype);

    PictureStyleBox.prototype.show = function () {
        ///<summary>Make StyleBox visible with jQuery.show() method.</summary>
        this.$scope.show();

        var self = this;
        if (this.stateChangeMessages.length) {
            this.stateChangeMessages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    };

    PictureStyleBox.prototype.hide = function () {
        ///<summary>Make StyleBox hidden with jQuery.hide() method.</summary>
        this.$scope.hide();

        var self = this;
        if (this.stateChangeMessages.length) {
            this.stateChangeMessages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    };

    PictureStyleBox.init = function init(args) {
        return new PictureStyleBox(args.scope,
                                   args.StateChangeMessagesTransmitting || [],
                                   args.ShowActionMessages || [],
                                   args.HideActionMessages || []);
    };

    return PictureStyleBox;
}));
; (function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/SlickSlider',["jquery", "slick"], factory) :
        typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("slick")) :
    console && console.error('Slick Slider does not support non-amd script loading.');
}(this/* window */, function ($) {

    function SlickSlider(scope, args) {
        Object.defineProperty(this, "scope", { enumerable: true, value: scope, writable: !1 });
        Object.defineProperty(this, "$scope", { enumerable: !0, value: $(scope) });
        Object.defineProperty(this, 'lastDirection', { enumerable: !1, value: void 0, writable: !0 });

        var settings = {
            autoplay: args.Speed > 0,
            autoplaySpeed: args.Speed,
            slidesToShow: args.SlidesToShow || 1,
            slidesToScroll: args.SlidesToScroll || 1,
            
            // defaults
            dots: true,
            responsive: []
        };

        if (args.ResponsiveDisplay) {
            var breakpoints = [];
            args.ResponsiveDisplay
                .split('|')
                .forEach(function (kvp) {
                    var breakpointValue = kvp.split('=')[0];
                    var slidesToShowCount = kvp.split('=')[1];
                    var breakpoint = {
                        breakpoint: breakpointValue,
                        settings: {
                            slidesToShow: slidesToShowCount,
                            slidesToScroll: Math.min(args.SlidesToScroll, slidesToShowCount)
                        }
                    };
                    breakpoints.push(breakpoint);
                });

            settings.responsive = breakpoints;
        }

        var slickSlider = this.$scope.slick(settings)[0].slick;
        Object.defineProperty(this, 'slider', { enumerable: !0, value: slickSlider, writable: !1, configurable: !0 });

        slickSlider.slideHandler = this._captureDirection.bind(this, slickSlider, slickSlider.slideHandler);
        this.$scope.on('afterChange', this._onAfterChangeSlide.bind(this));
        this.$scope.on('beforeChange', this._onBeforeChangeSlide.bind(this));
    }

    /**
     * Capture slider direction, it can be done only with raw parameters received in slideHandler function.
     * @param {} slider an instance of a slider, to run the original function in a context of it
     * @param {} baseFn a reference to the original slideHandler function
     * @param {} index unmodified index number, to understand direction
     * @returns {} 
     */
    SlickSlider.prototype._captureDirection = function (slider, baseFn, index) {
        this.lastDirection = index > slider.currentSlide ? 'left' : 'right';
        baseFn.apply(slider, Array.prototype.slice.call(arguments, 2));
    }

    /**
     * Notify the world about slide is going to be changed
     */
    SlickSlider.prototype._onBeforeChangeSlide = function () {
        $(this).trigger('beforeChange.slider', [this, this.lastDirection]);
    }

    /**
     * Notify the world about slide was changed
     * @param {jQuery.Event} event from bootstrap carousel 
     */
    SlickSlider.prototype._onAfterChangeSlide = function() {
        $(this).trigger('afterChange.slider', [this, this.lastDirection]);
    };

    SlickSlider.init = function(args) {
        if (args.IsEditorEditing) return null;

        var slick = new SlickSlider(args.scope, args);

        return slick;
    }

    return SlickSlider;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/SplitButtnMenu',["jquery", "eventManager", 'loglevel'], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require('loglevel')) :
    console && console.error('SplitButtonMenu does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, log) {

    function SplitButtonMenu(scope, clickMessagesTransmitting, stateChangeMessages, onShowMessagesTransmitter, onHideMessageTransmitter) {
        var self = this;
        Object.defineProperty(this, "$scope", { enumerable: true, value: $(scope) });


        //#region click messages transmitting registration
        if (clickMessagesTransmitting.length) {
            this.$scope.on("click", "button", function() {
                clickMessagesTransmitting.forEach(function(eventName) {
                    log.debug("SplitButtonMenu raises message: \'%s\'", eventName);

                    eventManager.trigger(eventName, self);
                });

                return 1;
            });
        }
        //#endregion

        //#region state change message transmitter registration
        if (stateChangeMessages.length) {
            this.$scope.on("shown.bs.dropdown hidden.bs.dropdown", function () {
                stateChangeMessages.forEach(function (eventName) {
                    log.debug("SplitButtonMenu raises message: \'%s\'", eventName);

                    eventManager.trigger(eventName, self);
                });

                return !1;
            });
        }
        //#endregion

        //#region on show message transmitter registration
        if (onShowMessagesTransmitter.length) {
            this.$scope.on("shown.bs.dropdown", function() {
                onShowMessagesTransmitter.forEach(function(eventName) {
                    log.debug("SplitButtonMenu raises message: '%s'", eventName);

                    eventManager.trigger(eventName, self);
                });

                return !1;
            });
        }
        //#endregion

        //#region on hide message transmitter registration
        if (onHideMessageTransmitter.length) {
            this.$scope.on("hidden.bs.dropdown", function() {
                onHideMessageTransmitter.forEach(function(eventName) {
                    log.debug("SplitButtonMenu rauses message: '%s'", eventName);

                    eventManager.trigger(eventName, self);
                });

                return !1;
            });
        }
        //#endregion

    }

    SplitButtonMenu.init = function init(args) {
        return args.IsEditorEditing === true
            ? null
            : new SplitButtonMenu(args.scope,
                                  args.ClickMessagesTransmitting || [],
                                  args.StateChangeMessagesTransmitting || [],
                                  args.ShowMessagesTransmitting || [],
                                  args.HideMessagesTransmitting || []);
    };

    return SplitButtonMenu;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/StyleBox',["jquery", "eventManager"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager")) :
    console && console.error('StyleBox does not support non-amd script loading.');
}(this/* window */, function ($, eventManager) {

    function StyleBox(scope, stateChangeMessages, onShowMessagesPerformer, onHideMessagePerformer) {
        ///<summary>Initialize a new instance of StyleBox. Subscribe to messages which are passed to current instance.</summary>

        var self = this;
        Object.defineProperty(this, "$scope", { enumerable: true, value: $(scope) });
        Object.defineProperty(this, "stateChangeMessages", { enumerable: true, value: stateChangeMessages.slice() });

        //#region show messages performer
        if (onShowMessagesPerformer.length) {
            onShowMessagesPerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.show, self);
            });

        }
        //#endregion


        //#region hide mesage performer
        if (onHideMessagePerformer.length) {
            onHideMessagePerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.hide, self);
            });
        }
        //#endregion
    }

    StyleBox.prototype.show = function () {
        ///<summary>Make StyleBox visible with jQuery.show() method.</summary>
        this.$scope.show();

        var self = this;
        if (this.stateChangeMessages.length) {
            this.stateChangeMessages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    };

    StyleBox.prototype.hide = function () {
        ///<summary>Make StyleBox hidden with jQuery.hide() method.</summary>
        this.$scope.hide();

        var self = this;
        if (this.stateChangeMessages.length) {
            this.stateChangeMessages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
    };

    StyleBox.init = function init(args) {
        return args.IsEditorEditing === true
            ? null
            : new StyleBox(args.scope,
                        args.StateChangeMessagesTransmitting || [],
                        args.ShowActionMessages || [],
                        args.HideActionMessages || []);
    };

    return StyleBox;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/TabPanel',["jquery", "eventManager", 'loglevel'], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require('loglevel')) :
    console && console.error('TabPanel does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, log) {

    function TabPanel(scope, stateChangeMessages, onShowMessagesPerformer, onHideMessagePerformer) {
        ///<summary>Initialize a new instance of TabPanel. Subscribe to messages which are passed to current instance.</summary>

        var self = this;
        Object.defineProperty(this, "scope", { enumerable: true, value: scope });
        Object.defineProperty(this, "$scope", { enumerable: true, value: $(scope) });

        //#region state change message transmitter registration
        if (stateChangeMessages.length) {
            $("a[href='#" + this.$scope.attr("id") + "']").on("shown.bs.tab hidden.bs.tab", function () {
                stateChangeMessages.forEach(function (eventName) {
                    log.debug("TabPanel raises message: \'%s\'", eventName);

                    eventManager.trigger(eventName, self);
                });

                return!1;
            });
        }
        //#endregion

        //#region show messages performer
        if (onShowMessagesPerformer.length) {
            onShowMessagesPerformer.forEach(function(messageName) {
                eventManager.subscribe(messageName, self.show, self);
            });
        }
        //#endregion

        //#region hide mesage performer
        if (onHideMessagePerformer.length) {
            onHideMessagePerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.hide, self);
            });
        }
        //#endregion

        $("a[href='#" + this.$scope.attr("id") + "']")
            .on('show.bs.tab', this._onShowHandler.bind(this))
            .on('hide.bs.tab', this._onHideHandler.bind(this));

    }

    TabPanel.prototype._onShowHandler = function (e) {
        $(this).trigger('focus', [this, e]);
    }

    TabPanel.prototype._onHideHandler = function (e) {
        $(this).trigger('blur', [this, e]);
    }

    /**
     * Make current tab active
     * @returns {} 
     */
    TabPanel.prototype.show = function () {
        $("a[href='#" + this.$scope.attr("id") + "']").tab("show");
    }

    /**
     * Activate the first sibling tab in current tabset. To hide current selected tab
     * @returns {} 
     */
    TabPanel.prototype.hide = function () {
        var siblingTabs = $("a[href='#" + this.$scope.attr("id") + "']")
                            .closest(".nav.nav-tabs")
                            .find("a[data-toggle=tab][href!='#" + this.$scope.attr("id") + "']");

        if (siblingTabs.length) {
            siblingTabs[0].tab("show");
        } else {
            log.debug("There is no sibling tabs which we can activate to hide current tab.");
        }

    }

    TabPanel.init = function init(args) {

        if (args.IsEditorEditing) return null;

        var tabPanel = new TabPanel(args.scope,
            args.StateChangeMessagesTransmitting || [],
            args.ShowActionMessages || [],
            args.HideActionMessages || []);

        return tabPanel;
    };

    return TabPanel;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/TabSet',["jquery", "eventManager", 'loglevel', "cssEscape"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require('loglevel'), require("cssEscape")) :
    console && console.error('TabSet does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, log) {
    
    function TabSet(scope, stateChangeMessages) {
        var self = this;
        Object.defineProperty(this, "$scope", { enumerable: true, value: $(scope) });
        
        //#region message transmitter registration
        if (stateChangeMessages.length) {
            this.$scope.on("shown.bs.tab", function () {

                stateChangeMessages.forEach(function (eventName) {
                    log.debug("TabSet raises message: \'%s\'", eventName);

                    eventManager.trigger(eventName, self);
                });

                return false;
            });
        }
        //#endregion

        this._setupDeepLinking();

        var resizeTimer;
        $(window).resize(function () {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(function () {
                self.$scope.find('.tab-pane').each(function (index, element) {
                    if ($(element).is('.active:hidden')) {
                        BrainJocks.BootstrapUI.TabSet.activate();
                    }
                });
            }, 50);
        });

    }

    TabSet.prototype._setupDeepLinking = function () {
        var that = this;
        // make tabs with anchors change the URL to make them sticky
        this.$scope.on('shown.bs.tab',
            'a[data-toggle="tab"][href*="#tab-"]',
            function () {

                var anchor = '';
                var oldHash = window.location.hash.substring(1);
                
                if ($(this).is('a[data-toggle="tab"][href*="#tab-"][data-anchorable="true"]')) {
                    anchor = $(this).attr("href").replace("#tab-", "");
                }

                if (anchor) {
                    window.history && window.history.pushState && window.history.pushState(null, null, '#' + anchor);
                    window.location.hash = anchor;
                    // Manually trigger event "hashchange" as it's not triggered automatically when clicking on tab
                    $(window).trigger("hashchange", anchor);
                } else {
                    // if we open a tab without deep linking, we should release previously selected anchorable tab.
                    if (oldHash && $(this).closest('.nav-tabs').find('a[data-toggle="tab"][href*="#' + CSS.escape('tab-' + oldHash) + '"][data-anchorable="true"]').length) {
                        // clear hash without page jump in modern browsers
                        window.history && window.history.pushState && window.history.pushState(null, null, '#');
                        window.location.hash = '';
                    }
                    // otherwise we don't care.
                }

            });

        // make all tabs with anchors to be visible when we walk along the browser history
        $(window).on("hashchange", function () {
            if (!window.location.hash) return !1;

            // find a tab which should be activated within current tabset. otherwise keep tabset without any changes.
            var tab = that.$scope.find('a[href="#' + CSS.escape('tab-' + window.location.hash.substring(1)) + '"]');
            if (tab.length) {
                tab.trigger("click");
            }
        });

        if (window.location.hash) {
            // find a tab which should be activated within current tabset. otherwise keep tabset without any changes.
            var tab1 = this.$scope.find('a[href="#' + CSS.escape('tab-' + window.location.hash.substring(1)) + '"]');
            if (tab1.length) {
                tab1.trigger("click");
            }
        }
    }

    TabSet.init = function init(args) {
        return args.IsEditorEditing === true
            ? null
            : new TabSet(args.scope,
                         args.StateChangeMessagesTransmitting || []);
    };

    return TabSet;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/VimeoVideo',["jquery", "eventManager", 'loglevel', "//player.vimeo.com/api/player.js"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require('loglevel'), require("//player.vimeo.com/api/player.js")) :
    console && console.error('Vimeo does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, log, vimeoPlayer) {

    function VimeoVideo(scope, stateChangeMessages, onPlayMessagesPerformer, onPauseMessagePerformer) {
        ///<summary>Initialize a new instance of YoutubeVideo. Subscribe to messages which are passed to current instance.</summary>

        var self = this, instance = {};
        instance.stateChangeMessages = stateChangeMessages.slice();
        
        Object.defineProperties(this, {
            scope: { enumerable:!1, value: scope },
            $scope: { enumerable: true, value: $(scope) },
            stateChangeMessages: {
                enumerable: true,
                get: function () {
                    return instance.stateChangeMessages.slice();
                }
            },
            trackTimelineInterval: {
                enumerable: !1,
                value: void 0,
                writable: !0,
            },
            currentTime: {
                enumerable: !1,
                value: void 0,
                writable: !0
            },
            isInteractedWithUser: { enumerable: true, configurable: true, writable: true, value: false }
        });
        
        this.addStateChangeMessage = function addStateChangeMessage(message) {
            if (!message) return;
            if (instance.stateChangeMessages.indexOf(message) > -1) {
                log.debug("Component is already registered for event " + message);
                return;
            }
            
            instance.stateChangeMessages.push(String(message));
        };

        //#region play message performer
        if (onPlayMessagesPerformer.length) {
            onPlayMessagesPerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.play, self);
            });
        }
        //#endregion

        //#region show messages performer
        if (onPauseMessagePerformer.length) {
            onPauseMessagePerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.pause, self);
            });
        }
        //#endregion

        if (this.stateChangeMessages.length) {
            this.stateChangeMessages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }
        
        var player = new vimeoPlayer(this.$scope.find('iframe'));
        player.ready().then(function() {
            var videoId = self.$scope.find('iframe').attr('id');

            Object.defineProperties(self,
                {
                    videoId: { enumerable: true, value: videoId },
                    player: { enumerable: false, value: player }
                });
        });

        player.on('play', this._onPlayHandler.bind(this));
        //player.on('pause.score', this._onPauseHandler.bind(this));
        player.on('ended', this._onEndedHandler.bind(this));
    }

    VimeoVideo.prototype._onPlayHandler = function (data) {
        this.currentTime = Math.floor(data.seconds);
        this.isInteractedWithUser = true;

        if (data.seconds === 0) {
            $(this).trigger('start.video', [this.currentTime]);
        }

        $(this).trigger('update.timeline', [this.currentTime]);
        this.startTrackTimeline();
    }

    VimeoVideo.prototype._onPauseHandler = function (data) {
        this.stopTrackTimeline();

        log.debug('vimeo video paused');
        var oldValue = this.currentTime;
        this.currentTime = Math.floor(data.seconds);
        this.isInteractedWithUser = true;
        if (oldValue !== this.currentTime) {
            $(this).trigger('update.timeline', [this.currentTime]);
        }

        $(this).trigger('pause.video', [this.currentTime]);
    }

    VimeoVideo.prototype._onEndedHandler = function (data) {
        this.stopTrackTimeline();

        this.currentTime = Math.floor(data.seconds);
        this.isInteractedWithUser = true;
        $(this).trigger('end.video', [this.currentTime]);
    }

    VimeoVideo.prototype.startTrackTimeline = function () {
        if (this.trackTimelineInterval) {
            clearInterval(this.trackTimelineInterval);
        }

        this.trackTimelineInterval = setInterval((function () {
            this.player.getCurrentTime().then((function(seconds) {
                this.currentTime = Math.floor(seconds);
                $(this).trigger('update.timeline', [this.currentTime]);
            }).bind(this));
        }).bind(this), 1000 /* 1 second */);

        $(this).trigger('update.timeline', [this.currentTime]);

        // some vimeo video keep sending "pause" event all the time while pause. That's why we assign a handler when start tracking and remove it when player stopped.
        this.player.on('pause', this._onPauseHandler.bind(this));
    }

    VimeoVideo.prototype.stopTrackTimeline = function () {
        if (this.trackTimelineInterval) {
            clearInterval(this.trackTimelineInterval);
        }

        // some vimeo video keep sending "pause" event all the time while pause.
        this.player.off('pause');
    }

    VimeoVideo.prototype.play = function () {
        ///<summary>Start playing the video.</summary>
        var player = new vimeoPlayer(this.$scope.find('iframe'));

        // On certain mobile devices, including those running iOS, and in certain desktop browsers like Chrome and Safari, 
        // you can't programmatically trigger the initial playback of a video.
        // https://developer.vimeo.com/player/sdk/reference#play-a-video
        // We can play embedded media via API in muted state only or when user has already interacted with the player.
        if (!this.isInteractedWithUser) {
            player.setVolume(0);
        }

        player.play().then((function() {
            this.transmitStateChange();
        }).bind(this)).catch(function (error) {
            switch (error.name) {
                case 'PasswordError':
                    // the video is password-protected and the viewer needs to enter the
                    // password first
                    break;

                case 'PrivacyError':
                    // the video is private
                    break;

                case 'NotAllowedError':
                    log.error(error.message);
                    break;

                default:
                    break;
            }
        });

    }

    VimeoVideo.prototype.pause = function () {
        ///<summary>Put the video on pause.</summary>

        var player = new vimeoPlayer(this.$scope.find('iframe'));

        player.pause().then((function () {
            this.transmitStateChange();
        }).bind(this)).catch(function (error) {
            switch (error.name) {
            case 'PasswordError':
                // the video is password-protected and the viewer needs to enter the
                // password first
                break;

            case 'PrivacyError':
                // the video is private
                break;

            default:
                // some other error occurred
                break;
            }
        });
    }

    VimeoVideo.prototype.transmitStateChange = function () {
        var messages = this.stateChangeMessages, self = this;
        if (messages.length) {
            messages.forEach(function (ev) {
                eventManager.trigger(ev, self, self.player);
            });
        }

    }
    // #endregion

    VimeoVideo.init = function init(args) {
        if (args.IsEditorEditing) return null;

        var video = new VimeoVideo(args.scope,
            args.StateChangeMessagesTransmitting || [],
            args.PlayActionMessages || [],
            args.PauseActionMessages || []);

        return video;
    };

    return VimeoVideo;
}));
; (function (global, factory) {
    typeof define === 'function' && define.amd ? define('Resideo/Components/ScoreFixes/VimeoVideo',["score_bootstrap/Components/VimeoVideo", "//player.vimeo.com/api/player.js"], factory) :
        typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("score_bootstrap/Components/VimeoVideo"), require("//player.vimeo.com/api/player.js")) :
        console && console.error('YoutubeVideo component cannot be loaded into global namespace');
}(this/* window */, function (vimeoCopmonent, vimeoApi) {

    function VimeoVideo() {
        // call the inherited const
        vimeoCopmonent.apply(this, arguments);
    }

    VimeoVideo.prototype = Object.create(vimeoCopmonent.prototype);

    VimeoVideo.init = function init(args) {
        if (vimeoApi && "error_resideo_fallback" in vimeoApi) {
            console && console.info && console.info('Vimeo component could not load vimeo api');
            return null;
        }

        if (args.IsEditorEditing) return null;

        var video = new VimeoVideo(args.scope,
            args.StateChangeMessagesTransmitting || [],
            args.PlayActionMessages || [],
            args.PauseActionMessages || []);
        return video;
    };



    return VimeoVideo;
}));
;(function (global, factory) {
    typeof define === 'function' && define.amd ? define('score_bootstrap/Components/YoutubeVideo',["jquery", "eventManager", 'loglevel', "//www.youtube.com/iframe_api"], factory) :
    typeof exports === 'object' && typeof module !== typeof void 0 ? module.exports = factory(require("jquery"), require("eventManager"), require('loglevel'), require("//www.youtube.com/iframe_api")) :
    console && console.error('TabSet does not support non-amd script loading.');
}(this/* window */, function ($, eventManager, log) {

    function YoutubeVideo(scope, stateChangeMessages, onPlayMessagesPerformer, onPauseMessagePerformer) {
        ///<summary>Initialize a new instance of YoutubeVideo. Subscribe to messages which are passed to current instance.</summary>

        var self = this, instance = {};
        instance.stateChangeMessages = stateChangeMessages.slice();
        
        Object.defineProperties(this, {
            scope: {enumerable: !0, value: scope},
            $scope: { enumerable: true, value: $(scope) },
            stateChangeMessages: {
                enumerable: true,
                get: function () {
                    return instance.stateChangeMessages.slice();
                }
            },
            trackTimelineInterval: {
                enumerable: !1,
                value: void 0,
                writable: !0,
            },
            currentTime: {
                enumerable: !1,
                get: function() {
                    return this.player ? Math.floor(this.player.getCurrentTime()) : void 0;
                }
            },
            isInteractedWithUser: { enumerable: true, configurable: true, writable: true, value: false }
        });
        
        this.addStateChangeMessage = function addStateChangeMessage(message) {
            if (!message) return;
            if (instance.stateChangeMessages.indexOf(message) > -1) {
                log.debug("Component is already registered for event " + message);
                return;
            }
            
            instance.stateChangeMessages.push(String(message));
        };

        //#region play message performer
        if (onPlayMessagesPerformer.length) {
            onPlayMessagesPerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.play, self);
            });
        }
        //#endregion

        //#region show messages performer
        if (onPauseMessagePerformer.length) {
            onPauseMessagePerformer.forEach(function (messageName) {
                eventManager.subscribe(messageName, self.pause, self);
            });
        }
        //#endregion

        if (this.stateChangeMessages.length) {
            this.stateChangeMessages.forEach(function (ev) {
                eventManager.trigger(ev, self);
            });
        }

        YT.ready(function () {
            var videoId = self.$scope.find('iframe').attr('id');

            Object.defineProperties(self, {
                videoId: { enumerable: true, value: videoId },
                player: { enumerable: false, value: new YT.Player(videoId) }
            });

            self.player.addEventListener("onStateChange", self._playerStateChange.bind(self));

            // Pause all Youtube videos except one passed in the 'event' parameter and when user has already interacted with it
            eventManager.subscribe("stopYT", function (event, targetIsInteractedWithUser) {
                var target = event.target;
                if (self.player.getIframe() !== target.getIframe() && targetIsInteractedWithUser) {
                    self.player.pauseVideo();
                }
            });
        });
    }

    YoutubeVideo.prototype._playerStateChange = function(e) {

        switch (e.data) {
            case YT.PlayerState.ENDED:
                this.stopTrackTimeline();
                $(this).trigger('end.video', [this.currentTime]);
                this.isInteractedWithUser = true;
                break;
            case YT.PlayerState.PLAYING:
                //if (this.currentTime === 0) {
                    $(this).trigger('start.video', [this.currentTime]);
                //}
                eventManager.trigger("stopYT", e, this.isInteractedWithUser);
                $(this).trigger('update.timeline', [this.currentTime]);
                this.startTrackTimeline();
                this.isInteractedWithUser = true;
                break;
            case YT.PlayerState.PAUSED:
                this.stopTrackTimeline();
                $(this).trigger('pause.video', [this.currentTime]);
                this.isInteractedWithUser = true;
                break;
        }

        this.transmitStateChange.apply(this, arguments);
    }

    YoutubeVideo.prototype.startTrackTimeline = function() {
        if (this.trackTimelineInterval) {
            clearInterval(this.trackTimelineInterval);
        }

        this.trackTimelineInterval = setInterval((function () {
            $(this).trigger('update.timeline', [this.currentTime]);
        }).bind(this), 1000 /* 1 second */);

        $(this).trigger('update.timeline', [this.currentTime]);
    }

    YoutubeVideo.prototype.stopTrackTimeline = function() {
        if (this.trackTimelineInterval) {
            clearInterval(this.trackTimelineInterval);
        }

        $(this).trigger('update.timeline', [this.currentTime]);
    }

    YoutubeVideo.prototype.play = function () {
        ///<summary>Start playing the video.</summary>
        this.isInteractedWithUser = false;

        // According to Youtube IFrame API documentation, embedded media cannot be played automatically in Chrome and Safari.
        // https://developers.google.com/youtube/iframe_api_reference#Autoplay_and_scripted_playback
        // We can play embedded media via API in muted state only or when user has already interacted with the player.
        if (this.player && typeof this.player.mute === "function") {
            this.player.mute().playVideo();
        }

        this.transmitStateChange();
    }

    YoutubeVideo.prototype.pause = function () {
        ///<summary>Put the video on pause.</summary>
        if (this.player && typeof this.player.pauseVideo === "function") {
            this.player.pauseVideo();
        }

        this.transmitStateChange();
    }

    YoutubeVideo.prototype.transmitStateChange = function () {
        var messages = this.stateChangeMessages, self = this;
        if (messages.length) {
            messages.forEach(function (ev) {
                eventManager.trigger(ev, self, self.player);
            });
        }
    }
    // #endregion

    YoutubeVideo.init = function init(args) {
        if (args.IsEditorEditing) return null;

        var video = new YoutubeVideo(args.scope,
            args.StateChangeMessagesTransmitting || [],
            args.PlayActionMessages || [],
            args.PauseActionMessages || []);

        return video;
    };

    return YoutubeVideo;
}));

define('text!Resideo/Components/Accessory/Templates/AccessoryProductItem.html',[],function () { return '<% _.each( products , function( productCategory, index ){ %>\r\n<div class="score-accordion-panel">\r\n    <div class="panel-heading" role="tab" id="<%- "heading-" + index %>">\r\n        <h4 class="panel-title">\r\n            <% if(index == 0 ) { %>\r\n                <a data-toggle="collapse" data-parent="#accordion" href="<%- "#collapse-" + index %>" aria-expanded="true" aria-controls="<%- "collapse-" + index %>">\r\n            <% } else { %>\r\n                <a data-toggle="collapse" data-parent="#accordion" href="<%- "#collapse-" + index %>" aria-expanded="false" class="collapsed" aria-controls="<%- "collapse-" + index %>">\r\n            <% }; %>\r\n                <%- productCategory.Name %>\r\n            </a>\r\n        </h4>\r\n    </div>\r\n    <% if(index == 0 ) { %>\r\n        <div id="<%- "collapse-" + index %>" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="<%- "heading-" + index %>">\r\n    <% } else { %>\r\n        <div id="<%- "collapse-" + index %>" class="panel-collapse collapse" role="tabpanel" aria-labelledby="<%- "heading-" + index %>" style="height: 0px;">\r\n    <% }; %>\r\n        <div class="panel-body">\r\n            <div class="score-column1">\r\n                <div class="score-center">\r\n                    <% _.each( productCategory.Products , function( product ){ %>\r\n                    <div class="form-accordion-item">\r\n                        <div class="score-content-spot">\r\n                            <p class="product-name"><%- product.Name %></p>\r\n                        </div>\r\n                        <div class="score-style-box accordion-item-details">\r\n                            <div class="score-content-spot">\r\n                                <p>Price: </p>\r\n                                <strong>$ <%- product.Price %></strong>\r\n                            </div>\r\n                            <div class="rde-float-container">\r\n                                <label class="quantity-lbl">Quantity</label>\r\n                                <input class="product-quantity" type="text" data-placeholder="">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <% }); %>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<% }); %>';});


define('text!Resideo/Components/Accessory/Templates/AccessoryOrderSummaryItem.html',[],function () { return '<% _.each( products , function( product ){ %>\r\n<% if(product.Quantity > 0) { %>\r\n<div class="score-column2 equal rde-accessory-order-item">\r\n    <div class="score-left">\r\n        <div class="score-content-spot rde-product-name">\r\n            <p>\r\n                <%- product.Name %>\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div class="score-right">\r\n        <div class="rde-product-item-info">\r\n            <div class="score-content-spot rde-product-quantity">\r\n                <strong>Quantity</strong>\r\n                <p>x<%- product.Quantity %></p>\r\n            </div>\r\n            <div class="score-content-spot rde-product-price">\r\n                <p>\r\n                    $<%- product.Price * product.Quantity %>\r\n                </p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<% } %>\r\n<% }); %>';});

define('Resideo/Components/Accessory/AccessoryOrderForm',['jquery', 'eventManager', 'underscore', 'accessoryService', 'text!Resideo/Components/Accessory/Templates/AccessoryProductItem.html', 'text!Resideo/Components/Accessory/Templates/AccessoryOrderSummaryItem.html', 'jqueryValidate', 'jqueryUnobtrusiveAjax'],
    function ($, eventManager, _, accessoryService, productTemplate, orderSummaryItemTemplate) {
        function AccessoryOrderForm(scope, datasourceId, products) {

            $billingAddressSection = $("#billing-address-information");
            $billingAddressRadioButtons = $("input[name=billingAddressRadio]");
            $orderSummarySection = $(".order-summary-items-wrapper");
            $totalSum = $(".total-sum");
            $totalSumMobile = $(".order-summary-mobile");
            $form = $("#accessory-order-form");
            $thankYouModal = $("#thankYouModal");
            $submitBtn = $('#submit-order-btn');
            productsRepo = {};

            var prepareProducts = function () {
                _.each(products, function (productCategory) {
                    _.each(productCategory.Products, function (item) {
                        var product = {};
                        product.Id = item.Id;
                        product.Name = item.Name;
                        product.Price = item.Price;
                        product.Quantity = 0;
                        productsRepo[product.Name] = product;
                    });
                });
            };

            var updateTotalPrice = function () {
                var total = 0;
                _.each(productsRepo,
                    function (product) {
                        if (product.Quantity > 0) {
                            total = total + (parseFloat(product.Quantity) * parseFloat(product.Price));
                        }
                    });

                $totalSum.text("$" + Number(total).toFixed(2));
                $totalSumMobile.text("$" + Number(total).toFixed(2));
            };

            var updateOrderSummary = function () {
                $orderSummarySection.empty();
                var orderSummaryItemTemplateCompiled = _.template(orderSummaryItemTemplate);
                $orderSummarySection.html(orderSummaryItemTemplateCompiled({ products: productsRepo }));
                updateTotalPrice();
            };

            var anyItemsInCart = function () {
                for (var key in productsRepo) {
                    if (productsRepo[key].Quantity > 0) {
                        return true;
                    }
                }
                return false;
            };

            var validateForm = function () {
                if ($form.validate().checkForm() && anyItemsInCart()) {
                    $submitBtn.removeClass("disabled");
                } else {
                    $submitBtn.addClass("disabled");
                }
            };

            var getFormData = function () {
                var data = {};

                data.datasourceId = datasourceId;

                // Buyer Info
                data.firstName = $("input[name ='FirstName']").val();
                data.lastName = $("input[name ='LastName']").val();
                data.companyName = $("input[name ='CompanyName']").val();
                data.email = $("input[name ='Email']").val();
                data.additionalEmail = $("input[name ='AdditionalEmail']").val();
                data.phoneNumber = $("input[name ='PhoneNumber']").val();

                // Shipping Address
                data.shippingAddress = {};
                data.shippingAddress.addressLine1 = $("input[name ='AddressLine1']").val();
                data.shippingAddress.addressLine2 = $("input[name ='AddressLine2']").val();
                data.shippingAddress.city = $("input[name ='City']").val();
                data.shippingAddress.zipCode = $("input[name ='ZipCode']").val();
                data.shippingAddress.country = $("select[name ='Country']").val();

                if ($("#sameAsShipping").is(":checked")) {
                    data.billingAddressSameAsShipping = true;
                } else {
                    data.billingAddressSameAsShipping = false;
                }

                if ($("#differentBillingAddress").is(":checked"));
                {
                    // Billing Address
                    data.billingAddress = {};
                    data.billingAddress.firstName = $("input[name ='FirstNameBilling']").val();
                    data.billingAddress.lastName = $("input[name ='LastNameBilling']").val();
                    data.billingAddress.addressLine1 = $("input[name ='AddressLine1Billing']").val();
                    data.billingAddress.addressLine2 = $("input[name ='AddressLine2Billing']").val();
                    data.billingAddress.city = $("input[name ='CityBilling']").val();
                    data.billingAddress.zipCode = $("input[name ='ZipCodeBilling']").val();
                    data.billingAddress.country = $("select[name ='CountryBilling']").val();
                }

                // PurchaseOrderNumber
                data.purchaseOrderNumber = $("#pon").val();

                // ShippingMethod
                if ($("#shippingMethod1").is(":checked")) {
                    data.shippingMethod = $("#shippingMethod1").parent().text().trim();
                } else if ($("#shippingMethod2").is(":checked")) {
                    data.shippingMethod = $("#shippingMethod2").parent().text().trim();
                } else if ($("#shippingMethod3").is(":checked")) {
                    data.shippingMethod = $("#shippingMethod3").parent().text().trim();
                } else if ($("#shippingMethod4").is(":checked")) {
                    data.shippingMethod = $("#shippingMethod4").parent().text().trim();
                } else if ($("#shippingMethod5").is(":checked")) {
                    data.shippingMethod = $("#shippingMethod5").parent().text().trim();
                }

                // Comments
                data.comments = $("#comments").val();

                //products
                data.order = {};
                data.order.total = "";
                data.order.products = [];
                for (var key in productsRepo) {
                    if (productsRepo[key].Quantity > 0) {
                        var prod = {};
                        prod.id = productsRepo[key].Id;
                        prod.name = productsRepo[key].Name;
                        prod.quantity = Number.parseInt(productsRepo[key].Quantity);
                        data.order.products.push(prod);
                    }
                }

                return data;
            };

            prepareProducts();

            $billingAddressRadioButtons.change(function () {
                if ($("#differentBillingAddress").prop("checked") == true) {
                    $billingAddressSection.removeClass("hidden");
                }
                else {
                    $billingAddressSection.addClass("hidden");
                }
                validateForm();
            });

            $('.accessory-order-summary-collapse').on('click', function () {
                $(this).toggleClass('open');
                $('.accessory-order-summary').toggleClass('open');
            });

            $submitBtn.click(function () {
                var data = getFormData();
                accessoryService.submitOrder(data).then(showConfimationPopup);
            });

            var showConfimationPopup = function () {
                $thankYouModal.removeClass("hidden");
                $("body").addClass("modal-open");
            };

            var closeConfimationPopup = function () {
                if (!$thankYouModal.hasClass("hidden")) {
                    location.reload();
                }
            };

            //validates fields on focusOut
            $(":input").focusout(function () {
                $(this).valid();
                validateForm();
            });

            var productTemplateCompiled = _.template(productTemplate);
            $(".accessory-order-products-wrapper").html(productTemplateCompiled({ products: products }));

            $(".close").click(function () {
                closeConfimationPopup();
            });
            
            var headerHeight = $('header').height();

            if (!BrainJocks.EE) {
                //fix section header to top of page while scrolling
                if ($(window).width() > 991) {
                    $(".accessory-order-summary").stick_in_parent({
                        offset_top: headerHeight,
                        parent: ".rde-accessory-order-form"
                    });
                }
            }

            $(".product-quantity").on("keypress", function (e) {
                if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
                    return false;
                }
            });

            $(document).ready(function () {
                $(".product-quantity").change(function () {
                    var productName = $(this).parent().parent().parent().children('div.score-content-spot').children('p.product-name').text();
                    var productQuantity = $(this).val();
                    productsRepo[productName].Quantity = productQuantity;

                    updateOrderSummary();
                    validateForm();
                });

                $(".quantity-lbl").click(function () {
                    $(this).next().focus();
                });

                $(".product-quantity").focusin(function () {
                    $(this).parent().addClass("active");
                });

                $(".product-quantity").focusout(function () {
                    if ($(this).val() == "") {
                        $(this).parent().removeClass("active");
                    }
                });
            });

            $(document).keydown(function (event) {
                if (event.keyCode == 27) {
                    closeConfimationPopup();
                }
            });

        }

        return function init(args) {
            return args.IsEditing ? null : new AccessoryOrderForm(args.scope, args.DatasourceId, args.Products);
        };
    });
define('Resideo/Components/Account/LifeCareForgotPassword',['jquery', 'helpersService', 'jqueryValidate', 'jqueryValidateUnobtrusive', 'jqueryUnobtrusiveAjax'],
    function ($, helpersService) {
        function LifeCareForgotPassword(scope, settings, errors) {
            var webAuth = new auth0.WebAuth({
                domain: settings.Domain,
                clientID: settings.ClientId,
                redirectUri: settings.RedirectUri,
                responseType: 'code'
            });

            var form = $(scope).find("form");
            var errorMessage = $('#error-message', scope)[0];
            $.validator.unobtrusive.parse(form);
            var validator = form.validate();
            validator.checkForm();

            $(form).on('blur keyup change', 'input', function (e) {
                clearError();
            });

            $('#btn-send-reset-link', scope).click(function (e) {
                e.preventDefault();
                clearError();
                resetPassword();
            });

            $('#btn-resend-email', scope).click(function(e) {
                e.preventDefault();
                clearError();
                resetPassword();
                $('#sent-label', scope).show();
            });

            function resetPassword() {
                if (!validator.form()) {
                    return;
                }

                var email = $('#Email').val();

                webAuth.changePassword({ connection: settings.Connection, email: email }, function (err, resp) {
                    if (err) {
                        displayError(err.message);
                    } else {
                        displaySuccess(email);
                    }
                });
            }

            function displaySuccess(email) {
                clearError();
                $('#send-email', scope).hide();
                $('#email-placeholder', scope).html(email);
                $('#email-sent', scope).show();
            }

            function displayError(err) {
                $(errorMessage).html('');
                var msg = "";
                if (typeof err == 'string') {
                    msg = err;
                } else if (err.description && err.description.rules && Array.isArray(err.description.rules)) {
                    err.description.rules.forEach(function (item, i) {
                        msg += item.message + "<br/>";
                    });
                } else {
                    msg = err.description;
                }
                msg = "<span role='alert'>" + msg + "</span><br/>";
                $(errorMessage).append(msg);
                $(errorMessage).show();
                helpersService.scrollToTheTopOfElement($(scope));
            }

            function clearError() {
                $(errorMessage).html('');
                $(errorMessage).hide();
            }
        }

        return function init(args) {
            return args.IsExperienceEditorEditing ? null : new LifeCareForgotPassword(args.scope, args.settings, args.errors);
        }
    });

define('Resideo/Components/Account/LifeCareSignIn',['jquery', 'helpersService', 'jqueryValidate', 'jqueryValidateUnobtrusive', 'jqueryUnobtrusiveAjax'],
    function ($, helpersService) {
        function LifeCareSignIn(scope, settings, errors) {
            var webAuth = new auth0.WebAuth({
                domain: settings.Domain,
                clientID: settings.ClientId,
                redirectUri: settings.RedirectUri,
                responseType: 'code'
            });

            var form = $(scope).find("form");
            var errorMessage = $('#error-message', scope)[0];
            $.validator.unobtrusive.parse(form);
            var validator = form.validate();
            validator.checkForm();

            $('#btn-login', scope).click(function (e) {
                e.preventDefault();
                clearError();

                if (!validator.form()) {
                    return;
                }

                var email = $('#Email', scope).val();
                var password = $('#Password', scope).val();
                webAuth.login(
                    {
                        realm: settings.Connection,
                        username: email,
                        password: password
                    }, function (err) {
                        if (err) displayError(err);
                    }
                );
            });

            $(form).on('blur keyup change', 'input', function (e) {
                clearError();
            });

            $('.show-password', scope).click(function (e) {
                e.preventDefault();
                var passwordInput = $('#Password', scope)[0];
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    $(this).addClass('show-icon');
                    $(this).attr('aria-label', 'hide password');
                } else {
                    passwordInput.type = "password";
                    $(this).removeClass('show-icon');
                    $(this).attr('aria-label', 'show password');
                }
            });

            function displayError(err) {
                var msg = "";
                if (typeof err == 'string') {
                    msg = err;
                } else if (err.description && err.description.rules && Array.isArray(err.description.rules)) {
                    err.description.rules.forEach(function (item, i) {
                        msg += item.message + "<br/>";
                    });
                } else {
                    msg = err.description;
                }
                if ($(errorMessage).html().includes(msg)) {
                    return;
                }
                msg = "<span role='alert'>"+msg+"</span><br/>";
                $(errorMessage).append(msg);
                $(errorMessage).show();
                helpersService.scrollToTheTopOfElement($(scope));
            }

            function clearError() {
                $(errorMessage).html('');
                $(errorMessage).hide();
            }
        }

        return function init(args) {
            return args.IsExperienceEditorEditing ? null : new LifeCareSignIn(args.scope, args.settings, args.errors);
        }
    });

define('Resideo/Components/Account/LifeCareSignUp',['jquery', 'helpersService', 'jqueryValidate', 'jqueryValidateUnobtrusive', 'jqueryUnobtrusiveAjax'],
    function ($, helpersService) {
        function LifeCareSignUp(scope, settings, errors) {
            var webAuth = new auth0.WebAuth({
                domain: settings.Domain,
                clientID: settings.ClientId,
                redirectUri: settings.RedirectUri,
                responseType: 'code'
            });

            var form = $(scope).find("form");
            var errorMessage = $('#error-message', scope)[0];
            $.validator.unobtrusive.parse(form);
            var validator = form.validate();
            validator.checkForm();

            $('#btn-signup', scope).click(function (e) {
                e.preventDefault();
                clearError();

                if (!validator.form()) {
                    return;
                }

                var email = $('#Email', scope).val();
                var password = $('#Password', scope).val();
                webAuth.signup(
                    {
                        connection: settings.Connection,
                        email: email,
                        password: password
                    }, function (err) {
                        if (err) {
                            displayError(err);
                            return;
                        }
                        displaySuccess();
                    });
            });

            $(form).on('blur keyup change', 'input', function (e) {
                clearError();
            });

            $('.show-password', scope).click(function (e) {
                e.preventDefault();
                var passwordInput = $('#Password', scope)[0];
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    $(this).addClass('show-icon');
                    $(this).attr('aria-label', 'hide password');
                } else {
                    passwordInput.type = "password";
                    $(this).removeClass('show-icon');
                    $(this).attr('aria-label', 'show password');
                }
            });

            function displaySuccess() {
                clearError();
                $('#signup-view', scope).hide();
                $('#success-message', scope).show();
            }

            function displayError(err) {
                var msg = "";
                if (typeof err == 'string') {
                    msg = err;
                } else if (err.description && err.description.rules && Array.isArray(err.description.rules)) {
                    err.description.rules.forEach(function (item, i) {
                        msg += item.message + "<br/>";
                    });
                } else {
                    msg = err.description;
                }
                if ($(errorMessage).html().includes(msg)) {
                    return;
                }
                msg = "<span role='alert'>" + msg + "</span><br/>";
                $(errorMessage).append(msg);
                $(errorMessage).show();
                helpersService.scrollToTheTopOfElement($(scope));
            }

            function clearError() {
                $(errorMessage).html('');
                $(errorMessage).hide();
            }
        }

        return function init(args) {
            return args.IsExperienceEditorEditing ? null : new LifeCareSignUp(args.scope, args.settings, args.errors);
        }
    });

define('Resideo/Components/Account/LifeCareUserStatus',['jquery'],
    function ($) {
        function LifeCareUserStatus(scope, signOutLinkUrl) {
            $('#rde-sign-out', scope).click(function(e) {
                e.preventDefault();
                $.ajax({
                    url: '/user-status',
                    type: 'GET',
                    contentType: 'application/json; charset=utf-8'
                })
                    .done(function(data) {
                        if (data === true) {
                            window.location.replace(signOutLinkUrl);
                            return;
                        }

                        window.location.replace('/');
                    });
            });
        }

        return function init(args) {
            return args.IsExperienceEditorEditing ? null : new LifeCareUserStatus(args.scope, args.SignOutLinkUrl);
        }
    });

define('Resideo/Components/Buttons/AppendStringToUrlButton',['jquery'], function ($) {
    function AppendStringToUrlButton(scope, sourceRelativePath, destinationRelativePath, stringToAppend) {
        if (document.querySelector("#append-string-button")) {
            new Promise(function (resolve, reject) {
                var actionUrl = window.location.pathname.replace(sourceRelativePath, destinationRelativePath)
                    .replace(/.$/, stringToAppend + "/");
                $("#append-string-button").attr("href", actionUrl);
                resolve();
            });
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new AppendStringToUrlButton(args.scope, args.SourcePageRelativePath, args.DestinationPageRelativePath, args.StringToAppend);
    }
});
define('Resideo/Components/Cart/AddPromoCode',["jquery", 'cartService', "logService", "eventManager", "constants"],
    function ($, cartService, logService, eventManager, constants) {
    function AddPromoCode(scope) {

        function showError(description) {
            $('.add-promo-code-sec').addClass('rde-promo-code-warning');
            $('.rde-warning').append(description);
            $('.add-promo-code-sec .rde-warning').show();
            $('#txtPromoCode').addClass('input-warning');
        }

        function hideError() {
            $('.add-promo-code-sec').removeClass('rde-promo-code-warning');
            $('.rde-warning').empty();
            $('.add-promo-code-sec .rde-warning').hide();
            $('#txtPromoCode').removeClass('input-warning');
        }

        function enableSubmit() {
            $('#SubmitPromoCode').prop("disabled", false);
            $('#SubmitPromoCode').removeClass('disabled');
        }

        function disableSubmit() {
            $('#SubmitPromoCode').prop("disabled", true);
            $('#SubmitPromoCode').addClass('disabled');
        }

        function applyPromoCode(promoCode) {
            cartService.applyPromocode(promoCode)
                .done(function (data) {
                    disableSubmit();
                    hideError();

                    var item = data.Item2;
                    if (item) {
                        if (item[0].Code === "unhandled_dr_error") {
                            var description = "Coupon code is invalid. Coupon Code cannot be used.";
                            showError(description);
                        } else {
                            showError(item[0].Description);
                        }
                    }
                    else{
                        eventManager.trigger(constants.OrderPaymentButton);
                    }
                });
        }

        $(scope).on('click', '#AddPromoLink', function(e) {
            hideError();
            $('.add-promo-link-sec').hide();
            $('.add-promo-code-sec').show();
        });

        $(scope).on('click', '#SubmitPromoCode', function (e) {
            applyPromoCode($('#txtPromoCode').val());
        });

        $(scope).on('keyup', '#txtPromoCode', function (e) {
            hideError();
            var promoCodeLength = this.value.length;
            $('.add-promo-code-sec').removeClass('rde-no-promo-code');
            if (promoCodeLength > 0) {
                enableSubmit();
            } else {
                disableSubmit();
            }
        });
    }

    return function init(args) {
        return args.IsExperienceEditorEditing
            ? null
            : new AddPromoCode(args.scope);
    };
});
define('Resideo/Components/Cart/CartNavigation',['jquery', 'eventManager', 'cartService', 'identityService', 'constants'], function ($, eventManager, cartService, identityService, constants) {
    function CartNavigation(scope, isShippingPage, isPaymentPage, isCartPage, isReviewPage, iconUrls, pageUrls) {

        identityService.getECommerceToken("").then(function (token) {
            cartService.getCart()
                .then(refreshNavigation, reject);
        });

        function refreshNavigation(data) {
            var disabledClass = "disabled";
            var activeClass = "active";
            var completedClass = "completed";

            if (data && data.Items && data.Items.length === 0) {
                //all elements deleted (most likely we are on cart page) => then disable all elements
                $(".score-composite-link", scope).slice(1).removeClass(completedClass).addClass(disabledClass).attr("href", "#");
                $(".score-composite-link", scope).slice(1).each(function (i, e) {
                    if ($(e).attr("id") == "shippingPage") {
                        $(e).find("img").attr("src", iconUrls.BlackShippingIconUrl);
                    }
                    if ($(e).attr("id") == "paymentPage") {
                        $(e).find("img").attr("src", iconUrls.BlackPaymentIconUrl);
                    }
                });
                if (!isCartPage) {
                    location.href = pageUrls.CartPageUrl;
                }
                return;
            }
            else {
                $(".score-composite-link", scope).slice(1).removeClass(disabledClass);
            }
            var isShippingAvailable = data.ShippingAddress && data.ShippingAddress.Line1 && data.ShippingAddress.Line1.length > 0;
            var isPaymentAvailable = data.Payment != null;
            var isFreeOrder = data.TotalValue === 0;

            if ((isReviewPage || isPaymentPage) && !isShippingAvailable) {
                location.href = pageUrls.ShippingPageUrl;
            }

            if (isReviewPage && !isPaymentAvailable && !isFreeOrder) {
                location.href = pageUrls.PaymentPageUrl;
            }

            if (isPaymentPage && isFreeOrder) {
                location.href = pageUrls.ShippingPageUrl;
            }

            // not empty
            var defaultClass = "";
            var shippingStepCssClass = defaultClass;
            var paymentStepCssClass = disabledClass;
            var reviewStepCssClass = disabledClass;
            
            if (isShippingAvailable) {
                //we have shipping - payment should be available, shipping complete
                //if cart is $0 payment should be still disabled
                if (!isFreeOrder) {
                    paymentStepCssClass = defaultClass;
                }
                shippingStepCssClass = completedClass;
            }

            if (isPaymentAvailable) {
                //we have payment
                paymentStepCssClass = completedClass;
                reviewStepCssClass = defaultClass;
            }

            //cart page
            var cartPageLink = $("#cartPage", scope);
            var cartCssClass = completedClass;
            var cartIcon = iconUrls.WhiteCartIconUrl;
            if (isCartPage) {
                cartCssClass = activeClass;
                cartIcon = iconUrls.BlackCartIconUrl;
                cartPageLink.attr("aria-current", "step");
            }
            cartPageLink.addClass(cartCssClass);
            cartPageLink.find("img").attr("src", cartIcon);
            //end cart page

            //shipping page
            var shippingPageLink = $("#shippingPage", scope);
            shippingPageLink.attr("href", pageUrls.ShippingPageUrl);
            if (isShippingPage) {
                shippingPageLink.addClass(activeClass);
                shippingPageLink.attr("aria-current", "step");
            } else {
                shippingPageLink.addClass(shippingStepCssClass);
                if (isShippingAvailable) {
                    shippingPageLink.find("img").attr("src", iconUrls.WhiteShippingIconUrl);
                } else {
                    shippingPageLink.find("img").attr("src", iconUrls.BlackShippingIconUrl);
                }
            }
            //end shipping page

            //payment page
            var paymentPageLink = $("#paymentPage", scope);

            if (isShippingAvailable) {
                paymentPageLink.attr("href", pageUrls.PaymentPageUrl);
            }
            if (isPaymentPage) {
                paymentPageLink.addClass(activeClass);
                paymentPageLink.attr("aria-current", "step");
            } else {
                paymentPageLink.addClass(paymentStepCssClass);
                if (isPaymentAvailable) {
                    paymentPageLink.find("img").attr("src", iconUrls.WhitePaymentIconUrl);
                } else {
                    paymentPageLink.find("img").attr("src", iconUrls.BlackPaymentIconUrl);
                }
            }
            //end payment page

            //review page
            var reviewPageLink = $("#reviewPage", scope);
            if (isShippingAvailable && isPaymentAvailable) {
                reviewPageLink.attr("href", pageUrls.ReviewOrderPageUrl);
            }
            if (isReviewPage) {
                reviewPageLink.addClass(activeClass);
                reviewPageLink.attr("aria-current", "step");
            } else {
                reviewPageLink.addClass(reviewStepCssClass);
            }
            //end review page

        }

        function reject(data) {
            //reserved for the error handling
        }

        eventManager.subscribe(constants.CartUpdated, function (data) {
            refreshNavigation(data);
        });
    }

    return function init(args) {
        return args.IsExperienceEditorEditing
            ? null
            : new CartNavigation(args.scope,
                args.isShippingPage,
                args.isPaymentPage,
                args.isCartPage,
                args.isReviewPage,
                args.iconUrls,
                args.pageUrls);
    };
});
define('Resideo/Components/Cart/CartWrapper',['jquery', 'eventManager', 'slick', 'helpersService', 'constants', 'cartService', 'identityService'],
    function ($, eventManager, slick, helpersService, constants, cartService, identityService) {
    function CartWrapper(scope, labels, urls) {

        identityService.getECommerceToken("").then(function (token) {
            cartService.getCart()
                .then(function (data) {
                    drawWrapper(data);

                    var cartIsVisible = $('.empty-cart').is(':visible');
                    if (cartIsVisible) {
                        wrapEmptyCartView();
                    }
                });
        });

        eventManager.subscribe(constants.CartUpdated, drawWrapper);

        eventManager.subscribe(constants.CartLastItemRemoved, function (markup) {
            var shoppingCartElement = $(".empty-cart .shopping-cart", scope);
            if (shoppingCartElement) {
                shoppingCartElement.html();
                shoppingCartElement.append(markup);
                $(".rde-removed-item a").focus();
            }
        });

        $(".continue-shopping-button", scope).attr("href", urls.ShoppingPageUrl);

        function wrapEmptyCartView() {
            if ($('.empty-cart-wrapper').length == 0) {
                var cartWrapped = $('.empty-cart').closest('.score-page-layout-column1');
                var wrapper = '<div class=\'empty-cart-wrapper\' style=\'background-color: #EDEDED;\'></div>';
                cartWrapped.wrap(wrapper);
            }
        }

        function unwrapEmptyCartView() {
            var cartWrapped = $('.empty-cart').closest('.score-page-layout-column1');
            $(cartWrapped).unwrap('.empty-cart-wrapper');
        }
        
        function drawWrapper(item) {
            if (item && item.Items) {
                $("#OrderSummaryCartId", scope).html(labels.RefNumberLabel + ' ' + item.CartId);

                if (item.Items.length > 0) {
                    $('.non-empty-cart', scope).show();
                    $('.empty-cart', scope).hide();
                    unwrapEmptyCartView();
                } else {
                    $('.non-empty-cart', scope).hide();
                    $('.empty-cart', scope).show();
                    eventManager.trigger(constants.CartisEmpty);

                    wrapEmptyCartView();

                    var slider = $('.score-slick-slider.slick-initialized');
                    if (slider) {
                        $(slider).slick('resize');
                    }
                }
            }
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new CartWrapper(args.scope, args.labels, args.urls);
    };
});
define('Resideo/Components/Cart/FederatedCart',['jquery', 'eventManager', 'cartService', 'identityService', 'constants', 'Resideo/Modules/PriceLoader'],
    function ($, eventManager, cartService, identityService, constants, priceLoader) {
        function FederatedCart(scope, tokenUrl, isAuthenticated, userId, roles) {

            identityService.getECommerceToken(tokenUrl, true, false, isAuthenticated, userId, roles).then(function (token) {

                // price loader - run here
                priceLoader.init();

                cartService.getCart(true)
                    .then(refreshMiniCart, reject);
            });

            function refreshMiniCart(data) {
                //reserved for events
            }

            function reject(data) {
                //reserved for the error handling
            }
        }

        return function init(args) {
            return args.IsExperienceEditorEditing ? null : new FederatedCart(args.scope, args.tokenUrl, args.isAuthenticated, args.userId, args.roles);
        }
    });

define('text!Resideo/Components/Cart/Templates/FreeShippingBanner.html',[],function () { return '<div class="score-column1 rde-banner-shipping">\r\n    <div class="score-center">\r\n        <img src="<%- model.shippingImageUrl %>" class="score-image (img-responsive)" alt="<%- model.labelText %>">\r\n        <p class="score-lead"><%- model.labelText %></p>\r\n    </div>\r\n</div>\r\n';});

define('Resideo/Components/Cart/FreeShippingPromotionBanner',["jquery", "underscore", "eventManager", "text!Resideo/Components/Cart/Templates/FreeShippingBanner.html"],
function ($, _, eventManager, freeShippingBannerTemplate) {
    function FreeShippingPromotionBanner(scope, freeShippingBannerModel) {
        var self = this,
            panel = $(scope);

        Object.defineProperties(this, {
            freeShippingModel: {
                get: function () { return freeShippingBannerModel; }
            }
        });

        self.updateFreeShippingBanner = function updateFreeShippingBanner(cartModel) {

            var templateModel = {
                shippingImageUrl: self.freeShippingModel.ShippingImageUrl,
                labelText: ""
            };

            var cartSubtotal = cartModel.SubtotalValue;
            var eligCartTotal = parseFloat(self.freeShippingModel.EligibleCartSubtotal);

            if (cartSubtotal > 0 && cartSubtotal < eligCartTotal) {
                templateModel.labelText = self.freeShippingModel.PromotionLabel.replace(
                        self.freeShippingModel.DynamicAmountPlaceholder,
                        (eligCartTotal - cartSubtotal).toFixed(2));
            } else {
                templateModel.labelText = self.freeShippingModel.FreeShippingLabel;
            }

            panel.html(_.template(freeShippingBannerTemplate)({ model: templateModel }));
        };

        eventManager.subscribe("Cart:InitializeBanner", function (data) { self.updateFreeShippingBanner(data); });
    }

    return function initFreeShippingPromotionBanner(args) {
        return args.IsExperienceEditorEditing
            ? null
            : new FreeShippingPromotionBanner(
                    args.scope,
                    args.freeShippingBannerModel);
    };
});

define('text!Resideo/Components/Cart/Templates/CrossSellProduct.html',[],function () { return '<div class="score-highlight rde-product-highlight">\r\n    <% if (product.IsNew)  {%>\r\n    <div class="score-highlight-header">\r\n        <%- labels.NewLabel %>\r\n    </div>\r\n    <% } %>\r\n    <img src="<%- product.ImageUrl %>" alt="<%- product.Name %>">\r\n    <div class="caption">\r\n        <div class="score-highlight-body">\r\n            <p>\r\n                <%- product.SkuTitle %>\r\n                <span class="price">\r\n                    -.--\r\n                </span>\r\n            </p>\r\n        </div>\r\n        <% if (productId != \'\')  {%>\r\n        <div data-bv-show="inline_rating" data-bv-seo="false" data-bv-product-id="<%- productId %>"></div>\r\n        <br />\r\n        <% } %>\r\n        <div class="score-call-to-action">\r\n            <% if (product.IsPreorder)  {%>\r\n            <button class="score-button rde-primary rde-loader-button btn short-text">\r\n                <span><%- labels.PreorderLabel %></span>\r\n                <div class="animation-container">\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                </div>\r\n            </button>\r\n            <% } %>\r\n            <% if (!product.IsPreorder)  {%>\r\n            <button class="score-button rde-primary rde-loader-button btn">\r\n                <span><%- labels.AddToCartLabel %></span>\r\n                <div class="animation-container">\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                </div>\r\n            </button>\r\n            <% } %>\r\n        </div>\r\n    </div>\r\n    <span class="rde-product-data" data-id="<%- product.SKU %>" data-brand="<%- product.Brand %>" data-productname="<%- product.SkuTitle %>" data-familynumber="<%- product.FamilyNumber %>" data-category="<%- product.Category %>"></span>\r\n</div>';});

define('Resideo/Components/Cart/InterstitialDialog',['jquery', 'underscore', 'eventManager', 'cartService', 'constants', 'productService', 'logService', 'text!Resideo/Components/Cart/Templates/CrossSellProduct.html', 'helpersService'],
    function ($, _, eventManager, cartService, constants, productService, logService, crossSellProductTemplate, helpersService) {

        function InterstitialDialog(scope, labels, showRating, language) {
            var crossSellProductTemplateCompiled = _.template(crossSellProductTemplate);

            eventManager.subscribe(constants.ShowInterstitialDialog, function(sku) {
                productService.getCrossSellProducts(sku, language)
                    .done(function (data) {
                        var items = data.Item1;
                        if (items && items.length > 0) {
                            $("#continueButton").addClass('disabled');
                            renderDialog(items);
                            eventManager.trigger(constants.InterstitialDialogLoaded);
                        }
                    });
            });

            function renderDialog(data) {
                setTimeout(function () { $("#continueButton").removeClass('disabled'); }, 500);

                _.each(data, function (product) {
                    var bazaarVoiceProductId = '';
                    if (showRating) {
                        bazaarVoiceProductId = product.SKU.replace("/", "-");
                    }

                    $(".score-center", scope).append(crossSellProductTemplateCompiled({ product: product, productId: bazaarVoiceProductId, labels: labels }));
                    
                    var button = $(".btn", scope).last();

                    $(button).click({ button: $(this) }, function (e) {
                        e.preventDefault();
                        helpersService.showLoader(this);

                        cartService.addToCart(product.SKU, language)
                            .done(function () {
                                helpersService.hideLoader();
                                $(button).html(labels.AddedToCartLabel);
                                $(button).addClass("disabled");
                                $(button).off('click');
                            });
                    });

                    var component = $(".price", scope).last();
                    productService.getPrice(product.SKU, language)
                        .then(function (priceData) {
                            var item = priceData.Item1;
                            if (item) {
                                if (item.ListedPrice === item.SalePrice) {
                                    component.html(item.ListedPrice);
                                } else {
                                    component.html('<i>' + item.ListedPrice + '</i>' + item.SalePrice);
                                }
                            } else {
                                // error
                                if (priceData.Item2 && priceData.Item2.Errors) {
                                    logService.error(priceData.Item2.Errors[0]);
                                } else {
                                    logService.error('SKU does not exist');
                                }
                            }
                        });
                });

                eventManager.trigger(constants.OpenInterstitialDialog);
                var modalCssClass = "";
                if (data.length === 1) {
                    modalCssClass = "rde-1-product";
                }
                else {
                    modalCssClass = "rde-" + data.length + "-products";
                }
                $("div.rde-interstistial-dialog").addClass(modalCssClass);
            }
        }

        return function init(args) {
            return args.IsExperienceEditorEditing ? null : new InterstitialDialog(args.scope, args.labels, args.showRating, args.language);
        };
    });

define('text!Resideo/Components/Cart/Templates/MainProduct.html',[],function () { return '<div class="score-column2 wide-left ">\r\n    <div class="score-left">\r\n        <div class="rde-single-product">\r\n            <img src="<%- product.ImageUrl %>" alt="<%- product.Name %>" class="score-image">\r\n            <div class="data-wrapper">\r\n                <h4><%- product.SkuTitle %></h4>\r\n                <div class="quantity">\r\n                    <label>Quantity</label>\r\n                    <span>x1</span>\r\n                </div>\r\n                <% if (product.ListedPrice == product.SalePrice) {%>\r\n                    <p class="price">\r\n                        <span aria-hidden="true"><%- product.ListedPrice %></span>\r\n                        <span class="rde-screen-reader-only"><%- labels.PriceLabel %> <%- product.ListedPrice %></span>\r\n                    </p>\r\n                <% } %>\r\n                <% if (product.ListedPrice != product.SalePrice) {%>\r\n                    <p class="price strike">\r\n                        <span aria-hidden="true"><%- product.ListedPrice %></span>\r\n                        <span class="rde-screen-reader-only"><%- labels.PriceStrickenLabel %> <%- product.ListedPrice %></span>\r\n                    </p>\r\n                    <p class="price">\r\n                        <span aria-hidden="true"><%- product.SalePrice %></span>\r\n                        <span class="rde-screen-reader-only"><%- labels.PriceLabel %> <%- product.SalePrice %></span>\r\n                    </p>\r\n                <% } %>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="score-right">\r\n        <div class="total-amount">\r\n            <label><%- labels.CartTotalLabel %></label>\r\n            <span><%- cartTotal %></span>\r\n        </div>\r\n        <div class="button-wrapper">\r\n            <a id="go-to-cart" class="score-button rde-primary" href="#"><%- labels.GoToCartLabel %></a>\r\n            <a id="continue-shopping" class="score-button rde-secondary" href="#" data-dismiss="modal"><%- labels.ContinueShoppingLabel %></a>\r\n        </div>\r\n    </div>\r\n</div>';});

define('Resideo/Components/Cart/InterstitialModal',['jquery', 'underscore', 'eventManager', 'cartService', 'constants', 'productService', 'logService', 'text!Resideo/Components/Cart/Templates/CrossSellProduct.html', 'text!Resideo/Components/Cart/Templates/MainProduct.html', 'helpersService'],
    function ($, _, eventManager, cartService, constants, productService, logService, crossSellProductTemplate, mainProductTemplate, helpersService) {

        function InterstitialDialog(scope, labels, cartUrl, showRating, language) {
            var crossSellProductTemplateCompiled = _.template(crossSellProductTemplate);
            var mainProductTemplateCompiled = _.template(mainProductTemplate);
            var modal = $(scope).parents(".modal")[0];

            $(modal).on('hidden.bs.modal', function () {
                clearSections();
            });

            eventManager.subscribe(constants.RenderInterstitialModal, function (cartData) {
                if ($(modal).hasClass("in")) {
                    return;
                }

                productService.getInterstitialModalData(cartData.sku, language)
                    .done(function (data) {
                        if (data.Item1) {
                            clearSections();
                            renderMainProductSection(data.Item1.MainProduct, cartData.total);
                            var crossSellProducts = data.Item1.CrossSellProducts;

                            if (crossSellProducts && crossSellProducts.length > 0) {
                                $("#continueButton").addClass('disabled');
                                renderRelatedProductsSection(crossSellProducts);
                            } else {
                                $(".related-products-column", scope).hide();
                            }

                            eventManager.trigger(constants.InterstitialDialogLoaded);
                            eventManager.trigger(constants.ShowInterstitialModal);
                        }
                    });
            });

            function renderMainProductSection(product, cartTotal) {
                $("#main-product", scope).append(mainProductTemplateCompiled({ product: product, labels: labels, cartTotal: cartTotal }));

                $("#go-to-cart", scope).data("sc_added_product", product.SKU);
                createTempCookie("sc_added_product", product.SKU, 30);
                $("#go-to-cart", scope).click(function () {
                    eventManager.trigger(constants.CloseInterstitialModal);
                    createTempCookie("sc_added_product", $(this).data("sc_added_product"), 30);
                    location.href = cartUrl;
                });
            }

            function createTempCookie(name, value, seconds) {
                var date = new Date();
                date.setTime(date.getTime() + (seconds * 1000));
                var expires = "; expires=" + date.toGMTString();
                document.cookie = name + "=" + value + expires + "; path=/";
            }

            function renderRelatedProductsSection(data) {
                setTimeout(function () { $("#continueButton").removeClass('disabled'); }, 500);
                $(".related-products-column", scope).show();

                _.each(data, function (product) {
                    var bazaarVoiceProductId = '';
                    if (showRating) {
                        bazaarVoiceProductId = product.SKU.replace("/", "-");
                    }

                    $("#related-products", scope).append(crossSellProductTemplateCompiled({ product: product, productId: bazaarVoiceProductId, labels: labels }));
                    
                    var button = $(".btn", scope).last();

                    $(button).click({ button: $(this) }, function (e) {
                        e.preventDefault();
                        helpersService.showLoader(this);

                        cartService.addToCart(product.SKU, language)
                            .done(function () {
                                helpersService.hideLoader();
                                $(button).html(labels.AddedToCartLabel);
                                $(button).addClass("disabled");
                                $(button).off('click');
                            });
                    });

                    var component = $(".price", scope).last();
                    productService.getPrice(product.SKU, language)
                        .then(function (priceData) {
                            var item = priceData.Item1;
                            if (item) {
                                if (item.ListedPrice === item.SalePrice) {
                                    component.html('<span aria-hidden="true">'
                                        + item.ListedPrice
                                        + '</span><span class="rde-screen-reader-only">'
                                        + labels.PriceLabel
                                        + ' '
                                        + item.ListedPrice
                                        + '</span>');
                                } else {
                                    component.html('<i>'
                                        + '<span aria-hidden="true">'
                                        + item.ListedPrice
                                        + '</span><span class="rde-screen-reader-only">'
                                        + labels.PriceStrickenLabel
                                        + ' '
                                        + item.ListedPrice
                                        + '</span>'
                                        + '</i>'
                                        + '<span aria-hidden="true">'
                                        + item.SalePrice
                                        + '</span><span class="rde-screen-reader-only">'
                                        + labels.PriceLabel
                                        + ' '
                                        + item.SalePrice
                                        + '</span>');
                                }
                            } else {
                                // error
                                if (priceData.Item2 && priceData.Item2.Errors) {
                                    logService.error(priceData.Item2.Errors[0]);
                                } else {
                                    logService.error('SKU does not exist');
                                }
                            }
                        });
                });

                eventManager.trigger(constants.OpenInterstitialDialog);
                var modalCssClass = "";
                if (data.length === 1) {
                    modalCssClass = "rde-1-product";
                }
                else {
                    modalCssClass = "rde-" + data.length + "-products";
                }
                $("div.rde-interstistial-dialog").addClass(modalCssClass);
            }

            function clearSections() {
                $("#main-product", scope).empty();
                $("#related-products", scope).empty();
            }
        }

        return function init(args) {
            return args.IsExperienceEditorEditing ? null : new InterstitialDialog(args.scope, args.labels, args.cartUrl, args.showRating, args.language);
        };
    });

define('text!Resideo/Components/Cart/Templates/MiniCartItemV2.html',[],function () { return '<div class="score-column2 wide-right rde-shopping-cart-row <% if(removedItem !== null) { %>rde-removed-item <% } %>" <% if(updatedItem !== null && updatedItem.SKU === item.SKU) { %>role="alert"<% } %>>\r\n    <div class="score-left">\r\n        <div class="score-column2 equal">\r\n            <div class="score-left">\r\n                <a href="<%- item.Url %>" <% if(item.Url.indexOf("http") == 0 && item.Url.indexOf(window.location.host) < 0) { %>target="_blank" <% } %>><img src="<%- item.ImageUrl %>" class="score-image (img-responsive) rde-product-image" alt="<%- item.SkuTitle %>"></a>\r\n            </div>\r\n            <div class="score-right">\r\n                <div class="score-content-spot rde-product-info">\r\n                    <p>\r\n                        <% if(removedItem === null || removedItem.SKU !== item.SKU) { %>\r\n                            <strong><a href="<%- item.Url %>"><%- item.SkuTitle %></a></strong>\r\n                            <span><%- item.SKU %></span>\r\n                        <% } else { %>\r\n                            <strong role="alert"><%- labels.RemovedItemText.replace(\'{SKU_Title}\', item.SkuTitle) %></strong>\r\n                        <% } %>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="score-right">\r\n        <div class="score-column2 equal" <% if(removedItem !== null && removedItem.SKU === item.SKU) { %>style="display:none;" <% } %>>\r\n            <div class="score-left">\r\n                <div class="input-group">\r\n                    <span class="input-group-btn">\r\n                        <button class="quantity-left-minus btn <%= (item.Quantity == 1) ? \'disabled\' : \'\' %>" data-type="minus" data-field="" style="background:none;padding: 0;">\r\n                            <img src="/areas/resideo/img/ic-minus-v2.svg" style="padding:0;" alt="minus quantity 1" />\r\n                        </button>\r\n                    </span>\r\n                    <span type="text" class="mini-cart-quantity"><%- item.Quantity %></span>\r\n                    <span class="input-group-btn">\r\n                        <button class="quantity-left-plus btn <%= (item.Quantity == item.MaxQuantity) ? \'disabled\' : \'\' %>" data-type="plus" data-field="" style="background:none;padding: 0;">\r\n                            <img src="/areas/resideo/img/ic-plus-v2.svg" style="padding:0;" alt="plus quantity 1" />\r\n                        </button>\r\n                    </span>\r\n                </div>\r\n                <% if(item.MaxQuantity == item.Quantity) { %>\r\n                <p class="score-lead quantity-limit-message">\r\n                <% } else { %>\r\n                <p class="score-lead quantity-limit-message" style="display: none;">\r\n                <% } %>\r\n                    <%= messages.QuantityLimitMessage.replace("{x}", item.MaxQuantity) %>\r\n                </p>\r\n            </div>\r\n            <div class="score-right">\r\n                <div class="score-content-spot rde-product-price">\r\n                    <div class="score-style-box">\r\n                        <% if(item.ListPrice != item.SalePrice) { %>\r\n                        <span class="strike">\r\n                            <span aria-hidden="true"><%- item.ListPrice %></span>\r\n                            <span class="rde-screen-reader-only"><%- labels.PriceStrickenLabel %> <%- item.ListPrice %></span>\r\n                        </span>\r\n                        <% } %>\r\n                        <div>\r\n                            <p aria-hidden="true"><%- item.SalePrice %></p>\r\n                            <div class="rde-screen-reader-only"><%- labels.PriceLabel %> <%- item.SalePrice %></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <a href="#" class="score-button rde-product-close-button">\r\n                    <img src="/areas/resideo/img/close-modal.svg" alt="<%- labels.RemoveFromCardLabel.replace(\'{SKU_Title}\', item.SkuTitle) %>" />\r\n                </a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n    <div class="score-content-spot rde-product-separator">\r\n    </div>\r\n';});


define('text!Resideo/Components/Cart/Templates/MiniCartSummary.html',[],function () { return '<div class="score-column2 wide-left rde-summary-footer">\r\n    <div class="score-left">\r\n        <div class="score-content-spot">\r\n            <p>\r\n                <% if(cart.DiscountValue > 0) { %>\r\n                <%- labels.DiscountLabel %>\r\n                <% } %>\r\n                <br>\r\n                <%- labels.SubtotalLabel %>\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div class="score-right">\r\n        <div class="score-content-spot">\r\n            <p>\r\n                <% if(cart.DiscountValue > 0) { %>\r\n                -<%- cart.Discount %>\r\n                <% } %>\r\n                <br>\r\n                <%- cart.Subtotal %>\r\n            </p>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!Resideo/Components/Cart/Templates/MiniCartRemoveItemV2.html',[],function () { return '<div class="score-left">\r\n    <div class="score-column2 equal">\r\n        <div class="score-left">\r\n            <a href="<%- item.Url %>"<% if(item.Url.indexOf("http") == 0 && item.Url.indexOf(window.location.host) < 0) { %>target="_blank" <% } %>><img src="<%- item.ImageUrl %>" class="score-image (img-responsive) rde-product-image" alt="<%- item.SkuTitle %>"  style="width:110px"></a>\r\n        </div>\r\n        <div class="score-right">\r\n            <div class="score-content-spot rde-product-info">\r\n                <p>\r\n                    <% if(removedItem === null || removedItem.SKU !== item.SKU) { %>\r\n                    <strong><a href="<%- item.Url %>"><%- item.SkuTitle %></a></strong>\r\n                    <span><%- item.SKU %></span>\r\n                    <% } else { %>\r\n                    <strong role="alert"><%- labels.RemovedItemText.replace(\'{SKU_Title}\', item.SkuTitle) %></strong>\r\n                    <% } %>\r\n                </p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});

define('Resideo/Components/Cart/MiniCart',['jquery', 'underscore', 'eventManager', 'cartService', 'identityService', 'constants', 'text!Resideo/Components/Cart/Templates/MiniCartItemV2.html', 'text!Resideo/Components/Cart/Templates/MiniCartSummary.html', 'text!Resideo/Components/Cart/Templates/MiniCartRemoveItemV2.html', 'storageService'],
    function ($, _, eventManager, cartService, identityService, constants, itemTemplate, summaryTemplate, removeItemTemplate) {
        function MiniCart(scope, labels, messages, language, urls) {
            $('.rde-mini-cart a').attr('tabindex', '-1');
            $('.rde-mini-cart button').attr('tabindex', '-1');
            $(".rde-mini-cart-empty .score-center .rde-removed-item").hide();
            var localCart = null;
            identityService.getECommerceToken(urls.tokenUrl).then(function (token) {
                cartService.getCart(true)
                    .then(refreshMiniCart, reject);
            });

            $(document).mouseup(function (e) {
                var container = $(".rde-cart-opened");
                var button = $('.rde-mini-cart-button');
                // hide if clicked outside of the mini-cart or button
                if (!container.is(e.target) && container.has(e.target).length === 0 &&
                    !button.is(e.target) && button.has(e.target).length === 0) {
                    container.removeClass('rde-cart-opened');
                    button.removeClass('active');
                    hideFromTabNav();
                }
            });

            eventManager.subscribe("MiniCart:Close", function () {
                $('.rde-mini-cart:visible').removeClass('rde-cart-opened');
                hideFromTabNav();
                $('.rde-mini-cart-button').removeClass('active');
            });

            // show/hide on trigger
            $('.rde-mini-cart-button').on('click', function (e) {
                e.preventDefault();

                if ($(window).width() > 767) {
                    $('.rde-mini-cart:visible').toggleClass('rde-cart-opened');
                    if ($('.rde-mini-cart:visible').hasClass('rde-cart-opened')) {
                        showForTabNav();
                        $(this).addClass("active");
                        eventManager.trigger(constants.ViewMiniCart, localCart);
                    } else {
                        $(this).removeClass("active");
                        hideFromTabNav();
                    }
                } else {
                    location.href = urls.cartPageUrl;
                }
            });

            var itemTemplateCompiled = _.template(itemTemplate);
            var summaryTemplateCompiled = _.template(summaryTemplate);
            var removeItemTemplateCompiled = _.template(removeItemTemplate);

            eventManager.subscribe(constants.CartUpdated, refreshMiniCart);

            var removedItem = null;
            var updatedItem = null;

            function refreshMiniCart(data) {
                localCart = data;

                var opened = false;
                if ($(".rde-mini-cart-empty", scope).first().hasClass("rde-cart-opened") || $(".rde-mini-cart-nonempty", scope).first().hasClass("rde-cart-opened")) {
                    opened = true;
                }

                if (localCart && localCart.Items && localCart.Items.length > 0) {

                    $(".rde-mini-cart-empty", scope).hide();
                    $(".rde-mini-cart-nonempty", scope).show();
                    if (opened) {
                        $(".rde-mini-cart-nonempty", scope).addClass("rde-cart-opened");
                    }

                    $("#cartId", scope).html(localCart.CartId);

                    $("#quantity", scope).html(localCart.Items.length);
                } else {
                    $(".rde-mini-cart-empty", scope).show();
                    $(".rde-mini-cart-nonempty", scope).hide();
                    if (opened) {
                        $(".rde-mini-cart-empty", scope).addClass("rde-cart-opened");
                    }
                    $("#quantity", scope).html("");
                }

                if (localCart && localCart.Items && localCart.Items.length > 0) {
                    $(".rde-mini-cart-nonempty .rde-shopping-cart-row").remove();
                    $(".rde-mini-cart-nonempty .rde-product-separator").remove();
                    $(".rde-mini-cart-nonempty .rde-summary-footer").remove();

                    /*_.each(localCart.Items.sort(), function (item) { (Changed from 2021.1 - Remove this comment)*/
                    /*$(".rde-cart-header", scope).after(itemTemplateCompiled({ item : item, labels : labels }));*/
                    _.each(localCart.Items.reverse(), function (item) {
                        $(".rde-cart-header", scope).after(itemTemplateCompiled({ item: item, labels: labels, messages: messages, removedItem: null, updatedItem: updatedItem }));

                        $(".btn[data-type='minus']", scope).first().click({ item: item }, function (e) {
                            if (!$(this).hasClass("disabled") && item.Quantity > 1) {
                                $(this).addClass("disabled");
                                updatedItem = item;
                                clearAlertRole();
                                cartService.decreaseQuantity(item.ItemId);
                            }
                        });
                        $(".btn[data-type='plus']", scope).first().click({ item: item }, function (e) {
                            if (!$(this).hasClass("disabled") && item.Quantity < item.MaxQuantity) {
                                $(this).addClass("disabled");
                                updatedItem = item;
                                clearAlertRole();
                                cartService.increaseQuantity(item.ItemId);
                            }
                        });

                        $(".rde-product-close-button", scope).first().click({ item: item }, function (e) {
                            cartService.removeFromCart(item);

                            removedItem = item;
                            if (removedItem != null)  {
                                var removeItemHtml = removeItemTemplateCompiled({ item: removedItem, labels: labels, messages: messages, removedItem: removedItem, updatedItem: null })

                                $(".rde-mini-cart-empty .score-center .rde-removed-item", scope).html('');
                                $(".rde-mini-cart-empty .score-center .rde-removed-item").show();
                                $(".rde-mini-cart-empty .score-center .rde-removed-item", scope).append(removeItemHtml);

                                $(".rde-removed-item a").focus();
                            }
                        });
                    });

                    if (removedItem !== null) {
                        $(".rde-cart-header", scope).after(itemTemplateCompiled({ item: removedItem, labels: labels, messages: messages, removedItem: removedItem, updatedItem: null }));

                        var removeItemHtml = removeItemTemplateCompiled({ item: removedItem, labels: labels, messages: messages, removedItem: removedItem, updatedItem: null })

                        $(".rde-mini-cart-empty .score-center .rde-removed-item", scope).html('');
                        $(".rde-mini-cart-empty .score-center .rde-removed-item").show();
                        $(".rde-mini-cart-empty .score-center .rde-removed-item", scope).append(removeItemHtml);

                        $(".rde-removed-item a").focus();
                        removedItem = null;

                        $('.rde-mini-cart-nonempty .score-center').animate({
                            scrollTop: 0
                        }, 500);
                    }
                    $(".rde-product-separator", scope).last().after(summaryTemplateCompiled({ cart: localCart, labels: labels }));
                }
                updatedItem = null;
                hideFromTabNav();
            }

            function reject(data) {
                //reserved for the error handling
            }

            function clearAlertRole() {
                $('.rde-shopping-cart-row[role="alert"]', scope).removeAttr("role");
            }

            function hideFromTabNav() {
                $('.rde-mini-cart:visible a').attr('tabindex', '-1');
                $('.rde-mini-cart:visible button').attr('tabindex', '-1');
            }

            function showForTabNav() {
                $('.rde-mini-cart:visible a').removeAttr('tabindex');
                $('.rde-mini-cart:visible button').removeAttr('tabindex');
            }
        }

        return function init(args) {
            return args.IsExperienceEditorEditing
                ? null
                : new MiniCart(args.scope, args.labels, args.messages, args.language, args.urls);
        };
    });

define('text!Resideo/Components/Cart/Templates/OrderPayment.html',[],function () { return '<a id="payment"></a>\r\n<form id="payment-form">\r\n    <div class="rde-form-wrapper">\r\n        <label class="order-payment-required"><%- labels.Required %></label>\r\n        <div class="rde-radio rde-two-lines">\r\n            <span class="rde-screen-reader-only" aria-live="polite" id="payment-method-type-text"></span>\r\n            <div class="rde-card-holder">\r\n                <img class="payment-method-type visa" src="<%- labels.VisaIcon %>" alt="<%- labels.visaIconAltText %>">\r\n                <img class="payment-method-type mastercard" src="<%- labels.MastercardIcon %>" alt="<%- labels.masterCardIconAltText %>">\r\n                <img class="payment-method-type amex" src="<%- labels.AmericanExpressIcon %>" alt="<%- labels.amexIconAltText %>">\r\n                <img class="payment-method-type discover" src="<%- labels.DiscoverIcon %>" alt="<%- labels.discoverCardIconAltText %>">\r\n            </div>\r\n            <label>\r\n                <input type="radio" name="payment-method" value="cc" <%= cart.Payment && (cart.Payment.CardType != payPalPaymentType ) ? "checked" : "" %> >\r\n                <span></span>\r\n                Credit Card\r\n            </label>\r\n        </div>\r\n        <div class="rde-form-wrapper">\r\n            <div id="card-number" class="rde-float-container field" data-name="cardNumber">\r\n            </div>\r\n            <div id="card-expiration" class="rde-expiration half field" data-name="cardExpiration">\r\n            </div>\r\n            <div class="rde-float-container half cvv-tooltip">\r\n                <div id="card-cvv" class="field" data-name="cardCvv">\r\n                </div>\r\n                <div class="score-button-menu rde-tooltip-wrapper">\r\n                    <!-- standard tooltip HTML -->\r\n                    <button id="cvv-tooltip" type="button" class="score-button rde-tooltip" data-toggle="dropdown" aria-expanded="false" aria-label="<%- labels.TooltipTitle %>">\r\n                        <span aria-hidden="true">i</span>\r\n                        <span><%- labels.TooltipTitle %></span>\r\n                        <span class="caret"></span>\r\n                        <span class="sr-only">Toggle</span>\r\n                    </button>\r\n                    <div id="card-cvv-tooltip-text" class="dropdown-menu" role="tooltip"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="rde-radio">\r\n            <div class="rde-card-holder">\r\n                <img class="payment-method-type" src="<%- labels.PayPalIcon %>" alt="<%- labels.paypalIconAltText %>">\r\n            </div>\r\n            <label>\r\n                <input type="radio" name="payment-method" value="pp" <%= cart.Payment && (cart.Payment.CardType == payPalPaymentType ) ? "checked" : "" %> >\r\n                <span></span>\r\n                PayPal\r\n            </label>\r\n        </div>\r\n\r\n        <div id="message"></div>\r\n    </div>\r\n</form>';});

define('Resideo/Components/Cart/OrderPayment',['jquery', 'underscore', 'eventManager', 'constants', 'text!Resideo/Components/Cart/Templates/OrderPayment.html', 'digitalRiver', 'logService', 'componentForms', 'cartService', 'identityService'],
    function ($, _, eventManager, constants, orderPaymentTemplate, DigitalRiver, logService, componentForms, cartService, identityService) {
        function OrderPayment(scope, labels, payPalPaymentType, payPalMetadata, publicApiKey) {
            var orderPaymentTemplateCompiled = _.template(orderPaymentTemplate),
                digitalRiverPayments = new DigitalRiver(publicApiKey),
                cardCVV,
                cardNumber,
                cardExpiration,
                localCart = null,
                userObject = null,
                addressObject = null,
                $ccRadioButton = null,
                $ppRadioButton = null,
                formValidStatus = {
                    cvv: false,
                    number: false,
                    expiration: false
                };
            identityService.getECommerceToken("").then(function(token) {
                cartService.getCart()
                    .then(function(data) {
                        localCart = data;

                        renderPayments(localCart);

                        userObject = {
                            firstName: localCart.ShippingAddress.FirstName,
                            lastName: localCart.ShippingAddress.LastName,
                            emailAddress: localCart.Shopper.Email,
                            phoneNumber: localCart.Shopper.PhoneNumber
                        };

                        addressObject = {
                            line1: localCart.ShippingAddress.Line1,
                            line2: localCart.ShippingAddress.Line2,
                            city: localCart.ShippingAddress.City,
                            state: localCart.ShippingAddress.CountrySubdivision,
                            country: "US",
                            postalCode: localCart.ShippingAddress.PostalCode,

                            Form: localCart.ShippingAddress
                        };
                    });
            });

            eventManager.subscribe(constants.PaymentError,
                function (data) {
                    clearErrors();

                    _.each(data.error.errors,
                        function (error) {
                            handleErrors(error);
                        });
                });

            eventManager.subscribe(constants.AddressUpdated,
                function (data) {
                    if (data) {
                        userObject.firstName = data.FirstName;
                        userObject.lastName = data.LastName;

                        setAddressObject(data, data.Form);
                    } else {
                        userObject.firstName = localCart.ShippingAddress.FirstName;
                        userObject.lastName = localCart.ShippingAddress.LastName;

                        setAddressObject(localCart.ShippingAddress, localCart.ShippingAddress);
                    }
                });

            eventManager.subscribe(constants.CartUpdated, validatePaymentMethods);

            function validatePaymentMethods(json) {
                if ($ppRadioButton == null || $ccRadioButton == null) {
                    return;
                }

                if (json.TotalValue === 0) {
                    if ($ppRadioButton.is(':checked')) {
                        $ccRadioButton.prop("checked", "checked");
                        $ccRadioButton.click();
                    }
                    $ppRadioButton.parent().parent().hide();
                } else {
                    $ppRadioButton.parent().parent().show();
                }
            }

            function setupControls(json) {
                $ccRadioButton = $("input:radio[value = 'cc']", scope);
                $ppRadioButton = $("input:radio[value = 'pp']", scope);



                $ccRadioButton.on('click',
                    function (event) {
                        if (this.checked) {
                            logService.log('card select', event);
                            destroyPayPal();
                            createCreditCard();
                        }
                    });

                $ppRadioButton.on('click',
                    function (event) {
                        if (this.checked) {
                            logService.log('paypal select', event);
                            destroyCreditCard();
                            createPayPal();
                        }
                    });

                if (localCart.Payment) {
                    if (localCart.Payment.CardType !== payPalPaymentType) {
                        createCreditCard();
                        $ccRadioButton.prop("checked", "checked");
                    } else {
                        createPayPal();
                        $ppRadioButton.prop("checked", "checked");
                    }
                }
                else {
                    $ccRadioButton.prop("checked", "checked");
                    $ccRadioButton.click();
                }

                setUpCvvTooltipText();

                validatePaymentMethods(json);
            }

            function setUpCvvTooltipText() {
                var tooltipText = document.getElementById('card-cvv-tooltip-text');
                tooltipText.innerHTML += labels.TooltipText;
            }

            function setAddressObject(data, form) {
                addressObject.line1 = data.Line1;
                addressObject.line2 = data.Line2;
                addressObject.city = data.City;
                addressObject.state = data.CountrySubdivision;
                addressObject.postalCode = data.PostalCode;

                addressObject.Form = form;
            }

            function createDigitalRiverElementsOptions(placeholder) {
                var options = {
                    classes: {
                        base: "DRElement",
                        complete: "complete",
                        empty: "empty",
                        focus: "focus",
                        invalid: "invalid",
                        webkitAutofill: "autofill"
                    },
                    style: {
                        base: {
                            color: "#767676",
                            fontFamily: "roboto, sans-serif",
                            fontSmoothing: "auto",
                            fontVariant: "normal",
                            fontSize: '14px',
                            fontWeight: '500',
                            fontStyle: 'normal',
                            letterSpacing: '1px'
                        },
                        empty: {
                            color: '#000'
                        },
                        complete: {
                            color: "green"
                        },
                        invalid: {
                            color: "red"
                        }
                    },
                    placeholderText: placeholder
                };

                return options;
            }

            function createCreditCard() {
                var cvvOptions = createDigitalRiverElementsOptions("CVV*"),
                    cardNumberOptions = createDigitalRiverElementsOptions("Credit Card Number*"),
                    cardExpirationOptions = createDigitalRiverElementsOptions("Month/Year*");

                cardCVV = digitalRiverPayments.createElement("cardcvv", cvvOptions);
                cardNumber = digitalRiverPayments.createElement("cardnumber", cardNumberOptions);
                cardExpiration = digitalRiverPayments.createElement("cardexpiration", cardExpirationOptions);

                cardCVV.mount('card-cvv');

                cardCVV.on('change',
                    function (event) {
                        logService.log('card cvv blur', event);
                        checkFormValid("cvv", event);
                    });

                cardNumber.mount('card-number');

                cardNumber.on('change',
                    function (event) {
                        logService.log('card number blur', event);
                        checkFormValid("number", event);
                    });

                cardExpiration.mount('card-expiration');

                cardExpiration.on('change',
                    function (event) {
                        logService.log('card expirationblur', event);
                        checkFormValid("expiration", event);
                    });

                //attach form field activation analytics events
                cardExpiration.on('focus',
                    function (e) {
                        componentForms.trackFormFieldActivation($(cardExpiration.parentNode));
                    });

                cardNumber.on('focus',
                    function (e) {
                        componentForms.trackFormFieldActivation($(cardNumber.parentNode));
                    });

                cardCVV.on('focus',
                    function (e) {
                        componentForms.trackFormFieldActivation($(cardCVV.parentNode));
                    });

                eventManager.trigger(constants.PaymentUpdated, {
                    cart: localCart,
                    address: addressObject,
                    user: userObject,
                    paymentType: "creditCard",
                    paymentMetadata: ""
                });

                if (window.location.hash === "#payment" && $(window.location.hash).length) {
                    $('html, body').animate({
                        scrollTop: $(window.location.hash).offset().top - $("header")[0].offsetHeight
                    }, 0);
                }
            }

            function createPayPal() {
                $ppRadioButton.parent().parent().find('img.payment-method-type').toggleClass("active");

                eventManager.trigger(constants.PaymentUpdated,
                    {
                        cart: localCart,
                        address: addressObject,
                        user: userObject,
                        paymentType: "payPal",
                        paymentMetadata: payPalMetadata
                    });

                clearErrors();
            }

            function destroyCreditCard() {
                $ccRadioButton.parent().parent().find('img.payment-method-type').removeClass("active");
                $ccRadioButton.parent().parent().parent().find('.rde-form-wrapper').hide();

                if (cardNumber !== null) {
                    cardNumber.destroy();
                    cardExpiration.destroy();
                    cardCVV.destroy();
                }

                clearErrors();
            }

            function destroyPayPal() {
                $ppRadioButton.parent().parent().find('img.payment-method-type').removeClass("active");
                $ccRadioButton.parent().parent().parent().find('.rde-form-wrapper').show();

                clearErrors();
            }

            function handleErrors(error) {
                logService.error(error);
                var errorMessage = document.getElementById('message');

                if (errorMessage.innerHTML) {
                    errorMessage.innerHTML += " ";
                }
                errorMessage.innerHTML += error.message;
            }

            function clearErrors() {
                document.getElementById('message').innerHTML = '';
            }

            function selectCreditCardType(paymentBrand) {
                $ppRadioButton.parent().parent().find('img.payment-method-type').removeClass("active");
                $ccRadioButton.parent().parent().find('img.payment-method-type').removeClass("active");

                switch (paymentBrand) {
                    case "visa":
                        $ccRadioButton.parent().parent().find('img.payment-method-type.visa').toggleClass("active");
                        $("#payment-method-type-text").text("visa");
                        break;
                    case "mastercard":
                        $ccRadioButton.parent().parent().find('img.payment-method-type.mastercard').toggleClass("active");
                        $("#payment-method-type-text").text("mastercard");
                        break;
                    case "amex":
                        $ccRadioButton.parent().parent().find('img.payment-method-type.amex').toggleClass("active");
                        $("#payment-method-type-text").text("american express");
                        break;
                    case "discover":
                        $ccRadioButton.parent().parent().find('img.payment-method-type.discover').toggleClass("active");
                        $("#payment-method-type-text").text("discover");
                        break;
                    default:
                }
            }

            function submitCreditCardForm(isTriggerErrors) {
                var payload = {
                    type: "creditCard",
                    owner: {
                        firstName: userObject.firstName,
                        lastName: userObject.lastName,
                        email: userObject.emailAddress,
                        address: addressObject
                    },
                    sessionId: localCart.PaymentSessionId
                };

                digitalRiverPayments.createSource(cardNumber, payload).then(function (result) {
                    if (result.error) {
                        eventManager.trigger(constants.GoToReviewButtonDisable);
                        eventManager.trigger("Payment:InvalidPayment");

                        if (isTriggerErrors) {
                            _.each(result.error.errors, function (error) {
                                handleErrors(error);
                            });
                        }
                    } else {
                        var creditCardSource = result.source;

                        eventManager.trigger(constants.PaymentUpdated,
                            {
                                cart: localCart,
                                address: addressObject,
                                user: userObject,
                                paymentType: "creditCard",
                                paymentMetadata: creditCardSource
                            });
                        eventManager.trigger("Payment:CheckBillingFormValidation");
                        logService.log('Got CC Source ID: ' + creditCardSource.id);
                    }
                });
            }

            function renderPayments(json) {
                if (json) {
                    $(scope).html(orderPaymentTemplateCompiled({ cart: json, labels: labels, payPalPaymentType: payPalPaymentType }));

                    setupControls(json);
                }
                var event = document.createEvent('Event');
                event.initEvent('drRendered', true, true);
                window.dispatchEvent(event);
            }

            function checkFormValid(element, event) {
                clearErrors();

                if (event.brand) {
                    selectCreditCardType(event.brand);
                }

                if (event.complete === true) {
                    formValidStatus[element] = true;
                }
                else {
                    formValidStatus[element] = false;
                    eventManager.trigger(constants.GoToReviewButtonDisable);
                    eventManager.trigger("Payment:InvalidPayment");
                }

                if (formValidStatus.cvv && formValidStatus.number && formValidStatus.expiration) {
                    submitCreditCardForm(true);
                }
            }
        }

        return function init(args) {
            return args.IsExperienceEditorEditing
                ? null
                : new OrderPayment(args.scope,
                    args.labels,
                    args.payPalPaymentType,
                    args.payPalMetadata,
                    args.publicApiKey);
        };
    }
);

define('text!Resideo/Components/Cart/Templates/OrderReview.html',[],function () { return '<% if(cart.Shopper) { %>\r\n<div class="score-section-hero rde-info-box">\r\n    <h2><%- labels.ContactInformationTitle %></h2>\r\n    <div class="score-hero-body">\r\n        <p>\r\n            <%- cart.Shopper.Email %>\r\n            <br>\r\n            <%- cart.Shopper.PhoneNumber %>\r\n        </p>\r\n    </div>\r\n    <div class="score-call-to-action">\r\n        <a href="<%- labels.ContactInformationLink %>#contactInformation" aria-label="Edit Contact Information"><%- labels.EditCtaLabel %></a>\r\n    </div>\r\n</div>\r\n<% } %>\r\n<% if(cart.ShippingAddress) { %>\r\n<div class="score-section-hero rde-info-box">\r\n    <h2><%- labels.ShippingAddressTitle %></h2>\r\n    <div class="score-hero-body">\r\n        <p>\r\n            <%- cart.ShippingAddress.FirstName %> <%- cart.ShippingAddress.LastName %>\r\n            <br>\r\n            <%- cart.ShippingAddress.Line1 %> <%- cart.ShippingAddress.Line2 %> <%- cart.ShippingAddress.Line3 %>\r\n            <br>\r\n            <%- cart.ShippingAddress.City %>, <%- cart.ShippingAddress.CountrySubdivision %> <%- cart.ShippingAddress.PostalCode %>\r\n        </p>\r\n    </div>\r\n    <div class="score-call-to-action">\r\n        <a href="<%- labels.ShippingAddressLink %>#addressInformation" aria-label="Edit Shipping Address"><%- labels.EditCtaLabel %></a>\r\n    </div>\r\n</div>\r\n<% } %>\r\n<% if(cart.Shipping) { %>\r\n<div class="score-section-hero rde-info-box">\r\n    <h2><%- labels.ShippingMethodTitle %></h2>\r\n    <div class="score-hero-body">\r\n        <p>\r\n            <%- cart.Shipping.Description %>\r\n        </p>\r\n    </div>\r\n    <div class="score-call-to-action">\r\n        <a href="<%- labels.ShippingMethodLink %>#shippingMethods" aria-label="Edit Shipping Method"><%- labels.EditCtaLabel %></a>\r\n    </div>\r\n</div>\r\n<% } %>\r\n<% if(cart.BillingAddress && cart.TotalValue > 0) { %>\r\n<div class="score-section-hero rde-info-box">\r\n    <h2><%- labels.BillingAddressTitle %></h2>\r\n    <div class="score-hero-body">\r\n        <p>\r\n            <%- cart.BillingAddress.FirstName %> <%- cart.BillingAddress.LastName %>\r\n            <br>\r\n            <%- cart.BillingAddress.Line1 %> <%- cart.BillingAddress.Line2 %> <%- cart.BillingAddress.Line3 %>\r\n            <br>\r\n            <%- cart.BillingAddress.City %>, <%- cart.BillingAddress.CountrySubdivision %> <%- cart.BillingAddress.PostalCode %>\r\n        </p>\r\n    </div>\r\n    <div class="score-call-to-action">\r\n        <a href="<%- labels.BillingAddressLink %>#billingAddress" aria-label="Edit Billing Address"><%- labels.EditCtaLabel %></a>\r\n    </div>\r\n</div>\r\n<% } %>\r\n<% if(cart.Payment) { %>\r\n<div class="score-section-hero rde-info-box">\r\n    <h2><%- labels.PaymentMethodTitle %></h2>\r\n    <div class="score-hero-body">\r\n        <p>\r\n            <% if (cart.Payment.CardType != "payPal") { %>\r\n            <% if (cart.Payment.Brand == "Discover") { %>\r\n            <%- cart.Payment.Brand %> <img src="<%- labels.DiscoverMethodIcon %>" alt="Discover" width="30" height="18px" />\r\n            <% } else if (cart.Payment.Brand == "MasterCard") { %>\r\n            <%- cart.Payment.Brand %> <img src="<%- labels.MastercardMethodIcon %>" alt="Mastercard" width="30" height="18px" />\r\n            <% } else if (cart.Payment.Brand == "AmericanExpress") { %>\r\n            <%- cart.Payment.Brand %> <img src="<%- labels.AmexMethodIcon %>" alt="American Express" width="30" height="18px" />\r\n            <% } else { %>\r\n            <%- cart.Payment.Brand %> <img src="<%- labels.VisaMethodIcon %>" alt="Visa" width="30" height="18px" />\r\n            <% } %>\r\n            <br>\r\n            <%- cart.Payment.CardNumber %>\r\n            <% } else { %>\r\n            <%- cart.Payment.DisplayName %> <img src="<%- labels.PayPalMethodIcon %>" alt="PayPal" width="30" height="18px" />\r\n            <% } %>\r\n        </p>\r\n    </div>\r\n    <div class="score-call-to-action">\r\n        <a href="<%- labels.PaymentMethodLink %>#payment" aria-label="Edit Payment Method"><%- labels.EditCtaLabel %></a>\r\n    </div>\r\n</div>\r\n<% } %>\r\n';});

define('Resideo/Components/Cart/OrderReview',['jquery', 'underscore', 'eventManager', 'constants', 'cartService', 'identityService', 'text!Resideo/Components/Cart/Templates/OrderReview.html'],
    function ($, _, eventManager, constants, cartService, identityService, orderReviewTemplate) {
    function OrderReview(scope, labels, language) {
        var orderReviewTemplateCompiled = _.template(orderReviewTemplate);

        identityService.getECommerceToken("").then(function (token) {
            cartService.getCart(true, language)
                .then(renderReview);
        });

        eventManager.subscribe(constants.CartUpdated, renderReview);

        function renderReview(json) {
            if (json) {
                $(scope).html(orderReviewTemplateCompiled({ cart: json, labels: labels }));
                var event = document.createEvent('Event');
                event.initEvent('drRendered', true, true);
                window.dispatchEvent(event);
            }
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing
            ? null
            : new OrderReview(args.scope, args.labels, args.language);
    };
});
define('Resideo/Components/Cart/OrderReviewBackButtons',['jquery', 'identityService', 'cartService'],
    function ($, identityService, cartService) {
        function OrderReviewBackButtons(scope, language) {
            
            identityService.getECommerceToken("").then(function (token) {
                cartService.getCart(true, language)
                    .then(showButtons);
            });

            function showButtons(cart) {
                if (cart.TotalValue === 0) {
                    $('.back-to-shipping', scope).show();
                    $('.back-to-payment', scope).hide();
                } else {
                    $('.back-to-shipping', scope).hide();
                    $('.back-to-payment', scope).show();
                }
            }
        }

        return function init(args) {
            return args.IsExperienceEditorEditing
                ? null
                : new OrderReviewBackButtons(args.scope, args.language);
        };
    });

define('text!Resideo/Components/Cart/Templates/OrderReviewButton.html',[],function () { return '<% if (paymentType == "payPal") { %>\r\n    <div id="buyWithPayPalButton"></div>\r\n<% } else { %>\r\n    <a href="#" class="score-button rde-primary btn disabled rde-loader-button">\r\n        <span><%- labels.CompleteCartCtaTitle %></span>\r\n        <div class="animation-container">\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n        </div>\r\n    </a>\r\n<% } %>\r\n';});

define('Resideo/Components/Cart/OrderReviewButton',['jquery', 'underscore', 'eventManager', 'constants', 'text!Resideo/Components/Cart/Templates/OrderReviewButton.html', "payPalObjects", 'cartService', 'helpersService', 'identityService'],
    function ($, _, eventManager, constants, orderReviewButtonTemplate, payPalObjects, cartService, helpersService, identityService) {
        function OrderReviewButton(scope, labels, payPalPaymentType, publicApiKey, endpoints, payPalEnvironment, language) {
            var self = this;
            var localCart = null;
            var paymentType = null;
            identityService.getECommerceToken("").then(function (token) {
                cartService.getCart()
                    .then(function(data) {
                        localCart = data;

                        paymentType = localCart && localCart.Payment && localCart.Payment.CardType === payPalPaymentType
                            ? "payPal"
                            : "creditCard";

                        renderReviewButton();
                    });
            });

            var digitalRiverPayments = new DigitalRiver(publicApiKey),
                orderReviewButtonTemplateCompiled = _.template(orderReviewButtonTemplate),
                payPalSource,
                paymentMetadata,
                addressObject,
                userObject;

            Object.defineProperties(this,
                {
                    paymentMetadata: {
                        get: function () { return paymentMetadata },
                        set: function (value) { paymentMetadata = value; }
                    }
                });

            eventManager.subscribe(constants.PaymentUpdated, function (data) {
                paymentType = data.paymentType;
                localCart = data.cart;
                addressObject = data.address;
                userObject = data.user;
                self.paymentMetadata = data.paymentMetadata;

                renderReviewButton();
            });

            eventManager.subscribe(constants.GoToReviewButtonEnable, function () {
                $(".score-button", scope).removeClass("disabled");
            });

            eventManager.subscribe(constants.GoToReviewButtonDisable, function () {
                $(".score-button", scope).addClass("disabled");
            });

            eventManager.subscribe("Payment:InvalidPayment", function () {
                self.paymentMetadata = "";
            });

            function renderReviewButton() {
                if (localCart) {
                    var template = orderReviewButtonTemplateCompiled({ paymentType: paymentType, labels: labels });
                    $(scope).html(template);

                    if (paymentType === "payPal") {
                        renderPayPal();
                    } else {
                        $(".score-button", scope).click(function (e) {
                            e.preventDefault();

                            if ($(this).hasClass("disabled")) {
                                return false;
                            }

                            helpersService.showLoader(this);

                            if (paymentType === "creditCard") {
                                addPaymentOptionToCart(self.paymentMetadata, false);
                            }

                            return false;
                        });
                    }
                }
            }

            function renderPayPal() {
                paypal.Button.render({
                    // Configure environment
                    env: payPalEnvironment,
                    // Customize button (optional)
                    locale: 'en_US',
                    style: {
                        label: 'checkout',
                        size: 'responsive',
                        color: 'gold',
                        shape: 'rect',
                        layout: 'horizontal',
                        tagline: 'false'
                    },
                    // Set up a payment
                    payment: function (data, actions) {
                        var items = _.map(localCart.Items,
                            function (item) {
                                return {
                                    name: item.Name,
                                    quantity: item.Quantity,
                                    unitAmount: item.PriceValue
                                };
                            });

                        var payPalData = {
                            type: "payPal",
                            sessionId: localCart.PaymentSessionId,
                            payPal: {
                                returnUrl: window.location.href,
                                cancelUrl: window.location.href
                            }
                        };

                        return digitalRiverPayments.createSource(payPalData).then(function (result) {
                            if (result.error) {
                                eventManager.trigger(constants.PaymentError, result);

                                return null;
                            } else {
                                payPalSource = result.source;

                                return result.source.payPal.token;
                            }
                        });
                    },
                    onAuthorize: function (data, actions) {
                        // Execute the payment
                        addPaymentOptionToCart(payPalSource, true);
                    }
                }, '#buyWithPayPalButton');
            }

            eventManager.subscribe("Payment:CheckIfValid", function () {

                if (paymentType === "creditCard" && self.paymentMetadata) {
                    //valid, enable button
                    $(".score-button", scope).removeClass("disabled");
                }
            });

            function addPaymentOptionToCart(source, isPayPalPayment) {
                cartService.applyPaymentOption(source.id, isPayPalPayment, language)
                    .done(function () {
                        eventManager.trigger(constants.BillingFormSubmit, endpoints.orderConfirmPageLink);
                    });
            }
        }

        return function init(args) {
            return args.IsExperienceEditorEditing
                ? null
                : new OrderReviewButton(args.scope,
                    args.labels,
                    args.payPalPaymentType,
                    args.publicApiKey,
                    args.endpoints,
                    args.payPalEnvironment,
                    args.language);
        };
    }
);

define('text!Resideo/Components/Cart/Templates/OrderReviewStatus.html',[],function () { return '<div class="score-document-header rde-cart-header">\r\n    <h1><%- labels.OrderReviewTitle %></h1>\r\n</div>\r\n<% if (isError && messages != null) { %>\r\n<div class="score-style-box rde-message rde-error">\r\n    <div class="score-column2 wide-left">\r\n        <div class="score-left">\r\n            <p class="rde-warning">\r\n                <%- messages[0].Description %>\r\n            </p>\r\n        </div>\r\n        <!--<div class="score-right">\r\n            <a href="<%- labels.BackToPaymentCtaLink %>" class="score-button rde-arrow rde-arrow-left"><%- labels.BackToPaymentCtaTitle %></a>\r\n        </div>-->\r\n    </div>\r\n</div>\r\n<% } %>';});

define('Resideo/Components/Cart/OrderReviewStatus',['jquery', 'underscore', 'eventManager', 'constants', 'text!Resideo/Components/Cart/Templates/OrderReviewStatus.html'],
function ($, _, eventManager, constants, orderReviewStatusTemplate) {
    function OrderReviewStatus(scope, labels, messages) {
        var orderReviewStatusTemplateCompiled;
        new Promise(function (resolve, reject) {
            orderReviewStatusTemplateCompiled = _.template(orderReviewStatusTemplate);

            renderReview(null, false);
            resolve();
        });

        eventManager.subscribe(constants.CartSubmitFailed, function (data) {
            renderReview(data, true);

            //trigger purchaseError analytics
            eventManager.trigger(constants.PurchaseError, messages);
        });

        function renderReview(json, isError) {
            $(scope).html(orderReviewStatusTemplateCompiled({ labels: labels, messages: json, isError: isError }));
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new OrderReviewStatus(args.scope, args.labels, args.messages);
    };
});

define('text!Resideo/Components/Cart/Templates/OrderSubmitButton.html',[],function () { return '<a href="#" class="score-button rde-primary rde-loader-button">\r\n    <span><%- labels.CompleteCartCtaTitle %></span>\r\n    <div class="animation-container">\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n    </div>\r\n</a>';});

define('Resideo/Components/Cart/OrderSubmitButton',['jquery', 'underscore', 'eventManager', 'text!Resideo/Components/Cart/Templates/OrderSubmitButton.html', 'cartService', 'constants', 'helpersService', 'storageService', 'identityService'],
    function ($, _, eventManager, orderSubmitButtonTemplate, cartService, constants, helpersService, storageService, identityService) {

        function OrderSubmitButton(scope, urls, labels, payPalPaymentType, language, site, isAuthenticated, userId, roles) {
        var orderSubmitButtonTemplateCompiled = _.template(orderSubmitButtonTemplate);

        identityService.getECommerceToken("").then(function(token) {
            cartService.getCart()
                .then(renderSubmitButton);
        });

        eventManager.subscribe(constants.PaymentUpdated, function (data) {
            renderSubmitButton(data.cart, data.paymentSource);
        });

        function submitCart(ipAddress) {
            cartService.submitCart(language, ipAddress, site)
                .done(function (data) {
                    var item = data.Item1;
                    if (item) {
                        storageService.clearLocalCart();
                        storageService.clearECommerceToken();
                        identityService.getECommerceToken(urls.tokenUrl, false, true, isAuthenticated, userId, roles).then(function() {
                            window.location.href = urls.orderConfirmationPageUrl + "?guid=" + item.SessionId;
                        });
                    }
                })
                .fail(function () {
                })
                .always(function() {
                    helpersService.hideLoader();
                    var errorBanner = $(".rde-error");
                    if (errorBanner && errorBanner.length > 0 && errorBanner.is(":visible")) {
                        $('html, body').animate({
                                scrollTop: $(".rde-error").offset().top - $("header")[0].offsetHeight
                            },
                            500);
                    }
                });
        }

        function renderSubmitButton(json) {
            if (json) {
                $(scope).html(orderSubmitButtonTemplateCompiled({ cart: json, labels: labels, payPalPaymentType: payPalPaymentType }));

                $(".score-button", scope).click(function (e) {
                    e.preventDefault();

                    helpersService.showLoader(this);

                    if (urls.ipServiceUrl === "") {
                        submitCart("");
                        return false;
                    }
                    $.ajax({
                            url: urls.ipServiceUrl
                        })
                        .done(function (data) {
                            var ip = '';
                            if (data && data.ip) {
                                ip = data.ip;
                            }
                            submitCart(ip);
                        })
                        .fail(function() {
                            submitCart("");
                        });

                    return false;
                });
            }
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing
            ? null
            : new OrderSubmitButton(args.scope, args.urls, args.labels, args.payPalPaymentType, args.language, args.site, args.isAuthenticated, args.userId, args.roles);
    };
});

define('text!Resideo/Components/Cart/Templates/OrderSummaryItem.html',[],function () { return '<div class="score-column2 wide-left rde-item-line">\r\n    <div class="score-left">\r\n        <div class="score-column2 wide-right">\r\n            <div class="score-left">\r\n                <a href="<%- item.Url %>">\r\n                    <img src="<%- item.ImageUrl %>" class="score-image rde-product-image" alt="<%- item.Name %>">\r\n                </a>\r\n            </div>\r\n            <div class="score-right">\r\n                <div class="score-content-spot rde-product-info">\r\n                    <p>\r\n                        <strong><a href="<%- item.Url %>"><%- item.SkuTitle %></a></strong>\r\n                        <span><%- item.SKU %></span>\r\n                        <%- item.Description %>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="score-right">\r\n        <div class="score-column2 wide-right">\r\n            <div class="score-left">\r\n                <div class="score-content-spot rde-product-price">\r\n                    <p>x<%- item.Quantity %></p>\r\n                </div>\r\n            </div>\r\n            <div class="score-right">\r\n                <div class="score-content-spot rde-product-price">\r\n                    <div class="score-style-box">\r\n                        <% if(item.ListPrice != item.SalePrice) { %>\r\n                        <span class="strike">\r\n                            <span aria-hidden="true"><%- item.FormattedListPriceWithQuantity %></span>\r\n                            <span class="rde-screen-reader-only"><%- labels.PriceStrickenLabel %> <%- item.FormattedListPriceWithQuantity %></span>\r\n                        </span>\r\n                        <% } %>\r\n                        <div>\r\n                            <p aria-hidden="true"><%- item.FormattedSalePriceWithQuantity %></p>\r\n                            <div class="rde-screen-reader-only"><%- labels.PriceLabel %> <%- item.FormattedSalePriceWithQuantity %></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!Resideo/Components/Cart/Templates/OrderSummarySummary.html',[],function () { return '<div class="score-column2 wide-left rde-summary-footer">\r\n    <div class="score-left">\r\n        <div class="score-content-spot">\r\n            <p>\r\n                <% if(shippingMethod) { %>\r\n                    <%- shippingMethod.Description %>\r\n                <% } %>\r\n                <% if (taxCalculated) { %>\r\n                    <span><%- labels.TaxLabel %></span>\r\n                <% } else { %>\r\n                    <span><%- labels.TaxLabel %> <%- labels.TaxNotAppliedLabel %></span>\r\n                <% } %>\r\n                <% if(cart.DiscountValue > 0) { %>\r\n                    <span><%- labels.DiscountLabel %></span>\r\n                <% } %>\r\n                <span><%- labels.TotalLabel %></span>\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div class="score-right">\r\n        <div class="score-content-spot">\r\n            <p>\r\n                <% if(shippingMethod) { %>\r\n                    <%- cart.ShippingPrice %>\r\n                <% } %>\r\n                <span><%- cart.Tax %></span>\r\n                <% if(cart.DiscountValue > 0) { %>\r\n                    <span>-<%- cart.Discount %></span>\r\n                <% } %>\r\n                <span><strong><%- cart.Total %></strong></span>\r\n            </p>\r\n        </div>\r\n    </div>\r\n</div>';});

define('Resideo/Components/Cart/OrderSummary',['jquery', 'underscore', 'eventManager', 'constants', 'cartService', 'identityService', 'text!Resideo/Components/Cart/Templates/OrderSummaryItem.html', 'text!Resideo/Components/Cart/Templates/OrderSummarySummary.html'],
    function ($, _, eventManager, constants, cartService, identityService, itemTemplate, summaryTemplate) {

        function OrderSummary(scope, labels) {
            identityService.getECommerceToken("").then(function(token) {
                cartService.getCart()
                    .then(renderSummary);
            });

        // buy journey summary collapse
        $('.rde-order-summary').on('click', function (e) {
            e.preventDefault();
            $(this).next('.score-column1').slideToggle(300);
            $(this).toggleClass('open');
        });

        var itemTemplateCompiled = _.template(itemTemplate);
        var summaryTemplateCompiled = _.template(summaryTemplate);

        eventManager.subscribe(constants.CartUpdated, renderSummary);

        function renderSummary(json) {
            $(".rde-summary-footer", scope).remove();
            $(".rde-item-line", scope).remove();

            $("#OrderSummaryCartId", scope).html(labels.RefNumberLabel + ' ' + json.CartId);

            if (json) {
                _.each(json.Items.sort(), function (item) {
                    $(".rde-product-separator:eq(0)", scope).after(itemTemplateCompiled({ item: item, labels: labels }));
                });

                var shippingMethod = null;
                if (json.Shipping && json.Shipping.Id) {
                    shippingMethod = _.find(json.ShippingOptions, function(option) {
                            return option.Id === json.Shipping.Id;
                        });
                }
                var taxCalculated = json.TaxValue > 0 || (json.ShippingAddress && json.ShippingAddress.PostalCode);
                $(".rde-product-separator:eq(1)", scope).after(summaryTemplateCompiled({ cart: json, labels: labels, shippingMethod: shippingMethod, taxCalculated: taxCalculated }));
                $("#subtotal", scope).html(json.Total);
            }
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new OrderSummary(args.scope, args.labels);
    };
});

define('text!Resideo/Components/Cart/Templates/ShoppingCartItemV2.html',[],function () { return '<div class="score-column2 wide-right rde-shopping-cart-row <% if(removedItem !== null) { %>rde-removed-item <% } %>" <% if(addedSku === item.SKU || (updatedItem !== null && updatedItem.SKU === item.SKU)) { %>role="alert"<% } %>>\r\n    <div class="score-left">\r\n        <div class="score-column2 equal">\r\n            <div class="score-left">\r\n                <a href="<%- item.Url %>" <% if(item.Url.indexOf("http") == 0 && item.Url.indexOf(window.location.host) < 0) { %>target="_blank" <% } %>>\r\n                    <img src="<%- item.ImageUrl %>" class="score-image (img-responsive) rde-product-image" alt="<%- item.SkuTitle %>">\r\n                </a>\r\n            </div>\r\n            <div class="score-right">\r\n                <img src="<%- item.BrandImageUrl %>" class="score-image rde-product-logo" alt="<%- item.Brand %>" aria-label="<%- item.Brand %> Logo">\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="score-right">\r\n        <div class="score-column2 equal">\r\n            <div class="score-left">\r\n                <div class="score-column2 equal">\r\n                    <div class="score-left">\r\n                        <div class="score-content-spot rde-product-info">\r\n                            <p>\r\n                                <% if(removedItem === null || removedItem.SKU !== item.SKU) { %>\r\n                                    <strong><a href="<%- item.Url %>" <% if(item.Url.indexOf("http") == 0 && item.Url.indexOf(window.location.host) < 0) { %>target="_blank" <% } %>><%- item.SkuTitle %></a></strong>\r\n                                    <span><%- item.SKU %></span>\r\n                                <%- item.Description %>\r\n                                <% } else { %>\r\n                                    <strong role="alert"><%- labels.RemovedItemText.replace(\'{SKU_Title}\', item.SkuTitle) %></strong>\r\n                                <% } %>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    <div class="score-right" <% if(removedItem !== null && removedItem.SKU === item.SKU) { %>style="display:none;" <% } %>>\r\n                        <div class="score-content-spot rde-stock">\r\n                            <p>\r\n                                <% if(item.IsBackorder) { %>\r\n                                <span><%- labels.BackorderLabel %></span>\r\n                                <% } else if(!item.IsPreorder) { %>\r\n                                <span><%- labels.InStockLabel %></span>\r\n                                <% } else if(item.IsPreorder) { %>\r\n                                <span><%- labels.PreorderLabel %></span>\r\n                                <% } %>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="score-right" <% if(removedItem !== null && removedItem.SKU === item.SKU) { %>style="display:none;" <% } %>>\r\n                <div class="score-column2 equal">\r\n                    <div class="score-left">\r\n                        <div class="input-group">\r\n                            <span class="input-group-btn">\r\n                                <button class="quantity-left-minus btn <%= (item.Quantity == 1) ? \'disabled\' : \'\' %>" data-type="minus" data-field="" style="background:none;padding: 0;">\r\n                                    <img src="/areas/resideo/img/ic-minus-v2.svg" style="padding:0;" alt="minus quantity 1" />\r\n                                </button>\r\n                            </span>\r\n                            <input type="text" class="form-control input-number" value="<%- item.Quantity %>" min="1" max="<%- item.MaxQuantity %>" readonly aria-label="<%- item.SkuTitle %> quantity">\r\n                            <span class="input-group-btn">\r\n                                <button class="quantity-left-plus btn <%= (item.Quantity == item.MaxQuantity) ? \'disabled\' : \'\' %>" data-type="plus" data-field="" style="background:none;padding: 0;">\r\n                                    <img src="/areas/resideo/img/ic-plus-v2.svg" style="padding:0;" alt="plus quantity 1" />\r\n                                </button>\r\n                            </span>\r\n                        </div>\r\n                        <% if(item.MaxQuantity == item.Quantity) { %>\r\n                            <p class="score-lead quantity-limit-message">\r\n                        <% } else { %>\r\n                            <p class="score-lead quantity-limit-message" style="display: none;">\r\n                        <% } %>\r\n                        <%= messages.QuantityLimitMessage.replace("{x}", item.MaxQuantity) %>\r\n                        </p>\r\n                    </div>\r\n                    <div class="score-right">\r\n                        <div class="score-content-spot rde-product-price">\r\n                            <div class="score-style-box">\r\n                                <% if(item.ListPrice != item.SalePrice) { %>\r\n                                <span class="strike">\r\n                                    <span aria-hidden="true"><%- item.FormattedListPriceWithQuantity %></span>\r\n                                    <span class="rde-screen-reader-only"><%- labels.PriceStrickenLabel %> <%- item.FormattedListPriceWithQuantity %></span>\r\n                                </span>\r\n                                <% } %>\r\n                                <div>\r\n                                    <p aria-hidden="true"><%- item.FormattedSalePriceWithQuantity %></p>\r\n                                    <div class="rde-screen-reader-only"><%- labels.PriceLabel %> <%- item.FormattedSalePriceWithQuantity %></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <a href="#" class="score-button rde-product-close-button">\r\n                            <img src="/areas/resideo/img/close-modal.svg" alt="<%- labels.RemoveFromCardLabel.replace(\'{SKU_Title}\', item.SkuTitle) %>" />\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<% if(containerId !== null) { %>\r\n    <div id="<%- containerId %>" class="rde-candy-rack"></div>\r\n<% } %>\r\n<div class="score-content-spot rde-product-separator">\r\n</div>';});


define('text!Resideo/Components/Cart/Templates/CandyRackItem.html',[],function () { return '<div class="score-column2 wide-right rde-shopping-cart-row rde-candy-rack-row" sku="<%- item.SKU %>">\r\n    <div class="score-left">\r\n        <div class="score-column1">\r\n            <div class="score-center">\r\n                <a href="<%- item.Url %>">\r\n                    <img src="<%- item.ImageUrl %>" class="score-image rde-product-image" alt="<%- item.SkuTitle %>">\r\n                </a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="score-right">\r\n        <div class="score-column2 equal">\r\n            <div class="score-left">\r\n                <div class="score-column2 equal">\r\n                    <div class="score-left">\r\n                        <div class="score-content-spot rde-product-info">\r\n                            <p>\r\n                                <strong><a href="<%- item.Url %>"><%- item.SkuTitle %></a></strong>\r\n                                <span><%- item.SKU %></span>\r\n                                <%- item.Description %>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    <div class="score-right">\r\n                        <div class="score-content-spot rde-stock">\r\n                            <p>\r\n                                <% if(item.IsBackorder) { %>\r\n                                <span><%- labels.BackorderLabel %></span>\r\n                                <% } else if(!item.IsPreorder) { %>\r\n                                <span><%- labels.InStockLabel %></span>\r\n                                <% } else if(item.IsPreorder) { %>\r\n                                <span><%- labels.PreorderLabel %></span>\r\n                                <% } %>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="score-right">\r\n                <div class="score-column2 wide-right">\r\n                    <div class="score-left">\r\n                        <div class="score-content-spot rde-product-price">\r\n                            <div class="score-style-box">\r\n                                <% if(item.ListedPrice != item.SalePrice) { %>\r\n                                    <span class="strike">\r\n                                        <span aria-hidden="true"><%- item.ListedPrice %></span>\r\n                                        <span class="rde-screen-reader-only"><%- labels.PriceStrickenLabel %> <%- item.ListedPrice %></span>\r\n                                    </span>\r\n                                <% } %>\r\n                                <div>\r\n                                    <p aria-hidden="true"><%- item.SalePrice %></p>\r\n                                    <div class="rde-screen-reader-only"><%- labels.PriceLabel %> <%- item.SalePrice %></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="score-right">\r\n                        <a class="score-button rde-secondary rde-loader-button rde-candy-rack-add-to-cart" tabindex="0">\r\n                            <span>ADD TO CART</span>\r\n                            <div class="animation-container">\r\n                                <div></div>\r\n                                <div></div>\r\n                                <div></div>\r\n                                <div></div>\r\n                            </div>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!Resideo/Components/Cart/Templates/ShoppingCartSummary.html',[],function () { return '        <div class="score-column2 wide-left equal rde-cart-summary">\r\n            <div class="score-left">\r\n                <div class="score-content-spot rde-stock">\r\n                    <p>\r\n                        <% if(cart.DiscountValue > 0) { %>\r\n                            <%- labels.DiscountLabel %>\r\n                            <br>\r\n                        <% } %>\r\n                        <%- labels.SubtotalLabel %>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n            <div class="score-right">\r\n                <div class="score-content-spot rde-product-price">\r\n                    <p>\r\n                        <% if(cart.DiscountValue > 0) { %>\r\n                            -<%- cart.Discount %>\r\n                            <br>\r\n                        <% } %>\r\n                        <%- cart.Subtotal %>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n';});

define('Resideo/Components/Cart/ShoppingCart',['jquery', 'underscore', 'eventManager', 'cartService', 'productService', 'identityService', 'constants', 'text!Resideo/Components/Cart/Templates/ShoppingCartItemV2.html', 'text!Resideo/Components/Cart/Templates/CandyRackItem.html', 'text!Resideo/Components/Cart/Templates/ShoppingCartSummary.html', 'payPalObjects', 'digitalRiver', 'helpersService'],
    function ($, _, eventManager, cartService, productService, identityService, constants, itemTemplate, candyRackTemplate, summaryTemplate, payPalObjects, digitalRiver, helpersService) {

        function ShoppingCart(scope, labels, messages, urls, language, publicApiKey, payPalEnvironment) {

            identityService.getECommerceToken("").then(function (token) {
                cartService.getCart()
                    .then(resolve, reject);
            });

            var itemTemplateCompiled = _.template(itemTemplate);
            var summaryTemplateCompiled = _.template(summaryTemplate);
            var candyRackTemplateCompiled = _.template(candyRackTemplate);

            var digitalRiverPayments = new DigitalRiver(publicApiKey);
            var payPalSource;

            eventManager.subscribe(constants.CartUpdated, function (data) {
                renderCart(data);
                renderPayPal(data);
            });

            function resolve(data) {
                renderCart(data);
                renderPayPal(data);

                if (data.Items && data.Items.length > 0) {
                    productService.triggerInterstitialDialog();
                }
            }

            function reverseArr(input) {
                var ret = new Array;
                for (var i = input.length - 1; i >= 0; i--) {
                    ret.push(input[i]);
                }
                return ret;
            }

            function reject(data) {
                //reserved for the error handling
            }

            $(".continue-shopping-button", scope).on("click", function () {
                helpersService.showLoader(this);
            });

            function renderPayPal(cart) {
                $("#buyWithPayPalButton", scope).html("");

                if (cart.TotalValue === 0) {
                    $("#buyWithPayPalButton", scope).hide();
                    return;
                } else {
                    $("#buyWithPayPalButton", scope).show();
                }

                paypal.Button.render({
                    // Configure environment
                    env: payPalEnvironment,
                    // Customize button (optional)
                    locale: 'en_US',
                    style: {
                        label: 'checkout',
                        size: 'responsive',
                        color: 'gold',
                        shape: 'rect',
                        layout: 'horizontal',
                        tagline: 'false'
                    },
                    // Set up a payment
                    payment: function (data, actions) {

                        var payPalData = {
                            type: "payPal",
                            sessionId: cart.PaymentSessionId,
                            payPal: {
                                returnUrl: window.location.href,
                                cancelUrl: window.location.href
                            }
                        };

                        return digitalRiverPayments.createSource(payPalData).then(function (result) {
                            if (result.error) {
                                eventManager.trigger(constants.PaymentError, result);

                                return null;
                            } else {
                                payPalSource = result.source;

                                return result.source.payPal.token;
                            }
                        });
                    },
                    onAuthorize: function (data, actions) {
                        // Execute the payment
                        cartService.applyPaymentOption(payPalSource.id, true, language)
                            .done(function (cart) {
                                eventManager.trigger(constants.PaymentUpdated, {
                                    cart: cart,
                                    address: cart.ShippingAddress,
                                    user: cart.Shopper,
                                    paymentType: "payPal",
                                    paymentMetadata: {}
                                });

                                window.location = urls.RedirectPageUrl;
                            });
                    }
                }, '#buyWithPayPalButton');
            }

            var cancelAddWhenEmpty = false;
            var skus = [];
            var viewportIndex = -1;
            var addedSku = null;
            var removedItem = null;
            var updatedItem = null;

            function renderCart(json) {
                var closestParent = $(scope).closest(".rde-shopping-cart-items");
                $(closestParent).find(".rde-shopping-cart-row").remove();
                $(closestParent).find(".rde-product-separator").remove();
                $("#continueButton", scope).addClass("disabled");
                $("#continueButton", scope).attr("href", "#");

                if (json && json.Items) {

                    skus = [];

                    //workaround to avoid empty card right after adding a product
                    if (json.Items.length == 0) {

                        var sku = getTempCookie('sc_added_product');
                        if (sku != '') {
                            if (!cancelAddWhenEmpty)
                                cartService.addToCart(sku);
                            cancelAddWhenEmpty = true;
                        }

                        if (removedItem !== null) {
                            var compiledMarkup = itemTemplateCompiled({
                                item: removedItem,
                                labels: labels,
                                messages: messages,
                                containerId: null,
                                addedSku: null,
                                removedItem: removedItem,
                                updatedItem: null
                            });

                            eventManager.trigger(constants.CartLastItemRemoved, compiledMarkup);
                        }

                        removedItem = null;
                        updatedItem = null;
                        addedSku = null;

                        return;
                    }

                    createTempCookie('sc_added_product', '', 1);
                    //--

                    $("#continueButton", scope).removeClass("disabled");
                    $("#continueButton", scope).attr("href", urls.ShippingPageUrl);

                    var itemsInReverse = reverseArr(json.Items);
                    _.each(itemsInReverse, function (item) {
                        skus.push(item.SKU);
                        var containerId = item.SKU.replace("/", "-");
                        $(scope).prepend(itemTemplateCompiled({
                            item: item,
                            labels: labels,
                            messages: messages,
                            containerId: containerId,
                            addedSku: addedSku,
                            removedItem: null,
                            updatedItem: updatedItem
                        }));

                        var relatedItems = item.RelatedItems;
                        if (relatedItems && relatedItems.length > 0) {
                            var selector = "#" + containerId;
                            var relatedItemsInReverse = reverseArr(relatedItems);
                            _.each(relatedItemsInReverse, function (relatedItem) {
                                $(selector).prepend(candyRackTemplateCompiled({ item: relatedItem, labels: labels, messages: messages }));

                                $(".rde-candy-rack-add-to-cart", scope).first().click({ relatedItem: relatedItem }, function (e) {
                                    e.preventDefault();
                                    helpersService.showLoader(this);
                                    clearAlertRole();
                                    cartService.addToCart(relatedItem.SKU);
                                    addedSku = relatedItem.SKU;
                                });

                                $(".rde-candy-rack-add-to-cart", scope).first().on("keydown", { relatedItem: relatedItem }, function (e) {
                                    if (e.keyCode === 13) {
                                        e.preventDefault();
                                        helpersService.showLoader(this);
                                        clearAlertRole();
                                        cartService.addToCart(relatedItem.SKU);
                                        addedSku = relatedItem.SKU;
                                    }
                                });
                            });
                        }

                        $(".btn[data-type='minus']", scope).first().click({ item: item }, function (e) {
                            if (!$(this).hasClass("disabled") && item.Quantity > 1) {
                                $(this).addClass("disabled");
                                updatedItem = item;
                                clearAlertRole();
                                cartService.decreaseQuantity(item.ItemId, language);
                                viewportIndex = findViewPortIndex(skus, item.SKU);
                            }
                        });
                        $(".btn[data-type='plus']", scope).first().click({ item: item }, function (e) {
                            if (!$(this).hasClass("disabled") && item.Quantity < item.MaxQuantity) {
                                $(this).addClass("disabled");
                                updatedItem = item;
                                clearAlertRole();
                                cartService.increaseQuantity(item.ItemId, language);
                                viewportIndex = findViewPortIndex(skus, item.SKU);
                            }
                        });

                        $(".rde-product-close-button", scope).first().click({ item: item }, function (e) {
                            e.preventDefault();
                            clearAlertRole();
                            cartService.removeFromCart(item, language);
                            removedItem = item;
                        });
                    });

                    if (addedSku !== null) {
                        viewportIndex = findViewPortIndex(skus, addedSku);
                        addedSku = null;
                    }

                    if (removedItem !== null) {
                        viewportIndex = 0;
                        $(scope).prepend(itemTemplateCompiled({
                            item: removedItem,
                            labels: labels,
                            messages: messages,
                            containerId: null,
                            addedSku: null,
                            removedItem: removedItem,
                            updatedItem: null
                        }));
                        $(".rde-removed-item a").focus();

                        removedItem = null;
                    }

                    if (viewportIndex > -1) {
                        helpersService.scrollToTheTopOfElement($(".rde-shopping-cart-row", scope).not('.rde-candy-rack-row').eq(viewportIndex));
                    }

                    eventManager.trigger("Cart:InitializeBanner", json);

                    $(".rde-promo-code-row .score-right", scope).html(summaryTemplateCompiled({ cart: json, labels: labels }));

                    updatedItem = null;
                }
            }

            function createTempCookie(name, value, seconds) {
                var date = new Date();
                date.setTime(date.getTime() + (seconds * 1000));
                var expires = "; expires=" + date.toGMTString();
                document.cookie = name + "=" + value + expires + "; path=/";
            }

            function getTempCookie(c_name) {
                if (document.cookie.length > 0) {
                    c_start = document.cookie.indexOf(c_name + "=");
                    if (c_start != -1) {
                        c_start = c_start + c_name.length + 1;
                        c_end = document.cookie.indexOf(";", c_start);
                        if (c_end == -1) {
                            c_end = document.cookie.length;
                        }
                        return unescape(document.cookie.substring(c_start, c_end));
                    }
                }
                return "";
            }

            function findViewPortIndex(arr, sku) {
                var index = _.findIndex(arr.reverse(), function (productSku) { return productSku === sku });
                arr.reverse();
                return index;
            }

            function clearAlertRole() {
                $('.rde-shopping-cart-row[role="alert"]').removeAttr("role");
            }
        }

        return function init(args) {
            return args.IsExperienceEditorEditing
                ? null
                : new ShoppingCart(args.scope, args.labels, args.messages, args.urls, args.language, args.publicApiKey, args.payPalEnvironment);
        };
    });

define('Resideo/Components/Catalog/CatalogCoveoNoResults',['jquery', 'eventManager'], function ($, eventManager) {
    function CatalogCoveoNoResults(scope) {
        if ($("body").hasClass("experience-editor"))
            return;

        var root = document.body;
        root.addEventListener('deferredQuerySuccess', function (e, data) {

            if (e.detail.results.totalCount == 0) {
                 
                    $(".coveo-custom-no-results").find(".slick-slider").css('opacity', 0);
                    $(".CoveoQuerySummary").hide();
                    //$(".coveo-main-section").hide();
                    //$(".CoveoSearchInterface").css('min-height', 'unset');
                    $(".coveo-custom-no-results").fadeIn(500);
                    //triggering event for ProductList slick slider to refresh
                    eventManager.trigger("coveoNoResultsShown", term);
                    $(".coveo-custom-no-results-term").text(e.detail.query.q);
                    $(".coveo-custom-no-results").find(".slick-next").click();
                    $(".coveo-custom-no-results").find(".slick-prev").click();
                    setTimeout(function () {
                        $(".coveo-custom-no-results").find(".slick-slider").css('opacity', 1);
                        $(".coveo-custom-no-results").find(".slick-slider").hide();
                        $(".coveo-custom-no-results").find(".slick-slider").fadeIn(500);

                    }, 500);//delay to not show building carousel
                 
            } else {
                $(".coveo-custom-no-results").hide();
                $(".CoveoQuerySummary").fadeIn(500);
            }
        });

        //load, adding ".coveo-card-layout.CoveoResult" check for initial load with no results
        // adding ".coveo-placeholder-result" check for initial load with no results for Pro Search list view
        if ($(".coveo-query-summary-no-results-string").length != 0 || (!$(".CoveoResult").length && !$(".coveo-placeholder-result").length)) {
             
                var term = '';
                var match = window.location.hash.match(/q=(.+)&/i);
                if (match && match.length > 0) {
                    term = window.location.hash.match(/q=(.+)&/i)[0].replace('q=', '').replace('&', '');
                }
                else {
                    match = window.location.hash.match(/q=(.+)/i);
                    if (match && match.length > 0) {
                        term = window.location.hash.match(/q=(.+)/i)[0].replace('q=', '');
                    }
                }

                $(".coveo-custom-no-results").find(".slick-slider").css('opacity', 0);
                $(".CoveoQuerySummary").hide();
                //$(".coveo-main-section").hide();
                $(".coveo-custom-no-results").fadeIn(500);
                $(".coveo-custom-no-results-term").text(decodeURIComponent(term));
                $(".coveo-custom-no-results").find(".slick-next").click();
                $(".coveo-custom-no-results").find(".slick-prev").click();
                setTimeout(function () {
                    $(".coveo-custom-no-results").find(".slick-slider").css('opacity', 1);
                }, 500);//delay to not show building carousel
             
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new CatalogCoveoNoResults(args.scope);
    }
});
define('Resideo/Components/Catalog/CoveoTileTooltip',['jquery'],
    function ($) {
        function CoveoTileTooltip(scope) {
        }

        return function init(args) {
            return args.IsEditing ? null : new CoveoTileTooltip(args.scope);
        };
    });
define('Resideo/Components/Catalog/DiscontinuedBanner',['jquery'],
    function ($) {
        function DiscontinuedBanner(scope) {
        }

        return function init(args) {
            return args.IsEditing ? null : new DiscontinuedBanner(args.scope);
        };
    });
define('Resideo/Components/Catalog/DiscontinuedToolTipBanner',['jquery'],
    function ($) {
        function DiscontinuedToolTipBanner(scope) {
            $(".discontinued")
                .on("mouseenter", function () {
                    $(this).addClass('open');
                    var ariaExpanded = $(this).find(".rde-tooltip");
                    ariaExpanded.attr('aria-expanded', true);
                })
                .on("mouseleave", function () {
                    $(this).removeClass('open');
                    var ariaExpanded = $(this).find(".rde-tooltip");
                    ariaExpanded.attr('aria-expanded', false);
                });
        }

        return function init(args) {
            return args.IsEditing ? null : new DiscontinuedToolTipBanner(args.scope);
        };
    });

define('text!Resideo/Components/Catalog/Templates/Price.html',[],function () { return '<h3 class="rde-product-price <%- strike %>">\r\n    <span aria-hidden="true"><%- price %></span>\r\n    <span class="rde-screen-reader-only"><%- label %> <%- price %></span>\r\n</h3>';});

define('Resideo/Components/Catalog/ProductActionButtonsAndPricing',['jquery', 'underscore', 'cartService', 'productService', 'logService', 'eventManager', 'helpersService', 'storageService', 'constants', 'priceSpiderCustom', 'text!Resideo/Components/Catalog/Templates/Price.html'],
    function ($, _, cartService, productService, logService, eventManager, helpersService, storageService, constants, priceSpiderCustom, priceTemplate) {
        function ProductActionButtonsAndPricing(scope, labels, urls, displayDirectToConsumer) {

            var $buttonAddToCart = $('.js-add-to-cart', scope);
            var $buttonAddToCartStatus = $('.rde-cart-status', $buttonAddToCart);
            var $buttonFindAPro = $('.js-find-a-pro', scope);
            var $buttonFindARetailer = $('.js-find-a-retailer', scope);
            var $productStatus = $('.rde-product-status', scope);
            var $productPrice = $('.js-product-price', scope);
            var $productPriceWrapper = $('.rde-price-wrapper', scope);
            var $productBackOrderMessageWrapper = $('.rde-backorder-message-wrapper', scope);

            var priceSpiderRebind = function(productSku){
				//update priceSpider button
				$(".ps-widget").attr("ps-sku", productSku);
                priceSpiderCustom.rebind();
            }

            var priceTemplateCompiled = _.template(priceTemplate);

            new Promise(function (resolve, reject) {
                window.addEventListener('productChanging', function (e) {
                    $(".rde-pdp-price-area-loading").show();
                    $(".rde-pdp-price-area").hide();
                    $(".js-find-a-retailer-group").hide();
                });

                window.addEventListener('productChanged', function (e) {
                    var productSku = productViewModel().SkuNumber;
                    if (displayDirectToConsumer && productSku) {
                        productService.getPrice(productSku)
                            .then(function (priceData) {
                                var item = priceData.Item1;
                                if (item) {
                                    $productBackOrderMessageWrapper.hide();
                                    if (item.ListedPrice === item.SalePrice) {
                                        $productPrice.html(priceTemplateCompiled({
                                            strike: '',
                                            price: item.ListedPrice,
                                            label: labels.PriceLabel
                                        }));
                                    } else {
                                        $productPrice.html(priceTemplateCompiled({
                                            strike: 'strike',
                                            price: item.ListedPrice,
                                            label: labels.PriceStrickenLabel
                                        }));
                                        $productPrice.append(priceTemplateCompiled({
                                            strike: '',
                                            price: item.SalePrice,
                                            label: labels.PriceLabel
                                        }));
                                    }

                                    if (item.IsPreorder) {
                                        $productStatus.html(labels.PreorderLabel);
                                        $productPriceWrapper.removeClass('rde-product-out-of-stock');
                                        $buttonAddToCart.prop('disabled', false);
                                        $buttonAddToCartStatus.html(labels.AddToCartLabel);
                                    } else if (item.IsBackorder) {
                                        $productStatus.empty();
                                        $productPrice.addClass("rde-remove-border");
                                        $productPriceWrapper.removeClass('rde-product-out-of-stock');
                                        $buttonAddToCart.prop('disabled', false);
                                        $productBackOrderMessageWrapper.show();
                                        $buttonAddToCartStatus.html(labels.BackorderLabel);
                                    } else if (item.IsInStock) {
                                        $productStatus.html(labels.InStockLabel);
                                        $productPrice.removeClass("rde-remove-border");
                                        $productPriceWrapper.removeClass('rde-product-out-of-stock');
                                        $buttonAddToCart.prop('disabled', false);
                                        $buttonAddToCartStatus.html(labels.AddToCartLabel);
                                    } else {
                                        $productStatus.empty();
                                        $productPriceWrapper.addClass('rde-product-out-of-stock');
                                        $buttonAddToCart.prop('disabled', true);
                                        $buttonAddToCartStatus.html(labels.OutOfStockLabel);
                                    }
                                } else {
                                    // error
                                    if (priceData.Item2) {
                                        logService.error(priceData.Item2[0]);
                                    } else {
                                        logService.error('SKU ' + productSku + ' does not exist');
                                    }
                                }
                                $(".rde-pdp-price-area-loading").hide();
                                $(".rde-pdp-price-area").show();

                                priceSpiderRebind(productSku);
								
                            }, function (error) {

                                // error
                                $(".rde-pdp-price-area-loading").hide();
                                $(".rde-pdp-price-area").show();
								
								
                            });
                    }
		
					priceSpiderRebind(productSku);
				});

                if (document.querySelector('.js-add-to-cart', scope)) {
                    $($buttonAddToCart).click(function (e) {
                        e.preventDefault();

                        helpersService.showLoader(this);

                        cartService.addToCart(productViewModel().SkuNumber)
                            .done(function (data) {
                                var item = data.Item1;
                                if (item) {
                                    // setting this param so we know in back-end that this request is coming from PDP
                                    storageService.setItem(constants.PDPSku, productViewModel().SkuNumber);
                                } else {
                                    logService.error(data.Item2);
                                }
                            })
                            .fail(function (data) {
                                // error
                                helpersService.hideLoader();
                            });
                    });
                }

                if (document.querySelector('.js-find-a-pro', scope)) {
                    $($buttonFindAPro).click(function (e) {
                        e.preventDefault();

                        //redirecting the user to find a pro page
                        location.href = urls.FindAProPageUrl;
                        if (e.target) {
                            eventManager.trigger("CTAClicked", e.target.innerText, urls.FindAProPageUrl);
                        }
                    });
                }

                if (document.querySelector('.js-find-a-retailer', scope)) {
                    $($buttonFindARetailer).click(function (e) {
                        e.preventDefault();

                        //redirecting the user to find a retailer page
                        location.href = urls.FindARetailerPageUrl;
                        if (e.target) {
                            eventManager.trigger("CTAClicked", e.target.innerText, urls.FindARetailerPageUrl);
                        }
                    });
                }
                resolve();
            });

            eventManager.subscribe(constants.RenderInterstitialModal, function () {
                helpersService.hideLoader();
            });
        }

        return function init(args) {
            return args.IsExperienceEditorEditing ? null : new ProductActionButtonsAndPricing(args.scope, args.labels, args.urls, args.displayDirectToConsumer);
        };
    });
define('Resideo/Components/Catalog/ProductComparisonTable',['jquery'], function ($) {
	function ProductComparisonTable(scope) {
		
		if (scope.querySelector('tbody')) {
			new Promise(function (resolve, reject) {
                //add row for initalizing product highlight reviews into
				var productheaders = scope.querySelectorAll('.product-highlight');
                var row =  document.createElement("tr");
                var rowHeader = document.createElement("th");
                
                rowHeader.setAttribute("scope","row");
                rowHeader.innerHTML = "<p>Reviews</p>";
                row.style.display = "none"; //row will be hidden while BV is being initalized
                row.appendChild(rowHeader);
                
                productheaders.forEach(function(header) {
                    var ratingsCell = document.createElement("td");
                    ratingsCell.classList.add("js-bv-inline-ratings-cell");
                    row.appendChild(ratingsCell);
                });

                var tableBody = scope.querySelector('tbody');
                var currentFirstRow = tableBody.getElementsByTagName('tr')[0];

				//if price row is enabled, add reviews after price row
                if (currentFirstRow.classList.contains('price')) {
                    tableBody.insertBefore(row, currentFirstRow.nextSibling);
                } else {
                    tableBody.prepend(row);
                }

                //Reviews have been added to the dom, show row and stop observing
                function callback(mutationList, observer) {
                    row.style.display = "";
                    observer.disconnect();
                };

				var config = { childList: true, subtree: true };
                var observer = new MutationObserver(callback);
                observer.observe(row, config);
                
				resolve();
			});
		}
		if (document.querySelector('.top-info', scope)) {
			new Promise(function (resolve, reject) {
				// calculate the number of columns based on total number of products added to the table
				var producthighlight = $(".product-highlight", scope);
				var columnCount = 0;
				if (producthighlight.length != 0) {
					for (var i = 0; i < producthighlight.length; i++) {
						if (producthighlight[i].innerHTML != "") {
							columnCount++;
						}
					}
				}
				if ($('.top-info', scope).length === 2 && columnCount === 0) {
					$(scope).addClass("two-up");
				}
				else if (columnCount === 0) {
					$(".rde-products-table", scope).empty();
				}
				else if (columnCount === 1) {
					$(scope).addClass("two-up");
					$(".rde-products-comparison-table-product", scope).removeClass("features");
				}
				else if (columnCount === 2) {
					$(scope).addClass("two-up");
				}
				resolve();
			});
		}
	}

	return function init(args) {
		return args.IsExperienceEditorEditing ? null : new ProductComparisonTable(args.scope);
	};
});
define('Resideo/Components/Catalog/ProductComparisonTableProduct',['jquery'], function ($) {
	function ProductComparisonTableProduct(scope) {
		if (document.querySelector('.top-info', scope)) {
			new Promise(function (resolve, reject) {
				// $(scope).empty();
				var producthighlight = $(".product-highlight", scope);
				if (producthighlight[0].innerHTML == "") {
					$(scope).empty();
				}
				resolve();
			});
		}
	}

	return function init(args) {
		return args.IsExperienceEditorEditing ? null : new ProductComparisonTableProduct(args.scope);
	};
});
define('Resideo/Components/Catalog/ProductFamilyResources',['jquery'], function ($) {
    function ProductFamilyResources(scope, showResources) {
        if (showResources && document.querySelector('.rde-product-family-resources-wrapper')) {
            new Promise(function (resolve, reject) {
                if (document.querySelector('.score-tab-panel')) {
                    $('.score-tab-panel', scope).each(function(index, item) {
                        setTimeout(function() {
                                $(item).find('.rde-product-family-resources-slider').slick({
                                    slidesToShow: 3,
                                    slidesToScroll: 1,
                                    arrows: true,
                                    dots: false,
                                    rows: 0, //added to avoid adding extra divs
                                    responsive: [
                                        {
                                            breakpoint: 767,
                                            settings: {
                                                slidesToShow: 2,
                                                arrows: false,
                                                dots: true,
                                                centerMode: true
                                            }
                                        },{
                                            breakpoint: 479,
                                            settings: {
                                                slidesToShow: 1,
                                                arrows: false,
                                                dots: true,
                                                centerMode: true
                                            }
                                        }
                                    ]
                                });
                                if ($(item).find('.rde-product-family-resources-slider .slick-dots li').length > 8) {
                                    $(item).find('.rde-product-family-resources-slider .slick-dots').hide();
                                }
                            },
                            0);

                        $(item).find('.score-highlight').matchHeight();
                    });
                }

                if (document.querySelector('.score-button.rde-video-area')) {
                    $(".score-button.rde-video-area", scope).on('click',
                        function(e) {
                            e.preventDefault();

                            var videoSrc = $(this).data('video-src');
                            var iFrameTitle = $(this).data('iframe-title');
                            videoSrc = videoSrc.replace("https://youtu.be/", "https://www.youtube-nocookie.com/embed/");
                            videoSrc = videoSrc.replace("https://www.youtube.com", "https://www.youtube-nocookie.com");
                            $("#resource_video_iframe").attr("src",
                                videoSrc + "?enablejsapi=1&cc_load_policy=1&cc_lang_pref=en");
                            $("#resource_video_iframe").attr("title", iFrameTitle);
                            $('#resource_video').modal('show');
                        });
                }

                if (document.querySelector('a[data-toggle="tab"]')) {
                    $('a[data-toggle="tab"]', scope).on('shown.bs.tab',
                        function() {
                            var anchorHref = $(this).attr('href');
                            setTimeout(function() {
                                    $(anchorHref).find('.rde-product-family-resources-slider').slick('refresh');

                                    if ($(anchorHref).find('.rde-product-family-resources-slider .slick-dots li').length >
                                        8) {
                                        $(anchorHref).find('.rde-product-family-resources-slider .slick-dots').hide();
                                    }
                                },
                                100);
                        });
                }
                resolve();
            });
        } else {
            var resourceNavItem = $('.product-family-sticky-navigation .product-family-sticky-navigation-item a[href="#resources"]').parent();
            resourceNavItem.prev().find('span').hide();
            resourceNavItem.hide();
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new ProductFamilyResources(args.scope, args.ShowResources);
    };
});
define('Resideo/Components/Catalog/ProductFeaturesSection',['jquery'], function ($) {
    function ProductFeaturesSection(scope) {
        if (document.querySelector('.rde-pdp-feature-lazy-loading')) {
            new Promise(function (resolve, reject) {
                //avoid loading issues with this component
                setTimeout(function () { $(".rde-pdp-feature-lazy-loading").show(); }, 0);
                resolve();
            });
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new ProductFeaturesSection(args.scope);
    };
});

define('text!Resideo/Components/Catalog/Templates/ProductInlineRatings.html',[],function () { return '<div data-bv-show="inline_rating" data-bv-productId=<%- productId %> data-bv-seo="false" data-bv-redirect-url=<%- productRedirectUrl %>></div>\r\n';});

define('Resideo/Components/Catalog/ProductHighlight',['jquery', 'productService', 'logService', 'text!Resideo/Components/Catalog/Templates/ProductInlineRatings.html'], function ($, productService, logService, productInlineRatingsTemplate) {

    function ProductHighlight(scope, sku, primarySkuNumber, productUrl, showPrice, showRatings) {
        if (document.querySelector('.rde-product-highlight', scope)) {
            new Promise(function (resolve, reject) {
                $(".rde-product-highlight", scope).data("Sku", sku);


                if (primarySkuNumber != "" && showRatings) {
                    var bazaarVoiceProductId = primarySkuNumber.replace("/", "-");
                    if (bazaarVoiceProductId) {
                        var productInlineRatingsTemplateCompiled = _.template(productInlineRatingsTemplate);
                        var parentTable = scope.closest('table');
                        var ratingTableRow = parentTable ? parentTable.querySelectorAll(".js-bv-inline-ratings-cell").length : false;
                        
                        if (ratingTableRow) {
                            var index = scope.parentNode.cellIndex - 1;
                            parentTable.querySelectorAll(".js-bv-inline-ratings-cell")[index].innerHTML = productInlineRatingsTemplateCompiled({ productId: bazaarVoiceProductId, productRedirectUrl: productUrl });
                            var inlineRatings = $(".js-bv-inline-ratings-container", scope).remove();
                        } else {
                            var inlineRatings = $(".js-bv-inline-ratings-container", scope);
                            if (inlineRatings[0].innerHTML) {
                                inlineRatings[0].innerHTML = "";
                            }
                            inlineRatings.append(productInlineRatingsTemplateCompiled({ productId: bazaarVoiceProductId, productRedirectUrl: productUrl }));
                        }
                    }
                }
                resolve();
            });
        }
        $(document).on("mouseenter", ".discontinued", function () {
            $(this).addClass('open');
            var ariaExpanded = $(this).find(".rde-tooltip");
            ariaExpanded.attr('aria-expanded', true);
        }).on("mouseleave", ".discontinued", function () {
            $(this).removeClass('open');
            var ariaExpanded = $(this).find(".rde-tooltip");
            ariaExpanded.attr('aria-expanded', false);
        });
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new ProductHighlight(args.scope, args.sku, args.primarySkuNumber, args.productUrl, args.showPrice, args.showRatings);
    };
});
define('Resideo/Components/Catalog/ProductImageGallery',['jquery', 'slick'], function ($) {
    function ProductImageGallery(scope, placeholderFlag) {
        if (document.querySelector('.rde-pdp-gallery')) {
            new Promise(function (resolve, reject) {
                window.addEventListener('productChanging', function (e) {
                    if ($(".rde-pdp-gallery").hasClass("slick-initialized"))
                        removeAll();
                });

                window.addEventListener('productChanged', function (e) {
                    if ($(".rde-pdp-gallery").hasClass("slick-initialized"))
                        addAll(placeholderFlag);
                });

                setTimeout(function () {
                    startup();
                    removeAll();
                    addAll(placeholderFlag);
                }, 0);
                resolve();
            });
        }
    }

    function removeAll() {
        $('.rde-pdp-gallery').slick('removeSlide', null, null, true);
        $('.rde-pdp-gallery-thumbnails').slick('removeSlide', null, null, true);
    }

    function addAll(placeholderFlag) {

        if ($(".rde-pdp-gallery-data").length <= 4) {
            $(".rde-pdp-gallery-thumbnails").addClass("no-translate");
        } else {
            $(".rde-pdp-gallery-thumbnails").removeClass("no-translate");
        }

        $(".rde-pdp-gallery-data").each(function (i, item) {

            //collect data to build the slider
            var isVideo = $(item).attr('data-item1') == "true" || $(item).attr('data-item1') == "1";
            var isMagic = $(item).attr('data-item2') == "true" || $(item).attr('data-item2') == "1";
            var url = $(item).attr('data-item3');
            var name = "";// $(item).attr('data-item4');
            var nameFigcaption = $(item).attr('data-item4');
            var murl = $(item).attr('data-item5');
            var thumb = $(item).attr('data-item6');
            var large = $(item).attr('data-item7');
            var MagicImgcount = $(item).attr('data-item8');
            var isNormal = !isVideo && !isMagic;

            var classToAdd = '';
            if (isVideo) {
                classToAdd = 'rde-video-thumbnail';
            } else if (isMagic) {
                classToAdd = 'rde-magic360-thumbnail';
            }

            var slideToAdd = '';
            $("#g_video_iframe").attr("title", "video iframe");


            if (isNormal && url.indexOf(placeholderFlag) < 0) {
                slideToAdd = '<div><a  href="' + large + '" class="MagicZoom" data-options="hint: off;rightClick:true;"><img src="' + url + '" alt="' + '"' + '/></a>' + '<figcaption>' + nameFigcaption + '</figcaption></div>';
            } else if (isNormal && url.indexOf(placeholderFlag) >= 0) {
                slideToAdd = '<div><img  class="product-placeholder-image" src="' + url + '" alt="' + name + '" /></div>';
            } else if (isVideo) {
                slideToAdd = '<a   href="#g_video" tabindex="-1" hidefocus="hidefocus" data-toggle="modal" class="rde-video-thumbnail"><img  src="' + thumb.replace('default.jpg', 'hqdefault.jpg') + '" alt="' + name + '" /></a>';
                $("#g_video_iframe").attr("src", url + "?enablejsapi=1");
                $("#g_video_iframe").attr("title", name);
            } else if (isMagic) {
                slideToAdd = '<div><a  data-options="filename: ' + murl + '; columns:' + MagicImgcount + ';speed:80;" class="Magic360"><img class="lazy-image" data-src="' + url + '" alt="' + name + '" /></a></div>';
            }

            var thumbClass = "score-style-box";
            if (classToAdd != '') {
                thumbClass = thumbClass + " " + classToAdd;
            }
            var thumbToAdd = '<div  class="' + thumbClass + '"><img src="' + thumb + '" alt="' + name + '" /></div>';

            $('.rde-pdp-gallery').slick('slickAdd', slideToAdd);
            $('.rde-pdp-gallery-thumbnails').slick('slickAdd', thumbToAdd);

            //added for accessibility slider
            $('.rde-pdp-gallery-thumbnails').find('img').each(function (index) {
                $(this).on('click', function () {
                    // Move aria-current="true" to this button
                    $('.rde-pdp-gallery-thumbnails').find('img').removeAttr('aria-current');
                    $(this).attr('aria-current', true);
                    // Change the main image to match this thumbnail button
                    var index = $(this).closest('.slick-slide').data('slick-index');

                    $('.rde-pdp-gallery').slick('slickGoTo', index);
                });
            });

            //if only one image and the image is the plachelder - hide all nav below
            var countImages = $(".rde-pdp-gallery-data").length;
            if (countImages == 1 && (url.indexOf(placeholderFlag) >= 0)) {
                $(".rde-pdp-zoom-message").hide();
                $(".rde-pdp-gallery-thumbnails").hide();
            } else {
                $(".rde-pdp-zoom-message").show();
                $(".rde-pdp-gallery-thumbnails").show();
            }
        });

        $('.rde-pdp-gallery').slick("slickGoTo", 0);
        $('.rde-pdp-gallery-thumbnails').slick("slickGoTo", 0);

        if (window.innerWidth < 992) {
            $('.rde-pdp-gallery-thumbnails').slick('slickSetOption', 'dots', true, true);
            $('.rde-pdp-gallery-thumbnails .slick-dots').css('display', 'block');
        }

        setTimeout(function () { Magic360.start(); MagicZoom.start(); lazyLoad360(); addAlt(); }, 0);

        $('#g_video').on('hidden.bs.modal', function () {
            $("#g_video_iframe").attr("src", $("#g_video iframe").attr("src"));
        });

    }

    //Adding Alt attribute to .mz-lens images
    function addAlt() {

        $(".rde-pdp-gallery .slick-slide .mz-lens").each(function (i, item) {
            var img = $(item).children("img");
            img.attr("aria-hidden", "true");
        });
        $(".rde-pdp-gallery .slick-slide").each(function (i, item) {
            $(this).find("figcaption").appendTo($(this).find("figure"));
        });


    }

    function lazyLoad360() {
        var lazy = $(".lazy-image");
        lazy.each(function (i, item) {
            if (item.offsetTop < window.innerHeight + window.pageYOffset + 300) {
                item.src = item.dataset.src;
            }
        });
    }

    function startup() {
        //init pdp slider
        $('.rde-pdp-gallery').slick({
            slidesToShow: 1,
            slidesToScroll: 1,
            arrows: false,
            asNavFor: '.rde-pdp-gallery-thumbnails',
            infinite: true
        });
        $('.rde-pdp-gallery-thumbnails').slick({
            slidesToShow: 4,
            slidesToScroll: 1,
            arrows: true,
            asNavFor: '.rde-pdp-gallery',
            dots: false,
            infinite: true,
            arrowToShow:2
        });

        if (window.addEventListener) {
            window.addEventListener('scroll', lazyLoad360, false);
        } else {
            window.attachEvent('onscroll', lazyLoad360);
        }
    }

    $(document).ready(function () {

        $('.rde-pdp-gallery-thumbnails').on('init', function (e, slider) {
            $('.rde-pdp-gallery-thumbnails').find('img').each(function (index) {
                $(this).on('click', function () {
                    // Move aria-current="true" to this button
                    $('.rde-pdp-gallery-thumbnails').find('img').removeAttr('aria-current');
                    $(this).attr('aria-current', true);
                    // Change the main image to match this thumbnail button
                    var index = $(this).closest('.slick-slide').data('slick-index');

                    $('.rde-pdp-gallery').slick('slickGoTo', index);
                });
            });
        });
        // Update the thumbnail slider when the user changes the main slider directly.
        $('.rde-pdp-gallery').on('beforeChange', function (e, slider, currentSlide, nextSlide) {
            // Remove aria-current from the last selected thumbnail image button
            $('.rde-pdp-gallery-thumbnails img[aria-current="true"]').removeAttr('aria-current');

            // Select the thumbnail image button that goes with this main image. Most importantly, this updates Slick's internal state to be consistent with the visual change.
            $('.rde-pdp-gallery-thumbnails').slick('slickGoTo', nextSlide);

            // Add aria-current="true" to the correct thumbnail image button to convey to screen readers that it's active.
            $('.rde-pdp-gallery-thumbnails img:eq(' + nextSlide + ')').attr('aria-current', true);

        });
    });
    return function init(args) {
        return new ProductImageGallery(args.scope, args.placeholderFlag);
    }
});


define('Resideo/Components/Catalog/ProductList',['jquery', 'productService', 'imagesLoaded', 'logService', 'eventManager', 'pagination'], function ($, productService, imagesLoaded, logService, eventManager, pagination) {
    function ProductList(scope) {
        imagesLoaded($(scope), function () {

            $(scope).on('init', function (event, slick) {
                new Promise(function (resolve, reject) {
                    if (typeof initLazyLoading === "function") {
                        initLazyLoading();
                    }

                    resolve();
                });
                //adding ellipsis for the title
                if (document.querySelector('.product-list .score-highlight .caption .score-highlight-body table tr td:first-child')) {
                    $('.score-highlight .caption .score-highlight-body table tr td:first-child', scope).ellipsis({
                        lines: 2,
                        ellipClass: 'ellip',
                        responsive: true
                    });
                }

            });
            //init product list slider
            $(scope).slick({
                slidesToShow: 4,
                slidesToScroll: 1,
                arrows: true,
                dots: false,
                responsive: [
                    {
                        breakpoint: 1199,
                        settings: {
                            slidesToShow: 3,
                            arrows: false,
                            dots: true
                        }
                    },
                    {
                        breakpoint: 767,
                        settings: {
                            slidesToShow: 2,
                            arrows: false,
                            dots: true,
                            centerMode: true
                        }
                    },
                    {
                        breakpoint: 567,
                        settings: {
                            slidesToShow: 1,
                            arrows: false,
                            dots: true,
                            centerMode: true,
                            rows: 0
                        }
                    }
                ]
            });
        });

        $(scope).on('beforeChange', function () {
            if (typeof initLazyLoading === "function") {
                initLazyLoading();
            }
        });

        //refresh the slick slider after Coveo No Results are shown to fix the styling
        eventManager.subscribe('coveoNoResultsShown', function () {
            $(scope).slick('refresh');
        });
        if (document.querySelector('.rde-pro-line-tab a[data-toggle="tab"]')) {
            $('.rde-pro-line-tab a[data-toggle="tab"]').on('shown.bs.tab', function () {
                setTimeout(function () {
                    $(scope).slick('refresh');
                    $(scope).find('.score-highlight').matchHeight();
                }, 100);
            });
        }
    }
    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new ProductList(args.scope);
    };
});
define('Resideo/Components/Catalog/ProductPromotionIndicator',["jquery"], function ($) {
    function ProductPromotionIndicator(scope) { 
        if (document.querySelector('.rde-promo-wrapper .modal-body')) {
            new Promise(function (resolve, reject) {
                window.addEventListener('productChanged', function (e) {
                    var $scrollDiv = $('.modal-body', scope);
                    SimpleScrollbar.initEl($scrollDiv[0]);
                });
                resolve();
            });
        }
    }

    return function initProductPromotionIndicator(args) {
        return args.IsExperienceEditorEditing ? null : new ProductPromotionIndicator(args.scope);
    };
});

define('text!Resideo/Components/Catalog/Templates/ProductRatings.html',[],function () { return '<div data-bv-show="rating_summary" data-bv-seo="false" data-bv-product-id=<%- productId %>></div>\r\n';});

define('Resideo/Components/Catalog/ProductRatings',['jquery', 'underscore', 'text!Resideo/Components/Catalog/Templates/ProductRatings.html']
    , function ($, _, productRatingsTemplate) {
        function ProductRatings(product, image, storedRating, upcList) {

            //Baazar Voice Only
            if (document.querySelector('#bv-ratings-container')) {
                var ratingsSummary = $("#bv-ratings-container");
                var bazaarVoiceProductId = product.ProductFamily.PrimarySkuNumber.replace("/", "-").trim();
                var productId = product.SkuNumber;
                if (bazaarVoiceProductId) {
                    // run operation in async way.
                    new Promise(function (resolve, reject) {
                        var productRatingsTemplateCompiled = _.template(productRatingsTemplate);
                        if (ratingsSummary[0].innerHTML) {
                            ratingsSummary[0].innerHTML = "";
                        }
                        ratingsSummary.append(productRatingsTemplateCompiled({ productId: bazaarVoiceProductId }));
                        resolve();
                    });

                }

                $BV.configure('global', {
                    events: {
                        bvRender: function (data) {
                            if (data && data.TotalReviewCount) {
                                $('.rde-products-comparison-table .bv_numReviews_component_container').remove();
                            }
                        }
                    }
                });

                var categories = [];
                for (var i = 0; i < product.ProductTypes.length; i += 1) {
                    var category = {
                        "id": product.ProductTypes[i].ProductTypeId,
                        "Name": product.ProductTypes[i].Name
                    }
                    categories.push(category);
                }

                var upcs = [];
                for (var i = 0; i < upcList.length; i += 1) {
                    upcs.push(upcList[i]);
                }

                window.bvDCC = {
                    catalogData: {
                        locale: "en_US",
                        catalogProducts: [{
                            "productId": bazaarVoiceProductId,
                            "productName": product.ProductFamily.ConsumerProductDetailPageTitle,
                            // BV does not support html markup for it's own fields while ours is rich text
                            //"productDescription": product.ProductFamily.ProductShortDescription,
                            "productImageURL": image.Uri,
                            "productPageURL": window.location.href,
                            "brandName": product.ProductFamily.Brand,
                            "categoryPath": categories,
                            "upcs": upcs
                        }]
                    }
                };

                window.bvCallback = function (BV) {
                    BV.pixel.trackEvent("CatalogUpdate", {
                        type: 'Product',
                        locale: window.bvDCC.catalogData.locale,
                        catalogProducts: window.bvDCC.catalogData.catalogProducts
                    });
                };
            }
        }

        return function init(args) {
            return new ProductRatings(args.Product, args.Image, args.StoredRating, args.UpcList);
        };
    });
define('Resideo/Components/Catalog/ProductRelatedProducts',['jquery', 'productService', 'logService', 'text!Resideo/Components/Catalog/Templates/ProductInlineRatings.html'], function ($, productService, logService, productInlineRatings) {
    function ProductRelatedProducts(scope, showRatings) {
        window.addEventListener('productChanged', function (e) {
            if (document.querySelector('.product-related-products .score-highlight')) {
                //remove slick slider markup/classes
                $('.rde-related-products-slider', scope).removeClass('slick-initialized').removeClass('slick-slider').removeClass('slider-disabled');
                $('.slick-prev.slick-arrow', scope).remove();
                $('.slick-next.slick-arrow', scope).remove();
                //when knockout updates the list of related products, it doesn't remove old markup/items, it just adds new items (.score-highlight divs)
                //this happens because slick slider adds its own markup
                //so we have to programmatically remove old .slick-list and .slick-dots before slick is initialized again
                $('.slick-list', scope).remove();
                $('.slick-dots', scope).remove();
                var productInlineRatingsCompiled = _.template(productInlineRatings);

                //don't initialize slick if not needed
                if (($(window).width() >= 1200 && $('.score-highlight', scope).length < 5)
                    || ($(window).width() >= 768 && $(window).width() < 1200 && $('.score-highlight', scope).length < 4)
                    || ($(window).width() < 768 && $('.score-highlight', scope).length < 2)) {
                    $('.rde-related-products-slider', scope).addClass('slider-disabled');
                    $('.rde-related-products-slider', scope).show();
                } else {
                    setTimeout(function () {
                        $('.rde-related-products-slider', scope).slick({
                            slidesToShow: 4,
                            slidesToScroll: 1,
                            arrows: true,
                            dots: false,
                            rows: 0,
                            responsive: [
                                {
                                    breakpoint: 1199,
                                    settings: {
                                        slidesToShow: 3,
                                        arrows: false,
                                        dots: true,
                                        rows: 0
                                    }
                                },
                                {
                                    breakpoint: 991,
                                    settings: {
                                        slidesToShow: 2,
                                        arrows: false,
                                        dots: true,
                                        centerMode: true,
                                        rows: 0
                                    }
                                },
                                {
                                    breakpoint: 479,
                                    settings: {
                                        slidesToShow: 1,
                                        arrows: false,
                                        dots: true,
                                        centerMode: true,
                                        rows: 0
                                    }
                                }
                            ]
                        });
                        $('.rde-related-products-slider', scope).show();
                        
                        $('.product-related-products .rde-related-products-slider .score-highlight', scope).matchHeight();
                    }, 0);
                }
				
				setTimeout(function () {
					$('.score-highlight', scope).matchHeight();
				}, 0);

                $('.score-highlight', scope).each(function (index, priceItem) {
                    var productSku = $(priceItem).data('product-sku');

                    if (productSku) {
                        if (showRatings) {
                            var ratingsContainer = $(priceItem).find('.related-product-ratings-container')[0];
                            ratingsContainer.innerHTML = '';
                            var bvId = $(ratingsContainer).attr('bv-id');
                            var bvRedirectUrl = $(ratingsContainer).attr('bv-redirect-url');
                            $(ratingsContainer).append(productInlineRatingsCompiled({ productId: bvId, productRedirectUrl: bvRedirectUrl }));
                        }
                    }
                });

                setTimeout(function () {
                    $(".rde-related-products-slider .slick-slide.slick-active").on("keydown", function (e) {
                        if (e.keyCode === 9 && !e.shiftKey) {
                            if (e.target.className.indexOf("score-button rde-primary js-find-a-retailer") != -1
                                || e.target.className.indexOf("score-button rde-primary js-add-to-cart rde-loader-button")!=-1) {
                                var totalActiveSlide = $(".rde-related-products-slider .slick-slide.slick-active");
                                var lastElementFromLeft = $($(totalActiveSlide[3]).find("a")[1]);
                                if (lastElementFromLeft != undefined && lastElementFromLeft.length != 0) {
                                    if ($(e.target).parents(".caption").find("a")[0].innerText === lastElementFromLeft[0].innerText) {
                                        $(".rde-related-products-slider .slick-next").focus();
                                        e.preventDefault();
                                    }
                                }
                            }
                        }
                        if (e.keyCode === 9 && e.shiftKey) {
                            if (e.target.className === "rde-js-link-container-anchor") {
                                var totalActiveSlide = $(".rde-related-products-slider .slick-slide.slick-active");
                                var lastElementFromLeft = $($(totalActiveSlide[0]).find("a")[1]);
                                if ($(e.target).parent().siblings(".caption").find("a")[0].innerText === lastElementFromLeft[0].innerText) {
                                    $(".rde-related-products-slider .slick-prev").focus();
                                    e.preventDefault();
                                }
                            }
                        }
                    });
                    $(".rde-related-products-slider .slick-next").on("keydown", function (e) {
                        if (e.keyCode === 9 && e.shiftKey) {
                            var totalActiveSlide = $(".rde-related-products-slider .slick-slide.slick-active");
                            var button = $(totalActiveSlide[3]).find(".score-button.rde-primary")[0];
                            $(button).focus();
                            e.preventDefault();
                        }
                    });
                    $(".rde-related-products-slider .slick-prev").on("keydown", function (e) {
                        if (e.keyCode === 9 && !e.shiftKey) {
                            var totalActiveSlide = $(".rde-related-products-slider .slick-slide.slick-active");
                            var img = $(totalActiveSlide[0]).find(".rde-js-link-container-anchor")[0];
                            $(img).focus();
                            e.preventDefault();
                        }
                    })
                }, 200);
            }
        });
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new ProductRelatedProducts(args.scope, args.ShowRatings);
    };
});

define('text!Resideo/Components/Catalog/Templates/ProductReviews.html',[],function () { return '<div data-bv-show="reviews" data-bv-seo="false" data-bv-product-id=<%- productId %>></div>\r\n';});

define('Resideo/Components/Catalog/ProductReviews',['jquery', 'underscore', 'text!Resideo/Components/Catalog/Templates/ProductReviews.html', "eventManager", "constants", "promise-polyfill"]
    , function ($, _, productReviewsTemplate, eventManager, constants) {
        function ProductReviews(product) {
            var bazaarVoiceProductId = product.ProductFamily.PrimarySkuNumber.replace("/", "-");
            if (bazaarVoiceProductId) {
                // run operation in async way.
                new Promise(function(resolve, reject) {
                    var productReviewsTemplateCompiled = _.template(productReviewsTemplate);
                    var ratingsSummary = $("#bv-reviews-container");
                    if (ratingsSummary[0].innerHTML) {
                        ratingsSummary[0].innerHTML = "";
                    }
                    ratingsSummary.append(productReviewsTemplateCompiled({ productId: bazaarVoiceProductId }));
                    resolve();
                });
            }

            $BV.configure('global', {
                events: {
                    submissionLoad: function (data) {
                        eventManager.trigger(constants.ReviewModalOpen, data);
                    },
                    submissionSubmitted: function (data) {
                        eventManager.trigger(constants.ReviewSubmitted, data);
                    }
                }
            });
        }

        return function init(args) {
            return new ProductReviews(args.Product);
        };
    });
define('Resideo/Components/Catalog/ProductSectionNavigation',['jquery'], function ($) {
    function ProductSectionNavigation(scope, isPro) {

        //sticky behaviour
        var nav = $(scope);
        if (nav.length) {
            var stickyNavTop = nav.offset().top - 147;
            var header = $('header');
            $(window).on('scroll', function () {
                if ($(window).scrollTop() >= stickyNavTop) {
                    nav.addClass("nav-fixed");
                    header.addClass('hide-header');
                } else {
                    nav.removeClass("nav-fixed");
                    header.removeClass('hide-header');
                }
            });
        }

        var lazyLoaded = false;
        $(".product-section-navigation-item a").on('click', function (e) {
            if (document.readyState != 'complete') {
                e.preventDefault();
            }
            else if (!lazyLoaded) {
                lazyLoadingLoadAll();
                lazyLoaded = true;
                $anchor = $(this);
                setTimeout(function () {
                    if ($anchor) {
                        var hash = $anchor.attr('href');
                        if (hash) {
                            window.location.hash = hash;
                        }
                    }
                }, 1000);
                e.preventDefault();
            }
        })

        window.addEventListener('productChanged', function (e) {
            //get all li for section navigation
            $(".product-section-navigation-item", scope).each(function (i, item) {
                //remove pipe delimiter for each element; they will be added dynamically later
                $(item).find("span").remove();

                //see if it is visible or not
                var visible = $(item).attr("v") && ($(item).attr("v") == "true");

                //hide the score stripe container with an anchor from the li a navigatoin
                if (visible) {
                    $($(item).find("a").attr('href')).closest(".score-stripe").show();
                }
                else {
                    $($(item).find("a").attr('href')).closest(".score-stripe").hide();
                }
            });

            // show the navigation after visible sections are calculated
            $(".product-section-slick", scope).show();

            //get the number of visible elements
            var liLength = $(".product-section-navigation-item:visible", scope).length;

            //go through the visible elements and add pipe delimiters
            $(".product-section-navigation-item:visible", scope).each(function (i, item) {
                //don't add a pipe after the last visible element
                if (i < liLength - 1) {
                    $(item).append('<span>|</span>');
                }
                $($(item).find("a")).closest(".slick-slide").attr("aria-hidden", "false");
                $($(item).find("a")).closest(".slick-slide").attr("aria-label", "product section navigation");
            });
        }, false);

        var productSectionNavigation = $(".product-section-navigation");
        var productSectionNavigationLinks = productSectionNavigation.find("a[href^='#']");

        var itemHrefs = [];
        var navigationLinks = [];

        productSectionNavigationLinks.each(function (i, item) {
            var itemHref = $($(item).attr("href"))
            var offset = itemHref.offset();
            if (offset) {
                itemHrefs.push(itemHref);
                navigationLinks.push(productSectionNavigation.find("a[href='" + $(item).attr("href") + "']"));
            }
        });

        $(window).scroll(function () {
            //set active to current section shown in the window.
            if (productSectionNavigation.has(".nav-fixed")) {
                var windowTop = $(window).scrollTop();

                $(itemHrefs).each(function (i, itemHref) {
                    var anchorTop = itemHref.offset().top - 50;
                    if (anchorTop < windowTop && itemHref.is(":visible")) {
                        productSectionNavigationLinks.removeClass("active");
                        navigationLinks[i].addClass("active");
                    }
                });

                if (window.innerWidth < 1199) {
                    var tm;
                    clearTimeout(tm);
                    tm = setTimeout(function () {
                        $ul = productSectionNavigation.find(".product-section-navigation-item.slick-initialized");
                        if ($ul.length > 0) {
                            var lIndex = productSectionNavigation.find("a.active").closest(".slick-slide").attr("data-slick-index");
                            $ul.slick('slickGoTo', lIndex);
                        }
                    }, 250);
                }
            } else {
                productSectionNavigationLinks.removeClass("active");
            }
        });
        if (!BrainJocks.EE) {
            if (document.querySelector('.product-section-slick')) {
                //turn sticky nav into slider
                $('.product-section-slick').slick({
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    dots: false,
                    arrows: false,
                    infinite: false,
                    variableWidth: true,
                    swipeToSlide: true
                });
            }

            $(".score-anchorpoint").each(
                function (i, item) {
                    $('#' + $(item).attr('id')).attr('aria-hidden', 'true');
                }
            );
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new ProductSectionNavigation(args.scope, args.IsPro);
    };
});

define('Resideo/Components/Catalog/ProductSpecifications',['jquery'], function ($) {
    function ProductSpecifications(scope) {
        if (document.querySelector('.rde-pdp-specs')) {
            new Promise(function (resolve, reject) {
                if ($("body").hasClass("experience-editor"))
                    return;

                var qtd;

                ProductSpecInit = function () {
                    
                    $(".pro-pdp-specs").find("a.rde-view-less").hide();

                    if (document.querySelector('.pro-product-specifications-div') && $(window).width() > 991) {
                        qtd = 18;
                        $(".pro-pdp-specs").find("a.rde-view-more").show();
                    } else if (document.querySelector('.pro-product-specifications-div') && $(window).width() <= 991) {
                        qtd = 9
                        $(".pro-pdp-specs").find("a.rde-view-more").show();
                    } else if (!document.querySelector('.pro-product-specifications-div')) {
                        qtd = 10;
                    }
                    
                    
                    $(".pro-pdp-specs").find("tr").show();
                    $(".pro-pdp-specs").find("tr").each(function (i, item) {
                        if (i >= qtd)
                            $(item).hide();
                        $(".pro-pdp-specs").find("a.rde-view-more").hide();
                    });

                    $(".rde-pdp-specs").find("a.rde-view-more").on('click', function (e) {
                        e.preventDefault();
                        $(".rde-pdp-specs").find("a.rde-view-more").hide();
                        $(".rde-pdp-specs").find("a.rde-view-less").show();
                        $(".rde-pdp-specs").find("tr").show();
                    });

                    $(".rde-pdp-specs").find("a.rde-view-less").on('click', function (e) {
                        e.preventDefault();
                        $(".rde-pdp-specs").find("a.rde-view-more").show();
                        $(".rde-pdp-specs").find("a.rde-view-less").hide();
                        $(".rde-pdp-specs").find("tr").each(function (i, item) {
                            if (i >= qtd)
                                $(item).hide();
                        });
                        $('html, body').animate({
                            scrollTop: $("#specifications").offset().top
                        }, 150);
                    });

                    window.addEventListener('productChanged', function (e) {
                        setTimeout(function () {
                            $(".rde-pdp-specs").find("a.rde-view-less").hide();
                            $(".rde-pdp-specs").find("a.rde-view-more").hide();
                            if ($(".rde-pdp-specs").find("tr").length > qtd) {
                                $(".rde-pdp-specs").find("a.rde-view-more").show();
                            }
                        }, 100);
                    });

                    setTimeout(function () {
                        $(".rde-pdp-specs").find("a.rde-view-less").hide();
                        $(".rde-pdp-specs").find("a.rde-view-more").hide();
                        if ($(".rde-pdp-specs").find("tr").length > qtd) {
                            $(".rde-pdp-specs").find("a.rde-view-more").show();
                        }
                    }, 100);
                    
                }

                ProductSpecInit();

                $(window).on("load resize", function () {
                    ProductSpecInit();
                });
                
                resolve();
            });
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new ProductSpecifications(args.scope);
    }
});

define('Resideo/Components/Catalog/ProductSupport',['jquery', 'simpleScrollbar', 'slick'], function ($, simpleScrollbar, slick) {
    function ProductSupport(scope) { 
        function initResourceSlider() {
            if (document.querySelector('.rde-resources-slider', scope)) {
                $('.rde-resources-slider', scope).slick({
                    slidesToShow: 3,
                    slidesToScroll: 1,
                    arrows: true,
                    dots: false,
                    rows: 0,
                    responsive: [
                        {
                            breakpoint: 767,
                            settings: {
                                slidesToShow: 1,
                                dots: true,
                                arrows: false,
                                centerMode: true,
                                rows: 0
                            }
                        }
                    ]
                });
                if ($('.rde-resources-slider .slick-dots li').length > 8) {
                    $('.rde-resources-slider .slick-dots').hide();
                }
            }
        }

        function initSupportVideos() {
            if (document.querySelector('.rde-pdp-video-wrapper .score-style-box', scope)) {
                //custom scrollbar for video wrapper highlights
                var scrollVideo = document.querySelector('.rde-pdp-video-wrapper .score-style-box', scope);

                if (scrollVideo && scrollVideo !== null) {
                    SimpleScrollbar.initEl(scrollVideo);

                    $(".rde-pdp-video-wrapper a", scope).click(function(e) {
                        e.preventDefault();

                        var video = $(e.currentTarget).attr("data-video");
                        var $iframe = $("iframe", scope)[0];

                        if ($iframe.src !== video) {
                            $iframe.src = video;
                        }
                    });
                }
            }
        }

        new Promise(function (resolve, reject) {
            initResourceSlider();
            initSupportVideos();
            resolve();
        });
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new ProductSupport(args.scope);
    }
});

define('Resideo/Components/Catalog/ProductTypeTopNavigation',['jquery'], function($) {
    function ProductTypeTopNavigation(scope) {
        if (document.querySelector('.product-type-top-navigation ul')) {
            new Promise(function (resolve, reject) {
                if ($(window).width() < 992) {
                    $('.product-type-top-navigation ul').slick({
                        slidesToShow: 1,
                        slidesToScroll: 1,
                        dots: false,
                        arrows: true
                    });

                    var index = 0;
                    $('.product-type-top-navigation ul a').each(function (i, item) {
                        if ($(item).hasClass("selected")) {
                            index = i;
                        }
                    });

                    $('.product-type-top-navigation ul').slick('slickGoTo', index-1, true);

                    $('.product-type-top-navigation ul').on('beforeChange', function (event, slick, currentPage, nextSlide) {
                        location.href = $('.product-type-top-navigation ul li').eq(nextSlide+1).find("a").attr('href');
                    }); 
                }
                resolve();
            });
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new ProductTypeTopNavigation(args.scope);
    }
});
define('Resideo/Components/Catalog/ProductVariantSelector',['jquery', 'accessibilityService'], function ($, accessibilityService) {
    function ProductVariantSelector(scope) {
        if (typeof String.prototype.endsWith !== 'function') {
            String.prototype.endsWith = function (suffix) {
                return this.indexOf(suffix, this.length - suffix.length) !== -1;
            };
        }

        if (document.querySelector('#modelSelector')) {
            $('#modelSelector', scope).on('click', function (e) {
                loadProductViewModelProductList("modalSelectorDropdown");
            });
        }

        if (document.querySelector('.product-variant-selector a.modelSelectorAnchor')) {
            $('a.modelSelectorAnchor', scope).on('click', function (e) {
                e.preventDefault();

                accessibilityService.modifyDDLAriaLabel("modelSelector", e.target.text);

                var url = $(this).attr('data-value');
                var alwaysReload = $(this).attr('data-alwaysreload') == "1";

                //get full path
                var fullpath = location.protocol + "//" + location.host + location.pathname;
                if (fullpath.endsWith('/'))
                    fullpath = fullpath.substr(0, fullpath.length - 1);

                fullpath = fullpath.split('/').slice(0, fullpath.split('/').length - 1).join("/") + "/" + url + "/";

                if (history.pushState && !alwaysReload && $("html").attr("data-magic-ua") != "ie") {
                    history.pushState({ url: url }, window.document.title, fullpath);
                    updateProductViewModel(url);
                }
                else {
                    //encoding fullPath to fix Cross-Site Scripting issue in Fortify scan 
                    window.document.location.href = encodeURI(fullpath);
                }
            });
        }

        if (document.querySelector('.product-variant-selector .dropdown-toggle')) {
            //adding this to remove .dropdown-backdrop div for touch screen devices
            //solution found here: https://github.com/twbs/bootstrap/issues/4550
            $('.dropdown-toggle', scope).click(function (e) {
                e.preventDefault();
                setTimeout($.proxy(function () {
                    if ('ontouchstart' in document.documentElement) {
                        $(this).siblings('.dropdown-backdrop').off().remove();
                    }
                }, this), 0);
            });
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new ProductVariantSelector(args.scope);
    }
});
define('Resideo/Components/Catalog/ProProductRelations',['jquery', 'productService', 'logService', 'text!Resideo/Components/Catalog/Templates/ProductInlineRatings.html'], function ($, productService, logService, productInlineRatings) {
    function ProProductRelations(scope, showPricing) {
        window.addEventListener('productChanged', function (e) {
            if (document.querySelector('.pro-product-relations .score-highlight')) {
                //remove slick slider markup/classes
                $('.rde-pro-product-relations-slider', scope).removeClass('slick-initialized').removeClass('slick-slider').removeClass('slider-disabled');
                $('.slick-prev.slick-arrow', scope).remove();
                $('.slick-next.slick-arrow', scope).remove();
                //when knockout updates the relationList, it doesn't remove old markup/items, it just adds new items (.score-highlight divs)
                //this happens because slick slider adds its own markup
                //so we have to programmatically remove old .slick-list and .slick-dots before slick is initialized again
                $('.slick-list', scope).remove();
                $('.slick-dots', scope).remove();
                var productInlineRatingsCompiled = _.template(productInlineRatings);
                //don't initialize slick if not needed
                if (($(window).width() >= 1200 && $('.score-highlight', scope).length < 5)
                    || ($(window).width() >= 768 && $(window).width() < 1200 && $('.score-highlight', scope).length < 4)
                    || ($(window).width() < 768 && $('.score-highlight', scope).length < 2)) {
                    $('.rde-pro-product-relations-slider', scope).addClass('slider-disabled');
                    $('.rde-pro-product-relations-slider', scope).show();
                } else {
                    setTimeout(function () {

                        // RRW-14964
                        // RRW-15426 target all rde-pro-product-relations-slider(s)
                        $('.rde-pro-product-relations-slider').each(function (e) {
                            $(this).on('init', function (event, slick, currentSlide, nextSlide) {
                                $(this).find('.score-highlight').matchHeight();
                            });
                        });

                        $('.rde-pro-product-relations-slider', scope).slick({
                            slidesToShow: 4,
                            slidesToScroll: 4,
                            arrows: true,
                            dots: false,
                            centerMode: false,
                            responsive: [
                                {
                                    breakpoint: 1199,
                                    settings: {
                                        slidesToShow: 3,
                                        arrows: false,
                                        dots: true
                                    }
                                },
                                {
                                    breakpoint: 767,
                                    settings: {
                                        slidesToShow: 1,
                                        arrows: false,
                                        dots: true,
                                        centerMode: true
                                    }
                                }
                            ]
                        });
                        $('.rde-pro-product-relations-slider', scope).show();
                    }, 0);
                }
                $('.score-highlight', scope).each(function (index, priceItem) {
                    var productSku = $(priceItem).data('product-sku');
                    if (showPricing) {
                        if (productSku) {

                            var ratingsContainer = $(priceItem).find('.related-product-ratings-container')[0];
                            ratingsContainer.innerHTML = '';
                            var bvId = $(ratingsContainer).attr('bv-id');
                            var bvRedirectUrl = $(ratingsContainer).attr('bv-redirect-url');
                            $(ratingsContainer).append(productInlineRatingsCompiled({ productId: bvId, productRedirectUrl: bvRedirectUrl }));

                        }
                    }
                });
                if (showPricing) {
                    $('.score-highlight', scope).each(function (index, priceItem) {
                        var productSku = $(priceItem).data('product-sku');

                        if (productSku) {
                            productService.getPrice(productSku)
                                .then(function (priceData) {
                                    var item = priceData.Item1;
                                    if (item) {
                                        if (item.ListedPrice === item.SalePrice) {
                                            $(priceItem).find('td.related-product-sku-price').html(item.ListedPrice);
                                        } else {
                                            $(priceItem).find('td.related-product-sku-price').html('<i class="strike">' + item.ListedPrice + '</i>' + item.SalePrice);
                                        }
                                    } else {
                                        // error
                                        if (priceData.Item2 && priceData.Item2.Errors) {
                                            logService.error(priceData.Item2.Errors[0]);
                                        } else {
                                            logService.error('SKU does not exist');
                                        }
                                    }
                                });
                        }
                    });
                }
            }
        });
        if (document.querySelector(".rde-pro-product-relations-slider")) {

            setTimeout(function () {

                $(".rde-pro-product-relations-slider .slick-slide.slick-cloned a").on("keydown", function (e) {
                    if (e.keyCode == 9 && !e.shiftKey) {
                        $(".rde-pro-product-relations-slider .slick-slide.slick-current.slick-active a").focus();
                    }
                    e.stopImmediatePropagation();
                    e.preventDefault();
                });
                $(".rde-pro-product-relations-slider .slick-slide.slick-active a").on("keydown", function (e) {
                    if (e.keyCode == 9 && !e.shiftKey) {
                        if ($($(".rde-pro-product-relations-slider .slick-slide.slick-active a")[3])[0].outerText === $(this)[0].outerText) {
                            $(".slick-next.slick-arrow").attr("tabindex", "0");
                            $(".slick-prev.slick-arrow").attr("tabindex", "0");
                            $(".slick-next.slick-arrow").focus();
                        }
                        e.stopImmediatePropagation();
                    }
                    if (e.keyCode == 9 && e.shiftKey) {
                        if ($($(".rde-pro-product-relations-slider .slick-slide.slick-active a")[0])[0].outerText === $(this)[0].outerText) {
                            $(".slick-prev.slick-arrow").focus();
                            e.preventDefault();
                        }
                        e.stopImmediatePropagation();
                    }

                });
                $(".slick-next.slick-arrow").on("keydown", function (e) {
                    if (e.keyCode == 9 && e.shiftKey) {
                        $(".rde-pro-product-relations-slider .slick-slide.slick-active a")[3].focus();
                        e.preventDefault();
                    }
                    if (e.keyCode == 9 && !e.shiftKey) {
                        $(".score-footer").focus();
                    }
                    e.stopImmediatePropagation();

                });
                $(".slick-prev.slick-arrow").on("keydown", function (e) {
                    if (e.keyCode == 9 && e.shiftKey) {
                        $(".rde-pro-product-relations-slider").focus();
                    }
                    e.stopImmediatePropagation();
                });
            }, 500);

        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new ProProductRelations(args.scope, args.ShowPricing);
    };
});
define('Resideo/Components/Catalog/ProProductResources',['jquery'], function ($) {
    function ProProductResources(scope, youTubePattern, youTubeAlternativePattern, vimeoPattern, mp4Pattern, movPattern) {
        var qtd = 9;

        window.onload = function () {
            if ($(window).width() < 991) {
                qtd = 6;
                $(".pro-product-resources .score-tab-panel").each(function (i, panel) {
                    $(panel).find(".score-highlight").each(function (i, item) {
                        if (i >= qtd)
                            $(item).hide();
                    });
                });
            }
        }

        if (document.querySelector('.pro-product-resources .score-highlight')) {
            if ($("body").hasClass("experience-editor"))
                return;

            $(".pro-product-resources").on('click', "a.rde-view-more", function (e) {
                e.preventDefault();
                $(".pro-product-resources .active.in").find("a.rde-view-more").hide();
                $(".pro-product-resources .active.in").find("a.rde-view-less").show();
                $(".pro-product-resources .active.in").find(".score-highlight").show();
            });

            $(".pro-product-resources").on('click', "a.rde-view-less", function (e) {
                e.preventDefault();
                $(".pro-product-resources .active.in").find("a.rde-view-more").show();
                $(".pro-product-resources .active.in").find("a.rde-view-less").hide();
                $('html, body').animate({ scrollTop: $('a[title="resources"]').offset().top - $("header")[0].offsetHeight }, 0);
                $(".pro-product-resources .active.in").find(".score-highlight").each(function (i, item) {
                    if (i >= qtd)
                        $(item).hide();
                });
            });

            window.onresize = function () {
                setTimeout(function () {
                    if ($(window).width() < 991) {
                        qtd = 6;
                        $(".pro-product-resources .score-tab-panel").each(function (i, panel) {
                            $(panel).find(".score-highlight").each(function (i, item) {
                                if (i >= qtd)
                                    $(item).hide();
                            });
                        });
                    }
                    else {
                        qtd = 9;
                        $(".pro-product-resources .score-tab-panel").each(function (i, panel) {
                            $(panel).find(".score-highlight").each(function (i, item) {
                                if (i < qtd)
                                    $(item).show();
                            });
                        });
                    }
                }, 1000);

            }

        }
        setTimeout(function () {
            $(".pro-product-resources").find("a.rde-view-less").hide();
            $(".pro-product-resources").find("a.rde-view-more").hide();
            $(".pro-product-resources .score-tab-panel").each(function (index, item) {
                if ($(item).find(".score-highlight").length > qtd)
                    $(item).find("a.rde-view-more").show();
            })
        }, 0);

        window.addEventListener('productChanged', function (e) {
            if (document.querySelector('.pro-product-resources .score-highlight')) {
                $(".score-button.rde-video-area", scope).on('click', function (e) {
                    e.preventDefault();

                    var videoSrc = $(this).data('video-src');
                    var iFrameTitle = $(this).data('iframe-title');
                    if (videoSrc) {
                        if (videoSrc.indexOf(youTubePattern) >= 0 || videoSrc.indexOf(youTubeAlternativePattern) >= 0) {
                            videoSrc = videoSrc.replace(youTubeAlternativePattern, youTubePattern);
                            $("#resource_video_iframe").attr("src", videoSrc + "?enablejsapi=1");
                            $("#resource_video_iframe").attr("title", iFrameTitle);
                            $('#resource_video').modal('show');
                        } else if (videoSrc.indexOf(vimeoPattern) >= 0) {
                            $("#resource_video_iframe").attr("src", videoSrc);
                            $("#resource_video_iframe").attr("title", iFrameTitle);
                            $('#resource_video').modal('show');
                        } else if (videoSrc.indexOf(mp4Pattern) >= 0 || videoSrc.indexOf(movPattern) >= 0) {
                            $("#resource_video_tag").attr("src", videoSrc);
                            $('#resource_video-mp3-mov').modal('show');
                        }
                    }
                });
                setTimeout(function () {
                    $(".pro-product-resources").find("a.rde-view-less").hide();
                    $(".pro-product-resources").find("a.rde-view-more").hide();
                    $(".pro-product-resources .score-tab-panel").each(function (index, item) {
                        if ($(item).find(".score-highlight").length > qtd)
                            $(item).find("a.rde-view-more").show();
                    })
                }, 0);
            }
        });
    }

    return function init(args) {
        return args.IsExperienceEditorEditing
            ? null
            : new ProProductResources(args.scope, args.YouTubePattern, args.YouTubeAlternativePattern, args.VimeoPattern, args.Mp4Pattern, args.MovPattern);
    };
});
define('Resideo/Components/Catalog/ProProductSpecifications',['jquery'], function ($) {
    function ProductSpecifications(scope) {
        if (document.querySelector('.pro-pdp-specs')) {
            new Promise(function (resolve, reject) {
                if ($("body").hasClass("experience-editor"))
                    return;

                var qtd = 9;

                $(window).on("load resize", function () {
                    qtd = ($(window).width() > 991) ? 18 : 9;
                    $(".pro-pdp-specs").find("a.rde-view-more").show();
                    $(".pro-pdp-specs").find("a.rde-view-less").hide();
                    $(".pro-pdp-specs").find("tr").show();
                    $(".pro-pdp-specs").find("tr").each(function (i, item) {
                        if (i >= qtd)
                            $(item).hide();
                    });
                });

                $(".pro-pdp-specs").find("a.rde-view-more").on('click', function (e) {
                    e.preventDefault();
                    $(".pro-pdp-specs").find("a.rde-view-more").hide();
                    $(".pro-pdp-specs").find("a.rde-view-less").show();
                    $(".pro-pdp-specs").find("tr").show();
                });

                $(".pro-pdp-specs").find("a.rde-view-less").on('click', function (e) {
                    e.preventDefault();
                    $(".pro-pdp-specs").find("a.rde-view-more").show();
                    $(".pro-pdp-specs").find("a.rde-view-less").hide();
                    $(".pro-pdp-specs").find("tr").each(function (i, item) {                                            
                        qtd = ($(window).width() > 991) ? 18 : 9;
                        if (i >= qtd)
                            $(item).hide();
                    });
                });

                window.addEventListener('productChanged', function (e) {
                    setTimeout(function () {
                        $(".pro-pdp-specs").find("a.rde-view-less").hide();
                        $(".pro-pdp-specs").find("a.rde-view-more").hide();
                        qtd = ($(window).width() > 991) ? 18 : 9;
                        if ($(".pro-pdp-specs").find("tr").length > qtd)
                            $(".pro-pdp-specs").find("a.rde-view-more").show();
                    }, 0);
                });

                setTimeout(function () {
                    $(".pro-pdp-specs").find("a.rde-view-less").hide();
                    $(".pro-pdp-specs").find("a.rde-view-more").hide();
                    if ($(".pro-pdp-specs").find("tr").length > qtd)
                        $(".pro-pdp-specs").find("a.rde-view-more").show();
                }, 0);
                resolve();
            });
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new ProductSpecifications(args.scope);
    }
});
define('Resideo/Components/Checkout/AddressInformation',['jquery', 'eventManager', 'constants', 'jqueryValidate', 'jqueryUnobtrusiveAjax'], function ($, eventManager, constants) {
    function AddressInformation(scope, googleMapsApiKey) {
        $('input', scope).blur(function () {
            sendAddressUpdated(scope, constants);
        });

        $('select', scope).change(function () {
            sendAddressUpdated(scope, constants);
        });

        //mapping to identify which property to use
        var componentForm = {
            street_number: 'short_name',
            route: 'long_name',
            locality: 'long_name', //city
            administrative_area_level_1: 'long_name', //state
            postal_code: 'short_name'
        };

        //mapping to identify which component to update
        var componentId = {
            street_number: 'AddressLine1',
            route: 'AddressLine1',
            locality: 'City', //city
            administrative_area_level_1: 'State', //state
            postal_code: 'ZipCode'
        };

        eventManager.subscribe("Address:SetAddress", function(address) {
            setField("#FirstName", address.FirstName);
            setField("#LastName", address.LastName);
            setField("#AddressLine1", address.Line1);
            setField("#AddressLine2", address.Line2);
            setField("#City", address.City);
            setField("#State", address.CountrySubdivision);
            setField("#ZipCode", address.PostalCode);
            
            eventManager.trigger("Form:RevalidateForm");
        });

        function setField(id, value) {
            if (value) {
                $(id, scope).val(value);
                $(id, scope).closest(".rde-float-container").addClass("active");
            }
        }

        // load google deps with google key
        require(["https://maps.googleapis.com/maps/api/js?key=" + googleMapsApiKey + "&libraries=places"], function () {
            var input = document.getElementById('AddressLine1');
            var autocomplete = new google.maps.places.Autocomplete(input);

            // Set initial restrict to the greater list of countries.
            autocomplete.setComponentRestrictions({ 'country': ['us'] });

            google.maps.event.addListener(autocomplete, 'place_changed', function () {
                var place = autocomplete.getPlace();

                // Get each component of the address from the place details
                // and fill the corresponding field on the form.
                if (place.address_components) {
                    //clearing address parts
                    document.getElementById("AddressLine1").value = "";
                    document.getElementById("AddressLine2").value = "";
                    document.getElementById("City").value = "";
                    var dropdownState = document.getElementById("State");
                    dropdownState.selectedIndex = -1;
                    document.getElementById("ZipCode").value = "";

                    for (var i = 0; i < place.address_components.length; i++) {
                        var addressType = place.address_components[i].types[0];
                        if (componentForm[addressType]) {
                            var addressPart = place.address_components[i][componentForm[addressType]];
                            var component = document.getElementById(componentId[addressType]);
                            if (component) {
                                if (component.value) {
                                    component.value += " " + addressPart;
                                }
                                else {
                                    component.value = addressPart;
                                }

                                // fall back to short name in case something bad happens, like US states being "GA" instead of "Gerogia"
                                if (!component.value) {
                                    component.value += place.address_components[i].short_name;
                                }

                                component.parentNode.classList.add('active');
                            }
                        }
                    }
                }

                //broadcast message about autocomplete
                sendAddressUpdated(scope, constants);
            });
        });

        if (window.location.hash === "#addressInformation" && $(window.location.hash).length) {
            $('html, body').animate({
                scrollTop: $(window.location.hash).offset().top - $("header")[0].offsetHeight
            }, 0);
        }
        
        // Disable keyup validation
        $(".address-information :input").keyup(function() {
            return false;
        });

        $(".address-information #ZipCode").keyup(function (e) {
            // Allow only digits and submitting by hit enter key
            if (!checkKey(e.which)) {
                e.preventDefault();
                return;
            }
        });

        $(".address-information #ZipCode").keypress(function (e) {
            // Allow only digits and submitting by hit enter key
            if (!checkKey(e.which)) {
                e.preventDefault();
                return;
            }
        });

        function checkKey(code) {
            if (code === 13) {
                return true;
            }

            if (code < 48 || code > 57) {
                return false;
            }
            return true;
        }
    }

    function sendAddressUpdated(scope, constants) {
        eventManager.trigger(constants.AddressUpdated, {
                FirstName: document.getElementById("FirstName").value,
                LastName: document.getElementById("LastName").value,
                Line1: document.getElementById("AddressLine1").value,
                Line2: document.getElementById("AddressLine2").value,
                City: document.getElementById("City").value,
                CountrySubdivision: document.getElementById("State").value,
                PostalCode: document.getElementById("ZipCode").value,

                Form: JSON.stringify($('input, select', scope).serializeArray())
        });

        eventManager.trigger("Form:RevalidateForm");
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new AddressInformation(args.scope, args.googleMapsApiKey);
    };
});
define('Resideo/Components/Checkout/CheckoutForm',['jquery', 'eventManager', 'componentForms', 'cartService', 'storageService', 'validation', 'constants', 'logService', 'contextService'],
    function ($, eventManager, componentForms, cartService, storage, validation, constants, logService, contextService) {
    function CheckoutForm(scope, endpoints) {
        var form = $(scope).find("form");
        
        form.removeData("validator") /* added by the raw jquery.validate plugin */
            .removeData("unobtrusiveValidation");  /* added by the jquery unobtrusive plugin*/

        $.validator.unobtrusive.parse(form);

        $(form).on('blur keyup change', 'input', function (event) {
            validateForm(form);
        });

        $(form).on('change', 'select', function (event) {
            validateForm(form);
        });

        function validateForm(form) {
            var valid = form.validate().checkForm();
            if (valid) {
                //make shipping button enabled
                eventManager.trigger("Shipping:Valid");

                //trigger check for billing form
                eventManager.trigger("Payment:CheckIfValid");
            } else {
                
                //make shipping button disabled
                eventManager.trigger("Shipping:Invalid");

                //make order review button disabled
                eventManager.trigger(constants.GoToReviewButtonDisable);
            }
        }

        validateForm(form);

        // By default validator ignores hidden fields.
        // change the setting here to ignore nothing
        var validator = form.data('validator');
        validator.settings.ignore = "";
        
        eventManager.subscribe(constants.CheckoutFormSubmit, function (data) {
            if (form && form.valid()) {
                submitCheckoutForm(data);
            } else {
                var errorList = validator.errorList;
                componentForms.trackFormSubmitError(errorList, form.attr("name"));
            }
        });

        eventManager.subscribe(constants.BillingFormSubmit, function (url) {
            if (form && form.valid()) {
                $.ajax({
                    url: endpoints.billingFormSubmitEndpoint + "?token=" + storage.loadLocalECommerceToken() + contextService.getSiteQueryParameter() + contextService.getLanguageQueryParameter(),
                        type: "POST",
                        data: form.serialize()
                    })
                    .done(function (data) {
                        if (data) {
                            cartService.updateCart(data);
                        }
                        cartService.getCart(false).then(function (cart) {
                            eventManager.trigger("Payment:CartUpdatedWithPayment", cart);

                            var formValues = form.serializeArray();
                            var formName = form.attr("name");
                            formValues = appendBillingMethodValue(formValues);
                            componentForms.trackFormSubmit(formValues, formName, cart);

                            //switch location to successUrl
                            window.location = url;
                        });
                    })
                    .fail(function (data) {
                        logService.log("Error:", data);
                    });
            } else {
                var errorList = validator.errorList;
                componentForms.trackFormSubmitError(errorList, form.attr("name"));
            }
        });

        eventManager.subscribe("Payment:CheckBillingFormValidation", function () {
            validateForm(form);
        });

        eventManager.subscribe("Form:RevalidateForm", function () {
            $.validator.unobtrusive.parse(form);
            validateForm(form);
        });

        function submitCheckoutForm(successUrl) {
            $.ajax({
                url: endpoints.checkoutFormEndpoint + "?token=" + storage.loadLocalECommerceToken() + contextService.getSiteQueryParameter() + contextService.getLanguageQueryParameter(),
                type: "POST",
                data: form.serialize()
            })
                .done(function (data) {
                    cartService.updateCart(data);

                        var formValues = form.serializeArray();
                        formValues = appendOptInValue(formValues);
                        formValues = appendShippingMethodValue(formValues);
                        componentForms.trackFormSubmit(formValues, form.attr("name"), data);
                        window.location = successUrl;
                })
                .fail(function (data) {
                    logService.log("Error:", data);
                });
        }

        function appendOptInValue(valueArray) {
            var optInChecked = $("#OptIn").is(":checked");
            valueArray.push({ name: "OptInChecked", value: optInChecked });
            return valueArray;
        }

        function appendShippingMethodValue(valueArray) {
            var shippingMethod = $('input[name=radio]:checked', form).data("description");
            valueArray.push({ name: "ShippingMethod", value: shippingMethod });
            return valueArray;
        }

        function appendBillingMethodValue(valueArray) {
            var billingMethod = $('input[name=isSameAsShipping]:checked', form).prop('id');
            valueArray.push({ name: "BillingMethod", value: billingMethod });
            return valueArray;
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new CheckoutForm(args.scope, args.endpoints);
    };
});
define('Resideo/Components/Checkout/ContactInformation',['jquery', 'eventManager', 'jqueryValidate', 'jqueryUnobtrusiveAjax', 'cartService', 'helpersService', 'identityService']
    , function ($, eventManager, validate, unobtrusiveAjax, CartService, helpersService, identityService) {
    function ContactInformation(scope) {

        identityService.getECommerceToken("").then(function(token) {
            CartService.getCart(false).then(function (cart) {

                if (cart && cart.ShippingAddress && cart.Shopper) {

                    setField("#Email", cart.Shopper.Email);
                    setField("#ConfirmEmail", cart.Shopper.Email);
                    setField("#PhoneNumber", cart.Shopper.PhoneNumber);

                    if (cart.ShippingAddress.Line1) {
                        eventManager.trigger("Address:SetAddress", cart.ShippingAddress);
                    }
                }

                if (window.location.hash === "#contactInformation" && $(window.location.hash).length) {
                    $('html, body').animate({
                        scrollTop: $(window.location.hash).offset().top - $("header")[0].offsetHeight
                    }, 0);
                }
            });
        });

        function setField(id, value) {
            if (value) {
                $(id, scope).val(value);
                $(id, scope).closest(".rde-float-container").addClass("active");
            }
        }

        // Disable keyup validation
        $(".contact-information #Email").keyup(function() {
            return false;
        });

        $(".contact-information #ConfirmEmail").keyup(function () {
            return false;
        });

        $(".contact-information #PhoneNumber").keyup(function(e) {
            // Allow only digits and submitting by hit enter key
            if (!helpersService.checkKey(e.key) ) {
                e.preventDefault();
                return;
            }

            var length = this.value.length;

            if (length === 3 || length === 7) {
                this.value = this.value + '-';
            }
        });

        $(".contact-information #PhoneNumber").keypress(function (e) {
            // Allow only digits and submitting by hit enter key
            if (!helpersService.checkKey(e.key)) {
                e.preventDefault();
                return;
            }
        });
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new ContactInformation(args.scope);
    }
});
define('Resideo/Components/Checkout/ShippingInformation',['jquery', 'eventManager', 'cartService', 'identityService'], function ($, eventManager, CartService, identityService) {
    function ShippingInformation(scope) {
    updateValidation(scope);

        $('input[name=isSameAsShipping]', scope).change(function () {
            switchAddressType(scope);
        });
        identityService.getECommerceToken("").then(function(token) {
            CartService.getCart().then(function(cart) {

                if (cart && cart.BillingAddress && cart.ShippingAddress) {
                    if (cart.ShippingAddress.FirstName === cart.BillingAddress.FirstName &&
                        cart.ShippingAddress.LastName === cart.BillingAddress.LastName &&
                        cart.ShippingAddress.Line1 === cart.BillingAddress.Line1 &&
                        cart.ShippingAddress.Line2 === cart.BillingAddress.Line2 &&
                        cart.ShippingAddress.City === cart.BillingAddress.City &&
                        cart.ShippingAddress.CountrySubdivision === cart.BillingAddress.CountrySubdivision &&
                        cart.ShippingAddress.PostalCode === cart.BillingAddress.PostalCode) {
                        //do nothing (for now?)

                    } else {
                        //addresses don't match, BUT! check if billing has at least something
                        if (cart.BillingAddress.Line1) {
                            //billing is not the same, switch to it
                            $("#differentBillingAddress").prop("checked", true);
                            switchAddressType(scope);

                            // ask address form to populate billing address
                            eventManager.trigger("Address:SetAddress", cart.BillingAddress);
                        }
                    }
                }

                if (window.location.hash === "#billingAddress") {
                    $("#differentBillingAddress").prop("checked", true);
                    switchAddressType(scope);
                }

                if (window.location.hash === "#billingAddress" && $(window.location.hash).length) {
                    $('html, body').animate({
                        scrollTop: $(window.location.hash).offset().top - $("header")[0].offsetHeight
                    }, 0);
                }
            });
        });
    }

    function switchAddressType(scope) {
        setTimeout(function () {
            if ($("#differentBillingAddress").prop("checked")) {
                $('.rde-form-wrapper .shipping-information').show();
            } else {
                $('.rde-form-wrapper .shipping-information').hide();
            }
            updateValidation(scope);
        }, 0);
    }

    function updateValidation(scope) {
        var form = $(scope).parents("form");

        if ($('.rde-form-wrapper .shipping-information').is(":visible")) {
            form.data('validator').settings.ignore = "";
        }
        else {
            form.data('validator').settings.ignore = ":hidden";
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new ShippingInformation(args.scope);
    };
});
define('Resideo/Components/Collections/AdaptiveTabAccordion',['jquery'], function ($) {
    function ProductFeaturesSection(scope, isEE) {
        if (document.querySelector('.rde-adaptive-tab-accordion')) {
            new Promise(function (resolve, reject) {
                var autoClick = false;
                var startWithHash = (window.location.hash && window.location.hash != "");

                //stick only on mobile
                $(".rde-adaptive-tab-accordion-mobile .rde-adaptive-tab-accordion-progressbar", scope).stick_in_parent({
                    offset_top: 166,
                    parent: ".rde-adaptive-tab-accordion-mobile",
                    spacer: ".rde-adaptive-tab-accordion-side-navigation"
                });

                //section is the first level of panels
                $(".rde-adaptive-tab-accordion").find("a.js-anchor-section").each(function (i, item) {
                    $(item).on('click', function (e) {
                        autoClick = true;
                        $($(this).attr('href') + "-1").find("a.js-anchor-panel").first().click();
                        e.preventDefault();
                    });
                    $(item).on('keypress', function (e) {
                        if (e.which == 13 || e.keyCode == 13) {
                            autoClick = true;
                            $($(this).attr('href') + "-1").find("a.js-anchor-panel").first().click();
                            e.preventDefault();
                        }
                    });
                });

                //panel is the second level of panels (there is no more than two allowed)
                $(".rde-adaptive-tab-accordion").find("a.js-anchor-panel").each(function (i, item) {
                    $(item).on('click', function (e) {
                        $(scope).hide();
                        toggle(this);
                        $(scope).show();
                        window.location.hash = $(this).attr('href');

                        //manage to fire only one even on panel click
                        setTimeout(function () { autoClick = false; }, 250);
                        if (!autoClick) {
                            const event = new CustomEvent('multitaskPanelClick', { anchor: this });
                            this.dispatchEvent(event);
                        }
                        e.preventDefault();
                    });

                    $(item).on('keypress', function (e) {
                        if (e.which == 13 || e.keyCode == 13) {
                            toggle(this);
                            window.location.hash = $(this).attr('href');
                            e.preventDefault();
                        }
                    });
                });

                //perform the toggle in the accordion & tab
                var toggle = function (a) {
                    for (var view = 1; view <= 3; view++) {
                        //set variables for the anchor clicked, its pane, then the section where it is inside and then the anchor for that section
                        $a_panel = $("a[href='" + $(a).attr('href') + "'][data-view='" + view + "']");
                        $panel = $($a_panel.attr('href') + "-" + view);
                        $section = $panel.closest('.js-section');
                        $a_section = $("a[href='#" + $section.attr('data-anchor') + "'][data-view='" + view + "']");

                        //colapse all others but the one clicked
                        $(".js-panel[data-view='" + view + "']").each(function (i, item) {
                            if ($(item).attr('id') != $panel.attr('id'))
                                colapsePanel($(item));
                        });
                        $(".js-section[data-view='" + view + "']").each(function (i, item) {
                            if ($(item).attr('id') != $section.attr('id'))
                                colapsePanel($(item));
                        });
                        $(".js-anchor-panel[data-view='" + view + "']").each(function (i, item) {
                            if ($(item).attr('id') != $a_panel.attr('id'))
                                colapseAnchor($(item));
                        });
                        $(".js-anchor-section[data-view='" + view + "']").each(function (i, item) {
                            if ($(item).attr('id') != $a_section.attr('id'))
                                colapseAnchor($(item));
                        });

                        //expand one clicked
                        expandAnchor($a_panel);
                        expandPanel($panel);
                        expandAnchor($a_section);
                        expandPanel($section);
                    }

                    //set the title in the desktop view
                    setTimeout(function () { $(".js-tab-title").html($(".js-panel:visible").find('.js-panel-title').html()); }, 100);

                    //set progress bar
                    var navigation = anchorsNavigation();
                    var progress = navigation.progress;
                    $(".progress-bar", scope).css('width', progress + '%');
                    $(".progress-bar-value", scope).text(progress + '%');

                    //show/hide navigation back/next btn
                    $(".button-nav .back", scope).addClass("disabled");
                    $(".button-nav .next", scope).addClass("disabled");
                    if (!navigation.first) {
                        $(".button-nav .back", scope).removeClass("disabled");
                    }
                    if (!navigation.last) {
                        $(".button-nav .next", scope).removeClass("disabled");
                    }
                };

                var colapseAnchor = function (a) {
                    $(a).attr("aria-expanded", 'false');
                    $(a).removeClass("colapsed");
                    $(a).removeClass('active');
                    $(a).parent().removeClass('active');
                }
                var expandAnchor = function (a) {
                    $(a).attr("aria-expanded", 'true');
                    $(a).addClass("colapsed");
                    $(a).addClass('active');
                    $(a).parent().addClass('active');
                }
                var colapsePanel = function (panel) {
                    $(panel).removeClass("colapsed");
                    $(panel).attr("aria-expanded", 'false');
                    $(panel).hide();
                }
                var expandPanel = function (panel) {
                    $(panel).addClass("colapsed");
                    $(panel).attr("aria-expanded", 'true');
                    $(panel).show();
                }

                //helper to navigate anchors and find progress
                var anchorsNavigation = function () {
                    var progressNumber = 0;
                    var first = false;
                    var last = false;

                    $anchors = $("a.js-anchor-panel[data-view='1']");
                    for (var i = 0; i < $anchors.length; i++) {
                        $prev = $("a.js-anchor-panel[data-view='1'].active").first();
                        $next = $prev;
                        if ($anchors.eq(i).attr('href') == $("a.js-anchor-panel[data-view='1'].active").first().attr('href')) {
                            if (i > 0) $prev = $anchors.eq(i - 1);
                            if (i < ($anchors.length - 1)) $next = $anchors.eq(i + 1);

                            progressNumber = (i + 1) / $anchors.length;
                            first = (i == 0);
                            last = ((i + 1) == $anchors.length)
                            break;
                        }
                    }
                    var obj = {
                        next: $next,
                        prev: $prev,
                        progress: Math.round(progressNumber * 100),
                        first: first,
                        last: last
                    };

                    return obj;
                }

                //if urls has anchor, open the appropriate tab/accordion
                var setPanelFromHash = function () {
                    // RDO-14209- collapse all accordion to show all the blue boxes
                    if ($('.rde-adaptive-tab-accordion').is('.custom-accordion')) {
                        
                    }
                    else if (window.location.hash) {
                        var hash = window.location.hash.toLowerCase();

                        //next/prev navigation
                        if (hash == "#next" || hash == "#prev" || hash == "#previous" || hash == "#back") {

                            var navigation = anchorsNavigation();
                            if (hash == "#next") {
                                window.location.hash = $(navigation.next).attr('href');
                            } else if (hash == "#prev" || hash == "#previous" || hash == "#back") {
                                window.location.hash = $(navigation.prev).attr('href');
                            }
                        }

                        autoClick = true;
                        $("a[href='" + hash + "']").click();
                    }

                    else {
                        autoClick = true;
                        $("a.js-anchor-section").first().click();
                    }

                    //scroll to top of the accordion
                    if (startWithHash) {
                        if ($(".rde-adaptive-tab-accordion-mobile").is(":visible")) {
                            setTimeout(function () {
                                $([document.documentElement, document.body]).animate({
                                    scrollTop: $("a[data-view='1'][href='" + window.location.hash + "']").offset().top - 274
                                }, 0);
                            }, 0);
                        } else {
                            $(".rde-adaptive-tab-accordion-step-content:visible").hide();
                            setTimeout(function () {
                                $([document.documentElement, document.body]).animate({
                                    scrollTop: $(".rde-adaptive-tab-accordion-wrapper:visible").offset().top - 167
                                }, 0);
                                $(".rde-adaptive-tab-accordion-step-content").fadeIn("fast");
                            }, 0);
                        }
                    }
                }
                window.addEventListener('hashchange', setPanelFromHash, false);
                setPanelFromHash();
            });
        }
    }
    //RDO-13986 - NEXT & BACK buttons in French & Spanish versions on the Literature optimization pages
    var spanish = $('.custom-accordion .spanish').find('.button-nav');
    spanish.children("a.next").text('Siguiente');
    spanish.children("a.back").text('Regresa');
    var french = $('.custom-accordion .french').find('.button-nav');
    french.children("a.next").text('suivante');
    french.children("a.back").text('prcdente');

    return function init(args) {
        return args.isEditing ? null : new ProductFeaturesSection(args.scope);
    };
});

define('Resideo/Components/Content/InteractiveCardItem',['jquery'], function($) {
    function InteractiveCardItem(scope) { 
        $(".application-label, .rde-arrow-left", scope).on("click", function () {
            //scroll to the tabset RRW-8179
            $('html, body').animate({
                scrollTop: $('.rde-supported-home-tabset').offset().top - $("header")[0].offsetHeight
            }, 0);
        });
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new InteractiveCardItem(args.scope);
    }
});

define('text!Resideo/Components/Content/InteractiveCardsTemplates/Modal.html',[],function () { return '<div id="interactive_home_modal" class="modal fade in" tabindex="-1" role="dialog" aria-labelledby="interactive-home-modal" style="display: block; padding-right: 19px;">\r\n    <div class="modal-dialog" role="document">\r\n        <div class="modal-content">\r\n            <button type="button" class="close" data-dismiss="modal" aria-label="Close" tabindex="0"><span aria-hidden="true"></span></button>\r\n            <div class="card-content">\r\n                <%=modalContent%>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});

define('Resideo/Components/Content/InteractiveCards',['jquery',
    'underscore',
    'text!Resideo/Components/Content/InteractiveCardsTemplates/Modal.html',
], function ($, _, modalTemplate) {
    function InteractiveCards(scope) {

        if (document.querySelector('.rde-interactive-cards')) {
            new Promise(function (resolve, reject) {

                $(".rde-selector", scope).on('click', function (e) {
                    if ($(this).data('cover') == "1") {
                        coverButtonClick(this);
                    } else if (!($(".rde-hide-on-mobile", scope).is(":visible"))) {
                        mobileButtonClick(this);
                    } else {
                        buttonClick(this);
                    }
                    e.preventDefault();
                });

                $(".js-cards").find("a[href='#'],a[href='#toggle'],a[href='#back'],a[href='#next']", scope).on('click', function (e) {
                    var scope = "#" + $(this).closest('.js-custom-scope').attr('id');
                    toggleCards(this, scope);
                    e.preventDefault();
                });

                var swap = $(".rde-interactive-cards .rde-hide-on-mobile").is(":visible");
                var rtimeout;
                $(window).resize(function () {
                    clearTimeout(rtimeout);
                    rtimeout = setTimeout(function () {
                        if (swap == $(".rde-interactive-cards .rde-hide-on-mobile").is(":visible"))
                            return;
                        swap = $(".rde-interactive-cards .rde-hide-on-mobile").is(":visible");
                        resetCards();
                    }, 500);
                });
            });
        }

        coverButtonClick = function (obj) {
            var scope = $(obj).data('scope');
            var firstTab = $('.rde-supported-home-tabset li.active').offset().left;

            //scroll to the tabset RRW-7187 
            $('html, body').animate({
                scrollTop: $('.rde-supported-home-tabset').offset().top - $("header")[0].offsetHeight
            }, 0);

            $(obj).closest(".tab-content-wrapper-outer").parent().children('.nav-tabs-wrapper-outer').find(".nav-tabs>li:nth-child(" + (parseInt($(obj).data('item')) + 1) + ")").find("a").click();

            // RRW-8180
            var currentTab = $('.rde-supported-home-tabset li.active').offset().left;
            var scrollLen = currentTab - firstTab;
            if (scrollLen) {
                $('.nav-tabs').animate({ scrollLeft: scrollLen }, 200);
            }
        }

        buttonClick = function (obj) {
            var scope = $(obj).data('scope');

            //scroll to the tabset RRW-7187 
            $('html, body').animate({
                scrollTop: $('.rde-supported-home-tabset').offset().top - $("header")[0].offsetHeight
            }, 0);

            //select item
            $(".js-ph-container", scope).hide();
            $(".js-ph-container[data-item='" + $(obj).data('item') + "']", scope).show();

            //mark selected'
            $('img.rde-img-selector', scope).each(function (i, item) {
                $(item).attr('src', $(item).attr('src').replace('-active.svg', '.svg'));
            });
            $('a.rde-selector').each(function (i, item) {
                $(item).attr('aria-selected', false);
            });
            if ($(obj).find('img').attr('src').indexOf('-active.svg') < 0)
                $(obj).find('img').attr('src', $(obj).find('img').attr('src').replace('.svg', '-active.svg'));

            $(obj).attr('aria-selected', true);

            //position to 1st card 
            $(".js-cards", scope).hide();
            $(".js-cards[data-card='1']", scope).show();

            $(".js-ph-container:visible").attr("tabindex", "0");
            $(".js-ph-container:visible").focus();
        }

        mobileButtonClick = function (obj) {
            var scope = $(obj).data('scope');
            var item = $(obj).data('item');
            showModal(scope, item, "1");
        }

        toggleCards = function (obj, scope) {
            var card = $(obj).closest('.js-cards').data('card');
            $(".js-cards", scope).hide();
            $(".js-cards[data-card='" + (card == "1" ? "2" : "1") + "']", scope).show();
        }

        showModal = function (scope, item, card) {
            var timeout = 0;

            //destroi before show
            if ($('body').find("#interactive_home_modal").length > 0) {
                $("#interactive_home_modal").modal('hide');
                timeout = 500; //timeout only for better experience
            }

            setTimeout(function () {
                //load lazy images before display modal.
                $(".js-cards[data-card='" + card + "']", scope).find(".js-ph-container[data-item='" + item + "']").find("*").each(function (i, item) {
                    loadElement(item);
                });

                //load modal template + content
                var _appModalTemplate = _.template(modalTemplate);
                var modalHtml = _appModalTemplate({ modalContent: $(".js-cards[data-card='" + card + "']", scope).find(".js-ph-container[data-item='" + item + "']").html() });

                //show modal
                $(modalHtml).appendTo('body')
                    .modal('show')
                    .on('hidden.bs.modal', function () {
                        $("#interactive_home_modal").remove();
                    });

                //bind card toggle event
                setTimeout(function () {
                    $("#interactive_home_modal").find("a[href='#'],a[href='#toggle'],a[href='#back'],a[href='#next']", scope).on('click', function (e) {
                        showModal(scope, item, card == "1" ? "2" : "1");
                        e.preventDefault();
                    });
                }, 500);
            }, timeout);
        }

        resetCards = function () {
            //button active (1st)
            $('img.rde-img-selector').each(function (i, item) {
                $(item).attr('src', $(item).attr('src').replace('-active.svg', '.svg'));
            });
            $('a.rde-selector').each(function (i, item) {
                $(item).attr('aria-selected', false);
            });
            if ($(".rde-interactive-cards .rde-hide-on-mobile").is(":visible")) {
                $("img.rde-img-selector[data-item='1'][data-cover='0']").each(function (i, item) {
                    $(item).attr('src', $(item).attr('src').replace('.svg', '-active.svg'));
                });
                $("a.rde-selector[data-item='1'][data-cover='0']").each(function(i, item) {
                    $(item).attr('aria-selected', true);
                });
            }

            //container show 1st
            $(".js-ph-container").hide();
            $(".js-ph-container[data-item='1']").show();

            //position to 1st card 
            $(".js-cards").hide();
            $(".js-cards[data-card='1']").show();
        }

        resetCards();


        
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new InteractiveCards(args.scope);
    }
});
var globalStatesCollection;
var legislationId;
define('Resideo/Components/Content/Legislation',['jquery'], function ($) {
    function Legislation(scope, allstates, id) {
        globalStatesCollection = JSON.parse(allstates);
        legislationId = id;
		
        window.addEventListener('hashchange', UpdateStateCategoryDetailOutput);
		var allcategoriescards = $(".score-highlight-body > a[href*='#']");
		if(allcategoriescards)
		{
			for (let i = 0; i < allcategoriescards.length; i++) {
				allcategoriescards[i].parentElement.parentElement.parentElement.addEventListener('click', function(e){ window.location = $(e.target).closest('.score-highlight').find('a').attr('href');});
			}
		}
        UpdateStateCategoryDetailOutput();
    }

    return function init(args) {
        $('div[class*="hero-category-"]').hide();
        $('.hero-category-all').show();
        return args.IsExperienceEditorEditing ? null : new Legislation(args.scope, args.AllStates, args.Id);
    }

    function UpdateStateCategoryDetailOutput() {
        window.scroll({ top: 0, left: 0, behavior: 'smooth' });
        var hashvalue = window.location.hash.substr(1);
        if (hashvalue) {
            $('div[class*="hero-category-"]').hide();
            $(`div[class*="hero-category-${decodeURI(hashvalue).replace(' ', '-')}"]`).show();
            $(`.hero-category-${decodeURI(hashvalue).replace(' ', '-')}.slick-slider > div > div`).width('100%');
            $(`.hero-category-${decodeURI(hashvalue).replace(' ', '-')}.slick-slider > div > div > div`).width('100%');
            $('.score-highlight:not(:target)').removeClass("active");
            $('.score-highlight:has(:target)').addClass("active");
            BindStateCategoryDetails(legislationId, decodeURI(hashvalue).replace('-', ' '));
        }
    }

    function BindStateCategoryDetails(id, categoryName) {
        var output = "";
        var statesCollection = globalStatesCollection;
        statesCollection = FilterStates(statesCollection, categoryName);
        output = PrepareOutput(statesCollection, output, categoryName);
        $(`#${id}`).html(output);
    }

    function FilterStates(statesCollection, categoryName) {
        return statesCollection.filter(function (statearg) {
            var categories = statearg.Categories.filter(function (categoryarg) {
                return categoryarg.Name.toLowerCase() == categoryName.toLowerCase();
            })
            return categories.length > 0;
        });
    }

    function PrepareOutput(statesCollection, output, categoryName) {
        for (let i = 0; i < statesCollection.length; i++) {
            var tempOutput = '';

            tempOutput = `${tempOutput}<div>`;
            tempOutput = `${tempOutput}<h4>${statesCollection[i].Name}`;
            var categoryCollection = statesCollection[i].Categories;
            for (let j = 0; j < categoryCollection.length; j++) {
                var category = categoryCollection[j];
                if (category.IsChecked) {
                    tempOutput = `${tempOutput}<span class='square ${category.Name.toLowerCase().replace(' ', '-')}'></span>`;
                }
            }
            tempOutput = `${tempOutput}</h4>`;
            var isCategoryExists = false;
            for (let j = 0; j < categoryCollection.length; j++) {
                var category = categoryCollection[j];
                if (category.IsChecked && category.Name.toLowerCase() == categoryName.toLowerCase()) {
                    isCategoryExists = true;
                    tempOutput = `${tempOutput}${decodeHTMLEntities(category.Text)}<br/>`;
                }
            }
            if (isCategoryExists)
                output = `${output}${tempOutput}</div>`;
        }

        return output;
    }

    function decodeHTMLEntities(text) {
        return $("<textarea/>")
            .html(text)
            .text();
    }
});
define('Resideo/Components/Content/ParameterizedIFrame',['jquery'], function ($) {
    function ParameterizedIFrame(scope) {
        if (document.querySelector('iframe', scope)) {
            new Promise(function (resolve, reject) {
                var iframeComp = $('iframe', scope);
                var styles = $(iframeComp).attr('style');
                if (styles.indexOf('height') < 0 && styles.indexOf('width') < 0) { /*if style property is applied, dont size it in JS*/
                    var iframeHolder = iframeComp.parent();
                    var width = iframeHolder.width();

                    iframeComp.css({
                        'height': (width / 1.25 | 0) + 'px',
                        'width': width + 'px'
                    });
                }
                resolve();

            });
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new ParameterizedIFrame(args.scope);
    }
});
define('Resideo/Components/Content/Rollover',['jquery'], function ($) {
    function Rollover(scope, soundUrl) {
        $('.rollover-component', scope).on('click', function () {
            var audio = new Audio(soundUrl);
            audio.play();
        });

        $(".rollover-component").on("keyup", function (event) {
            if (event.keyCode === 13) {
                event.preventDefault();
                $(this).click();
            }
        });
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new Rollover(args.scope, args.SoundUrl);
    };
});
define('Resideo/Components/Corporate/LteCalculator',['jquery'],
    function ($) {
        function LteCalculator(scope, labels, sunsetDates) {
            var $radioButtons = $(".rde-radio", scope);
            var $att = $("#at-and-t", scope);
            var $verizon = $("#verizon", scope);
            var $numOfUnits = $("#num-of-units", scope);
            var $calculateBtn = $("#calculate-btn", scope);
            var $resultsSection = $(".rde-lte-calculator__form__detailed-view", scope);

            var attSunsetDate = new Date(sunsetDates.attSunsetDate);
            var verizonSunsetDate = new Date(sunsetDates.verizonSunsetDate);

            var currentDate = new Date();
            var sunsetDate = attSunsetDate;

            var monthDiff = function (d1, d2) {
                var months;
                months = (d2.getFullYear() - d1.getFullYear()) * 12;
                months -= d1.getMonth();
                months += d2.getMonth();
                return months <= 0 ? 0 : months;
            };

            var initSelection = function () {
                var noSunSetfMonths = monthDiff(currentDate, attSunsetDate);
                var noVerizonfMonths = monthDiff(currentDate, verizonSunsetDate);
                if (noSunSetfMonths > 0) {
                    $att.prop("checked", true).attr('disabled', false);
                    $verizon.attr('disabled', noVerizonfMonths == 0 ? true : false);
                    sunsetDate = attSunsetDate;
                }
                else if (noVerizonfMonths > 0) {
                    $verizon.prop("checked", true).attr('disabled', false);
                    $att.attr('disabled', noSunSetfMonths == 0 ? true : false);
                    sunsetDate = verizonSunsetDate;
                }

                $numOfUnits.val("");
            };

            initSelection();

            var fillResults = function () {
                var devicesToUpgrade = parseInt($numOfUnits.val());
                var monthsToSunset = monthDiff(currentDate, sunsetDate);
                var upgradesPerMonth = 0;
                if (monthsToSunset !== 0) {
                    upgradesPerMonth = Math.round(devicesToUpgrade / monthsToSunset);
                }
                var upgradesPerDay = Math.round(upgradesPerMonth / 22);
                var upgradesPerWeek = Math.round(upgradesPerDay * 5);

                $("#months-to-sunset").val(monthsToSunset);
                $("#upgrades-per-month").val(upgradesPerMonth);
                $("#upgrades-per-week").val(upgradesPerWeek);
                $("#upgrades-per-day").val(upgradesPerDay);
            };

            var setInputAvailable = function (toggle) {
                $att.attr('disabled', !toggle);
                $verizon.attr('disabled', !toggle);
                $numOfUnits.attr('disabled', !toggle);
            };

            $('input[type=radio]').change(function () {
                if (this.id == 'at-and-t') {
                    sunsetDate = attSunsetDate;
                }
                else if (this.id == 'verizon') {
                    sunsetDate = verizonSunsetDate;
                }
            });

            $numOfUnits.on('change keyup', function () {
                var count = parseInt($numOfUnits.val());
                if (count > 0) {
                    $calculateBtn.removeClass("disabled");
                } else {
                    $calculateBtn.addClass("disabled");
                }
            });

            $numOfUnits.focusout(function () {
                $errorLabel = $(".field-validation-error");
                if ($numOfUnits.val() === '') {
                    $errorLabel.removeClass("hidden");
                } else {
                    $errorLabel.addClass("hidden");
                }
            });

            $calculateBtn.click(function () {
                var count = parseInt($numOfUnits.val());
                if ($resultsSection.hasClass("visible")) {
                    //Restart is clicked
                    initSelection();

                    $resultsSection.removeClass("visible");
                    $radioButtons.removeClass("disabled");

                    $numOfUnits.attr('disabled', false);
                    //change button class
                    $calculateBtn.removeClass("rde-secondary");
                    $calculateBtn.addClass("rde-primary");
                    $calculateBtn.text(labels.calculate);
                    $calculateBtn.addClass("disabled");
                } else if (count > 0) {
                    //Calculate is clicked
                    $resultsSection.addClass("visible");
                    $radioButtons.addClass("disabled");

                    setInputAvailable(false);
                    //change button class
                    $calculateBtn.removeClass("rde-primary");
                    $calculateBtn.addClass("rde-secondary");
                    $calculateBtn.text(labels.restartCalculation);

                    fillResults();
                }
            });
        }

        return function init(args) {
            return args.IsEditing ? null : new LteCalculator(args.scope, args.labels, args.sunsetDates);
        };
    });

define('text!Resideo/Components/CountrySelector/Templates/CountryOptions.html',[],function () { return '<% _.each( countries , function( country, index ){ %>\r\n<li>\r\n    <a href="<%- country.PageUrl %>">\r\n        <img src="<%- country.ThumbnailUrl %>" alt="<%- country.ThumbnailAltText %>" />\r\n        <span><%- country.Country %><%- country.Language==""?"": " | " + country.Language %></span>\r\n    </a>\r\n</li>\r\n<% }); %>';});

define('Resideo/Components/CountrySelector/CountrySelector',['jquery', 'eventManager', 'underscore', 'text!Resideo/Components/CountrySelector/Templates/CountryOptions.html'],
    function ($, eventManager, _, countryOptionsTemplate) {
        function CountrySelector(scope, countryOptions) {

            countryCount(countryOptions);
            var countryOptionsTemplateCompiled = _.template(countryOptionsTemplate);
            $(".country-selector-options").html(countryOptionsTemplateCompiled({ countries: countryOptions }));

            $('.language-selector .close-button').on('click', function () {
                $('.language-selector .score-button-menu').removeClass('open');
            });
            $('.language-selector .btn-country-selector').on('click', function () {
                if ($('.rde-header-3-0 #Languagemodel').length>0) {
                    $('.rde-header-3-0 #Languagemodel').appendTo('body');
                }
            });
            $('.language-selector').find('.dropdown-menu').attr('style', '');
            $('.country-selector-modal').on('click', function () {
                $('.country-selector-modal').modal('hide')
            });
        }
        function countryCount(countryOptions) {
            $.each(countryOptions, function (i, item) {
                countryOptions[i].sameCountryCount = 0;
                $.each(countryOptions, function (j, duplicateItem) {
                    if (item.Country == duplicateItem.Country) {
                        countryOptions[i].sameCountryCount = countryOptions[i].sameCountryCount + 1;
                    }
                })
            });
        }
        return function init(args) {
            return args.IsEditing ? null : new CountrySelector(args.scope, args.CountryOptions);
        };
    });
define('Resideo/Components/Feedback/SupportArticleFeedback',['jquery', 'eventManager', 'feedbackService'], function ($, eventManager, feedbackService) {
    function SupportArticleFeedback(scope, articleId, title) {

        Object.defineProperty(this, 'articleId', { configurable: !0, enumerable: !1, writable: !0, value: "" });

        this.articleId = articleId;
        var self = this;
        
        if (!title) {
            title = $('.rde-support-info .score-content-spot h1').lenght > 0 ? $('.rde-support-info .score-content-spot h1')[0].innerText : "";
        }
        
        var buttonsSection = $("#feedbackButtons", scope);
        var thankYouSection = $("#thankYouSection", scope);

        var data = sessionStorage.getItem(articleId);

        if (data) {
            thankYouSection.show();
        } else {
            buttonsSection.show();
        }

        if (document.querySelector('.support-article-feedback #noButton')) {
            $(scope).on('click', '#noButton', function (e) {
                e.preventDefault();
                eventManager.trigger("Feedback:ShowModal", { isHelpful: false, articleId: articleId, title: title });
            });
        }

        if (document.querySelector('.support-article-feedback #yesButton')) {
            $(scope).on('click', '#yesButton', function (e) {
                e.preventDefault();
                eventManager.trigger("Feedback:ShowModal", { isHelpful: true, articleId: articleId, title: title });
            });
        }

        eventManager.subscribe("Feedback:Submit", function () {
            buttonsSection.hide();
            thankYouSection.show();

            sessionStorage.setItem(self.articleId, 'true');
        });
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new SupportArticleFeedback(args.scope, args.articleId, args.title);
    }
});
define('Resideo/Components/Feedback/SupportArticleFeedbackModal',['jquery', 'eventManager', 'feedbackService'], function ($, eventManager, feedbackService) {
    function SupportArticleFeedbackModal(scope, site) {

        Object.defineProperty(this, 'articleId', { configurable: !0, enumerable: !1, writable: !0, value: "" });
        Object.defineProperty(this, 'isHelpful', { configurable: !0, enumerable: !1, writable: !0, value: false });
        Object.defineProperty(this, 'site', { configurable: !0, enumerable: !1, writable: !0, value: "" });

        this.site = site;
        var self = this;
        
        eventManager.subscribe("Feedback:ShowModal", function (data) {
            self.isHelpful = data.isHelpful;
            self.articleId = data.articleId;
            self.title = data.title;

            feedbackService.saveFeedback(self.site, self.articleId, self.isHelpful, self.title, '', window.location.href.split('?')[0]);
        });

        if (document.querySelector('.support-article-feedback-modal #articleComment')) {
            $(scope).on('keyup', '#articleComment', function (e) {
                var counterField = $("#counter", scope);
                var maxLength = $(this).attr("maxlength");

                if ($(this).val().length > maxLength) {
                    return false;
                } else {
                    counterField.html($(this).val().length + "/" + maxLength);
                }
            });
        }

        eventManager.subscribe("Feedback:Submit", function () {
            feedbackService.saveFeedback(self.site, self.articleId, self.isHelpful, self.title, $("#articleComment", scope).val(), window.location.href.split('?')[0]);
        });
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new SupportArticleFeedbackModal(args.scope, args.site);
    }
});
define('Resideo/Components/FindPro/FindProContactForm',['jquery', 'validation', 'findAPro', 'eventManager', 'constants', 'helpersService'],
    function ($, validation, findAPro, eventManager, constants, helpersService) {
        function FindProContactForm(scope, language, businessNameContentText, thanksForSigningMessage) {
            var form = $(scope).find("form");

            var $backLink = $(".find-a-pro-back", scope);
            var $submit = $(".js-email-signup", scope);
            var $typeOfHelp = $("#TypeOfHelp", scope);
            var $productsAndSolutions = $("#ProductsAndSolutions", scope);
            var $typeOfProject = $("#TypeOfProject", scope);

            var $businessName = $(".rde-form-business-name", scope);
            var $errorMessageDiv = $(".rde-form-submit-error-container", scope);

            var $productsAndSolutionsCheckboxes = $(".products-and-solutions", scope);
            var $heatingAndCooling = $(".heating-and-cooling-checkbox-group", scope);
            var $plumbing = $(".plumbing-checkbox-group", scope);
            var $homeSecurity = $(".home-security-checkbox-group", scope);

            var $installation = $("#Installation", scope);
            var $maintenance = $("#Maintenance", scope);
            var $upgrade = $("#Upgrade", scope);
            var $consultation = $("#Consultation", scope);
            var $serviceRepair = $("#ServiceRepair", scope);

            var $phoneInput = $("#Phone", scope);

            var $thanksForSigningMessage = $(".thanks-for-signing-message", scope);
            var $successMessage = $(".rde-emailsignup-success", scope);

            var dirtyTypeOfHelpCheckbox = false;
            var dirtyTypeOfProjectCheckbox = false;

            var businessName = helpersService.getUrlParameters(window.location, 'businessName');

            setBusinessNameText();
            function setBusinessNameText() {
                $businessName.text(businessNameContentText.replace('{Business Name}', decodeURIComponent(businessName)));
            }
            
            setThanksForSigningMessage();
            function setThanksForSigningMessage() {
                $thanksForSigningMessage.text(thanksForSigningMessage.replace('{Business Name}', decodeURIComponent(businessName)));
            }

            form.removeData("validator") /* added by the raw jquery.validate plugin */
                .removeData("unobtrusiveValidation");  /* added by the jquery unobtrusive plugin*/

            $.validator.unobtrusive.parse(form);

            $backLink.on('click', function () {
                window.history.back();
            });

            $typeOfHelp.on('change', function (event) {
                var value = $typeOfHelp.val();
                switch (value) {
                    case 'HeatingAndCoolingPro':
                        $productsAndSolutionsCheckboxes.addClass('visible');
                        $heatingAndCooling.addClass('visible');
                        $plumbing.removeClass('visible');
                        $homeSecurity.removeClass('visible');
                        break;
                    case 'PlumbingPro':
                        $productsAndSolutionsCheckboxes.addClass('visible');
                        $heatingAndCooling.removeClass('visible');
                        $plumbing.addClass('visible');
                        $homeSecurity.removeClass('visible');
                        break;
                    case 'HomeSecurityPro':
                        $productsAndSolutionsCheckboxes.addClass('visible');
                        $heatingAndCooling.removeClass('visible');
                        $plumbing.removeClass('visible');
                        $homeSecurity.addClass('visible');
                        break;
                    default:
                        $productsAndSolutionsCheckboxes.removeClass('visible');
                        $heatingAndCooling.removeClass('visible');
                        $plumbing.removeClass('visible');
                        $homeSecurity.removeClass('visible');
                        break;
                }

                dirtyTypeOfHelpCheckbox = false;
            });

            $(form).on('blur keyup change', 'input', function (event) {
                validateForm(false);
            });

            $(form).on('change', 'select', function (event) {
                validateForm(false);
            });

            eventManager.subscribe(constants.FindAProSubmitted, function () {
                form.hide();
                $businessName.hide();
                $successMessage.show();
                $backLink.hide();
                helpersService.scrollToTheTopOfElement($successMessage);
            });

            eventManager.subscribe(constants.FindAProSubmitFailed, function () {
                $errorMessageDiv.addClass('visible');
                helpersService.scrollToTheTopOfElement($errorMessageDiv);
                //analytics
                eventManager.trigger(constants.FindAProErrorMessageShown, $errorMessageDiv.text())
            });

            function validateForm(isSubmitAction) {
                var result = true;

                var checkProductOrSolutionSection = isSubmitAction === true ? true : dirtyTypeOfHelpCheckbox;
                if (checkProductOrSolutionSection && !isProductOrSolutionSectionValid()) {
                    $productsAndSolutions.addClass('visible');
                    result = false;
                } else {
                    $productsAndSolutions.removeClass('visible');
                }

                var checkTypeOfProjectSection = isSubmitAction === true ? true : dirtyTypeOfProjectCheckbox;
                if (checkTypeOfProjectSection && !isTypeOfProjectValid()) {
                    $typeOfProject.addClass('visible');
                    result = false;
                }
                else {
                    $typeOfProject.removeClass('visible');
                }

                result = result && form.validate().checkForm();

                if (result) {
                    $submit.removeClass("disabled");
                } else {
                    $submit.addClass("disabled");
                }

                return result;
            }

            $('.products-and-solutions').find(':checkbox').change(function () {
                if (this.checked && !dirtyTypeOfHelpCheckbox)
                    dirtyTypeOfHelpCheckbox = true;
            });

            var isProductOrSolutionSectionValid = function () {
                var numOfSelectedCBs = 0;
                var otherTextBoxOk = true;
                var $hcOther = $("#HCOther", scope);
                var $poOther = $("#POther", scope);
                var $hsoOther = $("#HSOther", scope);

                var typeOfHelp = $typeOfHelp.val();
                switch (typeOfHelp) {
                    case 'HeatingAndCoolingPro':
                        numOfSelectedCBs = $('.heating-and-cooling-checkbox-group').find(':checkbox:checked').length;
                        otherTextBoxOk =
                            !$hcOther.is(':checked') || ($hcOther.is(':checked') && $("#HCOtherText", scope).val());
                        break;
                    case 'PlumbingPro':
                        numOfSelectedCBs = $('.plumbing-checkbox-group').find(':checkbox:checked').length;
                        otherTextBoxOk = !$poOther.is(':checked') || ($poOther.is(':checked') && $("#POtherText", scope).val());
                        break;
                    case 'HomeSecurityPro':
                        numOfSelectedCBs = $('.home-security-checkbox-group').find(':checkbox:checked').length;
                        otherTextBoxOk =
                            !$hsoOther.is(':checked') || ($hsoOther.is(':checked') && $("#HSOtherText", scope).val());
                        break;
                }

                return numOfSelectedCBs > 0 && otherTextBoxOk;
            };

            $('.type-of-project-checkbox-group').find(':checkbox').change(function () {
                if (this.checked && !dirtyTypeOfProjectCheckbox)
                    dirtyTypeOfProjectCheckbox = true;
            });

            var isTypeOfProjectValid = function () {
                var numOfSelectedCBs = numOfSelectedCBs = $('.type-of-project-checkbox-group').find(':checkbox:checked').length;

                return numOfSelectedCBs > 0;
            };

            $submit.click(function (e) {
                $errorMessageDiv.removeClass('visible');

                e.preventDefault();

                if (validateForm(true)) {
                    var country = $("#Country", scope).val();
                    var firstName = $("#FirstName", scope).val();
                    var lastName = $("#LastName", scope).val();
                    var email = $("#Email", scope).val();
                    var phone = $("#Phone", scope).val();
                    var notes = $("#Notes", scope).val();
                    var hcOtherText = $("#HCOtherText", scope).val();
                    var pOtherText = $("#POtherText", scope).val();
                    var hsOtherText = $("#HSOtherText", scope).val();

                    var bestTime = $("#BestTime", scope).val();
                    var preferredMethod = $("#PreferredMethod", scope).val();
                    var typeOfHelp = $("#TypeOfHelp", scope).val();
                    var projectReadiness = $("#ProjectReadiness", scope).val();
                    var projectCompletion = $("#ProjectCompletion", scope).val();

                    var dataModel = {
                        CountryCode: country,
                        FirstName: firstName,
                        LastName: lastName,
                        EmailAddress: email,
                        PhoneNumber: phone,
                        LocationId: helpersService.getUrlParameters(window.location, 'id'),
                        BestTimeToContact: bestTime,
                        PreferredContactMethod: preferredMethod,
                        TypeOfHelpNeeded: typeOfHelp,
                        TypeOfProject: {
                            Installation: $installation.is(':checked'),
                            Maintenance: $maintenance.is(':checked'),
                            Upgrade: $upgrade.is(':checked'),
                            Consultation: $consultation.is(':checked'),
                            ServiceRepair: $serviceRepair.is(':checked')
                        },
                        ProjectReadiness: projectReadiness,
                        ProjectCompletion: projectCompletion,
                        UsersNeeds: notes,
                        ProductsAndSolutions: {}
                    };

                    switch (typeOfHelp) {
                        case 'HeatingAndCoolingPro':
                            dataModel.ProductsAndSolutions = {
                                SmartHomeTechnologyServices: $("#HCSmartHomeTechnologyServices", scope).is(':checked'),
                                Thermostat: $("#Thermostat", scope).is(':checked'),
                                AirQualityTechnology: $("#AirQualityTechnology", scope).is(':checked'),
                                AirConditioner: $("#AirConditioner", scope).is(':checked'),
                                FurnaceForcedAirHeat: $("#FurnaceForcedAirHeat", scope).is(':checked'),
                                BoilerRadiantHeat: $("#BoilerRadiantHeat", scope).is(':checked'),
                                MiniSplit: $("#MiniSplit", scope).is(':checked'),
                                HeatPump: $("#HeatPump", scope).is(':checked'),
                                ElectricBaseboardHeatWallHeater: $("#ElectricBaseboardHeatWallHeater", scope).is(':checked'),
                                SwampCooler: $("#SwampCooler", scope).is(':checked'),
                                GasPiping: $("#GasPiping", scope).is(':checked'),
                                Electrical: $("#Electrical", scope).is(':checked'),
                                Other: $("#HCOther", scope).is(':checked'),
                                OtherText: hcOtherText
                            };
                            break;
                        case 'PlumbingPro':
                            dataModel.ProductsAndSolutions = {
                                SmartHomeTechnologyServices: $("#PSmartHomeTechnologyServices", scope).is(':checked'),
                                WaterHeater: $("#WaterHeater", scope).is(':checked'),
                                SinkOrDrain: $("#SinkOrDrain", scope).is(':checked'),
                                Toilet: $("#Toilet", scope).is(':checked'),
                                BathtubOrShower: $("#BathtubOrShower", scope).is(':checked'),
                                SewerPipe: $("#SewerPipe", scope).is(':checked'),
                                RefrigerationSystem: $("#RefrigerationSystem", scope).is(':checked'),
                                SumpPump: $("#SumpPump", scope).is(':checked'),
                                MainWaterLinePipe: $("#MainWaterLinePipe", scope).is(':checked'),
                                TanklessWaterSystem: $("#TanklessWaterSystem", scope).is(':checked'),
                                Other: $("#POther", scope).is(':checked'),
                                OtherText: pOtherText
                            };
                            break;
                        case 'HomeSecurityPro':
                            dataModel.ProductsAndSolutions = {
                                SmartHomeTechnologyServices: $("#HSSmartHomeTechnologyServices", scope).is(':checked'),
                                AlarmOrSecuritySystem: $("#AlarmOrSecuritySystem", scope).is(':checked'),
                                ExteriorDoors: $("#ExteriorDoors", scope).is(':checked'),
                                SurveillanceCameras: $("#SurveillanceCameras", scope).is(':checked'),
                                SecurityGate: $("#SecurityGate", scope).is(':checked'),
                                StormShutters: $("#StormShutters", scope).is(':checked'),
                                SecurityBars: $("#SecurityBars", scope).is(':checked'),
                                SafeOrSecureStorage: $("#SafeOrSecureStorage", scope).is(':checked'),
                                Fences: $("#Fences", scope).is(':checked'),
                                Other: $("#HSOther", scope).is(':checked'),
                                OtherText: hsOtherText
                            };
                            break;
                        default:
                        // code block
                    }

                    findAPro.SubmitContactForm(typeOfHelp, dataModel, language);
                }
            });

            // Disable keyup validation
            $phoneInput.keyup(function () {
                return false;
            });
            $phoneInput.keyup(function (e) {
                // Allow only digits and submitting by hit enter key
                if (!helpersService.checkKey(e.key)) {
                    e.preventDefault();
                    return;
                }
                var length = this.value.length;
                if (length === 3 || length === 7) {
                    this.value = this.value + '-';
                }
            });
            $phoneInput.keypress(function (e) {
                // Allow only digits and submitting by hit enter key
                if (!helpersService.checkKey(e.key)) {
                    e.preventDefault();
                    return;
                }
            });
        }

        return function init(args) {
            return args.IsEditing ? null : new FindProContactForm(args.scope, args.language, args.businessNameContentText, args.thanksForSigningMessage);
        };
    });
define('Resideo/Components/Forms/EmailSignUpForm',['jquery', 'eventManager', 'jqueryValidate', 'jqueryValidateUnobtrusive', 'jqueryUnobtrusiveAjax'],
    function($, eventManager) {
        function EmailSignUpForm(scope, endpoints, language, labels, showAlreadySubscribed) {
            var form = $(scope).find("form");
            var $submit = $(".js-email-signup", scope);
            var $confirmation = $("#Confirmation", scope);
            var $alreadySubscribedError = $("#already-subscribed", scope);
            var $internalError = $("#internal-error", scope);

            var $sendEmailSection = $(".email-signup-send-email-section input");
            var $templateIdSection = $(".email-signup-template-id-section");

            addReguiredRule($confirmation, "data-val-required");

            $.validator.unobtrusive.parse(form);

            toggleTemplateIdSection();
            $sendEmailSection.change(toggleTemplateIdSection);

            if (document.querySelector('.rde-email-signup-form form')) {
                $(form).on('blur keyup change', 'input', function(event) {
                    hideErrors();
                    toggleSubmitButton();
                });

                $(form).on('change', 'select', function(event) {
                    hideErrors();
                    toggleSubmitButton();
                });
            }

            function toggleTemplateIdSection() {
                if ($sendEmailSection.is(":checked")) {
                    $templateIdSection.removeClass("hidden");
                } else {
                    $templateIdSection.addClass("hidden");
                }
            }

            function validateForm() {
                return form.validate().checkForm();
            }

            function hideErrors() {
                $alreadySubscribedError.removeClass("visible");
                $internalError.removeClass("visible");
            }

            function toggleSubmitButton(parameters) {
                if (validateForm()) {
                    $submit.removeClass("disabled");
                } else {
                    $submit.addClass("disabled");
                }
            }

            function addReguiredRule(element, currAttr) {
                element.rules("add", {
                    required: true,
                    messages: {
                        required: element.attr(currAttr)
                    }
                });
            }

            if (document.querySelector('.rde-email-signup-form #Confirmation')) {
                $confirmation.click(function(e) {
                    if ($confirmation.is(':checked') && validateForm()) {
                        $submit.removeClass("disabled");
                    } else {
                        $submit.addClass("disabled");
                    }
                });
            }

            if (document.querySelector('.rde-email-signup-form .js-email-signup')) {
                $submit.click(function(e) {
                    e.preventDefault();
                    hideErrors();

                    if (validateForm()) {
                        var $form = $("#email-signup-form");
                        var email = $("#Email", scope).val();
                        var firstName = $("#FirstName", scope).val();
                        var lastName = $("#LastName", scope).val();
                        var signupType = $form.data().signupType;
                        var sendEmail = $form.data().sendEmail == 'True';
                        var sendCoupon = $form.data().sendCoupon == 'True';
                        var sourceTracking = $form.data().sourceTracking;
                        $.ajax({
                                url: endpoints.SignUp + "?sc_lang=" + language,
                                type: "POST",
                                data: {
                                    email: email,
                                    firstName: firstName,
                                    lastName: lastName,
                                    signupType: signupType,
                                    sendEmail: sendEmail,
                                    sendCoupon: sendCoupon,
                                    sourceTracking: sourceTracking
                                }
                            })
                            .done(function(data) {
                                form.hide();
                                $('div.modal-body > div > div.score-right > div.score-style-box').hide();
                                $("div.modal-body > div > div.score-right > div.rde-email-signup-form").addClass('success-padding');
                                //$('.modal-body div.score-column2.equal div.score-right div.score-style-box').hide(); //release/9.1 removed on merge
                                //$(".rde-email-signup-form").addClass('success-padding'); //release/9.1 removed on merge
                                $(".rde-emailsignup-success").show();


                                eventManager.trigger("NewVisitor:HideWelcome");
                            })
                            .fail(function(data) {
                                if (data.status === 409) {
                                    if (showAlreadySubscribed) {
                                        form.hide();
                                        $("#rde-emailsignup-result-title", scope).text(labels.AlreadySubscribedTitle);
                                        $("#rde-emailsignup-result-message", scope).text(labels.AlreadySubscribedMessage);
                                        $(".rde-emailsignup-success").show();
                                        $('div.modal-body > div > div.score-right > div.score-style-box').hide();
                                        $(".rde-emailsignup-success").addClass('success-padding');
                                    } else {
                                        $alreadySubscribedError.addClass("visible");
                                        $('html, body').animate({ scrollTop: $alreadySubscribedError.offset().top - 300 }, 200);
                                    }
                                } else {
                                    $internalError.addClass("visible");
                                    $('html, body').animate({ scrollTop: $internalError.offset().top - 300 }, 200);
                                }
                            });
                    }
                });
            }
        }

        return function init(args) {
            return args.IsEditing ? null : new EmailSignUpForm(args.scope, args.endpoints, args.language, args.labels, args.showAlreadySubscribed);
        };
    });
define('Resideo/Components/Forms/GetStartedForm',['jquery', 'getStartedService', 'accessibilityService'],
    function ($, getStartedService, accessibilityService) {

        var $productTypeItem = '.product-type-item';
        var $productDropdown = '#product-dropdown';
        var $productDropdownItemList = '#product-dropdown-items-list';
        var $loader = '#loader';

        function GetStartedForm(scope, dsId) {
            new Promise(function (resolve, reject) {
                modifyBootstrapDropdownBehavior();

                if (document.querySelector('.get-started-form .product-type-item')) {
                    $($productTypeItem).click(function (event) {
                        clearProductSelection();
                        $($loader).removeClass("hidden");
                        accessibilityService.modifyDDLAriaLabel("product-type-dropdown", event.target.text);

                        getStartedService.getProductsFromCategory(event.target.dataset.value, dsId)
                            .then(populateProductsDropdown);
                    });
                }
                resolve();
            });
        }

        var populateProductsDropdown = function (data) {
            $.each(data, function (index, value) {
                $($productDropdownItemList).append(
                    '<li class="dropdownSecondaryOption"><a href="' + value.Url + '"><img src="' + value.ImageUrl + '" alt="' + value.Name + '" class="dropdown-item-image"><span class="dropdown-item-name">' + value.Name + '</span></a></li>'
                );
            });
            enableProductsDropdown();
        };

        var enableProductsDropdown = function () {
            modifyBootstrapDropdownBehavior();
            $($loader).addClass("hidden");
            $($productDropdown).prop('disabled', false);
        };

        //Modify bootstrap dropdown to populate current selection to dropdown button
        var modifyBootstrapDropdownBehavior = function () {
            if (document.querySelector('.rde-getting-started-filter .dropdown-menu li a')) {
                $('.rde-getting-started-filter .dropdown-menu li a').click(function () {
                    $(this).parents('.dropdown').find('.btn').html($(this).text() + ' <span class="caret"></span>');
                    $(this).parents('.dropdown').find('.btn').val($(this).data('value'));
                });
            }
        };

        var clearProductSelection = function () {
            $($productDropdownItemList).empty();
            $($productDropdown).prop('disabled', true);
        };

        return function init(args) {
            return args.IsEditing ? null : new GetStartedForm(args.scope, args.DatasourceId);
        };
    });
define('Resideo/Components/Forms/MarketoForm',['jquery', 'eventManager', 'constants'], function ($, eventManager, constants) {


    function MarketoForm(scope, baseUrl, confirmationPage, munchkinId, formId) {

        new Promise(function (resolve, reject) {

            if (formId == "7523" && document.cookie.indexOf('newProVisitor') !== -1) {
                // cookie is present and id 7523
            }
            else {

                MktoForms2.loadForm(baseUrl, munchkinId, formId, function (form) {

                    eventManager.trigger(constants.MarketoFormLoaded);

                    if (window.location.hash != "") {
                        var element = window.location.hash.replace("#", "");
                        document.getElementById(element).scrollIntoView();
                    }

                    //Add an onSuccess handler
                    form.onSuccess(function (values) {
                        //Analytics
                        eventManager.trigger(constants.MarketoFormSubmitSuccess, values);
                        // Take the lead to a different page on successful submit, ignoring the form's configured followUpUrl
                        location.href = confirmationPage;
                        // Return false to prevent the submission handler continuing with its own processing
                        return false;
                    });
                });
            }
            resolve();
            $("form").on({
                click: function () { $(this).parent().addClass("active"); },
                blur: function () {
                    if ($(this).val() == "" || $(this).val().indexOf("_") > -1)
                        $(this).parent().removeClass("active");
                },
                focus: function () { $(this).parent().addClass("active"); }
            }, "#shippingPostalCodeMKTO, #generic0");
        });
    };

    return function init(args) {
        return args.IsEditing ? null : new MarketoForm(args.scope, args.BaseUrl, args.ConfirmationPage, args.MunchkinId, args.FormId);
    };
});
define('Resideo/Components/LiveChatButton/LiveChatButton',['jquery'], function ($) {
    function LiveChatButton(scope, liveChatButtonId) {
        new Promise(function (resolve, reject) {
            if (!window._laq) { window._laq = []; }
            window._laq.push(
                function () {
                    liveagent.showWhenOnline(
                        liveChatButtonId,
                        document.getElementById('liveagent_button_online_' + liveChatButtonId)
                    );

                    liveagent.showWhenOffline(
                        liveChatButtonId,
                        document.getElementById('liveagent_button_offline_' + liveChatButtonId)
                    );

                    //RDO-9457
                    liveagent.showWhenOnline(liveChatButtonId, document.getElementById('liveagent_floaticon_online_' + liveChatButtonId));

                    liveagent.showWhenOffline(liveChatButtonId, document.getElementById('liveagent_floaticon_offline_' + liveChatButtonId));
                }
            );
            resolve();
        });
    }

    LiveChatButton.init = function init(args) {
        require([args.LiveChatInitUrl], function () {
            liveagent.setChatWindowWidth(420);
            liveagent.setChatWindowHeight(545);
            liveagent.init(args.LiveChatUrl, args.LiveChatInitParam1, args.LiveChatInitParam2);
        });

        return args.IsExperienceEditorEditing ? null : new LiveChatButton(args.scope, args.LiveChatButtonId);
    }

    return LiveChatButton;
});
define('Resideo/Components/MyAccount/MyProfile',['jquery'], function($) {
    function MyProfile(scope) {
        
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new MyProfile(args.scope);
    }
});

define('text!Resideo/Components/MyAccount/Templates/PaymentMethods.html',[],function () { return '<div class="row" data-id="<%- paymentOption.Id %>" style="<%- currentCount>=displayCount?\'display:none\':\'\' %>">\r\n    <div class="col-md-4">\r\n        <div class="card-holder-name"><%- paymentOption.NickName  %></div>\r\n        <div class="rde-payment-card-holder">\r\n            <% if(paymentOption.CreditCard.Brand == "Visa") {%><img class="payment-method-type visa " src="<%- icons.Visa %>" alt="visa icon"> <%}%>\r\n            <% if(paymentOption.CreditCard.Brand == "AmericanExpress") {%><img class="payment-method-type amex" src="<%- icons.AmericanExpress %>" alt="american express icon"> <%}%>\r\n            <% if(paymentOption.CreditCard.Brand == "Discover") {%><img class="payment-method-type discover" src="<%- icons.Discover %>" alt=" discover icon"><%}%>\r\n            <% if(paymentOption.CreditCard.Brand == "Mastercard") {%><img class="payment-method-type mastercard " src="<%- icons.Mastercard %>" alt="mastercard icon"><%}%>\r\n            <% if(paymentOption.CreditCard.Brand == "Paypal") {%><img class="payment-method-type paypal" src="<%- icons.Paypal %>" alt="paypal icon"><%}%>\r\n        </div>\r\n        <div>**** **** **** <%- paymentOption.CreditCard.LastFourDigits %></div>\r\n        <div>Exp: <%- paymentOption.CreditCard.ExpirationMonth %>/ <%- paymentOption.CreditCard.ExpirationYear %></div>\r\n    </div>\r\n    <div class="col-md-4">\r\n    </div>\r\n    <div class="col-md-4">\r\n        <div class="rde-primary-payment">\r\n            <% if (paymentOption.IsDefault) { %>\r\n            <span class="rde-payment-method-primary"><%- labels.PrimaryLabel %></span>\r\n            <% } else { %>\r\n            <a href="#" class="rde-payment-method-make-primary" data-id="<%- paymentOption.Id %>"><%- labels.MakePrimaryLabel %></a>\r\n            <% } %>\r\n        </div>\r\n        <div><a href="#" class="rde-payment-method-edit" data-id="<%- paymentOption.Id %>" ><%- labels.EditLabel %></a></div>\r\n        <div><a href="#" class="rde-payment-method-remove" is-default-payment="<%- paymentOption.IsDefault %>" data-id="<%- paymentOption.Id %>"><%- labels.RemoveLabel %></a></div>\r\n    </div>\r\n</div>';});

define('Resideo/Components/MyAccount/PaymentMethods',['jquery', 'underscore', 'text!Resideo/Components/MyAccount/Templates/PaymentMethods.html', 'shopperService'],
    function ($, _, paymentMethodTemplate, shopperService) {
        function PaymentMethods(scope, labels, nonePlaceholderText, icons) {
            paymentMethodTemplateCompiled = _.template(paymentMethodTemplate);
            var qtd = 2;
            hideViewLessButton(true, true);
            shopperService.getShopper().then(refrashPaymentMethods, rejecctPaymentMethods);

            function refrashPaymentMethods(data) {
                if (data.Shopper) {
                    if (data.Shopper.PaymentOptions != null) {
                        $(".rde-payment-method-items", scope).empty();

                        _.each(data.Shopper.PaymentOptions.PaymentOption, function (paymentOption, i) {
                            paymentOption.NickName = getEllipsis(paymentOption.NickName, 40);
                            $(".rde-payment-method-items", scope).append(paymentMethodTemplateCompiled({ paymentOption: paymentOption, labels: labels, icons: icons, currentCount: i, displayCount: qtd  }))
                        });

                        if ($(".rde-payment-method .rde-payment-method-items").find(".row").length > qtd)
                            $(".rde-payment-method").find("a.rde-view-more").show();

                    }
                    else {
                        $(".rde-payment-method-items", scope).empty();
                        $(".rde-payment-method-items", scope).text(nonePlaceholderText);
                    }
                }
            }
            function rejecctPaymentMethods(data) { }
            
            
           
            $(".rde-payment-method").on('click', "a.rde-view-more", function (e) {
                e.preventDefault();
                hideViewLessButton(false, true);
                $(".rde-payment-method .rde-payment-method-items").find(".row").show();
            });

            $(".rde-payment-method").on('click', "a.rde-view-less", function (e) {
                e.preventDefault();
                hideViewLessButton(true, false);
                $(".rde-payment-method .rde-payment-method-items").find(".row").each(function (i, item) {
                    if (i >= qtd)
                        $(item).hide();
                });
            });

            //Remove button action
            $(".rde-payment-method-items").on("click", ".rde-payment-method-remove", function (e) {
                e.preventDefault();
                var IsPrimary = $(this).attr("is-default-payment") === "true" ? true : false;
                var IsOnlyOnePaymentMethod = $(".rde-payment-method .rde-payment-method-items").find(".row").length != 2;
                if (IsPrimary) {
                    $(".rde-payment-method .error-message").html("<span>" +
                        "You must choose a new primary payment method before removal."
                        + "<span>");
                    return;
                }
                if (IsOnlyOnePaymentMethod) {
                    $(".rde-payment-method .error-message").html("<span>" +
                        "At least one payment method is needed for billing purposes. Please, add at least one more payment method before removing this one."
                        + "<span>");
                    return;
                }
                //TODO Remove payment method logic
            });

            function hideViewLessButton(hideViewLess, hideViewMore) {
                if (hideViewLess) {
                    $(".rde-payment-method").find("a.rde-view-less").hide();
                }
                else {
                    $(".rde-payment-method").find("a.rde-view-less").show();
                }
                if (hideViewMore) {
                    $(".rde-payment-method").find("a.rde-view-more").hide();
                }
                else {
                    $(".rde-payment-method").find("a.rde-view-more").show();
                }

            }

            function getEllipsis(sentence, characters) {
                for (var i = sentence.length; i >= 0; i--) {
                    if (sentence.substring(0, i).length < characters) {
                        if (i < sentence.length) {
                            sentence = sentence.substring(0, i) + "...";
                        }
                        return sentence;
                    }
                }
            }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new PaymentMethods(args.scope, args.labels, args.nonePlaceholderText, args.icons);
    }
});
define('Resideo/Components/Navigation/BackToTop',["jquery"], function (jQuery) {
    // set attribute for transparent image
    function setTransparentImage() {
        jQuery('.rde-back-to-top').css('filter', 'alpha(opacity=50)');
        jQuery('.rde-back-to-top').css('-moz-opacity', '0.5');
        jQuery('.rde-back-to-top').css('-khtml-opacity', '0.5');
        jQuery('.rde-back-to-top').css('opacity', '0.5');
    }
    //  revert to normal style image
    function removeTransparentImage() {
        jQuery('.rde-back-to-top').css('filter', '');
        jQuery('.rde-back-to-top').css('-moz-opacity', '');
        jQuery('.rde-back-to-top').css('-khtml-opacity', '');
        jQuery('.rde-back-to-top').css('opacity', '');
    };

    function BackToTop(minimumHeight, bgImage, imageBottomMargin, imageRightMargin, transparentImage) {
        // back to top component stay in the placeholder 
      
        jQuery('.rde-back-to-top').css('display', 'none');

        if (imageBottomMargin == null || imageRightMargin == null) {
            jQuery('.rde-back-to-top').css('position', 'inherit');
          
        }
        // float according to the margin value 
        else {
            jQuery('.rde-back-to-top').css('bottom', imageBottomMargin);
            jQuery('.rde-back-to-top').css('right', imageRightMargin);
            jQuery('.rde-back-to-top').css('position', 'fixed');
           
        }

        jQuery(".rde-back-to-top").click(function () {
            jQuery('body,html').animate({ scrollTop: 0 }, 500);
            return false;
        });

        jQuery(".rde-back-to-top").on("keypress", function (e) {
            if (e.which == 13) {
                jQuery('body,html').animate({ scrollTop: 0 }, 500);
                return false;
            }
        });

        jQuery(window).scroll(function () {
            if (jQuery(window).scrollTop() > minimumHeight) {
                jQuery('.rde-back-to-top').css('display', 'flex');
               
            }
            else {
                jQuery('.rde-back-to-top').css('display', 'none');
            }
        });


        if (transparentImage == true) {
            setTransparentImage();
            jQuery('.rde-back-to-top').mouseover(function () {
                removeTransparentImage();
            }).mouseout(function () {
                setTransparentImage();
            });
        }
       
    }
    // Initialize the back to top function
    return function initBackToTop(args) {
        return new BackToTop(args.minimumHeight,
                                args.bgImage,
                                args.imageBottomMargin,
                                args.imageRightMargin,
                                args.transparentImage);
    }
});
define('Resideo/Components/Navigation/LandingPageStickyNavigation',['jquery'], function ($) {
    function LandingPageStickyNavigation(scope) {
        setTimeout(function () { 
        if (document.querySelector('.rde-sticky-anchor-nav', scope)) {
            new Promise(function (resolve, reject) {
                //sticky behaviour
                var nav = $('.rde-sticky-anchor-nav .section-navigation', scope);
                var headerHeight = $('header').outerHeight();
                var stripeHeight = $('.life-care-vertical').outerHeight();
                var totalHeight = headerHeight + stripeHeight;
                
                if (nav.length) {
                    var stickyNavTop = nav.offset().top - 152;
                    var stickyNavTopLifecare = nav.offset().top - 215;
                    $(window).on('scroll', function () {
                        if ($(window).scrollTop() >= stickyNavTop) {
                            if ($(window).width() > 991) {
                                nav.css({ position: "fixed", top: headerHeight + "px" });
                                if (nav.closest('.lifecare-content-page').length > 0) {
                                    nav.css({ position: "fixed", top: totalHeight + "px" });
                                }
                            } else {
                                nav.css({ position: "fixed", top: headerHeight + "px" });
                            }
                        } else {
                            nav.css({ position: "relative", top: "0" });
                        }
                        if ($(window).scrollTop() >= stickyNavTopLifecare) {
                            if ($(window).width() > 991) {
                                if (nav.closest('.lifecare-content-page').length > 0) {
                                
                                    nav.css({ position: "fixed", top: totalHeight + "px" });
                                } else {
                                    nav.css({ position: "fixed", top: totalHeight + "px" });
                                }
                            }
                        } else {
                            nav.css({ position: "relative", top: "0" });
                        }

                    });
                }

                $('.rde-sticky-anchor-nav .section-navigation li a', scope).on('click', function () {
                    $('.rde-sticky-anchor-nav .section-navigation li a').removeClass('active');
                    $(this).toggleClass('active');
                });

                var $windowHt = $(window).height() / 2;
                var $landingPageNavigationLinks = $('.score-anchorpoint');

                var itemsOffsets = [];

                $landingPageNavigationLinks.each(function (i, item) {
                    var itemId = "#" + item.id;
                    var itemOffset = $(itemId).offset().top;
                    if (itemOffset) {
                        itemsOffsets.push(itemOffset);
                    }
                });

                //add/remove active class on sticky anchor nav when scrolled to/through
                $(window).on('scroll', function () {
                    if (window.innerWidth < 1199) {
                        var activeItemOrder = $('.rde-sticky-anchor-nav .section-navigation .slick-track li a.active', scope)
                            .closest('.slick-slide')
                            .attr('data-slick-index');
                        var indexNum = parseInt(activeItemOrder);
                        var slider = $('.rde-sticky-anchor-nav .section-navigation .slick-initialized', scope);
                        slider.slick('slickGoTo', indexNum);
                    }

                    var scrollDistance = $(window).scrollTop();
                    $landingPageNavigationLinks.each(function (i, item) {
                        if (item) {
                            var idName = "#" + item.id;
                            if ($(idName).length > 0 && itemsOffsets[i] <= scrollDistance + $windowHt) {
                                $('.rde-sticky-anchor-nav .section-navigation li a.active', scope).removeClass("active");
                                $('.rde-sticky-anchor-nav .section-navigation li a[href="' + idName + '"]', scope).addClass('active');
                            }
                        }
                    });
                });

                //get the number of visible elements
                var liLength = $("li:visible", scope).length;

                //go through the visible elements and add pipe delimiters
                $("li:visible", scope).each(function (i, item) {
                    //don't add a pipe after the last visible element
                    if (i < liLength - 1) {
                        $(item).append('<span>|</span>');
                    }
                });

                if ($(window).width() < 991) {
                    $('.rde-sticky-anchor-nav .section-navigation ul:not(.slick-initialized)', scope).slick({
                        slidesToShow: 1,
                        slidesToScroll: 1,
                        dots: false,
                        arrows: false,
                        infinite: false,
                        variableWidth: true
                    });
                }
                resolve();
            });
            }
        }, 500)
        }
            

    return function init(args) {
        return args.IsEditing ? null : new LandingPageStickyNavigation(args.scope);
    };
});
define('Resideo/Components/Navigation/SitemapSpider',['jquery', 'helpersService'], function ($, helpersService) {
    function SitemapSpider(scope, sitemapRoot) {
        var sitemapContainer = $('.rde-sitemap-spider', scope)[0];

        BuildSitemapRecursive(sitemapContainer, sitemapRoot);

        function BuildSitemapRecursive(container, item) {
            $(container).append('<li role="menuitem"><a href="' + item.Url + '" tabindex="0">' + item.Title + '</a></li>');

            if (item.SubItems && item.SubItems.length > 0) {
                var subLevel = item.Level + 1;
                var classes = 'nav level-' + subLevel;
                var containerId = helpersService.newGUID();
                $(container).append('<ul id="' + containerId + '" class="' + classes + '" role="menubar"></ul>');
                var subContainer = $('#' + containerId, scope)[0];
                $(item.SubItems).each(function(i, subItem) {
                    BuildSitemapRecursive(subContainer, subItem);
                });
            }
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new SitemapSpider(args.scope, args.sitemapRoot);
    }
});
define('Resideo/Components/Notification/EUCookieBanner',["jquery", "underscore", "eucookiebanner"], function ($, _) {

    function bodyModalOpen() {
        $("body").addClass("modal-open");
    }

    function bodyModalClose() {
        $("body").removeClass("modal-open");
    }

    function ifContainsOverlayElement(arr) {
        return _.some(Array.from(arr), function (o) {
            return $(o).hasClass("truste_overlay");
        });
    }

    function EUCookieBanner() {

        //verify in case Cookie Banner modal is already loaded
        if (document.querySelector('body div.truste_overlay')) {
            bodyModalOpen();
        }

        var observer = new MutationObserver(function (mutations) {
            mutations.forEach(function (mutation) {

                if (ifContainsOverlayElement(mutation.removedNodes)) {
                    bodyModalClose();
                }

                if (ifContainsOverlayElement(mutation.addedNodes)) {
                    bodyModalOpen();
                }
            });
        });

        var config = {
            attributes: false,
            childList: true
        };

        observer.observe(document.body, config);
    }

    return function initEUCookieBanner(args) {
        return new EUCookieBanner();
    }
});

define('Resideo/Components/Notification/NewVisitors',['jquery', 'eventManager', "experienceEditorService"], function ($, eventManager, experienceEditorService) {
    function NewVisitors(scope, isIgnore, IsProPageVisitor, IsHomeVisitor, IsEMEASite, IsEMEANewVisitorEnabled) {
        eventManager.subscribe("ComponentModal:Loaded", function (data) {
            if (!experienceEditorService.isEE()) {
                if (!isIgnore) {
                    if (IsProPageVisitor) {
                        if (document.cookie.indexOf('newProVisitor') === -1) {
                            setCookieAndEventFire("newProVisitor");
                        }
                    }
                    else if (IsEMEASite)
                    {
                        if (IsEMEANewVisitorEnabled) {
                            var languageCode = $("html").attr("lang");
                            if (document.cookie.indexOf('newProVisitor' + languageCode) === -1) {
                                setCookieAndEventFire("newProVisitor" + languageCode);
                            }
                        }
                    }
                    else
                        if (document.cookie.indexOf('newVisitor') === -1) {
                            if ((IsHomeVisitor == false && IsEMEASite == false) || IsEMEANewVisitorEnabled) {
                                setCookieAndEventFire("newVisitor");
                            }
                            $('#HOMESEUCookie-Banner').addClass('hidden');
                            $($("body").find(".modal[role='dialog']")).on('hide.bs.modal', function () {
                                $('#HOMESEUCookie-Banner').removeClass('hidden');
                            });
                        }

                }
            }
        });
    }

    function setCookieAndEventFire(cookieName) {

        if (document.cookie.indexOf(cookieName) === -1) {
            //not exists, add and show modal
            var d = new Date();
            var c = new Date(d.getFullYear() + 10, d.getMonth(), d.getDate());
            document.cookie = cookieName + "=false;path=/; expires=" + c.toGMTString();
            eventManager.trigger("NewVisitor:ShowModal");
        }
    }


    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new NewVisitors(args.scope, args.IsIgnore, args.IsProPageVisitor, args.IsHomeVisitor, args.IsEMEASite, args.IsEMEANewVisitorEnabled);
    }
});

define('text!Resideo/Components/Order/Templates/OrderDetails.html',[],function () { return '<% if (!order) { %>\r\n<div class="score-style-box rde-message rde-error">\r\n    <div class="score-column2 wide-left">\r\n        <div class="score-left">\r\n            <p class="rde-warning">\r\n                <%- labels.ErrorText %>\r\n            </p>\r\n        </div>\r\n        <div class="score-right">\r\n        </div>\r\n    </div>\r\n</div>\r\n<% } else { %>\r\n<div class="score-document-header-with-subtitle">\r\n    <div class="score-style-box margin-0">\r\n        <% if (!isOrderConfirmation) { %>\r\n        <a href="<%- labels.LookupAnotherLink %>" class="score-button rde-arrow rde-arrow-left blue"><%- labels.LookupAnotherLabel %></a>\r\n        <% } %>\r\n        <a href="<%- printFriendlyViewUrl %>" target="_blank" class="print-link"><%- labels.PrintFriendlyView %></a>\r\n    </div>\r\n    <h1>\r\n        <%- labels.Title %>\r\n        <% if (isOrderConfirmation) { %>\r\n        <small><%- labels.OrderText %> <strong><%- order.ContactInfo.Email %></strong>.</small>\r\n        <% }%>\r\n    </h1>\r\n    <div class="score-column2 equal rde-order-flex">\r\n        <div class="score-left">\r\n            <div class="score-content-spot">\r\n                <table>\r\n                    <tbody><tr>\r\n                        <td><p><strong><%- labels.OrderNumberText %></strong></p></td>\r\n                        <td><p><%- order.OrderId %></p></td>\r\n                    </tr>\r\n                    <% if (!isOrderConfirmation) { %>\r\n                    <tr>\r\n                        <td><p><strong><%- labels.OrderDateText %></strong></p></td>\r\n                        <td><p><%- values.OrderDateFormatted %></p></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td><p><strong><%- labels.OrderStatusText %></strong></p></td>\r\n                        <td><p><%- order.OrderState %></p></td>\r\n                    </tr>\r\n                    <% } %>\r\n                    </tbody></table>\r\n            </div>\r\n        </div>\r\n        <div class="score-right">\r\n            <% if (!isOrderConfirmation) { %>\r\n            <% if (values.IsReturnPossible) { %>\r\n            <a class="score-button rde-secondary" href="<%- values.OrderReturnSessionUrl %>"><%- labels.ReturnItemsLabel %></a>\r\n            <% } %>\r\n            <% if (!values.IsReturnPossible) { %>\r\n            <div class="score-button-menu rde-tooltip-wrapper">\r\n                <%- labels.NoReturnItemsLabel %>\r\n                <button type="button" class="score-button rde-tooltip" data-toggle="dropdown" aria-expanded="false" tabindex="0">\r\n                    <span>?</span>\r\n                    <span class="caret"></span>\r\n                    <span class="sr-only">Toggle</span>\r\n                </button>\r\n                <ul class="dropdown-menu" role="menu" aria-hidden="false" aria-live="polite">\r\n                    <%= labels.NoReturnItemsTooltip %>\r\n                </ul>\r\n            </div>\r\n            <% } %>\r\n            <% } %>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="score-column1 rde-info-box-wrapper">\r\n    <div class="score-center">\r\n        <div class="score-section-hero rde-info-box">\r\n            <h2><%- labels.ContactInfo %></h2>\r\n            <div class="score-hero-body">\r\n                <p>\r\n                    <%- order.ContactInfo.Email %>\r\n                    <br>\r\n                    <%- order.ContactInfo.PhoneNumber %>\r\n                </p>\r\n            </div>\r\n        </div>\r\n        <div class="score-section-hero rde-info-box">\r\n            <h2><%- labels.ShippingAddress %></h2>\r\n            <div class="score-hero-body">\r\n                <p>\r\n                    <%- order.ShippingAddress.FirstName %> <%- order.ShippingAddress.LastName %>\r\n                    <br>\r\n                    <%- order.ShippingAddress.Line1 %> <%- order.ShippingAddress.Line2 %> <%- order.ShippingAddress.Line3 %>\r\n                    <br>\r\n                    <%- order.ShippingAddress.City %>, <%- order.ShippingAddress.CountrySubdivision %> <%- order.ShippingAddress.PostalCode %>\r\n                </p>\r\n            </div>\r\n        </div>\r\n        <div class="score-section-hero rde-info-box">\r\n            <h2><%- labels.ShippingMethod %></h2>\r\n            <div class="score-hero-body">\r\n                <p>\r\n                    <%- order.ShippingMethod.Description %>\r\n                </p>\r\n            </div>\r\n        </div>\r\n        <div class="score-section-hero rde-info-box">\r\n            <h2><%- labels.BillingAddress %></h2>\r\n            <div class="score-hero-body">\r\n                <p>\r\n                    <%- order.BillingAddress.FirstName %> <%- order.BillingAddress.LastName %>\r\n                    <br>\r\n                    <%- order.BillingAddress.Line1 %> <%- order.BillingAddress.Line2 %> <%- order.BillingAddress.Line3 %>\r\n                    <br>\r\n                    <%- order.BillingAddress.City %>, <%- order.BillingAddress.CountrySubdivision %> <%- order.BillingAddress.PostalCode %>\r\n                </p>\r\n            </div>\r\n        </div>\r\n        <div class="score-section-hero rde-info-box">\r\n            <h2><%- labels.PaymentMethod %></h2>\r\n            <div class="score-hero-body">\r\n                <p>\r\n                    <% if (order.PaymentMethod) { %>\r\n                    <% if (order.PaymentMethod.CardType != "payPal") { %>\r\n                    <% if (order.PaymentMethod.Brand == "Discover") { %>\r\n                    <%- order.PaymentMethod.Brand %> <img src="<%- labels.DiscoverMethodIcon %>" alt="Discover" width="30" height="18px" />\r\n                    <% } else if (order.PaymentMethod.Brand == "MasterCard") { %>\r\n                    <%- order.PaymentMethod.Brand %> <img src="<%- labels.MastercardMethodIcon %>" alt="Mastercard" width="30" height="18px" />\r\n                    <% } else if (order.PaymentMethod.Brand == "AmericanExpress") { %>\r\n                    <%- order.PaymentMethod.Brand %> <img src="<%- labels.AmericanExpressMethodIcon %>" alt="American Express" width="30" height="18px" />\r\n                    <% } else { %>\r\n                    <%- order.PaymentMethod.Brand %> <img src="<%- labels.VisaMethodIcon %>" alt="Visa" width="30" height="18px" />\r\n                    <% } %>\r\n                    <br>\r\n                    <%- order.PaymentMethod.CardNumber %>\r\n                    <% } else { %>\r\n                    <%- order.PaymentMethod.DisplayName %> <img src="<%- labels.PayPalMethodIcon %>" alt="PayPal" width="30" height="18px" />\r\n                    <% } %>\r\n                    <% } %>\r\n                </p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="score-column1 rde-shopping-cart-items">\r\n    <div class="score-center shopping-cart">\r\n        <% _.each( order.Items , function( item ){ %>\r\n        <div class="score-column2 wide-right rde-shopping-cart-row">\r\n            <div class="score-left">\r\n                <div class="score-column2 equal">\r\n                    <div class="score-left">\r\n                        <a href="<%- item.Url %>">\r\n                            <img src="<%- item.ImageUrl %>" class="score-image (img-responsive) rde-product-image" alt="<%- item.Name %>">\r\n                        </a>\r\n                    </div>\r\n                    <div class="score-right">\r\n                        <img src="<%- item.BrandImageUrl %>" class="score-image rde-product-logo" alt="brand logo">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="score-right">\r\n                <div class="score-column2 equal">\r\n                    <div class="score-left">\r\n                        <div class="score-column2 equal">\r\n                            <div class="score-left">\r\n                                <div class="score-content-spot rde-product-info">\r\n                                    <p>\r\n                                        <strong><a href="<%- item.Url %>"><%- item.SkuTitle %></a></strong>\r\n                                        <span><%- item.SKU %></span>\r\n                                        <%- item.Description %>\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                            <div class="score-right">\r\n                                <div class="score-content-spot rde-stock">\r\n                                    <p>\r\n                                        <strong><%- labels.OrderItemStatusText %></strong>\r\n                                        <span><%- item.OrderItemStatus %></span>\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="score-right">\r\n                        <div class="score-column2 equal">\r\n                            <div class="score-left">\r\n                                <div class="score-content-spot rde-product-price">\r\n                                    <strong><%- labels.OrderItemQuantityText %></strong>\r\n                                    <p>x<%- item.Quantity %></p>\r\n                                </div>\r\n                            </div>\r\n                            <div class="score-right">\r\n                                <div class="score-content-spot rde-product-price">\r\n                                    <div class="score-style-box">\r\n                                        <% if(item.ListedPrice != item.SalePrice) { %>\r\n                                        <span class="strike">\r\n                                            <span aria-hidden="true"><%- item.FormattedListPriceWithQuantity %></span>\r\n                                            <span class="rde-screen-reader-only"><%- labels.PriceStrickenLabel %> <%- item.FormattedListPriceWithQuantity %></span>\r\n                                        </span>\r\n                                        <% } %>\r\n                                        <div>\r\n                                            <p aria-hidden="true"><%- item.FormattedSalePriceWithQuantity %></p>\r\n                                            <div class="rde-screen-reader-only"><%- labels.PriceLabel %> <%- item.FormattedSalePriceWithQuantity %></div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <% if (!isOrderConfirmation) { %>\r\n        <% _.each( returns.Items , function( returnLineItem ){ %>\r\n        <% if (returnLineItem.ItemId == item.ItemId) { %>\r\n        <% _.each( returnLineItem.Items , function( returnItem ){ %>\r\n        <div class="rde-candy-rack" id="<%- item.SKU %>">\r\n            <div class="score-column2 wide-right rde-shopping-cart-row rde-candy-rack-row" sku="<%- item.SKU %>">\r\n                <div class="score-left">\r\n                    <div class="score-column1">\r\n                        <div class="score-center">\r\n                            <a href="<%- item.Url %>"\r\n                               tabindex="0">\r\n                                <img alt="<%- item.Name %>"\r\n                                     class="score-image rde-product-image" src="<%- item.ImageUrl %>">\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="score-right">\r\n                    <div class="score-column2 equal">\r\n                        <div class="score-left">\r\n                            <div class="score-column2 equal">\r\n                                <div class="score-left">\r\n                                    <div class="score-content-spot rde-rma-number">\r\n                                        <table>\r\n                                            <tbody>\r\n                                                <tr>\r\n                                                    <td><strong><%- labels.ReturnItemIdentifierLabel %></strong></td>\r\n                                                </tr>\r\n                                                <tr>\r\n                                                    <td><%- returnItem.ReturnId %></td>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </div>\r\n                                    <div class="score-button-menu rde-tooltip-wrapper">\r\n                                        <!-- standard tooltip HTML -->\r\n                                        <button type="button" class="score-button rde-tooltip" data-toggle="dropdown" aria-expanded="false" tabindex="0">\r\n                                            <span>?</span>\r\n                                            <span class="caret"></span>\r\n                                            <span class="sr-only">Toggle</span>\r\n                                        </button>\r\n                                        <ul class="dropdown-menu" role="menu" aria-hidden="false" aria-live="polite">\r\n                                            <%- labels.ReturnItemIdentifierTooltip %>\r\n                                        </ul>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="score-right">\r\n                                    <div class="score-content-spot rde-return-qty">\r\n                                        <table>\r\n                                            <tbody>\r\n                                                <tr>\r\n                                                    <td><strong><%- labels.ReturnItemQuantityLabel %></strong></td>\r\n                                                </tr>\r\n                                                <tr>\r\n                                                    <td><span>x<%- returnItem.ReturnItemQuantity %></span></td>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="score-right">\r\n                            <div class="score-column2 equal">\r\n                                <div class="score-left">\r\n                                    <div class="score-content-spot rde-return-status">\r\n                                        <table>\r\n                                            <tbody>\r\n                                                <tr>\r\n                                                    <td><strong><%- labels.ReturnItemStatusLabel %></strong></td>\r\n                                                </tr>\r\n                                                <tr>\r\n                                                    <td>\r\n                                                        <% if (returnItem.IsCompleted) { %>\r\n                                                        <span><%- labels.ReturnItemStatusCompletedText %></span>\r\n                                                        <% } else { %>\r\n                                                        <span><%- labels.ReturnItemStatusInProgressText %></span>\r\n                                                        <% } %>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="score-right">\r\n                                    <div class="score-content-spot rde-return-total">\r\n                                        <table>\r\n                                            <tbody>\r\n                                                <tr>\r\n                                                    <td><%- labels.ReturnItemRefundLabel %></td>\r\n                                                </tr>\r\n                                                <tr>\r\n                                                    <td><strong><%- returnItem.ReturnItemFormattedPrice %></strong></td>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <% }); %>\r\n        <% } %>\r\n        <% }); %>\r\n        <% } %>\r\n\r\n        <% if (isOrderConfirmation && !(_.isNull(item.OrderItemUnlockCodes)) && item.OrderItemUnlockCodes.length > 0) { %>\r\n            <% _.each( item.OrderItemUnlockCodes, function( unlockCode, index ){ %>\r\n                <div class="rde-unlock-code" aria-label="<%- item.SkuTitle %> unlock code <%- index+1 %>">\r\n                    <p style="z-index: 1;"><%- labels.UnlockCodeLabel %> <%- unlockCode %></p>\r\n                    <p>\r\n                        <%= labels.UnlockCodeText %>\r\n                    </p>\r\n                </div>\r\n            <% }); %>\r\n        <% } %>\r\n\r\n        <div class="score-content-spot rde-product-separator">\r\n        </div>\r\n        <% }); %>\r\n\r\n        <div class="score-column2 equal rde-order-details-total-row">\r\n            <div class="score-left">\r\n            </div>\r\n            <div class="score-right">\r\n                <div class="score-column2 wide-left equal rde-cart-summary">\r\n                    <div class="score-left">\r\n                        <div class="score-content-spot rde-stock rde-stock-order-details">\r\n                            <p>\r\n                                <%- labels.DiscountTitle %>\r\n                                <br>\r\n                                <%- labels.ShippingTitle %>\r\n                                <br>\r\n                                <%- labels.TaxTitle %>\r\n                                <br>\r\n                                <strong><%- labels.TotalTitle %></strong>\r\n                                <% if(!isOrderConfirmation && returns.RefundTotal > 0) { %>\r\n                                <br>\r\n                                <strong><%- labels.RefundTotalTitle %></strong>\r\n                                <% } %>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    <div class="score-right">\r\n                        <div class="score-content-spot rde-product-price rde-product-price-order-details">\r\n                            <p>\r\n                                <% if(order.DiscountValue > 0) { %>\r\n                                -<%- order.Discount %>\r\n                                <% } else { %>\r\n                                <%- order.Discount %>\r\n                                <% } %>\r\n                                <br>\r\n                                <%- order.Shipping %>\r\n                                <br>\r\n                                <%- order.Tax %>\r\n                                <br>\r\n                                <strong><%- order.Total %></strong>\r\n                                <% if(!isOrderConfirmation && returns.RefundTotal > 0) { %>\r\n                                <br>\r\n                                <strong><%- returns.FormattedRefundTotal %></strong>\r\n                                <% } %>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n\r\n<% } %>';});

define('Resideo/Components/Order/OrderDetails',['jquery', 'underscore', 'text!Resideo/Components/Order/Templates/OrderDetails.html', 'helpersService'],

    function ($, _, orderDetailsTemplate, helpersService) {

        function OrderDetails(scope, json, returns, labels, values, isOrderConfirmation, payPalPaymentType) {
            var orderDetailsTemplateCompiled , printFriendlyViewUrl;
            new Promise(function (resolve, reject) {
                orderDetailsTemplateCompiled = _.template(orderDetailsTemplate)
                printFriendlyViewUrl = helpersService.getPrintFriendlyUrl(window.location);

                renderDetails(json);
                resolve();
            });

            function renderDetails(json) {
                $(scope).html(orderDetailsTemplateCompiled({ order: json, returns: returns, labels: labels, values: values, payPalPaymentType: payPalPaymentType, isOrderConfirmation: isOrderConfirmation, printFriendlyViewUrl: printFriendlyViewUrl }));
                var event = document.createEvent('Event');
                event.initEvent('drRendered', true, true);
                window.dispatchEvent(event);
            }
        }

        return function init(args) {
            return args.IsExperienceEditorEditing ? null : new OrderDetails(args.scope, args.order, args.returns, args.labels, args.values, args.isOrderConfirmation, args.payPalPaymentType);
        }
    }
);
define('Resideo/Components/Order/OrderLookup',['jquery', 'eventManager', 'componentForms','constants', 'endpoints', 'storageService', 'helpersService', 'jqueryValidate', 'jqueryValidateUnobtrusive', 'jqueryUnobtrusiveAjax'],
    function ($, eventManager, componentForms, constants, endpoints, storage, helpersService) {

    function OrderLookup(scope, urls, labels, messages, language) {

        var $email = $("#email", scope);
        var $input = $("#input-field", scope);
        var $inputLabel = $("#input-label", scope);
        var $errorMessage = $(".rde-error", scope);

        var orderIdRbValue = "order-number";
        var creditCardNumberRbValue = "credit-card-number";

        var orderNumberValidationRules = {
            required: true,
            number: true,
            minlength: 10,
            maxlength: 64,
            messages: {
                required: messages.OrderNumberRequiredMessage,
                number: messages.WrongOrderNumberMessage,
                maxlength: messages.WrongOrderNumberMessage
            }
        };

        var emailAddressValidationRules = {
            required: true,
            maxlength: 250,
            messages: {
                required: messages.EmailRequiredMessage,
                number: messages.WrongEmailMessage,
                maxlength: messages.WrongEmailMessage
            }
        };

        var creditCardNumberValidationRules = {
            required: true,
            number: true,
            minlength: 4,
            maxlength: 4,
            messages: {
                required: messages.CreditCardNumberRequiredMessage,
                number: messages.WrongCreditCardNumberMessage,
                maxlength: messages.WrongCreditCardNumberMessage
            }
        };

        if (document.querySelector('.order-lookup .rde-primary')) {
            $(scope).on('click', '.rde-primary', function (e) {
                e.preventDefault();
                $errorMessage.hide();
                helpersService.showLoader(this);

                if ($email.val().length === 0 || $input.val().length === 0) {
                    return;
                }

                var form = $(this).closest('form');
                var validator = form.data('validator');

                form.validate();
                var formValid = form.valid();

                if (formValid && validateReCaptcha()) {
                    $.ajax({
                        url: getOrderLookupEndpoint() + "?sc_lang=" + language + "&token=" + storage.loadLocalECommerceToken(),
                        type: "POST",
                        data: { email: $email.val(), input: $input.val() }
                    })
                        .done(function (data) {
                            eventManager.trigger(constants.OrderLookupSubmitted, $input.val());
                            if (data.Item2 && data.Item2.length > 0) {
                                if (data.Item2.includes("service_unavailable")) {
                                    $(".rde-warning").html(messages.ServiceUnavailableErrorMessage);
                                } else {
                                    $(".rde-warning").html(messages.ErrorMessage);
                                }
                                helpersService.hideLoader();
                                $errorMessage.show();
                                $('html, body').animate({
                                    scrollTop: $errorMessage.offset().top - $("header")[0].offsetHeight
                                }, 500);
                            }
                            else if (data.Item1.Multiple === true) {
                                location.href = urls.OrdersPageUrl + "?guid=" + data.Item1.SessionId;
                            } else {
                                location.href = urls.OrderDetailsPageUrl + "?guid=" + data.Item1.SessionId;
                            }
                        })
                        .fail(function (data) {
                            helpersService.hideLoader();
                            $(".rde-warning").html(messages.ErrorMessage);
                            $errorMessage.show();
                            $('html, body').animate({
                                scrollTop: $errorMessage.offset().top - $("header")[0].offsetHeight
                            }, 500);
                        });
                } else {
                    helpersService.hideLoader();
                    var errorList = validator.errorList;
                    componentForms.trackFormSubmitError(errorList, form.attr("name"));
                }
            });
        }
        
        if (document.querySelector('.order-lookup input')) {
            $(scope).on('keyup', 'input', function (e) {
                e.preventDefault();

                $errorMessage.hide();

                validateButton($(this));
            });
        
            $(scope).on('blur', 'input', function (e) {
                e.preventDefault();

                $(this).valid();
            });
        }

        updateInputField(orderIdRbValue);

        if (document.querySelector(".order-lookup input[name='number']")) {
            $("input[name='number']").change(function() {
                var selected_value = getCheckedRadioButton().val();
                updateInputField(selected_value);

                validateButton($input);
            });
        }

        if (document.querySelector(".order-lookup input[name='hidden-recaptcha']")) {
            $("input[name='hidden-recaptcha']").change(function () {
                validateButton($input);
            });
        }

        $email.rules("add", emailAddressValidationRules);

        if (document.querySelector(".order-lookup #input-field")) {
            $input.on("input", function () {
                if (!this.checkValidity())
                    this.value = this.value.slice(0, -1);
            });
        }

        function updateInputField(selected_value) {
            if (selected_value === orderIdRbValue) {
                setLabelAndValidation(labels.OrderNumberLabel, orderNumberValidationRules);
                $input.prop('pattern', '[0-9]{0,64}')
                $input.val('');
            }
            else if (selected_value === creditCardNumberRbValue) {
                setLabelAndValidation(labels.CreditCardNumberLabel, creditCardNumberValidationRules);
                $input.prop('pattern', '[0-9]{0,4}')
                $input.val('');
            }
        }

        function validateButton(element) {
            if ($email.val().length > 0 && $input.val().length > 0 && $(element).closest('form').valid() && validateReCaptcha()) {
                $(".rde-primary", scope).removeClass("disabled");
            }
            else {
                $(".rde-primary", scope).addClass("disabled");
            }
        }

        function setLabelAndValidation(label, validationRules) {
            $inputLabel.text(label + "*");
            //validation
            $input.rules("remove");
            $input.rules("add", validationRules);
        }

        function getOrderLookupEndpoint() {
            var selected_value = getCheckedRadioButton().val();
            if (selected_value === orderIdRbValue)
                return endpoints.GetOrderByIdEndpoint;
            else if (selected_value === creditCardNumberRbValue)
                return endpoints.GetOrderByCreditCardNumberEndpoint;
        }


        function getCheckedRadioButton() {
            return $("input[name='number']:checked");
        }

        function validateReCaptcha() {
            // reCaptcha is not rendered on the page - check always valid
            if (typeof grecaptcha === "undefined") {
                return true;
            }

            var hiddenToken = $('#hidden-recaptcha').val();
            var gRecaptchaToken = grecaptcha.getResponse();

            if (hiddenToken && gRecaptchaToken && hiddenToken == gRecaptchaToken) {
                return true;
            }

            return false;
        }

    }

    return function init(args) {
        return args.IsExperienceEditorEditing
            ? null
            : new OrderLookup(args.scope, args.urls, args.labels, args.messages, args.language);
    };
});
define('Resideo/Components/Order/OrdersList',['jquery', 'endpoints'], function ($, endpoints) {
    function OrdersList(scope, sessionId, urls) {

        if (document.querySelector('.orders-list .order-title-date')) {
            $(scope).on('click', '.order-title-date', function (e) {
                e.preventDefault();
                if ($(this).hasClass("dropdown")) {
                    $(this).removeClass("dropdown").addClass("dropup");
                    sort(1);
                } else {
                    $(this).removeClass("dropup").addClass("dropdown");
                    sort(-1);
                }
            });
        }

        if (document.querySelector('.orders-list .order-details-number')) {
            $(scope).on('click', '.order-details-number', function (e) {
                e.preventDefault();

                $.ajax({
                        url: endpoints.GetOrderBySessionAndOrderIdEndpoint,
                        type: "POST",
                        data: { sessionId: sessionId, orderId: $(this).data("oid") }
                    })
                    .done(function (data) {
                        location.href = urls.OrderDetailsPageUrl + "?guid=" + data.Item1.SessionId;
                    })
                    .fail(function (data) {
                        //helpersService.hideLoader();
                        //$errorMessage.show();
                    });
            });
        }

        function sort(sign) {
            var items = $('.order-listing-table div.order-listing-details-row');

            items.sort(function (a, b) {
                return ($(a).data("sid") - $(b).data("sid")) * sign;
            });

            items.appendTo(".order-listing-table");
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new OrdersList(args.scope, args.sessionId, args.urls);
    }
});
define('Resideo/Components/Page/PageMessages',['jquery', 'eventManager', 'constants', 'PersonalizationModal'], function ($, eventManager, constants, PersonalizationModal) {
   
    function PageMessages(scope, isProPage, language,sitename) {      
        if (document.querySelector('.rde-page-messages', scope)) {
            new Promise(function (resolve, reject) {

                //check if is desktop or mobile and select the approprate js-[]-idle element
                var view = window.innerWidth >= 768 ? "desktop" : "mobile";
                console.log('.js-' + view + '-idle');

                //js-desktop-idle and js-mobile-idle is from PageMessages.cshtml
                if (document.querySelector('.js-' + view + '-idle', scope)) {

                    //reset every time there is a user interaction - see list of dom events
                    var resetTimer = function () {
                        clearTimeout(timeOut);
                        timeOut = setTimeout(triggerMessages, time * 1000)
                    }

                    var time = parseInt($('.js-' + view + '-idle').data('time'));
                    if (time == NaN)
                        return;

                    var timeOut;
                    resetTimer();

                    // DOM Events
                    var domEvents = ["load", "mousemove", "mousedown", "touchstart", "click", "keydown"];
                    domEvents.forEach(function (value, index) { document.addEventListener(value, resetTimer); });

                    //user is not active, then trigger the messages configured in the fields "On Visitor is Idle in Mobile" and "On Desktop is Idle in Mobile"
                    function triggerMessages() {
                        domEvents.forEach(function (value, index) { document.removeEventListener(value, resetTimer); });
                        $($('.js-' + view + '-idle').data('messages').split(',')).each(function (i, item) {
                            eventManager.trigger(item);
                            eventManager.trigger(constants.TimeoutAlert);
                        });
                    }
                }

                if (document.querySelector('.js-personlization-model', scope)) {
                    $($('.js-personlization-model').data('messages').split(',')).each(function (i, item) {
                        if (item == "Display Preset Modal 1") {                           
                            if (sitename == 'Resideo' && isProPage == false) {
                                setCookie("ResideoPersonalizationModel");
                            }
                            else if (sitename == 'HoneywellHome') {
                                setCookie("HWHPersonalizationModel");
                            }
                            else if (sitename == 'First Alert') {
                                setCookie("FAPersonalizationModel");
                            }
                        }
                         
                    });
                }
                function setCookie(cookieName) {
                    if (document.cookie.indexOf(cookieName) === -1) {                     
                        var d = new Date();
                        var c = new Date(d.getFullYear() + 10, d.getMonth(), d.getDate());
                        document.cookie = cookieName + "=false;path=/; expires=" + c.toGMTString(); 
                        eventManager.trigger("DisplayPresetModal1", {                           
                            lang: language,
                            sitename: sitename
                        });
                    }
                }
                resolve();
            });
            
        }
    }
   
    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new PageMessages(args.scope, args.isProPage, args.language,args.sitename);
    }
});

define('text!Resideo/Templates/PartnerCard.html',[],function () { return '<% _.each( partnerCards , function( partnerCard ){ %>\r\n    <div role="button" class="score-highlight" data-partner-card-item-id="<%- partnerCard.PartnerCardItemId %>" tabindex="0">\r\n        <div class="score-highlight-header">\r\n        </div>\r\n        <div class="image-wrapper">\r\n            <img src="<%- partnerCard.PartnerLogoUrl %>" alt="<%- partnerCard.PartnerName %>">\r\n        </div>\r\n        <div class="caption">\r\n            <div class="heading-wrapper">\r\n                <h2><%- partnerCard.PartnerName %></h2>\r\n            </div>\r\n            <div class="score-highlight-body">\r\n                <p><%- partnerCard.PartnerDescription %></p>\r\n            </div>\r\n            <div class="score-call-to-action">\r\n                <div  class="score-button" data-toggle="modal" data-target="#compatibleProductsModal"><span><%- partnerCard.PartnerName  %></span></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n<% }); %>';});


define('text!Resideo/Templates/PartnerCardModalProducts.html',[],function () { return '<div class="score-left">\r\n    <% _.each( partnerCardModalProductsLeft , function( productLeft ){ %>\r\n        <a class="score-button rde-link" href="<%- productLeft.ProductPageUrl %>"><%- productLeft.ProductName %></a>\r\n    <% }); %>\r\n</div>\r\n<div class="score-right">\r\n    <% _.each( partnerCardModalProductsRight , function( productRight ){ %>\r\n        <a class="score-button rde-link" href="<%- productRight.ProductPageUrl %>"><%- productRight.ProductName %></a>\r\n    <% }); %>\r\n</div>';});

define('Resideo/Components/PartnerCard/PartnerCardListing',['jquery', 'underscore', "text!Resideo/Templates/PartnerCard.html", "text!Resideo/Templates/PartnerCardModalProducts.html"], function ($, _, template, modalProductsTemplate) {
    function PartnerCardListing(scope, partnerCardsList, datasourceId) {

        function showPartnerCards(isViewMore) {
            if (partnerCardsList) {
                var partnerCardsListTemp = partnerCardsList;
                //check if there are more than 12 partner cards. If not - just show them all
                if (partnerCardsListTemp.length > 12) {
                    //take first or second set of 12 partner cards depending on isViewMore indicator
                    partnerCardsListTemp = isViewMore ? _.first(_.rest(partnerCardsList, 12), 12) : _.first(partnerCardsList, 12);
                }

                if (isViewMore) {
                    //if it is additional load, add partner cards to the .rde-partner-card-wrapper div after last partner card/score-highlight
                    $(".rde-partner-card-wrapper .score-highlight", scope).last().after(_.template(template)({ partnerCards: partnerCardsListTemp }));
                } else {
                    //if it is initial load, add partner cards to the .rde-partner-card-wrapper div but before links
                    $(".rde-partner-card-wrapper", scope).prepend(_.template(template)({ partnerCards: partnerCardsListTemp }));
                }

                if (typeof initLazyLoading === "function") {
                    initLazyLoading();
                }
            }
        }

        new Promise(function (resolve, reject) {
            //show initial set of partner cards
            showPartnerCards(false);
            resolve();
        });

        if (document.querySelector(".rde-view-more", scope)) {
            $(scope).on("click", ".rde-view-more", scope, function (e) {
                e.preventDefault();
                //show additional set of partner cards after user clicks view more
                showPartnerCards(true);

                //hide view more button and show view all smart partners button
                $(this).hide();
                $(".rde-view-all-smart-partners", scope).show();
            });
        }
  $(document).on("keypress", ".score-highlight", scope, function (e) {
	  if (e.which == 13){
        $(this).click();
    }
  });
        //if (document.querySelector(".score-highlight .score-button[data-toggle='modal']", scope)) {
            //open modal
            $(document).on("click", ".score-highlight", scope, function (e) {
                //e.preventDefault();

                var partnerCardItemId = $(this).data("partner-card-item-id");

                if (partnerCardItemId) {
                    //get appropriate partner card based on PartnerCardItemId
                    var partnerCard = _.find(partnerCardsList, function (card) { return card.PartnerCardItemId === partnerCardItemId; });

                    if (partnerCard) {
                        var $currentModal = $("#compatible_products_modal_" + datasourceId);
                        $currentModal.find("#myModalLabel", scope).text(partnerCard.ModalTitle);
                        $currentModal.find("img.score-image", scope).attr("src", partnerCard.PartnerLogoUrl);
                        $currentModal.find("img.score-image", scope).show();
                        //get list of products for left and right columns
                        var partnerCardModalProductsLeft = _.filter(partnerCard.ListOfProducts, function (el, index) { return index % 2 === 0; });
                        var partnerCardModalProductsRight = _.filter(partnerCard.ListOfProducts, function (el, index) { return index % 2 === 1; });
                        var modalProductsTemplateTemp = _.template(modalProductsTemplate)({
                            partnerCardModalProductsLeft: partnerCardModalProductsLeft,
                            partnerCardModalProductsRight: partnerCardModalProductsRight
                        });
                        $currentModal.find(".rde-modal-partner-card-products", scope).html(modalProductsTemplateTemp);

                        var $partnerCardCta = $currentModal.find(".rde-modal-partner-card-cta", scope);
                        if (partnerCard.LearnMorePageUrl) {
                            $partnerCardCta.show();
                            $partnerCardCta.text(partnerCard.LearnMoreLabel);
                            $partnerCardCta.attr("href", partnerCard.LearnMorePageUrl);
                        } else {
                            $partnerCardCta.hide();
                        }

                        $currentModal.modal("show");

                        if (typeof loadImage === "function") {
                            loadImage($currentModal.find("img.score-image", scope)[0], "#");
                        }
                    }
                }
            });
      //  }
    }

    return function init(args) {
        return args.IsEditing ? null : new PartnerCardListing(args.scope, args.PartnerCardsList, args.DatasourceId);
    };
});
define('Resideo/Components/Products/AddToCartButton',['jquery', 'eventManager', 'constants', 'cartService'], function ($, eventManager, constants, cartService) {
    function AddToCartButton(scope, addToCartEndpoint, labels) {
        if (document.querySelector('.btn', scope)) {
            new Promise(function (resolve, reject) {
                var button = $(".btn", scope);

                var isPreorder = $(scope).closest(".rde-product-highlight").data("Preorder");

                $(button).html(isPreorder ? labels.PreorderLabel : labels.AddToCartLabel);

                $(button).click(function (e) {
                    e.preventDefault();
                    var currentSku = $(this).closest(".rde-product-highlight").data("Sku");

                    cartService.addToCart(currentSku)
                        .done(function() {
                            $(button).html(labels.AddedToCartLabel);
                            $(button).addClass("disabled");
                            $(button).off('click');
                        });
                });
                resolve();
            });
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing
            ? null
            : new AddToCartButton(args.scope, args.addToCartEndpoint, args.labels);
    };
});
define('Resideo/Components/Products/ProductHighlight',['jquery', 'productService', 'logService'], function ($, productService, logService) {

    function ProductHighlight(scope, priceEndpoint, sku, isPreorder) {
        $(".rde-product-highlight", scope).data("Sku", sku);
        $(".rde-product-highlight", scope).data("Preorder", isPreorder);

        var component = $(".price", scope);
        productService.getPrice(sku)
            .then(function (priceData) {
                var item = priceData.Item1;
                if (item) {
                    if (item.ListedPrice === item.SalePrice) {
                        component.html(item.ListedPrice);
                    } else {
                        component.html('<i>' + item.ListedPrice + '</i>' + item.SalePrice);
                    }
                } else {
                    // error
                    if (priceData.Item2 && priceData.Item2.Errors) {
                        logService.error(priceData.Item2.Errors[0]);
                    } else {
                        logService.error('SKU ' + sku + ' does not exist');
                    }
                }
            });
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new ProductHighlight(args.scope, args.priceEndpoint, args.sku, args.isPreorder);
    };
});
define('Resideo/Components/Promotions/CurrentDeals',['jquery', 'productService', 'imagesLoaded', 'logService'], function ($, productService, imagesLoaded, logService) {
    function CurrentDeals(scope) {
        if (document.querySelector('.rde-current-deals .score-highlight', scope)) {
            new Promise(function (resolve, reject) {
                imagesLoaded($(scope), function () {
                    $('.score-highlight', scope).matchHeight();
                });
                resolve();
            });
        }
        if (document.querySelector('.rde-current-deals', scope)) {
            //if the current deals div is display none then hide closest score stripe div
            if (!$(scope).is(':visible')) {
                if ($(scope).closest(".score-stripe").length === 1) {
                    $(scope).closest(".score-stripe").hide();
                } 
            }
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new CurrentDeals(args.scope);
    };
});

define('text!Resideo/Components/Quizzes/Templates/QuizAnswer.html',[],function () { return '<div class="score-highlight">\r\n    <div class="score-highlight-header"></div>\r\n    <div class="image-wrapper">\r\n        <img src="<%- answer.AnswerImage %>" alt="<%- answer.AnswerText %>">\r\n    </div>\r\n    <div class="caption">\r\n        <div class="heading-wrapper">\r\n            <h2><%- answer.AnswerText %></h2>\r\n        </div>\r\n        <div class="score-highlight-body"></div>\r\n        <div class="score-call-to-action">\r\n            <a href="#" class="score-button rde-clickable-area">Clickable Area</a>\r\n        </div>\r\n    </div>\r\n</div>';});

define('Resideo/Components/Quizzes/Quiz',['jquery', 'eventManager', 'constants', 'logService', 'text!Resideo/Components/Quizzes/Templates/QuizAnswer.html'], function ($, eventManager, constants, logService, answerTemplate) {
    function Quiz(scope, language, initialQuestionId, quizId, category) {
        var answerTemplateCompiled;
        var homeType = "";

        new Promise(function (resolve, reject) {
            getQuestion(initialQuestionId, null);

            answerTemplateCompiled = _.template(answerTemplate);
            resolve();
        });
        
        eventManager.subscribe(constants.RestartQuiz, function () {

            $.ajax({
                url: "/rde/restartquiz?sc_lang=" + language + "&questionId=" + initialQuestionId + "&quizId=" + quizId,
                    type: "GET",
                    contentType: "application/json; charset=utf-8"
                })
                .done(function (question) {
                    processResponse(question);
                    eventManager.trigger(constants.RestartQuizHide);
                    homeType = "";
                })
                .fail(function (data) {
                    logService.log("Error on quiz restart:", data);
                });
        });

        function getQuestion(questionId, answerId) {

            $.ajax({
                url: "/rde/question?sc_lang=" + language + "&questionId=" + questionId + "&answerId=" + answerId + "&quizId=" + quizId,
                type: "GET",
                contentType: "application/json; charset=utf-8"
            })
                .done(function (question) {
                    processResponse(question);
                })
                .fail(function (data) {
                    logService.log("Error on getting question:", data);
                });
        }

        function processResponse(question) {
            if (question.ResultPageUrl) {

                window.location.href = question.ResultPageUrl;
            }
            else {
                $(".rde-basic .heading-wrapper h2", scope).html(question.QuestionTitle);
                $(".rde-basic .score-highlight-body p", scope).html("<strong>" + question.QuestionSubTitleIntro + "</strong>" + question.QuestionSubtitle);

                $(".rde-guided-selling-options", scope).html("");

                _.each(question.Answers, function (answer) {
                    $(".rde-guided-selling-options", scope).append(answerTemplateCompiled({ answer: answer }));

                    $(".rde-guided-selling-options .score-highlight", scope).last().click({ question: question, answer: answer }, function (e) {

                        e.preventDefault();
                        
                        $(this).addClass("active");

                        //Quiz Analytics
                        if (!homeType) {
                            homeType = answer.AnswerText;
                        }
                        eventManager.trigger(constants.QuizAnswerSubmitted, question.QuestionTitle, answer.AnswerText, homeType, category);

                        getQuestion(question.QuestionId.Guid, answer.AnswerId.Guid);

                        eventManager.trigger(constants.RestartQuizShow);
                    });
                });

                $('html, body').animate({
                    scrollTop: $(".rde-guided-selling-wrapper").offset().top - $("header")[0].offsetHeight
                }, 500);
            }
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new Quiz(args.scope, args.language, args.initialQuestionId, args.quizId, args.category);
    }
});

define('text!Resideo/Components/Rebates/Templates/GreenOhmRebatesResult.html',[],function () { return '\r\n<div class="panel score-accordion-panel thermostat-rebate-result-panel">\r\n    <div class="panel-heading" role="tab" id="heading-<%= collapseId %>">\r\n        <div class="panel-title">\r\n            <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapse-<%= collapseId %>">\r\n                <div class="panel-provider">\r\n                    <img alt="<%= labels.Icon %>" src="/areas/resideo/img/utility-rebates-icon.svg" />\r\n                </div>\r\n                <h5 class="panel-title"><%- rebate.Title %></h5>\r\n                <span class="panel-discount"><%- rebate.Amount %></span>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <div id="collapse-<%= collapseId %>" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading-<%= collapseId %>" aria-expanded="false">\r\n        <div class="panel-body">\r\n            <%= rebate.Description %>\r\n            <div>\r\n                <%= rebate.Terms %>\r\n            </div>\r\n            <% if (rebate.Url){ %>\r\n                <a class="score-button rde-arrow blue" target="_blank" rel="noopener noreferrer" href="<%= rebate.Url %>">View offer from <%- rebate.Supplier %></a>\r\n            <% }%>\r\n            <span class="rde-rebate-data" data-rebateName="<%- rebate.Type %>" data-rebateProvider="<%- rebate.Supplier %>" data-rebateOffer="<%- rebate.Amount %>"></span>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!Resideo/Components/Rebates/Templates/MarketplaceRebatesResult.html',[],function () { return '\r\n<div class="panel score-accordion-panel thermostat-rebate-result-panel">\r\n    <div class="panel-heading" role="tab" id="heading-<%= labels.collapseId %>">\r\n        <div class="panel-title">\r\n            <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapse-<%= labels.collapseId %>">\r\n                <div class="panel-provider">\r\n                    <img alt="<%= labels.icon %>" src="<%= rebate.Icon %>" />\r\n                </div>\r\n                <h5 class="panel-title"><%- rebate.Title %></h5>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <div id="collapse-<%= labels.collapseId %>" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading-<%= labels.collapseId %>" aria-expanded="false">\r\n        <div class="panel-body">\r\n            <%- rebate.Description %>\r\n            <div class="score-button-group">\r\n                <a href="<%= rebate.Url %>" class="score-button rde-secondary" target="_blank" rel="noopener noreferrer"><%- labels.enroll %></a>\r\n                <a href="<%= labels.url%>" class="score-button rde-primary"><%- labels.buy %></a>\r\n            </div>\r\n        </div> \r\n    </div>\r\n</div>';});

define('Resideo/Components/Rebates/Rebates',['jquery', 'underscore', 'helpersService', 'eventManager', 'constants', 'text!Resideo/Components/Rebates/Templates/GreenOhmRebatesResult.html', 'text!Resideo/Components/Rebates/Templates/MarketplaceRebatesResult.html'],
    function ($, _, helpersService, eventManager, constants, greenOhmRebatesResultTemplate, marketplaceRebatesResultTemplate) {
        function Rebates(scope, endpoints, labels) {
            var searchBox = $(scope).find(".thermostat-rebate-search-box");
            var $zipCodeInput = $("#ZipCode", scope);
            var $submit = $("#searchButton", scope);
            var $noResultsContainer = $(".thermostat-rebate-no-results-wrapper", scope);
            var $noResultsMessage = $(".thermostat-rebate-no-results", scope);
            var $resultsWrapper = $(".thermostat-rebate-results-wrapper", scope);
            var $resultContainer = $(".thermostat-rebate-results-accordion", scope);
            var $showingResults = $("#ZipCodeRes", scope)[0];
            var $warning = $(".rde-warning", scope)[0];
            var pager = $(".rebates-pager", scope)[0];
            var numberPerPage = 8;
            var greenOhmRebatesResultTemplateCompiled = _.template(greenOhmRebatesResultTemplate);
            var marketplaceRebatesResultTemplateCompiled = _.template(marketplaceRebatesResultTemplate);
            var results;
            var $CheckboxInput = $("#chkEE", scope);
            var $FilterItem = $(".filter-item-selected-value", scope)

            //RRW-3120
            if (document.querySelector('.rde-rebates #ZipCode')) {
                $zipCodeInput.on('input', function () {
                    var inputValue = this.value;
                    clearErrors();
                    if (inputValue && (/\D/).test(inputValue)) {
                        var newValue = (/\D/).test(inputValue.slice(0, -1)) ? "" : inputValue.slice(0, -1);
                        // maxlength not working for android
                        var zipCodeValidValueLength = this.maxLength;
                        this.value = (newValue && zipCodeValidValueLength) ? newValue.slice(0, zipCodeValidValueLength) : "";
                        return;
                    }
                });
            }

            window.onload = function () {
                var url = window.location.href;
                if (url.indexOf(window.location.hash) > -1) {
                    url = url.replace(window.location.hash, "");
                    window.history.replaceState({}, "", url);
                }
            }

            if (document.querySelector('.rde-rebates .thermostat-rebate-search-box')) {
                $(searchBox).on('keyup', 'input', function (e) {
                    $CheckboxInput.prop("checked", false);
                    $("#FilterRes").css('display', 'none');
                    $("#ClearfilterAll").css('display', 'none');
                    if (!helpersService.checkKey(e.key)) {
                        e.preventDefault();
                        return;
                    }
                    if (e.key === "Enter") {
                        getRebates();
                    }
                });
            }

            if (document.querySelector('.rde-rebates #searchButton')) {
                $submit.click(function (e) {
                    e.preventDefault();
                    getRebates();
                });
                $submit.on('keypress', function (e) {
                    if (e.which === 13) {
                        e.preventDefault();
                        getRebates();
                    }
                });
            }
            $('.facets-sidebar .score-button').on('click', function () {
                $('.filter-checkbox-wrapper').toggleClass('visible');
                $('.menu-facet-overlay').toggleClass('active');

            });
            $CheckboxInput.on('change', function () {
                FilterSearch();
                $CheckboxInput.focus();
            });
            function FilterSearch() {
                if ($CheckboxInput.is(":checked")) {
                    var Filter = $CheckboxInput.attr('data-type');
                    var Facetname = $CheckboxInput.siblings(".value-caption").text();
                    $('#FilterRes .filter-title').text(Filter.toUpperCase() + ':');
                    $('#FilterRes .filter-item-caption').text(Facetname);
                    $('#FilterRes .filter-item-caption').attr('aria-label', Facetname);
                    $("#FilterRes").css('display', 'block');
                    $("#ClearfilterAll").css('display', 'block');
                    $CheckboxInput.attr('aria-checked', true);
                } else {
                    $("#ClearfilterAll").css('display', 'none');
                    $("#FilterRes").css('display', 'none');
                    $CheckboxInput.attr('aria-checked', false);

                }
                getRebates();
            }
            $('#ClearfilterAll').on('click', function () {
                clearFilters();
                $("#ClearfilterAll").css('display', 'none');
            });
            $FilterItem.click(function (e) {
                clearFilters();
                $("#ClearfilterAll").css('display', 'none');
            });
            //analytics, rebate click
            if (document.querySelector('.rde-rebates .thermostat-rebate-results-wrapper')) {
                $resultContainer.on("click", "a.rde-rebate-button", function (e) {
                    eventManager.trigger(constants.RebateClick, e.target);
                });
            }

            function validateZipCode(elementValue) {
                var zipCodePattern = /^\d{5}$/;
                clearResults();

                if (zipCodePattern.test(elementValue)) {
                    return true;
                }

                if (elementValue.length === 0) {
                    $warning.innerText = labels.BlankZip;
                } else {
                    $warning.innerText = labels.InvalidZip;
                }
                $(searchBox).addClass("zip-warning");
                $($warning).show();
                $("#FilterBy").css('display', 'none');
                return false;
            }

            function getRebates() {
                var zipCode = $("#ZipCode", scope).val();

                if (!validateZipCode(zipCode)) {
                    return;
                }
                if ($CheckboxInput.is(":checked")) {
                    var Engerycare = true;
                }
                else {
                    var Engerycare = false;
                }

                $.ajax({
                    url: endpoints.Rebate + "?zip=" + zipCode + "&EE=" + Engerycare,
                    type: "GET",
                    contentType: "application/json; charset=utf-8"
                })
                    .done(function (data) {
                        if (data && data.Rebates.length > 0) {
                            results = data;
                            var itemcount = 0;
                            $.each(data.Rebates, function (i, item) {
                                if (item.CustomField3 == "EE") {
                                    itemcount++;
                                }
                            });
                            if (itemcount > 0) {
                                $("#FilterBy").css('display', 'block');
                                $(".value-count").text("(" + itemcount + ")");
                            }
                            else {
                                $("#FilterBy").css('display', 'none');
                            }
                            renderResults();
                            //analytics, rebate search
                            eventManager.trigger(constants.RebateSearch, zipCode);
                        } else {
                            clearResults();
                            $noResultsMessage.text(labels.NoResultsText.replace("{ZipCode}", zipCode));
                            $noResultsContainer.show();
                            //analytics, rebate no results
                            eventManager.trigger(constants.RebateNoResults, zipCode);
                        }
                    })
                    .fail(function (data) {
                        clearResults();
                        if (data.status === 409) {
                            if (data.statusText === "BlankZipCode") {
                                $warning.innerText = labels.BlankZip;
                            } else {
                                $warning.innerText = labels.InvalidZip;
                                $(searchBox).addClass("zip-warning");
                            }
                            $($warning).show();
                        } else {
                            $noResultsMessage.text(labels.ServiceUnavailible);
                            $noResultsContainer.show();
                        }
                        //analytics, rebate no results
                        eventManager.trigger(constants.RebateNoResults, zipCode);
                    });
            }

            var collapseId;

            function clearResults() {
                clearRebates();
                clearErrors();
                $(pager)[0].innerHTML = "";
                $showingResults.innerHTML = "";
                $noResultsContainer.hide();
                $resultsWrapper.hide();
            }

            function clearErrors() {
                $(searchBox).removeClass("zip-warning");
                $warning.innerText = "";
                $($warning).hide();

            }
            function clearFilters() {
                $('input:checkbox').prop("checked", false);
                $("#FilterRes").css('display', 'none');
                getRebates();
            }

            function clearRebates() {
                $resultContainer.fadeOut();
                $resultContainer.each(function () {
                    this.innerHTML = "";
                });
            }

            function renderResults() {
                var zipCode = $("#ZipCode", scope).val();
                $showingResults.innerHTML = '"' + zipCode + '"';
                $resultsWrapper.show();
                collapseId = 1;

                renderPage(getResultsForPage(1));
                renderPagination();
            }

            function renderPage(pageResults) {
                clearRebates();
                _.each(pageResults, function (resultItem) {
                    if (resultItem.Source === "GreenOhm") {
                        $resultContainer.append(greenOhmRebatesResultTemplateCompiled({ rebate: resultItem, collapseId: collapseId, labels: labels }));
                        collapseId += 1;
                    }

                    if (resultItem.Source === "Marketplace") {
                        $resultContainer.append(marketplaceRebatesResultTemplateCompiled({
                            rebate: resultItem,
                            labels: {
                                collapseId: collapseId,
                                enroll: labels.Enroll,
                                buy: labels.Buy,
                                url: labels.BuyUrl,
                                icon: labels.Icon
                            }
                        }));
                        collapseId += 1;
                    }
                });
                $resultContainer.fadeIn(600);
            }

            function getResultsForPage(pageNumber) {
                var startPosition = pageNumber * numberPerPage - numberPerPage;
                var endPosition = startPosition + numberPerPage;
                if (pageNumber === results.NumberOfPages) {
                    endPosition = startPosition + results.NumberOfLastPageResults;
                }

                return results.Rebates.slice(startPosition, endPosition);
            }

            function renderPagination() {
                $(pager)[0].innerHTML = "";
                if (results.NumberOfPages > 1) {
                    $(pager).append("<li class='rebates-pager-previous active' style='display:none'><a href = '#'></a></li>");
                    var active = "active";
                    for (var i = 1; i <= results.NumberOfPages; i++) {
                        $(pager).append("<li id='page-" + i + "' class='rebates-pager-anchor " + active + "'><a href = '#'>" + i + "</a></li>");
                        active = "";
                    }
                    $(pager).append("<li class='rebates-pager-next active'><a href = '#'></a></li>");
                    setClickEvents();
                }
            }

            function setClickEvents() {
                var previous = $('.rebates-pager-previous', scope)[0];
                $(previous).on("click", function (e) {
                    e.preventDefault();
                    if ($(previous).hasClass("active")) {
                        var currentPage = parseInt($(".rebates-pager-anchor.active a")[0].innerHTML, 10);
                        if (currentPage && currentPage > 1) {
                            var newPage = currentPage - 1;
                            renderPage(getResultsForPage(newPage));
                            adjustPagination(newPage);
                            scrollToTop();
                        }
                    }
                });

                var next = $('.rebates-pager-next', scope)[0];
                $(next).on("click", function (e) {
                    e.preventDefault();
                    if ($(next).hasClass("active")) {
                        var currentPage = parseInt($(".rebates-pager-anchor.active a")[0].innerHTML, 10);
                        if (currentPage && currentPage < results.NumberOfPages) {
                            var newPage = currentPage + 1;
                            renderPage(getResultsForPage(newPage));
                            adjustPagination(newPage);
                            scrollToTop();
                        }
                    }
                });

                var page = $('.rebates-pager-anchor', scope);
                $(page).on("click", function (e) {
                    e.preventDefault();
                    if ($(this).hasClass("active")) {
                        return;
                    }
                    var newPage = parseInt($(this).find("a")[0].innerHTML, 10);
                    renderPage(getResultsForPage(newPage));
                    adjustPagination(newPage);
                    scrollToTop();
                });
            }

            function adjustPagination(pageNumber) {
                var selector = "#page-" + pageNumber + ".rebates-pager-anchor";
                $(".rebates-pager-anchor.active").removeClass("active");
                $(selector).addClass("active");
                var previous = $('.rebates-pager-previous', scope)[0];
                var next = $('.rebates-pager-next', scope)[0];
                if (pageNumber > 1 && pageNumber < results.NumberOfPages) {
                    $(previous).show();
                    $(next).show();
                }
                if (pageNumber === 1) {
                    $(previous).hide();
                    $(next).show();
                }
                if (pageNumber === results.NumberOfPages) {
                    $(previous).show();
                    $(next).hide();
                }
            }

            function scrollToTop() {
                $([document.documentElement, document.body]).animate({
                    scrollTop: $(".thermostat-rebate-results-wrapper").offset().top - $("header")[0].offsetHeight
                }, 600);
            }
        }

        return function init(args) {
            return args.IsEditing ? null : new Rebates(args.scope, args.endpoints, args.labels);
        }
    });

define('text!Resideo/Components/Return/Templates/ReturnConfirmationItem.html',[],function () { return '<div class="rde-form-wrapper return-order-item" data-id="<%- item.ItemId %>">\r\n    <div class="score-column2 wide-right rde-extra-wide rde-shopping-cart-row">\r\n        <div class="score-left">\r\n            <a href="<%- item.Url %>">\r\n                <img alt="<%- item.SkuTitle %>" class="score-image rde-product-image" src="<%- item.ImageUrl %>">\r\n            </a>\r\n        </div>\r\n        <div class="score-right">\r\n            <div class="score-column2 equal">\r\n                <div class="score-left">\r\n                    <div class="score-column2 equal">\r\n                        <div class="score-left">\r\n                            <div class="score-content-spot rde-product-info">\r\n                                <p>\r\n                                    <strong><a href="<%- item.Url %>"><%- item.SkuTitle %></a></strong>\r\n                                    <span>SKU <%- item.Sku %></span>\r\n                                    <%- item.Description %>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <div class="score-right">\r\n                            <div class="score-left-text">\r\n                                <p><strong><%- labels.returned %></strong></p>\r\n                                <p>x<%- item.QuantityReturned %></p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="score-right">\r\n                    <div class="score-column2 wide-right">\r\n                        <div class="score-left">\r\n                        </div>\r\n                        <div class="score-right">\r\n                            <div class="score-style-box rde-item-flex-col">\r\n                                <div class="score-right-text">\r\n                                    <p><strong><%- labels.reason %></strong></p>\r\n                                    <p><%- reason %></p>\r\n                                </div>\r\n                                <div class="score-right-text">\r\n                                    <p><strong><%- labels.returnBy %></strong> <%- item.DueDate %></p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});

define('Resideo/Components/Return/ReturnConfirmation',['jquery', 'underscore', 'helpersService', 'text!Resideo/Components/Return/Templates/ReturnConfirmationItem.html'],
    function ($, _, helpersService, itemTemplate) {
        var _itemTemplateCompiled = _.template(itemTemplate);
        var _guidKey = "guid";

        var $returnItemsWrapper = $("#return-items-wrapper");
        var $printPreviewButton = $(".print-link");
        var $backButton = $("#back-button");

        function ReturnConfirmation(scope, returnModel, labels, returnReasons) {
            var formattedReason = returnReasons[returnModel.Reason];
            if (formattedReason == null) {
                formattedReason = returnModel.Reason;
            }

            _sessionId = helpersService.getUrlParameters(window.location, _guidKey);

            setBackButtonHref(_sessionId);
            setPrintPreviewHref();
            renderOrderItems(returnModel, labels, formattedReason);
        }

        var setBackButtonHref = function (sessionId) {
            var orderDetailsUrl = $backButton.attr("href");
            orderDetailsUrl = orderDetailsUrl + "?" + _guidKey + "=" + sessionId;
            $backButton.attr("href", orderDetailsUrl);
        };

        var setPrintPreviewHref = function () {
            var printPreviewUrl = helpersService.getPrintFriendlyUrl(window.location);
            $printPreviewButton.attr("href", printPreviewUrl);
        };

        var renderOrderItems = function (returnModel, labels, reason) {
            $.each(returnModel.ReturnedItems, function (index, item) {
                $returnItemsWrapper.append(_itemTemplateCompiled({ item: item, labels: labels, reason: reason }));
            });
        };

        return function init(args) {
            return args.IsEditing ? null : new ReturnConfirmation(args.scope, args.returnModel, args.labels, args.returnReasons);
        };
    });

define('text!Resideo/Components/Return/Templates/ReturnOrderItem.html',[],function () { return '<div class="rde-form-wrapper return-order-item" data-id="<%- item.ItemId %>">\r\n    <div class="score-column2 wide-right rde-extra-wide rde-shopping-cart-row">\r\n        <div class="score-left">\r\n            <div class="rde-checkbox">\r\n                <label aria-label="Select item to return">\r\n                    <% if(item.ReturnPossible) { %>\r\n                    <input name="item-to-return" data-val="true"\r\n                           type="checkbox" value="true">\r\n                    <% } %>\r\n                    <input type="hidden" value="false">\r\n                    <span></span>\r\n                </label>\r\n            </div>\r\n            <a href="<%- item.Url %>">\r\n                <img alt="<%- item.SkuTitle %>" class="score-image rde-product-image" src="<%- item.ImageUrl %>">\r\n            </a>\r\n        </div>\r\n        <div class="score-right">\r\n            <div class="score-column2 equal">\r\n                <div class="score-left">\r\n                    <div class="score-column2 equal">\r\n                        <div class="score-left">\r\n                            <div class="score-content-spot rde-product-info">\r\n                                <p>\r\n                                    <strong><a href="<%- item.Url %>"><%- item.SkuTitle %></a></strong>\r\n                                    <span>SKU <%- item.Sku %></span>\r\n                                    <%- item.Description %>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <% if(item.ReturnPossible) { %>\r\n                        <div class="score-right">\r\n                            <div class="qty-wrapper">\r\n                                <span class="qty-label"><%- labels.quantityToReturn %></span>\r\n                                <div class="input-group">\r\n                                    <span class="input-group-btn">\r\n                                        <button class="quantity-left-minus btn" data-field="" data-type="minus"\r\n                                                type="button"></button>\r\n                                    </span>\r\n                                    <span class="form-control input-number return-quantity"><%- item.Quantity %></span>\r\n                                    <span class="input-group-btn">\r\n                                        <button class="quantity-right-plus btn" data-field="" data-type="plus"\r\n                                                type="button"></button>\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <% } %>\r\n                    </div>\r\n                </div>\r\n                <div class="score-right">\r\n                    <div class="score-column2 wide-right">\r\n                        <div class="score-left">\r\n                        </div>\r\n                        <div class="score-right">\r\n                            <div class="score-style-box rde-item-flex-col">\r\n                                <div class="score-right-text">\r\n                                    <% if(item.ReturnPeriodExpired != null && item.ReturnPeriodExpired) { %>\r\n                                    <p class="return-expired"><%- labels.returnExpired %> <%- item.ReturnExpiry %></p>\r\n                                    <% } else if (item.ReturnPeriodExpired != null && !item.ReturnPeriodExpired){ %>\r\n                                    <p><%- labels.returnExpires %> <%- item.ReturnExpiry %></p>\r\n                                    <% } %>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});

define('Resideo/Components/Return/ReturnItem',['jquery', 'underscore', 'returnService', 'helpersService', 'eventManager', 'constants', 'text!Resideo/Components/Return/Templates/ReturnOrderItem.html'],
    function ($, _, returnService, helpersService, eventManager, constants, itemTemplate) {
        var $backButton = $("#back-button");
        var $submitButton = $("#submit-return-button");
        var $returnItemsWrapper = $("#return-items-wrapper");

        var _itemTemplateCompiled = _.template(itemTemplate);
        var _noReasonSelected = "NO_REASON_SELECTED";
        var _guidKey = "guid";
        var _submitUrl = "";
        var _sessionId = "";

        var _orderInfo = {};
        var _returnCalculator = {};

        function ReturnItem(scope, order, labels, submitUrl) {
            _sessionId = helpersService.getUrlParameters(window.location, _guidKey);
            _submitUrl = submitUrl;

            setBackButtonHref(_sessionId);
            initOrderInfo(order);
            initReturnCalculator();

            renderOrderItems(order, labels);
            disableAllOrderItems();
            registerCheckboxEvents();
            registerDropDownEvents();
            registerQuantityButtonEvents();
            registerSubmitButtonEvents();
        }

        var registerCheckboxEvents = function () {
            $(".return-order-item :input[type='checkbox']").change(function () {
                var itemId = $(this).closest(".return-order-item").attr("data-id");
                
                setOrderItemAvailability(itemId, this.checked);
                _orderInfo.orderItems[itemId].checked = this.checked;
                updateSubmitButtonAvailability();

                if (this.checked) {
                    validateQuantityButtons(itemId);
                    addToReturnCalculator(itemId, _orderInfo.orderItems[itemId].quantity);
                }
                else {
                    removeFromReturnCalculator(itemId, _orderInfo.orderItems[itemId].quantity);
                }

            });
        };

        var registerDropDownEvents = function () {
            var $returnReasonSelect = $(".reason-dropdown-wrapper select");
            var clickCounter = 0;

            $returnReasonSelect.click(function () {
                clickCounter++;
                if (clickCounter == 2) {
                    validateReason(this.value);
                    _orderInfo.returnReason = this.value;

                    clickCounter = 0;
                }
            });

            $returnReasonSelect.blur(function () {
                validateReason(this.value);
                _orderInfo.returnReason = this.value;
                clickCounter = 0;
            });
        };

        var registerQuantityButtonEvents = function () {
            $(".quantity-left-minus").click(function () {
                var itemId = $(this).closest(".return-order-item").attr("data-id");
                var quantitySpan = $(".return-order-item[data-id='" + itemId + "'] .return-quantity");

                if (_orderInfo.orderItems[itemId].quantity == 1) {
                    validateQuantityButtons(itemId);
                    return;
                }

                _orderInfo.orderItems[itemId].quantity = _orderInfo.orderItems[itemId].quantity - 1;
                quantitySpan.text(_orderInfo.orderItems[itemId].quantity);

                removeFromReturnCalculator(itemId, 1);
                validateQuantityButtons(itemId);
            });

            $(".quantity-right-plus").click(function () {
                var itemId = $(this).closest(".return-order-item").attr("data-id");
                var quantitySpan = $(".return-order-item[data-id='" + itemId + "'] .return-quantity");

                if (_orderInfo.orderItems[itemId].quantity == _orderInfo.orderItems[itemId].maxQuantity) {
                    validateQuantityButtons(itemId);
                    return;
                }

                _orderInfo.orderItems[itemId].quantity = _orderInfo.orderItems[itemId].quantity + 1;
                quantitySpan.text(_orderInfo.orderItems[itemId].quantity);

                addToReturnCalculator(itemId, 1);
                validateQuantityButtons(itemId);
            });
        };

        var registerSubmitButtonEvents = function () {
            $submitButton.click(function () {
                if (validateReason(_orderInfo.returnReason)) {
                    _orderInfo.sessionId = _sessionId;
                    _orderInfo.returnItems = getReturnItems();
                    returnService.submitReturn(_orderInfo).then(redirectToConfirmation, showSubmissionErrorMessage);
                }
                else {
                    $(".reason-dropdown").focus();
                }
            });
        };

        var redirectToConfirmation = function (data) {
            //analytics
            _orderInfo.formattedReason = $(".reason-dropdown-wrapper select option:selected").text();
            eventManager.trigger(constants.ReturnSubmitted, _orderInfo);

            var redirectUrl = _submitUrl + "?" + _guidKey + "=" + _sessionId + "&rma=" + data;
            window.location.href = redirectUrl;
        };

        var showSubmissionErrorMessage = function () {
            var $errorMessage = $("#processing-error-message");
            $errorMessage.removeClass("hidden");
        };

        var getReturnItems = function () {
            var ret = [];
            $.each(_orderInfo.orderItems,
                function (index, item) {
                    if (item.checked) {
                        var returnItem = {
                            itemId: item.itemId,
                            quantity: item.quantity
                        };
                        ret.push(returnItem);
                    }
                });
            return ret;
        };

        var validateQuantityButtons = function (itemId) {
            var quantityReduce = $(".return-order-item[data-id='" + itemId + "'] .quantity-left-minus");
            var quantityIncrease = $(".return-order-item[data-id='" + itemId + "'] .quantity-right-plus");

            if (_orderInfo.orderItems[itemId].quantity == _orderInfo.orderItems[itemId].maxQuantity) {
                quantityIncrease.attr("disabled", true);
            } else {
                quantityIncrease.attr("disabled", false);
            }
            if (_orderInfo.orderItems[itemId].quantity == 1) {
                quantityReduce.attr("disabled", true);
            } else {
                quantityReduce.attr("disabled", false);
            }
        };

        var validateReason = function (reason) {
            var errorMessage = $(".reason-error");
            if (reason == _noReasonSelected) {
                errorMessage.removeClass("hidden");
                return false;
            } else {
                errorMessage.addClass("hidden");
                return true;
            }
        };

        var renderOrderItems = function (order, labels) {
            $.each(order.Items, function (index, item) {
                $returnItemsWrapper.append(_itemTemplateCompiled({ item: item, labels: labels }));
            });
        };

        var initOrderInfo = function (order) {
            _orderInfo.orderId = order.OrderId;
            _orderInfo.email = order.Email;
            _orderInfo.returnReason = _noReasonSelected;
            _orderInfo.orderItems = {};

            $.each(order.Items, function (index, item) {
                var orderItem = {
                    itemId: item.ItemId,
                    checked: false,
                    quantity: item.Quantity,
                    maxQuantity: item.Quantity,
                    sku: item.Sku,
                    returnPossible: item.ReturnPossible,
                    price: item.Price,
                    tax: item.Tax
                };
                _orderInfo.orderItems[item.ItemId] = orderItem;
            });
        };

        var initReturnCalculator = function () {
            _returnCalculator = {
                amountPaid: 0,
                tax: 0
            };
        };

        var setBackButtonHref = function (sessionId) {
            var orderDetailsUrl = $backButton.attr("href");
            orderDetailsUrl = orderDetailsUrl + "?" + _guidKey + "=" + sessionId;
            $backButton.attr("href", orderDetailsUrl);
        };

        var disableAllOrderItems = function () {
            $(".return-order-item :input:not([type='checkbox'])").attr("disabled", true);
        };

        var setOrderItemAvailability = function (itemId, available) {
            $(".return-order-item[data-id='" + itemId + "'] :input:not([type='checkbox'])").attr("disabled", !available);;
        };

        var addToReturnCalculator = function (itemId, quantity) {
            _returnCalculator.amountPaid =
                helpersService.roundNumber(_returnCalculator.amountPaid + (_orderInfo.orderItems[itemId].price * quantity), 2);
            _returnCalculator.tax =
                helpersService.roundNumber(_returnCalculator.tax + (_orderInfo.orderItems[itemId].tax * quantity), 2);

            updateCalculator();
        };

        var removeFromReturnCalculator = function (itemId, quantity) {
            _returnCalculator.amountPaid =
                helpersService.roundNumber(_returnCalculator.amountPaid - (_orderInfo.orderItems[itemId].price * quantity), 2);
            _returnCalculator.tax =
                helpersService.roundNumber(_returnCalculator.tax - (_orderInfo.orderItems[itemId].tax * quantity), 2);

            updateCalculator();
        };

        var updateCalculator = function () {
            $("#price-label").text("$" + _returnCalculator.amountPaid.toFixed(2));
            $("#tax-label").text("$" + _returnCalculator.tax.toFixed(2));
            $("#total-label")
                .text("$" + helpersService.roundNumber(_returnCalculator.amountPaid + _returnCalculator.tax, 2).toFixed(2));
        };

        var updateSubmitButtonAvailability = function () {
            var anyChecked = false;
            $.each(_orderInfo.orderItems,
                function (index, item) {
                    if (item.checked) {
                        $submitButton.removeClass("disabled");
                        anyChecked = true;
                        return false;
                    }
                });

            if (!anyChecked) {
                $submitButton.addClass("disabled");
            }
        };

        return function init(args) {
            return args.IsEditing ? null : new ReturnItem(args.scope, args.order, args.labels, args.submitUrl);
        };
    });
define('Resideo/Components/Shipping/OrderPaymentButton',['jquery', 'eventManager', 'helpersService', 'storageService', 'constants'],
    function ($, eventManager, helpersService, storageService, constants) {
    function OrderPaymentButton(scope, endpoints, labels) {
        if (document.querySelector('.order-payment-button .score-button')) {
            new Promise(function (resolve, reject) {
                eventManager.subscribe("Shipping:Valid", function () {
                    $(".score-button", scope).removeClass("disabled");
                });
                
                eventManager.subscribe("Shipping:Invalid", function () {
                    $(".score-button", scope).addClass("disabled");
                });

                eventManager.subscribe(constants.OrderPaymentButton, function () {
                    setLabels();
                });

                $(".score-button", scope).click(function (e) {
                    e.preventDefault();
                    helpersService.showLoader(this);
                    var total = storageService.loadLocalCart().TotalValue;

                    if (total === 0) {
                        eventManager.trigger(constants.CheckoutFormSubmit, endpoints.orderReviewPageLink);
                    } else {
                        eventManager.trigger(constants.CheckoutFormSubmit, endpoints.orderPaymentPageLink);
                    }
                    
                });

                setLabels();

                function setLabels() {
                    var total = storageService.loadLocalCart().TotalValue;
                    if (total === 0) {
                        $(".order-payment-button-label", scope).html(labels.confirmReviewButtonTitle);
                    } else {
                        $(".order-payment-button-label", scope).html(labels.confirmPaymentButtonTitle);
                    }
                }
                resolve();
            });
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new OrderPaymentButton(args.scope, args.endpoints, args.labels);
    }
});

define('text!Resideo/Components/Shipping/Templates/ShippingOption.html',[],function () { return '<div class="rde-radio">\r\n    <label>\r\n        <input type="radio" name="radio" data-description="<%- option.Description %>">\r\n        <span></span>\r\n        <%- option.Description %>\r\n        <strong class="rde-price">\r\n            <% if (option.IsFree) { %>\r\n            <%- freeShippingLabel %>\r\n            <% } else { %>\r\n            <%- option.FormattedCost %>\r\n            <% } %>\r\n        </strong>\r\n    </label>\r\n</div>';});

define('Resideo/Components/Shipping/ShippingMethods',['jquery', 'underscore', 'text!Resideo/Components/Shipping/Templates/ShippingOption.html', 'cartService', 'identityService'], function ($, _, shippingOptionTemplate, cartService, identityService) {
    function ShippingMethods(scope, labels, language) {

        var shippingOptionTemplateCompiled = _.template(shippingOptionTemplate);

        if (document.querySelector('.shipping-methods .rde-form-wrapper')) {
            new Promise(function (resolve, reject) {
                refreshOptions();
                resolve();
            });
        }

        function refreshOptions() {
            $(".rde-form-wrapper", scope).html("");

            identityService.getECommerceToken("").then(function(token) {
                cartService.getCart(false, language)
                    .then(resolve, reject);
            });

            function resolve(cart) {
                if (cart.ShippingOptions) {
                    _.each(cart.ShippingOptions, function (option) {
                        $(".rde-form-wrapper", scope).append(shippingOptionTemplateCompiled({ option: option, freeShippingLabel: labels.FreeShippingLabel }));

                        $(".rde-radio", scope).last().data("ShippingOptionId", option.Id);

                        if (cart.Shipping && cart.Shipping.Id === option.Id) {
                            $("input[name='radio']", scope).last().prop("checked", true);
                        }
                    });

                    if (cart.ShippingOptions.length == 0) {
                        $(scope).hide();
                    } else {
                        $(scope).show();
                    }
                }

                $("input[name='radio']", scope).change(function () {
                    var optionId = $(this).closest(".rde-radio").data("ShippingOptionId");
                    cartService.applyShippingOption(optionId);
                });

                if (window.location.hash === "#shippingMethods" && $(window.location.hash).length) {
                    $('html, body').animate({
                        scrollTop: $(window.location.hash).offset().top - $("header")[0].offsetHeight
                    }, 0);
                }
            }

            function reject(data) {
                //reserved for the error handling
            }
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new ShippingMethods(args.scope, args.labels, args.language);
    };
});
define('Resideo/Components/Solution/min/SolutionStickyNavigation-min',["jquery"],(function(i){function o(o){var n=i(".rde-sticky-anchor-nav.solutions .section-navigation",o);if(n.length){var s=n.offset().top-111;i(window).on("scroll",(function(){i(window).scrollTop()>=s?n.css({position:"fixed",top:"110px"}):n.css({position:"relative",top:"0"})}))}i(".rde-sticky-anchor-nav.solutions .section-navigation li a",o).on("click",(function(){i(".rde-sticky-anchor-nav.solutions .section-navigation li a",o).removeClass("active"),i(this).toggleClass("active")})),i(".rde-sticky-anchor-nav.solutions",o).addClass("hide"),i(window).scroll((function(){var n=i(window).scrollTop(),s=i(".rde-show-sticky-anchor-nav");s&&(n>s.offset().top?i(".rde-sticky-anchor-nav.solutions",o).removeClass("hide"):i(".rde-sticky-anchor-nav.solutions",o).addClass("hide"))})),i(window).on("scroll",(function(){var n=i(".rde-sticky-anchor-nav.solutions .section-navigation .slick-track li a.active",o).closest(".slick-slide").attr("data-slick-index"),s=parseInt(n);i(".rde-sticky-anchor-nav.solutions .section-navigation .slick-initialized",o).slick("slickGoTo",s);var t=i(window).scrollTop(),a=i(window).height()/2;i(".rde-sticky-anchor-nav.solutions .section-navigation ul li a",o).removeClass("active"),i(".score-anchorpoint").each((function(){if(this){var n="#"+this.id;i(n).length>0&&i(n).offset().top<=t+a&&(i(".rde-sticky-anchor-nav.solutions .section-navigation li a.active",o).removeClass("active"),i('.rde-sticky-anchor-nav.solutions .section-navigation li a[href="'+n+'"]',o).addClass("active"))}}))})),i(".solution-navigation-back-to-top .rde-back-to-top",o).click((function(o){o.preventDefault(),i(window).scrollTop(0)}))}return function(i){return i.IsEditing?null:new o(i.scope)}}));
define('Resideo/Components/Solution/SolutionAnchorNavigation',['jquery'], function ($) {
    function SolutionAnchorNavigation(scope) {
        if (document.querySelector('.solutions-section-navigation ul')) {
            new Promise(function (resolve, reject) {
                $('ul', scope).slick({
                    slidesToShow: 6,
                    slidesToScroll: 1,
                    dots: false,
                    focusOnSelect: true,
                    arrows: true,
                    responsive: [
                        {
                            breakpoint: 1199,
                            settings: {
                                slidesToShow: 4,
                                slidesToScroll: 1
                            }
                        },
                        {
                            breakpoint: 991,
                            settings: {
                                slidesToShow: 3,
                                slidesToScroll: 1,
                                centerMode: true
                            }
                        },
                        {
                            breakpoint: 480,
                            settings: {
                                slidesToShow: 1,
                                slidesToScroll: 1,
                                arrows: false,
                                centerMode: true,
                                variableWidth: true
                            }
                        }
                    ]
                });
                resolve();
            });
        }
    }

    return function init(args) {
        return args.IsEditing ? null : new SolutionAnchorNavigation(args.scope);
    };
});

define('Resideo/Components/Solution/SolutionStickyNavigation',['jquery'], function ($) {
    function SolutionStickyNavigation(scope) {
        new Promise(function (resolve, reject) {
            if (document.querySelector('.rde-sticky-anchor-nav.solutions .section-navigation', scope)) {
                //sticky anchor nav fixed position and active class on click
                var nav = $('.rde-sticky-anchor-nav.solutions .section-navigation', scope);
                if (nav.length) {
                    var stickyNavTop = nav.offset().top - 111;
                    $(window).on('scroll',
                        function() {
                            if ($(window).scrollTop() >= stickyNavTop) {
                                nav.css({ position: "fixed", top: "152px" });
                            } else {
                                nav.css({ position: "relative", top: "0" });
                            }
                        });
                }

                $('.rde-sticky-anchor-nav.solutions .section-navigation li a', scope).on('click', function () {
                    $('.rde-sticky-anchor-nav.solutions .section-navigation li a', scope).removeClass('active');
                    $(this).toggleClass('active');
                });

                //show sticky anchor nav if scrolled past anchor point w/ show class
                $('.rde-sticky-anchor-nav.solutions', scope).addClass('hide');
                $(window).scroll(function () {
                    var scroll = $(window).scrollTop();
                    var showStickyNavButton = $('.rde-show-sticky-anchor-nav');
                    if (showStickyNavButton) {
                        var showStickyNavButtonPosition = showStickyNavButton.offset().top;
                        if (scroll > showStickyNavButtonPosition) {
                            $('.rde-sticky-anchor-nav.solutions', scope).removeClass('hide');
                        } else {
                            $('.rde-sticky-anchor-nav.solutions', scope).addClass('hide');
                        }
                    }
                });

                //add/remove active class on sticky anchor nav when scrolled to/through
                $(window).on('scroll', function () {
                    var activeItemOrder = $('.rde-sticky-anchor-nav.solutions .section-navigation .slick-track li a.active', scope)
                        .closest('.slick-slide')
                        .attr('data-slick-index');
                    var indexNum = parseInt(activeItemOrder);
                    var slider = $('.rde-sticky-anchor-nav.solutions .section-navigation .slick-initialized', scope);
                    slider.slick('slickGoTo', indexNum);

                    var scrollDistance = $(window).scrollTop();
                    var $windowHt = $(window).height() / 2;

                    $('.rde-sticky-anchor-nav.solutions .section-navigation ul li a', scope).removeClass('active');
                    $('.score-anchorpoint').each(function () {
                        var el = this;
                        if (el) {
                            var idName = "#" + el.id;
                            if (
                                $(idName).length > 0 &&
                                $(idName).offset().top <= scrollDistance + $windowHt
                            ) {
                                $('.rde-sticky-anchor-nav.solutions .section-navigation li a.active', scope).removeClass("active");
                                $('.rde-sticky-anchor-nav.solutions .section-navigation li a[href="' + idName + '"]', scope).addClass('active');
                            }
                        }
                    });
                });
            }

            if (document.querySelector('.solution-navigation-back-to-top .rde-back-to-top', scope)) {
                $('.solution-navigation-back-to-top .rde-back-to-top', scope).click(function(e) {
                    e.preventDefault();

                    // navigating the user to the top of the page
                    $(window).scrollTop(0);
                });
            }
            resolve();
        });
    }

    return function init(args) {
        return args.IsEditing ? null : new SolutionStickyNavigation(args.scope);
    };
});

define('Resideo/Components/Status/AppStatus',['jquery'], function ($) {
    function AppStatus(scope) {

    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new AppStatus(args.scope);
    }
});
define('Resideo/Components/Support/SupportAccordion',['jquery'], function ($) {
    function SupportAccordion(scope) {
        if (document.querySelector('.support-accordion')) {
            new Promise(function (resolve, reject) {
				setTimeout(function(){
					//accordion click
					$('a[data-target]', scope).on('click', function (e) {
						var trigger = $(this);
						$(".panel-collapse.collapse.in", scope).each(function () {
							if (trigger.attr("href") != ("#" + $(this).attr("id"))) {
								$(this).collapse('hide');
							}
						});

						$("a[data-target]:not([data-target='" + $(this).attr('data-target') + "'])", scope).attr('aria-expanded', 'false');

						$('#' + $(this).data("target"), scope).collapse('show');
						$(this).attr('aria-expanded', ($(this).attr('aria-expanded') == 'true' ? 'false' : 'true'));

						e.preventDefault();
					});

					//select a tab based on the url hash
					var setPanelFromHash = function () {
						if (window.location.hash && window.location.hash != "") {
							var hash = window.location.hash.toLowerCase();
							$(".panel-collapse.collapse.in").each(function () {
								if ($(this).attr("id").replace("pane_", "#") != hash) {
									$(this).collapse('hide');
								}
							});
							var panel = $("a[data-id='" + hash + "']", scope);
							if ($(panel).length > 0 && !($('#' + $(panel).data("target")).hasClass('in'))) {
								$(panel).click();
								setTimeout(function () { $('html, body').animate({ scrollTop: $(scope).offset().top - 140 }, 0); }, 250);
							}
						}
					}
					window.addEventListener('hashchange', setPanelFromHash, false);
					setPanelFromHash();
				}, jQuery(window).width() < 975 ? 2000 : 0);
            });
        }
    }

    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new SupportAccordion(args.scope);
    }
});

define('text!Resideo/Components/Support/Templates/SupportCoveoTabs.html',[],function () { return '<div class="score-tab rde-tab-dropdown">\r\n    <div class="nav-tabs-wrapper-outer">\r\n        <div class="nav-tabs-wrapper-inner">\r\n            <ul class="nav nav-tabs" role="tablist"></ul>\r\n\r\n            <!-- begin where we need to include new HTML into the tab set "nav-tabs-wrapper-inner" -->\r\n            <div class="score-center-text">\r\n                <a class="score-button rde-view-more"><%- showMoreTabsLabel %></a>\r\n            </div>\r\n\r\n            <select class="form-control" id="tab_selector"></select>\r\n            <!-- end new HTML inclusion -->\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!Resideo/Components/Support/Templates/SupportCoveoTabsAccordion.html',[],function () { return '<div class="panel-group score-accordion coveo-accordion"></div>';});


define('text!Resideo/Components/Support/Templates/SupportCoveoTabsAccordionPane.html',[],function () { return '<div class="panel score-accordion-panel">\r\n    <div class="panel-heading">\r\n        <h4 class="panel-title">\r\n            <a data-toggle="collapse" href="#collapse-<%-index%>" data-tabid="<%-id%>" class="rde-accordion-link" tabindex="<%-index%>">\r\n                <%-text%>\r\n            </a>\r\n        </h4>\r\n    </div>\r\n    <div id="collapse-<%-index%>" class="panel-collapse collapse <%-opened%>" expanded="false">\r\n        <div class="panel-body">\r\n            <div></div>\r\n        </div>\r\n    </div>\r\n</div>';});

define('Resideo/Components/Support/SupportCoveoTabs',['jquery', 'underscore', 'text!Resideo/Components/Support/Templates/SupportCoveoTabs.html', 'text!Resideo/Components/Support/Templates/SupportCoveoTabsAccordion.html', 'text!Resideo/Components/Support/Templates/SupportCoveoTabsAccordionPane.html'], function ($, _, tabsTemplate, accordionTemplate, accordionPaneTemplate) {

    function SupportCoveoTabs(scope, showMoreTabsLabel, isAccordion, loadFromFacet, facetId) {

        //RRW-5988 coveo tab component overrides initial hash value, here we correct that
        if (window.initHashValue !== window.location.hash) {
            window.location.hash = window.initHashValue;
        }

        //special ie validation
        var ieDelay = 0;
        try {
            if (isAccordion) {
                ieDelay = (!!window.MSInputMethodContext && !!document.documentMode) ? 5000 : 100;
            }
        } catch (error) {
            console.error(error);
        }

        setTimeout(function () {

            var tabsTemplateCompiled = _.template(tabsTemplate);
            var accordionTemplateCompiled;
            var accordionPaneTemplateCompiled;
            var $coveoTabSection = $('.coveo-tab-section', scope);
            var $coveoResultListWrapper = $('.CoveoResultList', scope).closest('div');
            var $coveoTab = $('a.CoveoTab', scope);
            var $pagerText = $('.support-product-pager', scope);
            var $tabSection = $('.coveo-tab-section', scope);
            var $facets = $(".CoveoFacet[data-id='" + facetId + "']", scope).find('li.coveo-facet-value');

            //Append tab section with custom tabs template
            $coveoTabSection.append(tabsTemplateCompiled({ showMoreTabsLabel: showMoreTabsLabel }));

            //case is accordion
            if (isAccordion) {
                var accordionTemplateCompiled = _.template(accordionTemplate);
                var accordionPaneTemplateCompiled = _.template(accordionPaneTemplate);
                $coveoResultListWrapper.before(accordionTemplateCompiled());
                $(".coveo-tab-section").hide();
                $(".coveo-results-header").hide();

            }

            //Populate new tabs 
            if (isAccordion && loadFromFacet) {
                if ($facets.length == 0) {
                    $(scope).closest('.score-stripe').hide();
                } else {
                    $facets.each(function (index, element) {
                        var active = ($(this).hasClass('coveo-selected')) ? "active" : "";
                        var selected = ($(this).hasClass('coveo-selected')) ? "selected" : "";

                        $('.coveo-accordion', scope).append(accordionPaneTemplateCompiled({ id: $(this).data("value"), index: index, text: $(this).data("value"), opened: ($(this).hasClass('coveo-selected') ? 'in' : '') }));

                    });
                }
            } else {
                $coveoTab.each(function (index, element) {
                    var active = ($(this).hasClass('coveo-selected')) ? "active" : "";
                    var selected = ($(this).hasClass('coveo-selected')) ? "selected" : "";

                    $('.rde-tab-dropdown .nav-tabs', scope).append("<li  class='" + active + "'><a data-tab='" + $(this).data("id") + "' data-toggle='tab'>" + $(this).data("caption") + "</a></li>");

                    if (isAccordion) {
                        $('.coveo-accordion', scope).append(accordionPaneTemplateCompiled({ id: $(this).data("id"), index: index, text: $(this).data("caption"), opened: ($(this).hasClass('coveo-selected') ? 'in' : '') }));
                    } else {
                        $('.rde-tab-dropdown #tab_selector', scope).append("<option value='" + $(this).data("id") + "' " + selected + ">" + $(this).data("caption") + "</option>");
                    }
                });
            }

            //hide view more button if there are no more than 5 to show
            if ($('.rde-tab-dropdown .nav-tabs li', scope).length < 6) {
                $('.rde-tab-dropdown .rde-view-more', scope).hide();
            }

            //show extra tabs and hide view more button
            $('.rde-tab-dropdown .rde-view-more', scope).on('click', function () {
                $('.rde-tab-dropdown .nav-tabs li:nth-child(n + 6)').css('display', 'block');
                $(this).hide();
            });

            //show extra tabs and hide view more button keypress
            $('.rde-tab-dropdown .rde-view-more', scope).keypress(function () {
                $('.rde-tab-dropdown .nav-tabs li:nth-child(n + 6)').css('display', 'block');
                $(this).hide();
            });

            //show pagination text on load, if needed
            if ($('.coveo-pager-list li', scope).length > 0) {
                $pagerText.show();
            }

            //tab click
            $(".rde-tab-dropdown .nav-tabs", scope).on("click", "li a", function (e) {
                var tabId = $(this).data("tab");
                document.getElementById(tabId).click();
                $('#tab_selector option:selected', scope).removeAttr('selected');
                $('#tab_selector option[value=' + tabId + ']', scope).attr('selected', 'selected');
                e.preventDefault();
            });

            //on keypress
            $('.rde-tab-dropdown .nav-tabs', scope).on("keypress", "li a", function (e) {
                if (e.key === "Enter") {
                    var tabId = $(e.target).data("tab");
                    tabClick(tabId);
                    $('#tab_selector option:selected', scope).removeAttr('selected');
                    $('#tab_selector option[value=' + tabId + ']', scope).attr('selected', 'selected');
                }
            });

            //set tab = for dropdown and accordion click
            tabClick = function (tabId) {
                document.getElementById(tabId).click();
                $('li.active').removeClass('active');
                $('.nav-tabs li a[data-tab="' + tabId + '"]', scope).closest("li").addClass('active');
            }

            //set facet = for dropdown and accordion click
            facetClick = function (id) {
                window.location.hash = "#f:" + facetId + "=[" + id + "]"
            }

            //dropdown click
            $('#tab_selector', scope).on('change', function (e) {
                var tabId = $(this).val();
                tabClick(tabId);
                e.preventDefault();
            });

            //for accordion type, move results from the default coveo pane into the accordion - Always just move around the same DIV, it doesn`t create DOM
            moveIntoAccordion = function (a) {
                if (isAccordion) {
                    $('.CoveoResultList', scope).appendTo($(a).closest('.panel').find('.panel-body>div'));
                    $('.CoveoPager', scope).appendTo($(a).closest('.panel').find('.panel-body>div'));
                    $(".rde-coveo-tabs-is-accordion .coveo-main-section").css('opacity', '1');
                    $(".rde-coveo-tabs-is-accordion .coveo-main-section").css('filter', 'alpha(opacity=100)');
                }
            }

            //add class if empty CoveoPager
            if ($('.CoveoPager .coveo-pager-list li', scope).length < 1) {
                $('.CoveoPager').addClass('pager-empty');
            }

            //accordion click
            $('.coveo-accordion a[data-tabid]', scope).on('click', function (e) {
                var trigger = $(this);
                $(".panel-collapse.collapse.in", scope).each(function () {
                    if (trigger.attr("href") != ("#" + $(this).attr("id"))) {
                        $(this).removeClass("in");
                    }
                });

                moveIntoAccordion($(this));

                if (!loadFromFacet) {
                    tabClick($(this).attr('data-tabid'));
                } else {
                    facetClick(trigger.data("tabid"));

                }
                e.preventDefault();
            });

            //if accordion, move results to initial opened panel
            $accordionToMove = $('.coveo-accordion').find('.in');
            if ($accordionToMove.length > 1) {
                $accordionToMove = $('.coveo-accordion').find('.in')[0];
            }
            else if ($accordionToMove.length == 0) {
                $accordionToMove = $('.coveo-accordion').find('.panel-collapse')[0];
            }
            if ($accordionToMove)
                moveIntoAccordion($($accordionToMove.closest('.panel')).find('a.rde-accordion-link'));


            //show/hide pagination text
            $(".CoveoSearchInterface").on("newResultsDisplayed", function (e) {
                e.preventDefault();
                if ($('.coveo-pager-list li').length < 1) {
                    $pagerText.hide();
                }
                else {
                    $pagerText.show();
                }
            });
        }, ieDelay);

    };

    return function init(args) {
        return args.IsEditing ? null : new SupportCoveoTabs(args.scope, args.ShowMoreTabsLabel, args.IsAccordion, args.LoadFromFacet, args.FacetId);
    };
});

define('text!Resideo/Components/Support/Templates/VideoHighlight.html',[],function () { return '<div class="score-highlight rde-video-highlight">\r\n    <div class="image-wrapper">\r\n        <img src="<%= video.VideoThumbUrl %>" alt="<%- video.AltText %>" style="opacity: 1.014;">\r\n    </div>\r\n    <div class="caption">\r\n\r\n        <div class="score-highlight-body">\r\n            <p style="z-index: 1;"><%- video.Title %></p>\r\n        </div>\r\n        <div class="score-call-to-action">\r\n            <a class="score-button rde-clickable-area hwh-video-modal-button" data-ux-module="score_bootstrap/Components/Button" data-ux-state="loaded" tabindex="0">Modal 1</a><div aria-hidden="true" aria-labelledby="modal-<%- video.Id %>-Label" class="modal fade score-modal rde-video-modal" data-ux-module="score_bootstrap/Components/Modal" data-ux-state="loaded" id="modal-<%- video.Id %>" role="dialog" tabindex="-1" style="display: none;">\r\n                <div class="modal-dialog ">\r\n                    <div class="modal-content">\r\n                        <div class="modal-header" id="modal-<%- video.Id %>-Label">\r\n\r\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" tabindex="0">\r\n                                <span aria-hidden="true"></span>\r\n                            </button>\r\n                        </div>\r\n                        <div class="modal-body">\r\n                            <div class="score-youtube-video embed-responsive-16by9" data-ux-module="score_bootstrap/Components/YoutubeVideo" data-ux-state="loaded">\r\n                                <iframe id="yt-<%- video.Id %>" data-video-id="<%- video.VideoId %>" class="embed-responsive-item" type="text/html" title="YouTube Video" src="<%= video.VideoEmbedUrl %>?enablejsapi=1&amp;version=3"></iframe>\r\n                            </div>\r\n                        </div>\r\n                        <div class="modal-footer score-call-to-action">\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!Resideo/Components/Support/Templates/VideoRow.html',[],function () { return '<div id="<%- rowId %>" class="score-column4 equal">\r\n    <div class="score-left"></div>\r\n    <div class="score-center"></div>\r\n    <div class="score-center2"></div>\r\n    <div class="score-right"></div>\r\n</div>';});

define('Resideo/Components/Support/SupportVideos',['jquery', 'helpersService', 'underscore', 'text!Resideo/Components/Support/Templates/VideoHighlight.html', 'text!Resideo/Components/Support/Templates/VideoRow.html', 'Resideo/Components/VideoModal/VideoModal'],
    function ($, helpersService, _, videoHighlightTemplate, videoRowTemplate, videoModal) {
        function SupportVideos(scope, videos) {
            if (!videos || videos.length === 0) {
                return;
            }

            var $resultContainer = $('.rde-support-videos', scope).find('.top-4');
            var videoHighlightTemplateCompiled = _.template(videoHighlightTemplate);
            var videoRowTemplateCompiled = _.template(videoRowTemplate);
            var horizontalPosition = 0; // Position of video highlight: score-left, score-center, score-center2, score-right
            var rowId;
            var count = videos.length;

            if (count > 4) {
                for (let i = 0; i < 4; i++) {
                    renderVideo(videos[i]);
                }
                $resultContainer = $('.rde-support-videos', scope).find('.all-videos');
                for (let i = 4; i < count; i++) {
                    renderVideo(videos[i]);
                }
            } else {
                _.each(videos, function (videoItem) {
                    renderVideo(videoItem);
                });
            }

            //Init video modal functionality
            videoModal.init();

            function renderVideo(videoItem) {
                if (horizontalPosition % 4 === 0) {
                    horizontalPosition = 0;
                    rowId = helpersService.newGUID();
                    $resultContainer.append(videoRowTemplateCompiled({ rowId: rowId }));
                }

                var rowSelector = '#' + rowId;
                var containerSelector;
                switch (horizontalPosition) {
                case 1:
                    containerSelector = '.score-center';
                    break;
                case 2:
                    containerSelector = '.score-center2';
                    break;
                case 3:
                    containerSelector = '.score-right';
                    break;
                default:
                    containerSelector = '.score-left';
                }

                $(rowSelector).find(containerSelector).append(videoHighlightTemplateCompiled({ video: videoItem }));
                horizontalPosition += 1;
            }

            function viewMoreClick(button) {
	            $(button).hide();
	            $('div.all-videos').show();
	            $('.score-button.rde-view-less').show();
            }

            function viewLessClick(button) {
	            $(button).hide();
	            $('div.all-videos').hide();
	            $('.score-button.rde-view-more').show();
            }

            $('.score-button.rde-view-more').click(function() {
	            viewMoreClick(this);
            });

            $('.score-button.rde-view-more').keypress(function (e) {
                if (e.key === "Enter") {
	                viewMoreClick(this);
                }
            });

            $('.score-button.rde-view-less').click(function () {
	            viewLessClick(this);
            });

            $('.score-button.rde-view-less').keypress(function (e) {
                if (e.key === "Enter") {
	                viewLessClick(this);
                }
            });
        }

        return function init(args) {
            return args.IsEditing ? null : new SupportVideos(args.scope, args.videos);
        }
    });
define('Resideo/Components/Webinars/WebinarFilter',['jquery', 'accessibilityService'], function ($, accessibilityService) {
    var selectedDisciplineOption = $('#selected-discipline-option');
    var $disciplineSelectorAnchor = $('a.discipline-selector-anchor');
    var selectedTypeOption = $('#selected-type-option');
    var $typeSelectorAnchor = $('a.type-selector-anchor');
    var selectedTopicOption = $('#selected-topic-option');
    var $topicSelectorAnchor = $('a.topic-selector-anchor');
    var selectedRegionOption = $('#selected-region-option');
    var $regionSelectorAnchor = $('a.region-selector-anchor');


    function WebinarFilter(scope) {
        if (document.querySelector("#filter-button", scope)) {
            $("#filter-button", scope).click(function () {
                var root = Coveo.$$(document).find('#coveob292901e');
                Coveo.SearchEndpoint.configureCloudV2Endpoint();
                Coveo.executeQuery(root);
                return false;
            });
        }
    }
    $disciplineSelectorAnchor.on('click', function (e) {
        selectedDisciplineOption.text(e.target.text);
        selectedDisciplineOption.attr("data-value", e.target.dataset.value);
        accessibilityService.modifyDDLAriaLabel("discipline-dropdown-menu", e.target.text);
    });
    $typeSelectorAnchor.on('click', function (e) {
        selectedTypeOption.text(e.target.text);
        selectedTypeOption.attr("data-value", e.target.dataset.value);
        accessibilityService.modifyDDLAriaLabel("type-dropdown-menu", e.target.text);
    });
    $topicSelectorAnchor.on('click', function (e) {
        selectedTopicOption.text(e.target.text);
        selectedTopicOption.attr("data-value", e.target.dataset.value);
        accessibilityService.modifyDDLAriaLabel("topic-dropdown-menu", e.target.text);
    });

    $regionSelectorAnchor.on('click', function (e) {
        selectedRegionOption.text(e.target.text);
        selectedRegionOption.attr("data-value", e.target.dataset.value);
        accessibilityService.modifyDDLAriaLabel("region-dropdown-menu", e.target.text);
    });
    $(document).ready(function () {
        var dateNow = new Date();
        var month = TwoDigitUTC(dateNow.getUTCMonth() + 1);
        var dateTodayUTC = dateNow.getUTCFullYear() + "" + month + "" + TwoDigitUTC(dateNow.getUTCDate()) + "" + "0000";
        Coveo.SearchEndpoint.configureCloudV2Endpoint();
        var root = Coveo.$$(document).find('#coveob292901e');
        var expression = '((@type=="Upcoming" @webinarstartdatetime >="' + dateTodayUTC + '") OR (@type<>"Upcoming"))';
        Coveo.$$(root).on('buildingQuery', function (e, args) {
            var filterexpression = '';
            if (selectedTypeOption.attr("data-value").toLowerCase() != "all") {
                if (selectedTypeOption.attr("data-value").toLowerCase() == "upcoming") {
                    filterexpression = '@type=="Upcoming" @webinarstartdatetime >="' + dateTodayUTC + '"' + ' ';
                }
                else {
                    filterexpression += '@type=="' + selectedTypeOption.attr("data-value") + '" ';
                }
            }
            if (selectedDisciplineOption.attr("data-value").toLowerCase() != "all") {
                filterexpression += '@discipline=="' + selectedDisciplineOption.attr("data-value") + '" ';
            }
            if (selectedTopicOption.attr("data-value").toLowerCase() != "all") {
                filterexpression += '@topic=="' + selectedTopicOption.attr("data-value") + '" ';
            }
            if (selectedRegionOption.attr("data-value").toLowerCase() != "all") {
                filterexpression += '@region=="' + selectedRegionOption.attr("data-value") + '" ';
            }

            if (filterexpression != '') {
                args.queryBuilder.advancedExpression.add(filterexpression);
            }
            if ($("html").attr("lang") == "en-US") {
                if (selectedTypeOption.attr("data-value").toLowerCase() == "all") {
                    args.queryBuilder.advancedExpression.add(expression);
                }
            }
            if ($("html").attr("lang") == "en-GB" || $("html").attr("lang") == "en-150" || $("html").attr("lang") == "en-US") {
                args.queryBuilder.sortCriteria = "@webinarstartdatetime ascending";

                if (selectedTypeOption.attr("data-value").toLowerCase() == "upcoming" || selectedTypeOption.attr("data-value").toLowerCase() == "all") {
                    args.queryBuilder.sortCriteria = "@type descending,@webinarstartdatetime ascending";
                }
                else {
                    args.queryBuilder.sortCriteria = "@type descending,@webinarstartdatetime descending";
                }


            }
            else {
                args.queryBuilder.sortCriteria = "@webinarstartdatetime ascending, @type ascending";
            }
        });
        Coveo.$$(root).on("deferredQuerySuccess", function (e, args) {
            if (e.detail.results.totalCount == 0) {
                $('.CoveoQuerySummary').show();
            }
            else {
                $('.CoveoQuerySummary').hide();
            }
        });
        Coveo.init(root);
        Coveo.executeQuery(root);

    });
    function TwoDigitUTC(d) {
        return (d < 10 ? '0' : '') + d;
    }
    return function init(args) {
        return args.IsExperienceEditorEditing ? null : new WebinarFilter(args.scope);
    }
});

//# sourceMappingURL=Resideo.bundle.js.map
